(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xk={exports:{}},lv={},bk={exports:{}},sr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp=Symbol.for("react.element"),s$=Symbol.for("react.portal"),l$=Symbol.for("react.fragment"),u$=Symbol.for("react.strict_mode"),c$=Symbol.for("react.profiler"),h$=Symbol.for("react.provider"),f$=Symbol.for("react.context"),d$=Symbol.for("react.forward_ref"),p$=Symbol.for("react.suspense"),m$=Symbol.for("react.memo"),g$=Symbol.for("react.lazy"),xT=Symbol.iterator;function y$(e){return e===null||typeof e!="object"?null:(e=xT&&e[xT]||e["@@iterator"],typeof e=="function"?e:null)}var wk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sk=Object.assign,Tk={};function wh(e,t,r){this.props=e,this.context=t,this.refs=Tk,this.updater=r||wk}wh.prototype.isReactComponent={};wh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Pk(){}Pk.prototype=wh.prototype;function Rw(e,t,r){this.props=e,this.context=t,this.refs=Tk,this.updater=r||wk}var Nw=Rw.prototype=new Pk;Nw.constructor=Rw;Sk(Nw,wh.prototype);Nw.isPureReactComponent=!0;var bT=Array.isArray,Ak=Object.prototype.hasOwnProperty,Bw={current:null},Ek={key:!0,ref:!0,__self:!0,__source:!0};function Ck(e,t,r){var n,s={},c=null,d=null;if(t!=null)for(n in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(c=""+t.key),t)Ak.call(t,n)&&!Ek.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var v=Array(l),b=0;b<l;b++)v[b]=arguments[b+2];s.children=v}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Mp,type:e,key:c,ref:d,props:s,_owner:Bw.current}}function v$(e,t){return{$$typeof:Mp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fw(e){return typeof e=="object"&&e!==null&&e.$$typeof===Mp}function _$(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var wT=/\/+/g;function xx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_$(""+e.key):t.toString(36)}function Cg(e,t,r,n,s){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case Mp:case s$:d=!0}}if(d)return d=e,s=s(d),e=n===""?"."+xx(d,0):n,bT(s)?(r="",e!=null&&(r=e.replace(wT,"$&/")+"/"),Cg(s,t,r,"",function(b){return b})):s!=null&&(Fw(s)&&(s=v$(s,r+(!s.key||d&&d.key===s.key?"":(""+s.key).replace(wT,"$&/")+"/")+e)),t.push(s)),1;if(d=0,n=n===""?".":n+":",bT(e))for(var l=0;l<e.length;l++){c=e[l];var v=n+xx(c,l);d+=Cg(c,t,r,v,s)}else if(v=y$(e),typeof v=="function")for(e=v.call(e),l=0;!(c=e.next()).done;)c=c.value,v=n+xx(c,l++),d+=Cg(c,t,r,v,s);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function Ym(e,t,r){if(e==null)return e;var n=[],s=0;return Cg(e,n,"","",function(c){return t.call(r,c,s++)}),n}function x$(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ri={current:null},kg={transition:null},b$={ReactCurrentDispatcher:Ri,ReactCurrentBatchConfig:kg,ReactCurrentOwner:Bw};function kk(){throw Error("act(...) is not supported in production builds of React.")}sr.Children={map:Ym,forEach:function(e,t,r){Ym(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ym(e,function(){t++}),t},toArray:function(e){return Ym(e,function(t){return t})||[]},only:function(e){if(!Fw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};sr.Component=wh;sr.Fragment=l$;sr.Profiler=c$;sr.PureComponent=Rw;sr.StrictMode=u$;sr.Suspense=p$;sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b$;sr.act=kk;sr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Sk({},e.props),s=e.key,c=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,d=Bw.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(v in t)Ak.call(t,v)&&!Ek.hasOwnProperty(v)&&(n[v]=t[v]===void 0&&l!==void 0?l[v]:t[v])}var v=arguments.length-2;if(v===1)n.children=r;else if(1<v){l=Array(v);for(var b=0;b<v;b++)l[b]=arguments[b+2];n.children=l}return{$$typeof:Mp,type:e.type,key:s,ref:c,props:n,_owner:d}};sr.createContext=function(e){return e={$$typeof:f$,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:h$,_context:e},e.Consumer=e};sr.createElement=Ck;sr.createFactory=function(e){var t=Ck.bind(null,e);return t.type=e,t};sr.createRef=function(){return{current:null}};sr.forwardRef=function(e){return{$$typeof:d$,render:e}};sr.isValidElement=Fw;sr.lazy=function(e){return{$$typeof:g$,_payload:{_status:-1,_result:e},_init:x$}};sr.memo=function(e,t){return{$$typeof:m$,type:e,compare:t===void 0?null:t}};sr.startTransition=function(e){var t=kg.transition;kg.transition={};try{e()}finally{kg.transition=t}};sr.unstable_act=kk;sr.useCallback=function(e,t){return Ri.current.useCallback(e,t)};sr.useContext=function(e){return Ri.current.useContext(e)};sr.useDebugValue=function(){};sr.useDeferredValue=function(e){return Ri.current.useDeferredValue(e)};sr.useEffect=function(e,t){return Ri.current.useEffect(e,t)};sr.useId=function(){return Ri.current.useId()};sr.useImperativeHandle=function(e,t,r){return Ri.current.useImperativeHandle(e,t,r)};sr.useInsertionEffect=function(e,t){return Ri.current.useInsertionEffect(e,t)};sr.useLayoutEffect=function(e,t){return Ri.current.useLayoutEffect(e,t)};sr.useMemo=function(e,t){return Ri.current.useMemo(e,t)};sr.useReducer=function(e,t,r){return Ri.current.useReducer(e,t,r)};sr.useRef=function(e){return Ri.current.useRef(e)};sr.useState=function(e){return Ri.current.useState(e)};sr.useSyncExternalStore=function(e,t,r){return Ri.current.useSyncExternalStore(e,t,r)};sr.useTransition=function(){return Ri.current.useTransition()};sr.version="18.3.1";bk.exports=sr;var $e=bk.exports;const Me=Mr($e);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w$=$e,S$=Symbol.for("react.element"),T$=Symbol.for("react.fragment"),P$=Object.prototype.hasOwnProperty,A$=w$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E$={key:!0,ref:!0,__self:!0,__source:!0};function Ik(e,t,r){var n,s={},c=null,d=null;r!==void 0&&(c=""+r),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(d=t.ref);for(n in t)P$.call(t,n)&&!E$.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:S$,type:e,key:c,ref:d,props:s,_owner:A$.current}}lv.Fragment=T$;lv.jsx=Ik;lv.jsxs=Ik;xk.exports=lv;var J=xk.exports,w0={},Mk={exports:{}},fa={},Ok={exports:{}},zk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ce,_e){var ke=ce.length;ce.push(_e);e:for(;0<ke;){var Ue=ke-1>>>1,je=ce[Ue];if(0<s(je,_e))ce[Ue]=_e,ce[ke]=je,ke=Ue;else break e}}function r(ce){return ce.length===0?null:ce[0]}function n(ce){if(ce.length===0)return null;var _e=ce[0],ke=ce.pop();if(ke!==_e){ce[0]=ke;e:for(var Ue=0,je=ce.length,Qe=je>>>1;Ue<Qe;){var pt=2*(Ue+1)-1,Dt=ce[pt],Rt=pt+1,Bt=ce[Rt];if(0>s(Dt,ke))Rt<je&&0>s(Bt,Dt)?(ce[Ue]=Bt,ce[Rt]=ke,Ue=Rt):(ce[Ue]=Dt,ce[pt]=ke,Ue=pt);else if(Rt<je&&0>s(Bt,ke))ce[Ue]=Bt,ce[Rt]=ke,Ue=Rt;else break e}}return _e}function s(ce,_e){var ke=ce.sortIndex-_e.sortIndex;return ke!==0?ke:ce.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,l=d.now();e.unstable_now=function(){return d.now()-l}}var v=[],b=[],S=1,P=null,k=3,z=!1,B=!1,j=!1,V=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(ce){for(var _e=r(b);_e!==null;){if(_e.callback===null)n(b);else if(_e.startTime<=ce)n(b),_e.sortIndex=_e.expirationTime,t(v,_e);else break;_e=r(b)}}function X(ce){if(j=!1,F(ce),!B)if(r(v)!==null)B=!0,qe(q);else{var _e=r(b);_e!==null&&Ke(X,_e.startTime-ce)}}function q(ce,_e){B=!1,j&&(j=!1,D(le),le=-1),z=!0;var ke=k;try{for(F(_e),P=r(v);P!==null&&(!(P.expirationTime>_e)||ce&&!Ce());){var Ue=P.callback;if(typeof Ue=="function"){P.callback=null,k=P.priorityLevel;var je=Ue(P.expirationTime<=_e);_e=e.unstable_now(),typeof je=="function"?P.callback=je:P===r(v)&&n(v),F(_e)}else n(v);P=r(v)}if(P!==null)var Qe=!0;else{var pt=r(b);pt!==null&&Ke(X,pt.startTime-_e),Qe=!1}return Qe}finally{P=null,k=ke,z=!1}}var W=!1,ee=null,le=-1,ve=5,Pe=-1;function Ce(){return!(e.unstable_now()-Pe<ve)}function Te(){if(ee!==null){var ce=e.unstable_now();Pe=ce;var _e=!0;try{_e=ee(!0,ce)}finally{_e?Fe():(W=!1,ee=null)}}else W=!1}var Fe;if(typeof R=="function")Fe=function(){R(Te)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Be=Re.port2;Re.port1.onmessage=Te,Fe=function(){Be.postMessage(null)}}else Fe=function(){V(Te,0)};function qe(ce){ee=ce,W||(W=!0,Fe())}function Ke(ce,_e){le=V(function(){ce(e.unstable_now())},_e)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ce){ce.callback=null},e.unstable_continueExecution=function(){B||z||(B=!0,qe(q))},e.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<ce?Math.floor(1e3/ce):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return r(v)},e.unstable_next=function(ce){switch(k){case 1:case 2:case 3:var _e=3;break;default:_e=k}var ke=k;k=_e;try{return ce()}finally{k=ke}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ce,_e){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var ke=k;k=ce;try{return _e()}finally{k=ke}},e.unstable_scheduleCallback=function(ce,_e,ke){var Ue=e.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?Ue+ke:Ue):ke=Ue,ce){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=ke+je,ce={id:S++,callback:_e,priorityLevel:ce,startTime:ke,expirationTime:je,sortIndex:-1},ke>Ue?(ce.sortIndex=ke,t(b,ce),r(v)===null&&ce===r(b)&&(j?(D(le),le=-1):j=!0,Ke(X,ke-Ue))):(ce.sortIndex=je,t(v,ce),B||z||(B=!0,qe(q))),ce},e.unstable_shouldYield=Ce,e.unstable_wrapCallback=function(ce){var _e=k;return function(){var ke=k;k=_e;try{return ce.apply(this,arguments)}finally{k=ke}}}})(zk);Ok.exports=zk;var C$=Ok.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k$=$e,ha=C$;function ot(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dk=new Set,zd={};function Su(e,t){Hc(e,t),Hc(e+"Capture",t)}function Hc(e,t){for(zd[e]=t,e=0;e<t.length;e++)Dk.add(t[e])}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S0=Object.prototype.hasOwnProperty,I$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ST={},TT={};function M$(e){return S0.call(TT,e)?!0:S0.call(ST,e)?!1:I$.test(e)?TT[e]=!0:(ST[e]=!0,!1)}function O$(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function z$(e,t,r,n){if(t===null||typeof t>"u"||O$(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ni(e,t,r,n,s,c,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=d}var si={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){si[e]=new Ni(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];si[t]=new Ni(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){si[e]=new Ni(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){si[e]=new Ni(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){si[e]=new Ni(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){si[e]=new Ni(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){si[e]=new Ni(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){si[e]=new Ni(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){si[e]=new Ni(e,5,!1,e.toLowerCase(),null,!1,!1)});var Uw=/[\-:]([a-z])/g;function Vw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Uw,Vw);si[t]=new Ni(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Uw,Vw);si[t]=new Ni(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Uw,Vw);si[t]=new Ni(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){si[e]=new Ni(e,1,!1,e.toLowerCase(),null,!1,!1)});si.xlinkHref=new Ni("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){si[e]=new Ni(e,1,!1,e.toLowerCase(),null,!0,!0)});function qw(e,t,r,n){var s=si.hasOwnProperty(t)?si[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(z$(t,r,s,n)&&(r=null),n||s===null?M$(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var _s=k$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jm=Symbol.for("react.element"),wc=Symbol.for("react.portal"),Sc=Symbol.for("react.fragment"),Gw=Symbol.for("react.strict_mode"),T0=Symbol.for("react.profiler"),Lk=Symbol.for("react.provider"),jk=Symbol.for("react.context"),Ww=Symbol.for("react.forward_ref"),P0=Symbol.for("react.suspense"),A0=Symbol.for("react.suspense_list"),Zw=Symbol.for("react.memo"),Js=Symbol.for("react.lazy"),$k=Symbol.for("react.offscreen"),PT=Symbol.iterator;function Wf(e){return e===null||typeof e!="object"?null:(e=PT&&e[PT]||e["@@iterator"],typeof e=="function"?e:null)}var ln=Object.assign,bx;function pd(e){if(bx===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);bx=t&&t[1]||""}return`
`+bx+e}var wx=!1;function Sx(e,t){if(!e||wx)return"";wx=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(b){var n=b}Reflect.construct(e,[],t)}else{try{t.call()}catch(b){n=b}e.call(t.prototype)}else{try{throw Error()}catch(b){n=b}e()}}catch(b){if(b&&n&&typeof b.stack=="string"){for(var s=b.stack.split(`
`),c=n.stack.split(`
`),d=s.length-1,l=c.length-1;1<=d&&0<=l&&s[d]!==c[l];)l--;for(;1<=d&&0<=l;d--,l--)if(s[d]!==c[l]){if(d!==1||l!==1)do if(d--,l--,0>l||s[d]!==c[l]){var v=`
`+s[d].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=d&&0<=l);break}}}finally{wx=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?pd(e):""}function D$(e){switch(e.tag){case 5:return pd(e.type);case 16:return pd("Lazy");case 13:return pd("Suspense");case 19:return pd("SuspenseList");case 0:case 2:case 15:return e=Sx(e.type,!1),e;case 11:return e=Sx(e.type.render,!1),e;case 1:return e=Sx(e.type,!0),e;default:return""}}function E0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Sc:return"Fragment";case wc:return"Portal";case T0:return"Profiler";case Gw:return"StrictMode";case P0:return"Suspense";case A0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case jk:return(e.displayName||"Context")+".Consumer";case Lk:return(e._context.displayName||"Context")+".Provider";case Ww:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zw:return t=e.displayName||null,t!==null?t:E0(e.type)||"Memo";case Js:t=e._payload,e=e._init;try{return E0(e(t))}catch{}}return null}function L$(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E0(t);case 8:return t===Gw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Rk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function j$(e){var t=Rk(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,c=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(d){n=""+d,c.call(this,d)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(d){n=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qm(e){e._valueTracker||(e._valueTracker=j$(e))}function Nk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Rk(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Bg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function C0(e,t){var r=t.checked;return ln({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function AT(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=gl(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Bk(e,t){t=t.checked,t!=null&&qw(e,"checked",t,!1)}function k0(e,t){Bk(e,t);var r=gl(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?I0(e,t.type,r):t.hasOwnProperty("defaultValue")&&I0(e,t.type,gl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ET(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function I0(e,t,r){(t!=="number"||Bg(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var md=Array.isArray;function $c(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+gl(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function M0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ot(91));return ln({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function CT(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ot(92));if(md(r)){if(1<r.length)throw Error(ot(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:gl(r)}}function Fk(e,t){var r=gl(t.value),n=gl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function kT(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Uk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function O0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Uk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var eg,Vk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(eg=eg||document.createElement("div"),eg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=eg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Dd(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var xd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$$=["Webkit","ms","Moz","O"];Object.keys(xd).forEach(function(e){$$.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xd[t]=xd[e]})});function qk(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||xd.hasOwnProperty(e)&&xd[e]?(""+t).trim():t+"px"}function Gk(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=qk(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var R$=ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function z0(e,t){if(t){if(R$[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ot(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ot(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ot(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ot(62))}}function D0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var L0=null;function Hw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var j0=null,Rc=null,Nc=null;function IT(e){if(e=Dp(e)){if(typeof j0!="function")throw Error(ot(280));var t=e.stateNode;t&&(t=dv(t),j0(e.stateNode,e.type,t))}}function Wk(e){Rc?Nc?Nc.push(e):Nc=[e]:Rc=e}function Zk(){if(Rc){var e=Rc,t=Nc;if(Nc=Rc=null,IT(e),t)for(e=0;e<t.length;e++)IT(t[e])}}function Hk(e,t){return e(t)}function Kk(){}var Tx=!1;function Xk(e,t,r){if(Tx)return e(t,r);Tx=!0;try{return Hk(e,t,r)}finally{Tx=!1,(Rc!==null||Nc!==null)&&(Kk(),Zk())}}function Ld(e,t){var r=e.stateNode;if(r===null)return null;var n=dv(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ot(231,t,typeof r));return r}var $0=!1;if(fs)try{var Zf={};Object.defineProperty(Zf,"passive",{get:function(){$0=!0}}),window.addEventListener("test",Zf,Zf),window.removeEventListener("test",Zf,Zf)}catch{$0=!1}function N$(e,t,r,n,s,c,d,l,v){var b=Array.prototype.slice.call(arguments,3);try{t.apply(r,b)}catch(S){this.onError(S)}}var bd=!1,Fg=null,Ug=!1,R0=null,B$={onError:function(e){bd=!0,Fg=e}};function F$(e,t,r,n,s,c,d,l,v){bd=!1,Fg=null,N$.apply(B$,arguments)}function U$(e,t,r,n,s,c,d,l,v){if(F$.apply(this,arguments),bd){if(bd){var b=Fg;bd=!1,Fg=null}else throw Error(ot(198));Ug||(Ug=!0,R0=b)}}function Tu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Yk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function MT(e){if(Tu(e)!==e)throw Error(ot(188))}function V$(e){var t=e.alternate;if(!t){if(t=Tu(e),t===null)throw Error(ot(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var c=s.alternate;if(c===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===c.child){for(c=s.child;c;){if(c===r)return MT(s),e;if(c===n)return MT(s),t;c=c.sibling}throw Error(ot(188))}if(r.return!==n.return)r=s,n=c;else{for(var d=!1,l=s.child;l;){if(l===r){d=!0,r=s,n=c;break}if(l===n){d=!0,n=s,r=c;break}l=l.sibling}if(!d){for(l=c.child;l;){if(l===r){d=!0,r=c,n=s;break}if(l===n){d=!0,n=c,r=s;break}l=l.sibling}if(!d)throw Error(ot(189))}}if(r.alternate!==n)throw Error(ot(190))}if(r.tag!==3)throw Error(ot(188));return r.stateNode.current===r?e:t}function Jk(e){return e=V$(e),e!==null?Qk(e):null}function Qk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Qk(e);if(t!==null)return t;e=e.sibling}return null}var eI=ha.unstable_scheduleCallback,OT=ha.unstable_cancelCallback,q$=ha.unstable_shouldYield,G$=ha.unstable_requestPaint,Tn=ha.unstable_now,W$=ha.unstable_getCurrentPriorityLevel,Kw=ha.unstable_ImmediatePriority,tI=ha.unstable_UserBlockingPriority,Vg=ha.unstable_NormalPriority,Z$=ha.unstable_LowPriority,rI=ha.unstable_IdlePriority,uv=null,Eo=null;function H$(e){if(Eo&&typeof Eo.onCommitFiberRoot=="function")try{Eo.onCommitFiberRoot(uv,e,void 0,(e.current.flags&128)===128)}catch{}}var io=Math.clz32?Math.clz32:Y$,K$=Math.log,X$=Math.LN2;function Y$(e){return e>>>=0,e===0?32:31-(K$(e)/X$|0)|0}var tg=64,rg=4194304;function gd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qg(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,c=e.pingedLanes,d=r&268435455;if(d!==0){var l=d&~s;l!==0?n=gd(l):(c&=d,c!==0&&(n=gd(c)))}else d=r&~s,d!==0?n=gd(d):c!==0&&(n=gd(c));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,c=t&-t,s>=c||s===16&&(c&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-io(t),s=1<<r,n|=e[r],t&=~s;return n}function J$(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q$(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,c=e.pendingLanes;0<c;){var d=31-io(c),l=1<<d,v=s[d];v===-1?(!(l&r)||l&n)&&(s[d]=J$(l,t)):v<=t&&(e.expiredLanes|=l),c&=~l}}function N0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function nI(){var e=tg;return tg<<=1,!(tg&4194240)&&(tg=64),e}function Px(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Op(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-io(t),e[t]=r}function e3(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-io(r),c=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~c}}function Xw(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-io(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Pr=0;function iI(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var aI,Yw,oI,sI,lI,B0=!1,ng=[],sl=null,ll=null,ul=null,jd=new Map,$d=new Map,tl=[],t3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zT(e,t){switch(e){case"focusin":case"focusout":sl=null;break;case"dragenter":case"dragleave":ll=null;break;case"mouseover":case"mouseout":ul=null;break;case"pointerover":case"pointerout":jd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$d.delete(t.pointerId)}}function Hf(e,t,r,n,s,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:c,targetContainers:[s]},t!==null&&(t=Dp(t),t!==null&&Yw(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function r3(e,t,r,n,s){switch(t){case"focusin":return sl=Hf(sl,e,t,r,n,s),!0;case"dragenter":return ll=Hf(ll,e,t,r,n,s),!0;case"mouseover":return ul=Hf(ul,e,t,r,n,s),!0;case"pointerover":var c=s.pointerId;return jd.set(c,Hf(jd.get(c)||null,e,t,r,n,s)),!0;case"gotpointercapture":return c=s.pointerId,$d.set(c,Hf($d.get(c)||null,e,t,r,n,s)),!0}return!1}function uI(e){var t=eu(e.target);if(t!==null){var r=Tu(t);if(r!==null){if(t=r.tag,t===13){if(t=Yk(r),t!==null){e.blockedOn=t,lI(e.priority,function(){oI(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ig(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=F0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);L0=n,r.target.dispatchEvent(n),L0=null}else return t=Dp(r),t!==null&&Yw(t),e.blockedOn=r,!1;t.shift()}return!0}function DT(e,t,r){Ig(e)&&r.delete(t)}function n3(){B0=!1,sl!==null&&Ig(sl)&&(sl=null),ll!==null&&Ig(ll)&&(ll=null),ul!==null&&Ig(ul)&&(ul=null),jd.forEach(DT),$d.forEach(DT)}function Kf(e,t){e.blockedOn===t&&(e.blockedOn=null,B0||(B0=!0,ha.unstable_scheduleCallback(ha.unstable_NormalPriority,n3)))}function Rd(e){function t(s){return Kf(s,e)}if(0<ng.length){Kf(ng[0],e);for(var r=1;r<ng.length;r++){var n=ng[r];n.blockedOn===e&&(n.blockedOn=null)}}for(sl!==null&&Kf(sl,e),ll!==null&&Kf(ll,e),ul!==null&&Kf(ul,e),jd.forEach(t),$d.forEach(t),r=0;r<tl.length;r++)n=tl[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<tl.length&&(r=tl[0],r.blockedOn===null);)uI(r),r.blockedOn===null&&tl.shift()}var Bc=_s.ReactCurrentBatchConfig,Gg=!0;function i3(e,t,r,n){var s=Pr,c=Bc.transition;Bc.transition=null;try{Pr=1,Jw(e,t,r,n)}finally{Pr=s,Bc.transition=c}}function a3(e,t,r,n){var s=Pr,c=Bc.transition;Bc.transition=null;try{Pr=4,Jw(e,t,r,n)}finally{Pr=s,Bc.transition=c}}function Jw(e,t,r,n){if(Gg){var s=F0(e,t,r,n);if(s===null)Lx(e,t,n,Wg,r),zT(e,n);else if(r3(s,e,t,r,n))n.stopPropagation();else if(zT(e,n),t&4&&-1<t3.indexOf(e)){for(;s!==null;){var c=Dp(s);if(c!==null&&aI(c),c=F0(e,t,r,n),c===null&&Lx(e,t,n,Wg,r),c===s)break;s=c}s!==null&&n.stopPropagation()}else Lx(e,t,n,null,r)}}var Wg=null;function F0(e,t,r,n){if(Wg=null,e=Hw(n),e=eu(e),e!==null)if(t=Tu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Yk(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wg=e,null}function cI(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W$()){case Kw:return 1;case tI:return 4;case Vg:case Z$:return 16;case rI:return 536870912;default:return 16}default:return 16}}var il=null,Qw=null,Mg=null;function hI(){if(Mg)return Mg;var e,t=Qw,r=t.length,n,s="value"in il?il.value:il.textContent,c=s.length;for(e=0;e<r&&t[e]===s[e];e++);var d=r-e;for(n=1;n<=d&&t[r-n]===s[c-n];n++);return Mg=s.slice(e,1<n?1-n:void 0)}function Og(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ig(){return!0}function LT(){return!1}function da(e){function t(r,n,s,c,d){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(c):c[l]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?ig:LT,this.isPropagationStopped=LT,this}return ln(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ig)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ig)},persist:function(){},isPersistent:ig}),t}var Sh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},e1=da(Sh),zp=ln({},Sh,{view:0,detail:0}),o3=da(zp),Ax,Ex,Xf,cv=ln({},zp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xf&&(Xf&&e.type==="mousemove"?(Ax=e.screenX-Xf.screenX,Ex=e.screenY-Xf.screenY):Ex=Ax=0,Xf=e),Ax)},movementY:function(e){return"movementY"in e?e.movementY:Ex}}),jT=da(cv),s3=ln({},cv,{dataTransfer:0}),l3=da(s3),u3=ln({},zp,{relatedTarget:0}),Cx=da(u3),c3=ln({},Sh,{animationName:0,elapsedTime:0,pseudoElement:0}),h3=da(c3),f3=ln({},Sh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),d3=da(f3),p3=ln({},Sh,{data:0}),$T=da(p3),m3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=y3[e])?!!t[e]:!1}function t1(){return v3}var _3=ln({},zp,{key:function(e){if(e.key){var t=m3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Og(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?g3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t1,charCode:function(e){return e.type==="keypress"?Og(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Og(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),x3=da(_3),b3=ln({},cv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RT=da(b3),w3=ln({},zp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t1}),S3=da(w3),T3=ln({},Sh,{propertyName:0,elapsedTime:0,pseudoElement:0}),P3=da(T3),A3=ln({},cv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),E3=da(A3),C3=[9,13,27,32],r1=fs&&"CompositionEvent"in window,wd=null;fs&&"documentMode"in document&&(wd=document.documentMode);var k3=fs&&"TextEvent"in window&&!wd,fI=fs&&(!r1||wd&&8<wd&&11>=wd),NT=" ",BT=!1;function dI(e,t){switch(e){case"keyup":return C3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pI(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tc=!1;function I3(e,t){switch(e){case"compositionend":return pI(t);case"keypress":return t.which!==32?null:(BT=!0,NT);case"textInput":return e=t.data,e===NT&&BT?null:e;default:return null}}function M3(e,t){if(Tc)return e==="compositionend"||!r1&&dI(e,t)?(e=hI(),Mg=Qw=il=null,Tc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fI&&t.locale!=="ko"?null:t.data;default:return null}}var O3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!O3[e.type]:t==="textarea"}function mI(e,t,r,n){Wk(n),t=Zg(t,"onChange"),0<t.length&&(r=new e1("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Sd=null,Nd=null;function z3(e){AI(e,0)}function hv(e){var t=Ec(e);if(Nk(t))return e}function D3(e,t){if(e==="change")return t}var gI=!1;if(fs){var kx;if(fs){var Ix="oninput"in document;if(!Ix){var UT=document.createElement("div");UT.setAttribute("oninput","return;"),Ix=typeof UT.oninput=="function"}kx=Ix}else kx=!1;gI=kx&&(!document.documentMode||9<document.documentMode)}function VT(){Sd&&(Sd.detachEvent("onpropertychange",yI),Nd=Sd=null)}function yI(e){if(e.propertyName==="value"&&hv(Nd)){var t=[];mI(t,Nd,e,Hw(e)),Xk(z3,t)}}function L3(e,t,r){e==="focusin"?(VT(),Sd=t,Nd=r,Sd.attachEvent("onpropertychange",yI)):e==="focusout"&&VT()}function j3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hv(Nd)}function $3(e,t){if(e==="click")return hv(t)}function R3(e,t){if(e==="input"||e==="change")return hv(t)}function N3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var so=typeof Object.is=="function"?Object.is:N3;function Bd(e,t){if(so(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!S0.call(t,s)||!so(e[s],t[s]))return!1}return!0}function qT(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function GT(e,t){var r=qT(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qT(r)}}function vI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _I(){for(var e=window,t=Bg();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Bg(e.document)}return t}function n1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function B3(e){var t=_I(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&vI(r.ownerDocument.documentElement,r)){if(n!==null&&n1(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,c=Math.min(n.start,s);n=n.end===void 0?c:Math.min(n.end,s),!e.extend&&c>n&&(s=n,n=c,c=s),s=GT(r,c);var d=GT(r,n);s&&d&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),c>n?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var F3=fs&&"documentMode"in document&&11>=document.documentMode,Pc=null,U0=null,Td=null,V0=!1;function WT(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;V0||Pc==null||Pc!==Bg(n)||(n=Pc,"selectionStart"in n&&n1(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Td&&Bd(Td,n)||(Td=n,n=Zg(U0,"onSelect"),0<n.length&&(t=new e1("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Pc)))}function ag(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ac={animationend:ag("Animation","AnimationEnd"),animationiteration:ag("Animation","AnimationIteration"),animationstart:ag("Animation","AnimationStart"),transitionend:ag("Transition","TransitionEnd")},Mx={},xI={};fs&&(xI=document.createElement("div").style,"AnimationEvent"in window||(delete Ac.animationend.animation,delete Ac.animationiteration.animation,delete Ac.animationstart.animation),"TransitionEvent"in window||delete Ac.transitionend.transition);function fv(e){if(Mx[e])return Mx[e];if(!Ac[e])return e;var t=Ac[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in xI)return Mx[e]=t[r];return e}var bI=fv("animationend"),wI=fv("animationiteration"),SI=fv("animationstart"),TI=fv("transitionend"),PI=new Map,ZT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _l(e,t){PI.set(e,t),Su(t,[e])}for(var Ox=0;Ox<ZT.length;Ox++){var zx=ZT[Ox],U3=zx.toLowerCase(),V3=zx[0].toUpperCase()+zx.slice(1);_l(U3,"on"+V3)}_l(bI,"onAnimationEnd");_l(wI,"onAnimationIteration");_l(SI,"onAnimationStart");_l("dblclick","onDoubleClick");_l("focusin","onFocus");_l("focusout","onBlur");_l(TI,"onTransitionEnd");Hc("onMouseEnter",["mouseout","mouseover"]);Hc("onMouseLeave",["mouseout","mouseover"]);Hc("onPointerEnter",["pointerout","pointerover"]);Hc("onPointerLeave",["pointerout","pointerover"]);Su("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Su("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Su("onBeforeInput",["compositionend","keypress","textInput","paste"]);Su("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Su("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Su("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q3=new Set("cancel close invalid load scroll toggle".split(" ").concat(yd));function HT(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,U$(n,t,void 0,e),e.currentTarget=null}function AI(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var c=void 0;if(t)for(var d=n.length-1;0<=d;d--){var l=n[d],v=l.instance,b=l.currentTarget;if(l=l.listener,v!==c&&s.isPropagationStopped())break e;HT(s,l,b),c=v}else for(d=0;d<n.length;d++){if(l=n[d],v=l.instance,b=l.currentTarget,l=l.listener,v!==c&&s.isPropagationStopped())break e;HT(s,l,b),c=v}}}if(Ug)throw e=R0,Ug=!1,R0=null,e}function Wr(e,t){var r=t[H0];r===void 0&&(r=t[H0]=new Set);var n=e+"__bubble";r.has(n)||(EI(t,e,2,!1),r.add(n))}function Dx(e,t,r){var n=0;t&&(n|=4),EI(r,e,n,t)}var og="_reactListening"+Math.random().toString(36).slice(2);function Fd(e){if(!e[og]){e[og]=!0,Dk.forEach(function(r){r!=="selectionchange"&&(q3.has(r)||Dx(r,!1,e),Dx(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[og]||(t[og]=!0,Dx("selectionchange",!1,t))}}function EI(e,t,r,n){switch(cI(t)){case 1:var s=i3;break;case 4:s=a3;break;default:s=Jw}r=s.bind(null,t,r,e),s=void 0,!$0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Lx(e,t,r,n,s){var c=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var d=n.tag;if(d===3||d===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(d===4)for(d=n.return;d!==null;){var v=d.tag;if((v===3||v===4)&&(v=d.stateNode.containerInfo,v===s||v.nodeType===8&&v.parentNode===s))return;d=d.return}for(;l!==null;){if(d=eu(l),d===null)return;if(v=d.tag,v===5||v===6){n=c=d;continue e}l=l.parentNode}}n=n.return}Xk(function(){var b=c,S=Hw(r),P=[];e:{var k=PI.get(e);if(k!==void 0){var z=e1,B=e;switch(e){case"keypress":if(Og(r)===0)break e;case"keydown":case"keyup":z=x3;break;case"focusin":B="focus",z=Cx;break;case"focusout":B="blur",z=Cx;break;case"beforeblur":case"afterblur":z=Cx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=jT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=l3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=S3;break;case bI:case wI:case SI:z=h3;break;case TI:z=P3;break;case"scroll":z=o3;break;case"wheel":z=E3;break;case"copy":case"cut":case"paste":z=d3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=RT}var j=(t&4)!==0,V=!j&&e==="scroll",D=j?k!==null?k+"Capture":null:k;j=[];for(var R=b,F;R!==null;){F=R;var X=F.stateNode;if(F.tag===5&&X!==null&&(F=X,D!==null&&(X=Ld(R,D),X!=null&&j.push(Ud(R,X,F)))),V)break;R=R.return}0<j.length&&(k=new z(k,B,null,r,S),P.push({event:k,listeners:j}))}}if(!(t&7)){e:{if(k=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",k&&r!==L0&&(B=r.relatedTarget||r.fromElement)&&(eu(B)||B[ds]))break e;if((z||k)&&(k=S.window===S?S:(k=S.ownerDocument)?k.defaultView||k.parentWindow:window,z?(B=r.relatedTarget||r.toElement,z=b,B=B?eu(B):null,B!==null&&(V=Tu(B),B!==V||B.tag!==5&&B.tag!==6)&&(B=null)):(z=null,B=b),z!==B)){if(j=jT,X="onMouseLeave",D="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(j=RT,X="onPointerLeave",D="onPointerEnter",R="pointer"),V=z==null?k:Ec(z),F=B==null?k:Ec(B),k=new j(X,R+"leave",z,r,S),k.target=V,k.relatedTarget=F,X=null,eu(S)===b&&(j=new j(D,R+"enter",B,r,S),j.target=F,j.relatedTarget=V,X=j),V=X,z&&B)t:{for(j=z,D=B,R=0,F=j;F;F=yc(F))R++;for(F=0,X=D;X;X=yc(X))F++;for(;0<R-F;)j=yc(j),R--;for(;0<F-R;)D=yc(D),F--;for(;R--;){if(j===D||D!==null&&j===D.alternate)break t;j=yc(j),D=yc(D)}j=null}else j=null;z!==null&&KT(P,k,z,j,!1),B!==null&&V!==null&&KT(P,V,B,j,!0)}}e:{if(k=b?Ec(b):window,z=k.nodeName&&k.nodeName.toLowerCase(),z==="select"||z==="input"&&k.type==="file")var q=D3;else if(FT(k))if(gI)q=R3;else{q=j3;var W=L3}else(z=k.nodeName)&&z.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(q=$3);if(q&&(q=q(e,b))){mI(P,q,r,S);break e}W&&W(e,k,b),e==="focusout"&&(W=k._wrapperState)&&W.controlled&&k.type==="number"&&I0(k,"number",k.value)}switch(W=b?Ec(b):window,e){case"focusin":(FT(W)||W.contentEditable==="true")&&(Pc=W,U0=b,Td=null);break;case"focusout":Td=U0=Pc=null;break;case"mousedown":V0=!0;break;case"contextmenu":case"mouseup":case"dragend":V0=!1,WT(P,r,S);break;case"selectionchange":if(F3)break;case"keydown":case"keyup":WT(P,r,S)}var ee;if(r1)e:{switch(e){case"compositionstart":var le="onCompositionStart";break e;case"compositionend":le="onCompositionEnd";break e;case"compositionupdate":le="onCompositionUpdate";break e}le=void 0}else Tc?dI(e,r)&&(le="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(le="onCompositionStart");le&&(fI&&r.locale!=="ko"&&(Tc||le!=="onCompositionStart"?le==="onCompositionEnd"&&Tc&&(ee=hI()):(il=S,Qw="value"in il?il.value:il.textContent,Tc=!0)),W=Zg(b,le),0<W.length&&(le=new $T(le,e,null,r,S),P.push({event:le,listeners:W}),ee?le.data=ee:(ee=pI(r),ee!==null&&(le.data=ee)))),(ee=k3?I3(e,r):M3(e,r))&&(b=Zg(b,"onBeforeInput"),0<b.length&&(S=new $T("onBeforeInput","beforeinput",null,r,S),P.push({event:S,listeners:b}),S.data=ee))}AI(P,t)})}function Ud(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Zg(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,c=s.stateNode;s.tag===5&&c!==null&&(s=c,c=Ld(e,r),c!=null&&n.unshift(Ud(e,c,s)),c=Ld(e,t),c!=null&&n.push(Ud(e,c,s))),e=e.return}return n}function yc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function KT(e,t,r,n,s){for(var c=t._reactName,d=[];r!==null&&r!==n;){var l=r,v=l.alternate,b=l.stateNode;if(v!==null&&v===n)break;l.tag===5&&b!==null&&(l=b,s?(v=Ld(r,c),v!=null&&d.unshift(Ud(r,v,l))):s||(v=Ld(r,c),v!=null&&d.push(Ud(r,v,l)))),r=r.return}d.length!==0&&e.push({event:t,listeners:d})}var G3=/\r\n?/g,W3=/\u0000|\uFFFD/g;function XT(e){return(typeof e=="string"?e:""+e).replace(G3,`
`).replace(W3,"")}function sg(e,t,r){if(t=XT(t),XT(e)!==t&&r)throw Error(ot(425))}function Hg(){}var q0=null,G0=null;function W0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Z0=typeof setTimeout=="function"?setTimeout:void 0,Z3=typeof clearTimeout=="function"?clearTimeout:void 0,YT=typeof Promise=="function"?Promise:void 0,H3=typeof queueMicrotask=="function"?queueMicrotask:typeof YT<"u"?function(e){return YT.resolve(null).then(e).catch(K3)}:Z0;function K3(e){setTimeout(function(){throw e})}function jx(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Rd(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Rd(t)}function cl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function JT(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Th=Math.random().toString(36).slice(2),To="__reactFiber$"+Th,Vd="__reactProps$"+Th,ds="__reactContainer$"+Th,H0="__reactEvents$"+Th,X3="__reactListeners$"+Th,Y3="__reactHandles$"+Th;function eu(e){var t=e[To];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ds]||r[To]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=JT(e);e!==null;){if(r=e[To])return r;e=JT(e)}return t}e=r,r=e.parentNode}return null}function Dp(e){return e=e[To]||e[ds],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ec(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ot(33))}function dv(e){return e[Vd]||null}var K0=[],Cc=-1;function xl(e){return{current:e}}function Kr(e){0>Cc||(e.current=K0[Cc],K0[Cc]=null,Cc--)}function Br(e,t){Cc++,K0[Cc]=e.current,e.current=t}var yl={},wi=xl(yl),Yi=xl(!1),du=yl;function Kc(e,t){var r=e.type.contextTypes;if(!r)return yl;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},c;for(c in r)s[c]=t[c];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ji(e){return e=e.childContextTypes,e!=null}function Kg(){Kr(Yi),Kr(wi)}function QT(e,t,r){if(wi.current!==yl)throw Error(ot(168));Br(wi,t),Br(Yi,r)}function CI(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(ot(108,L$(e)||"Unknown",s));return ln({},r,n)}function Xg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yl,du=wi.current,Br(wi,e),Br(Yi,Yi.current),!0}function eP(e,t,r){var n=e.stateNode;if(!n)throw Error(ot(169));r?(e=CI(e,t,du),n.__reactInternalMemoizedMergedChildContext=e,Kr(Yi),Kr(wi),Br(wi,e)):Kr(Yi),Br(Yi,r)}var rs=null,pv=!1,$x=!1;function kI(e){rs===null?rs=[e]:rs.push(e)}function J3(e){pv=!0,kI(e)}function bl(){if(!$x&&rs!==null){$x=!0;var e=0,t=Pr;try{var r=rs;for(Pr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}rs=null,pv=!1}catch(s){throw rs!==null&&(rs=rs.slice(e+1)),eI(Kw,bl),s}finally{Pr=t,$x=!1}}return null}var kc=[],Ic=0,Yg=null,Jg=0,Ea=[],Ca=0,pu=null,ns=1,is="";function Kl(e,t){kc[Ic++]=Jg,kc[Ic++]=Yg,Yg=e,Jg=t}function II(e,t,r){Ea[Ca++]=ns,Ea[Ca++]=is,Ea[Ca++]=pu,pu=e;var n=ns;e=is;var s=32-io(n)-1;n&=~(1<<s),r+=1;var c=32-io(t)+s;if(30<c){var d=s-s%5;c=(n&(1<<d)-1).toString(32),n>>=d,s-=d,ns=1<<32-io(t)+s|r<<s|n,is=c+e}else ns=1<<c|r<<s|n,is=e}function i1(e){e.return!==null&&(Kl(e,1),II(e,1,0))}function a1(e){for(;e===Yg;)Yg=kc[--Ic],kc[Ic]=null,Jg=kc[--Ic],kc[Ic]=null;for(;e===pu;)pu=Ea[--Ca],Ea[Ca]=null,is=Ea[--Ca],Ea[Ca]=null,ns=Ea[--Ca],Ea[Ca]=null}var ca=null,ua=null,en=!1,to=null;function MI(e,t){var r=ka(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function tP(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ca=e,ua=cl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ca=e,ua=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=pu!==null?{id:ns,overflow:is}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ka(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ca=e,ua=null,!0):!1;default:return!1}}function X0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Y0(e){if(en){var t=ua;if(t){var r=t;if(!tP(e,t)){if(X0(e))throw Error(ot(418));t=cl(r.nextSibling);var n=ca;t&&tP(e,t)?MI(n,r):(e.flags=e.flags&-4097|2,en=!1,ca=e)}}else{if(X0(e))throw Error(ot(418));e.flags=e.flags&-4097|2,en=!1,ca=e}}}function rP(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ca=e}function lg(e){if(e!==ca)return!1;if(!en)return rP(e),en=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!W0(e.type,e.memoizedProps)),t&&(t=ua)){if(X0(e))throw OI(),Error(ot(418));for(;t;)MI(e,t),t=cl(t.nextSibling)}if(rP(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ot(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ua=cl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ua=null}}else ua=ca?cl(e.stateNode.nextSibling):null;return!0}function OI(){for(var e=ua;e;)e=cl(e.nextSibling)}function Xc(){ua=ca=null,en=!1}function o1(e){to===null?to=[e]:to.push(e)}var Q3=_s.ReactCurrentBatchConfig;function Yf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ot(309));var n=r.stateNode}if(!n)throw Error(ot(147,e));var s=n,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(d){var l=s.refs;d===null?delete l[c]:l[c]=d},t._stringRef=c,t)}if(typeof e!="string")throw Error(ot(284));if(!r._owner)throw Error(ot(290,e))}return e}function ug(e,t){throw e=Object.prototype.toString.call(t),Error(ot(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nP(e){var t=e._init;return t(e._payload)}function zI(e){function t(D,R){if(e){var F=D.deletions;F===null?(D.deletions=[R],D.flags|=16):F.push(R)}}function r(D,R){if(!e)return null;for(;R!==null;)t(D,R),R=R.sibling;return null}function n(D,R){for(D=new Map;R!==null;)R.key!==null?D.set(R.key,R):D.set(R.index,R),R=R.sibling;return D}function s(D,R){return D=pl(D,R),D.index=0,D.sibling=null,D}function c(D,R,F){return D.index=F,e?(F=D.alternate,F!==null?(F=F.index,F<R?(D.flags|=2,R):F):(D.flags|=2,R)):(D.flags|=1048576,R)}function d(D){return e&&D.alternate===null&&(D.flags|=2),D}function l(D,R,F,X){return R===null||R.tag!==6?(R=qx(F,D.mode,X),R.return=D,R):(R=s(R,F),R.return=D,R)}function v(D,R,F,X){var q=F.type;return q===Sc?S(D,R,F.props.children,X,F.key):R!==null&&(R.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Js&&nP(q)===R.type)?(X=s(R,F.props),X.ref=Yf(D,R,F),X.return=D,X):(X=Ng(F.type,F.key,F.props,null,D.mode,X),X.ref=Yf(D,R,F),X.return=D,X)}function b(D,R,F,X){return R===null||R.tag!==4||R.stateNode.containerInfo!==F.containerInfo||R.stateNode.implementation!==F.implementation?(R=Gx(F,D.mode,X),R.return=D,R):(R=s(R,F.children||[]),R.return=D,R)}function S(D,R,F,X,q){return R===null||R.tag!==7?(R=lu(F,D.mode,X,q),R.return=D,R):(R=s(R,F),R.return=D,R)}function P(D,R,F){if(typeof R=="string"&&R!==""||typeof R=="number")return R=qx(""+R,D.mode,F),R.return=D,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Jm:return F=Ng(R.type,R.key,R.props,null,D.mode,F),F.ref=Yf(D,null,R),F.return=D,F;case wc:return R=Gx(R,D.mode,F),R.return=D,R;case Js:var X=R._init;return P(D,X(R._payload),F)}if(md(R)||Wf(R))return R=lu(R,D.mode,F,null),R.return=D,R;ug(D,R)}return null}function k(D,R,F,X){var q=R!==null?R.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return q!==null?null:l(D,R,""+F,X);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Jm:return F.key===q?v(D,R,F,X):null;case wc:return F.key===q?b(D,R,F,X):null;case Js:return q=F._init,k(D,R,q(F._payload),X)}if(md(F)||Wf(F))return q!==null?null:S(D,R,F,X,null);ug(D,F)}return null}function z(D,R,F,X,q){if(typeof X=="string"&&X!==""||typeof X=="number")return D=D.get(F)||null,l(R,D,""+X,q);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Jm:return D=D.get(X.key===null?F:X.key)||null,v(R,D,X,q);case wc:return D=D.get(X.key===null?F:X.key)||null,b(R,D,X,q);case Js:var W=X._init;return z(D,R,F,W(X._payload),q)}if(md(X)||Wf(X))return D=D.get(F)||null,S(R,D,X,q,null);ug(R,X)}return null}function B(D,R,F,X){for(var q=null,W=null,ee=R,le=R=0,ve=null;ee!==null&&le<F.length;le++){ee.index>le?(ve=ee,ee=null):ve=ee.sibling;var Pe=k(D,ee,F[le],X);if(Pe===null){ee===null&&(ee=ve);break}e&&ee&&Pe.alternate===null&&t(D,ee),R=c(Pe,R,le),W===null?q=Pe:W.sibling=Pe,W=Pe,ee=ve}if(le===F.length)return r(D,ee),en&&Kl(D,le),q;if(ee===null){for(;le<F.length;le++)ee=P(D,F[le],X),ee!==null&&(R=c(ee,R,le),W===null?q=ee:W.sibling=ee,W=ee);return en&&Kl(D,le),q}for(ee=n(D,ee);le<F.length;le++)ve=z(ee,D,le,F[le],X),ve!==null&&(e&&ve.alternate!==null&&ee.delete(ve.key===null?le:ve.key),R=c(ve,R,le),W===null?q=ve:W.sibling=ve,W=ve);return e&&ee.forEach(function(Ce){return t(D,Ce)}),en&&Kl(D,le),q}function j(D,R,F,X){var q=Wf(F);if(typeof q!="function")throw Error(ot(150));if(F=q.call(F),F==null)throw Error(ot(151));for(var W=q=null,ee=R,le=R=0,ve=null,Pe=F.next();ee!==null&&!Pe.done;le++,Pe=F.next()){ee.index>le?(ve=ee,ee=null):ve=ee.sibling;var Ce=k(D,ee,Pe.value,X);if(Ce===null){ee===null&&(ee=ve);break}e&&ee&&Ce.alternate===null&&t(D,ee),R=c(Ce,R,le),W===null?q=Ce:W.sibling=Ce,W=Ce,ee=ve}if(Pe.done)return r(D,ee),en&&Kl(D,le),q;if(ee===null){for(;!Pe.done;le++,Pe=F.next())Pe=P(D,Pe.value,X),Pe!==null&&(R=c(Pe,R,le),W===null?q=Pe:W.sibling=Pe,W=Pe);return en&&Kl(D,le),q}for(ee=n(D,ee);!Pe.done;le++,Pe=F.next())Pe=z(ee,D,le,Pe.value,X),Pe!==null&&(e&&Pe.alternate!==null&&ee.delete(Pe.key===null?le:Pe.key),R=c(Pe,R,le),W===null?q=Pe:W.sibling=Pe,W=Pe);return e&&ee.forEach(function(Te){return t(D,Te)}),en&&Kl(D,le),q}function V(D,R,F,X){if(typeof F=="object"&&F!==null&&F.type===Sc&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Jm:e:{for(var q=F.key,W=R;W!==null;){if(W.key===q){if(q=F.type,q===Sc){if(W.tag===7){r(D,W.sibling),R=s(W,F.props.children),R.return=D,D=R;break e}}else if(W.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Js&&nP(q)===W.type){r(D,W.sibling),R=s(W,F.props),R.ref=Yf(D,W,F),R.return=D,D=R;break e}r(D,W);break}else t(D,W);W=W.sibling}F.type===Sc?(R=lu(F.props.children,D.mode,X,F.key),R.return=D,D=R):(X=Ng(F.type,F.key,F.props,null,D.mode,X),X.ref=Yf(D,R,F),X.return=D,D=X)}return d(D);case wc:e:{for(W=F.key;R!==null;){if(R.key===W)if(R.tag===4&&R.stateNode.containerInfo===F.containerInfo&&R.stateNode.implementation===F.implementation){r(D,R.sibling),R=s(R,F.children||[]),R.return=D,D=R;break e}else{r(D,R);break}else t(D,R);R=R.sibling}R=Gx(F,D.mode,X),R.return=D,D=R}return d(D);case Js:return W=F._init,V(D,R,W(F._payload),X)}if(md(F))return B(D,R,F,X);if(Wf(F))return j(D,R,F,X);ug(D,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,R!==null&&R.tag===6?(r(D,R.sibling),R=s(R,F),R.return=D,D=R):(r(D,R),R=qx(F,D.mode,X),R.return=D,D=R),d(D)):r(D,R)}return V}var Yc=zI(!0),DI=zI(!1),Qg=xl(null),ey=null,Mc=null,s1=null;function l1(){s1=Mc=ey=null}function u1(e){var t=Qg.current;Kr(Qg),e._currentValue=t}function J0(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Fc(e,t){ey=e,s1=Mc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ki=!0),e.firstContext=null)}function za(e){var t=e._currentValue;if(s1!==e)if(e={context:e,memoizedValue:t,next:null},Mc===null){if(ey===null)throw Error(ot(308));Mc=e,ey.dependencies={lanes:0,firstContext:e}}else Mc=Mc.next=e;return t}var tu=null;function c1(e){tu===null?tu=[e]:tu.push(e)}function LI(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,c1(t)):(r.next=s.next,s.next=r),t.interleaved=r,ps(e,n)}function ps(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Qs=!1;function h1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hl(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,dr&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,ps(e,r)}return s=n.interleaved,s===null?(t.next=t,c1(n)):(t.next=s.next,s.next=t),n.interleaved=t,ps(e,r)}function zg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Xw(e,r)}}function iP(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,c=null;if(r=r.firstBaseUpdate,r!==null){do{var d={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};c===null?s=c=d:c=c.next=d,r=r.next}while(r!==null);c===null?s=c=t:c=c.next=t}else s=c=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:c,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ty(e,t,r,n){var s=e.updateQueue;Qs=!1;var c=s.firstBaseUpdate,d=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var v=l,b=v.next;v.next=null,d===null?c=b:d.next=b,d=v;var S=e.alternate;S!==null&&(S=S.updateQueue,l=S.lastBaseUpdate,l!==d&&(l===null?S.firstBaseUpdate=b:l.next=b,S.lastBaseUpdate=v))}if(c!==null){var P=s.baseState;d=0,S=b=v=null,l=c;do{var k=l.lane,z=l.eventTime;if((n&k)===k){S!==null&&(S=S.next={eventTime:z,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var B=e,j=l;switch(k=t,z=r,j.tag){case 1:if(B=j.payload,typeof B=="function"){P=B.call(z,P,k);break e}P=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=j.payload,k=typeof B=="function"?B.call(z,P,k):B,k==null)break e;P=ln({},P,k);break e;case 2:Qs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,k=s.effects,k===null?s.effects=[l]:k.push(l))}else z={eventTime:z,lane:k,tag:l.tag,payload:l.payload,callback:l.callback,next:null},S===null?(b=S=z,v=P):S=S.next=z,d|=k;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;k=l,l=k.next,k.next=null,s.lastBaseUpdate=k,s.shared.pending=null}}while(!0);if(S===null&&(v=P),s.baseState=v,s.firstBaseUpdate=b,s.lastBaseUpdate=S,t=s.shared.interleaved,t!==null){s=t;do d|=s.lane,s=s.next;while(s!==t)}else c===null&&(s.shared.lanes=0);gu|=d,e.lanes=d,e.memoizedState=P}}function aP(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ot(191,s));s.call(n)}}}var Lp={},Co=xl(Lp),qd=xl(Lp),Gd=xl(Lp);function ru(e){if(e===Lp)throw Error(ot(174));return e}function f1(e,t){switch(Br(Gd,t),Br(qd,e),Br(Co,Lp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:O0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=O0(t,e)}Kr(Co),Br(Co,t)}function Jc(){Kr(Co),Kr(qd),Kr(Gd)}function $I(e){ru(Gd.current);var t=ru(Co.current),r=O0(t,e.type);t!==r&&(Br(qd,e),Br(Co,r))}function d1(e){qd.current===e&&(Kr(Co),Kr(qd))}var on=xl(0);function ry(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rx=[];function p1(){for(var e=0;e<Rx.length;e++)Rx[e]._workInProgressVersionPrimary=null;Rx.length=0}var Dg=_s.ReactCurrentDispatcher,Nx=_s.ReactCurrentBatchConfig,mu=0,sn=null,Ln=null,Wn=null,ny=!1,Pd=!1,Wd=0,eR=0;function gi(){throw Error(ot(321))}function m1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!so(e[r],t[r]))return!1;return!0}function g1(e,t,r,n,s,c){if(mu=c,sn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Dg.current=e===null||e.memoizedState===null?iR:aR,e=r(n,s),Pd){c=0;do{if(Pd=!1,Wd=0,25<=c)throw Error(ot(301));c+=1,Wn=Ln=null,t.updateQueue=null,Dg.current=oR,e=r(n,s)}while(Pd)}if(Dg.current=iy,t=Ln!==null&&Ln.next!==null,mu=0,Wn=Ln=sn=null,ny=!1,t)throw Error(ot(300));return e}function y1(){var e=Wd!==0;return Wd=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?sn.memoizedState=Wn=e:Wn=Wn.next=e,Wn}function Da(){if(Ln===null){var e=sn.alternate;e=e!==null?e.memoizedState:null}else e=Ln.next;var t=Wn===null?sn.memoizedState:Wn.next;if(t!==null)Wn=t,Ln=e;else{if(e===null)throw Error(ot(310));Ln=e,e={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},Wn===null?sn.memoizedState=Wn=e:Wn=Wn.next=e}return Wn}function Zd(e,t){return typeof t=="function"?t(e):t}function Bx(e){var t=Da(),r=t.queue;if(r===null)throw Error(ot(311));r.lastRenderedReducer=e;var n=Ln,s=n.baseQueue,c=r.pending;if(c!==null){if(s!==null){var d=s.next;s.next=c.next,c.next=d}n.baseQueue=s=c,r.pending=null}if(s!==null){c=s.next,n=n.baseState;var l=d=null,v=null,b=c;do{var S=b.lane;if((mu&S)===S)v!==null&&(v=v.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),n=b.hasEagerState?b.eagerState:e(n,b.action);else{var P={lane:S,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};v===null?(l=v=P,d=n):v=v.next=P,sn.lanes|=S,gu|=S}b=b.next}while(b!==null&&b!==c);v===null?d=n:v.next=l,so(n,t.memoizedState)||(Ki=!0),t.memoizedState=n,t.baseState=d,t.baseQueue=v,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do c=s.lane,sn.lanes|=c,gu|=c,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Fx(e){var t=Da(),r=t.queue;if(r===null)throw Error(ot(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,c=t.memoizedState;if(s!==null){r.pending=null;var d=s=s.next;do c=e(c,d.action),d=d.next;while(d!==s);so(c,t.memoizedState)||(Ki=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),r.lastRenderedState=c}return[c,n]}function RI(){}function NI(e,t){var r=sn,n=Da(),s=t(),c=!so(n.memoizedState,s);if(c&&(n.memoizedState=s,Ki=!0),n=n.queue,v1(UI.bind(null,r,n,e),[e]),n.getSnapshot!==t||c||Wn!==null&&Wn.memoizedState.tag&1){if(r.flags|=2048,Hd(9,FI.bind(null,r,n,s,t),void 0,null),Hn===null)throw Error(ot(349));mu&30||BI(r,t,s)}return s}function BI(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function FI(e,t,r,n){t.value=r,t.getSnapshot=n,VI(t)&&qI(e)}function UI(e,t,r){return r(function(){VI(t)&&qI(e)})}function VI(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!so(e,r)}catch{return!0}}function qI(e){var t=ps(e,1);t!==null&&ao(t,e,1,-1)}function oP(e){var t=wo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zd,lastRenderedState:e},t.queue=e,e=e.dispatch=nR.bind(null,sn,e),[t.memoizedState,e]}function Hd(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function GI(){return Da().memoizedState}function Lg(e,t,r,n){var s=wo();sn.flags|=e,s.memoizedState=Hd(1|t,r,void 0,n===void 0?null:n)}function mv(e,t,r,n){var s=Da();n=n===void 0?null:n;var c=void 0;if(Ln!==null){var d=Ln.memoizedState;if(c=d.destroy,n!==null&&m1(n,d.deps)){s.memoizedState=Hd(t,r,c,n);return}}sn.flags|=e,s.memoizedState=Hd(1|t,r,c,n)}function sP(e,t){return Lg(8390656,8,e,t)}function v1(e,t){return mv(2048,8,e,t)}function WI(e,t){return mv(4,2,e,t)}function ZI(e,t){return mv(4,4,e,t)}function HI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function KI(e,t,r){return r=r!=null?r.concat([e]):null,mv(4,4,HI.bind(null,t,e),r)}function _1(){}function XI(e,t){var r=Da();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&m1(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function YI(e,t){var r=Da();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&m1(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function JI(e,t,r){return mu&21?(so(r,t)||(r=nI(),sn.lanes|=r,gu|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ki=!0),e.memoizedState=r)}function tR(e,t){var r=Pr;Pr=r!==0&&4>r?r:4,e(!0);var n=Nx.transition;Nx.transition={};try{e(!1),t()}finally{Pr=r,Nx.transition=n}}function QI(){return Da().memoizedState}function rR(e,t,r){var n=dl(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},eM(e))tM(t,r);else if(r=LI(e,t,r,n),r!==null){var s=$i();ao(r,e,n,s),rM(r,t,n)}}function nR(e,t,r){var n=dl(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(eM(e))tM(t,s);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var d=t.lastRenderedState,l=c(d,r);if(s.hasEagerState=!0,s.eagerState=l,so(l,d)){var v=t.interleaved;v===null?(s.next=s,c1(t)):(s.next=v.next,v.next=s),t.interleaved=s;return}}catch{}finally{}r=LI(e,t,s,n),r!==null&&(s=$i(),ao(r,e,n,s),rM(r,t,n))}}function eM(e){var t=e.alternate;return e===sn||t!==null&&t===sn}function tM(e,t){Pd=ny=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function rM(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Xw(e,r)}}var iy={readContext:za,useCallback:gi,useContext:gi,useEffect:gi,useImperativeHandle:gi,useInsertionEffect:gi,useLayoutEffect:gi,useMemo:gi,useReducer:gi,useRef:gi,useState:gi,useDebugValue:gi,useDeferredValue:gi,useTransition:gi,useMutableSource:gi,useSyncExternalStore:gi,useId:gi,unstable_isNewReconciler:!1},iR={readContext:za,useCallback:function(e,t){return wo().memoizedState=[e,t===void 0?null:t],e},useContext:za,useEffect:sP,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Lg(4194308,4,HI.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Lg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lg(4,2,e,t)},useMemo:function(e,t){var r=wo();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=wo();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=rR.bind(null,sn,e),[n.memoizedState,e]},useRef:function(e){var t=wo();return e={current:e},t.memoizedState=e},useState:oP,useDebugValue:_1,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=oP(!1),t=e[0];return e=tR.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=sn,s=wo();if(en){if(r===void 0)throw Error(ot(407));r=r()}else{if(r=t(),Hn===null)throw Error(ot(349));mu&30||BI(n,t,r)}s.memoizedState=r;var c={value:r,getSnapshot:t};return s.queue=c,sP(UI.bind(null,n,c,e),[e]),n.flags|=2048,Hd(9,FI.bind(null,n,c,r,t),void 0,null),r},useId:function(){var e=wo(),t=Hn.identifierPrefix;if(en){var r=is,n=ns;r=(n&~(1<<32-io(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Wd++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=eR++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},aR={readContext:za,useCallback:XI,useContext:za,useEffect:v1,useImperativeHandle:KI,useInsertionEffect:WI,useLayoutEffect:ZI,useMemo:YI,useReducer:Bx,useRef:GI,useState:function(){return Bx(Zd)},useDebugValue:_1,useDeferredValue:function(e){var t=Da();return JI(t,Ln.memoizedState,e)},useTransition:function(){var e=Bx(Zd)[0],t=Da().memoizedState;return[e,t]},useMutableSource:RI,useSyncExternalStore:NI,useId:QI,unstable_isNewReconciler:!1},oR={readContext:za,useCallback:XI,useContext:za,useEffect:v1,useImperativeHandle:KI,useInsertionEffect:WI,useLayoutEffect:ZI,useMemo:YI,useReducer:Fx,useRef:GI,useState:function(){return Fx(Zd)},useDebugValue:_1,useDeferredValue:function(e){var t=Da();return Ln===null?t.memoizedState=e:JI(t,Ln.memoizedState,e)},useTransition:function(){var e=Fx(Zd)[0],t=Da().memoizedState;return[e,t]},useMutableSource:RI,useSyncExternalStore:NI,useId:QI,unstable_isNewReconciler:!1};function Ja(e,t){if(e&&e.defaultProps){t=ln({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Q0(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ln({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var gv={isMounted:function(e){return(e=e._reactInternals)?Tu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=$i(),s=dl(e),c=ls(n,s);c.payload=t,r!=null&&(c.callback=r),t=hl(e,c,s),t!==null&&(ao(t,e,s,n),zg(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=$i(),s=dl(e),c=ls(n,s);c.tag=1,c.payload=t,r!=null&&(c.callback=r),t=hl(e,c,s),t!==null&&(ao(t,e,s,n),zg(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=$i(),n=dl(e),s=ls(r,n);s.tag=2,t!=null&&(s.callback=t),t=hl(e,s,n),t!==null&&(ao(t,e,n,r),zg(t,e,n))}};function lP(e,t,r,n,s,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,c,d):t.prototype&&t.prototype.isPureReactComponent?!Bd(r,n)||!Bd(s,c):!0}function nM(e,t,r){var n=!1,s=yl,c=t.contextType;return typeof c=="object"&&c!==null?c=za(c):(s=Ji(t)?du:wi.current,n=t.contextTypes,c=(n=n!=null)?Kc(e,s):yl),t=new t(r,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gv,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=c),t}function uP(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&gv.enqueueReplaceState(t,t.state,null)}function eb(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},h1(e);var c=t.contextType;typeof c=="object"&&c!==null?s.context=za(c):(c=Ji(t)?du:wi.current,s.context=Kc(e,c)),s.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(Q0(e,t,c,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&gv.enqueueReplaceState(s,s.state,null),ty(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Qc(e,t){try{var r="",n=t;do r+=D$(n),n=n.return;while(n);var s=r}catch(c){s=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:s,digest:null}}function Ux(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function tb(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var sR=typeof WeakMap=="function"?WeakMap:Map;function iM(e,t,r){r=ls(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){oy||(oy=!0,hb=n),tb(e,t)},r}function aM(e,t,r){r=ls(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){tb(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(r.callback=function(){tb(e,t),typeof n!="function"&&(fl===null?fl=new Set([this]):fl.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),r}function cP(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new sR;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=bR.bind(null,e,t,r),t.then(e,e))}function hP(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function fP(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ls(-1,1),t.tag=2,hl(r,t,1))),r.lanes|=1),e)}var lR=_s.ReactCurrentOwner,Ki=!1;function Li(e,t,r,n){t.child=e===null?DI(t,null,r,n):Yc(t,e.child,r,n)}function dP(e,t,r,n,s){r=r.render;var c=t.ref;return Fc(t,s),n=g1(e,t,r,n,c,s),r=y1(),e!==null&&!Ki?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ms(e,t,s)):(en&&r&&i1(t),t.flags|=1,Li(e,t,n,s),t.child)}function pP(e,t,r,n,s){if(e===null){var c=r.type;return typeof c=="function"&&!E1(c)&&c.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=c,oM(e,t,c,n,s)):(e=Ng(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!(e.lanes&s)){var d=c.memoizedProps;if(r=r.compare,r=r!==null?r:Bd,r(d,n)&&e.ref===t.ref)return ms(e,t,s)}return t.flags|=1,e=pl(c,n),e.ref=t.ref,e.return=t,t.child=e}function oM(e,t,r,n,s){if(e!==null){var c=e.memoizedProps;if(Bd(c,n)&&e.ref===t.ref)if(Ki=!1,t.pendingProps=n=c,(e.lanes&s)!==0)e.flags&131072&&(Ki=!0);else return t.lanes=e.lanes,ms(e,t,s)}return rb(e,t,r,n,s)}function sM(e,t,r){var n=t.pendingProps,s=n.children,c=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Br(zc,oa),oa|=r;else{if(!(r&1073741824))return e=c!==null?c.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Br(zc,oa),oa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=c!==null?c.baseLanes:r,Br(zc,oa),oa|=n}else c!==null?(n=c.baseLanes|r,t.memoizedState=null):n=r,Br(zc,oa),oa|=n;return Li(e,t,s,r),t.child}function lM(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function rb(e,t,r,n,s){var c=Ji(r)?du:wi.current;return c=Kc(t,c),Fc(t,s),r=g1(e,t,r,n,c,s),n=y1(),e!==null&&!Ki?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ms(e,t,s)):(en&&n&&i1(t),t.flags|=1,Li(e,t,r,s),t.child)}function mP(e,t,r,n,s){if(Ji(r)){var c=!0;Xg(t)}else c=!1;if(Fc(t,s),t.stateNode===null)jg(e,t),nM(t,r,n),eb(t,r,n,s),n=!0;else if(e===null){var d=t.stateNode,l=t.memoizedProps;d.props=l;var v=d.context,b=r.contextType;typeof b=="object"&&b!==null?b=za(b):(b=Ji(r)?du:wi.current,b=Kc(t,b));var S=r.getDerivedStateFromProps,P=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function";P||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(l!==n||v!==b)&&uP(t,d,n,b),Qs=!1;var k=t.memoizedState;d.state=k,ty(t,n,d,s),v=t.memoizedState,l!==n||k!==v||Yi.current||Qs?(typeof S=="function"&&(Q0(t,r,S,n),v=t.memoizedState),(l=Qs||lP(t,r,l,n,k,v,b))?(P||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=v),d.props=n,d.state=v,d.context=b,n=l):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{d=t.stateNode,jI(e,t),l=t.memoizedProps,b=t.type===t.elementType?l:Ja(t.type,l),d.props=b,P=t.pendingProps,k=d.context,v=r.contextType,typeof v=="object"&&v!==null?v=za(v):(v=Ji(r)?du:wi.current,v=Kc(t,v));var z=r.getDerivedStateFromProps;(S=typeof z=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(l!==P||k!==v)&&uP(t,d,n,v),Qs=!1,k=t.memoizedState,d.state=k,ty(t,n,d,s);var B=t.memoizedState;l!==P||k!==B||Yi.current||Qs?(typeof z=="function"&&(Q0(t,r,z,n),B=t.memoizedState),(b=Qs||lP(t,r,b,n,k,B,v)||!1)?(S||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(n,B,v),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(n,B,v)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=B),d.props=n,d.state=B,d.context=v,n=b):(typeof d.componentDidUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),n=!1)}return nb(e,t,r,n,c,s)}function nb(e,t,r,n,s,c){lM(e,t);var d=(t.flags&128)!==0;if(!n&&!d)return s&&eP(t,r,!1),ms(e,t,c);n=t.stateNode,lR.current=t;var l=d&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&d?(t.child=Yc(t,e.child,null,c),t.child=Yc(t,null,l,c)):Li(e,t,l,c),t.memoizedState=n.state,s&&eP(t,r,!0),t.child}function uM(e){var t=e.stateNode;t.pendingContext?QT(e,t.pendingContext,t.pendingContext!==t.context):t.context&&QT(e,t.context,!1),f1(e,t.containerInfo)}function gP(e,t,r,n,s){return Xc(),o1(s),t.flags|=256,Li(e,t,r,n),t.child}var ib={dehydrated:null,treeContext:null,retryLane:0};function ab(e){return{baseLanes:e,cachePool:null,transitions:null}}function cM(e,t,r){var n=t.pendingProps,s=on.current,c=!1,d=(t.flags&128)!==0,l;if((l=d)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Br(on,s&1),e===null)return Y0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=n.children,e=n.fallback,c?(n=t.mode,c=t.child,d={mode:"hidden",children:d},!(n&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=_v(d,n,0,null),e=lu(e,n,r,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=ab(r),t.memoizedState=ib,e):x1(t,d));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return uR(e,t,d,n,l,s,r);if(c){c=n.fallback,d=t.mode,s=e.child,l=s.sibling;var v={mode:"hidden",children:n.children};return!(d&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=v,t.deletions=null):(n=pl(s,v),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?c=pl(l,c):(c=lu(c,d,r,null),c.flags|=2),c.return=t,n.return=t,n.sibling=c,t.child=n,n=c,c=t.child,d=e.child.memoizedState,d=d===null?ab(r):{baseLanes:d.baseLanes|r,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=e.childLanes&~r,t.memoizedState=ib,n}return c=e.child,e=c.sibling,n=pl(c,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function x1(e,t){return t=_v({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function cg(e,t,r,n){return n!==null&&o1(n),Yc(t,e.child,null,r),e=x1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uR(e,t,r,n,s,c,d){if(r)return t.flags&256?(t.flags&=-257,n=Ux(Error(ot(422))),cg(e,t,d,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=n.fallback,s=t.mode,n=_v({mode:"visible",children:n.children},s,0,null),c=lu(c,s,d,null),c.flags|=2,n.return=t,c.return=t,n.sibling=c,t.child=n,t.mode&1&&Yc(t,e.child,null,d),t.child.memoizedState=ab(d),t.memoizedState=ib,c);if(!(t.mode&1))return cg(e,t,d,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,c=Error(ot(419)),n=Ux(c,n,void 0),cg(e,t,d,n)}if(l=(d&e.childLanes)!==0,Ki||l){if(n=Hn,n!==null){switch(d&-d){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|d)?0:s,s!==0&&s!==c.retryLane&&(c.retryLane=s,ps(e,s),ao(n,e,s,-1))}return A1(),n=Ux(Error(ot(421))),cg(e,t,d,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=wR.bind(null,e),s._reactRetry=t,null):(e=c.treeContext,ua=cl(s.nextSibling),ca=t,en=!0,to=null,e!==null&&(Ea[Ca++]=ns,Ea[Ca++]=is,Ea[Ca++]=pu,ns=e.id,is=e.overflow,pu=t),t=x1(t,n.children),t.flags|=4096,t)}function yP(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),J0(e.return,t,r)}function Vx(e,t,r,n,s){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=n,c.tail=r,c.tailMode=s)}function hM(e,t,r){var n=t.pendingProps,s=n.revealOrder,c=n.tail;if(Li(e,t,n.children,r),n=on.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yP(e,r,t);else if(e.tag===19)yP(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Br(on,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&ry(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Vx(t,!1,s,r,c);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ry(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Vx(t,!0,r,null,c);break;case"together":Vx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function jg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ms(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),gu|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ot(153));if(t.child!==null){for(e=t.child,r=pl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=pl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function cR(e,t,r){switch(t.tag){case 3:uM(t),Xc();break;case 5:$I(t);break;case 1:Ji(t.type)&&Xg(t);break;case 4:f1(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Br(Qg,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Br(on,on.current&1),t.flags|=128,null):r&t.child.childLanes?cM(e,t,r):(Br(on,on.current&1),e=ms(e,t,r),e!==null?e.sibling:null);Br(on,on.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return hM(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Br(on,on.current),n)break;return null;case 22:case 23:return t.lanes=0,sM(e,t,r)}return ms(e,t,r)}var fM,ob,dM,pM;fM=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ob=function(){};dM=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ru(Co.current);var c=null;switch(r){case"input":s=C0(e,s),n=C0(e,n),c=[];break;case"select":s=ln({},s,{value:void 0}),n=ln({},n,{value:void 0}),c=[];break;case"textarea":s=M0(e,s),n=M0(e,n),c=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Hg)}z0(r,n);var d;r=null;for(b in s)if(!n.hasOwnProperty(b)&&s.hasOwnProperty(b)&&s[b]!=null)if(b==="style"){var l=s[b];for(d in l)l.hasOwnProperty(d)&&(r||(r={}),r[d]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(zd.hasOwnProperty(b)?c||(c=[]):(c=c||[]).push(b,null));for(b in n){var v=n[b];if(l=s!=null?s[b]:void 0,n.hasOwnProperty(b)&&v!==l&&(v!=null||l!=null))if(b==="style")if(l){for(d in l)!l.hasOwnProperty(d)||v&&v.hasOwnProperty(d)||(r||(r={}),r[d]="");for(d in v)v.hasOwnProperty(d)&&l[d]!==v[d]&&(r||(r={}),r[d]=v[d])}else r||(c||(c=[]),c.push(b,r)),r=v;else b==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,l=l?l.__html:void 0,v!=null&&l!==v&&(c=c||[]).push(b,v)):b==="children"?typeof v!="string"&&typeof v!="number"||(c=c||[]).push(b,""+v):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(zd.hasOwnProperty(b)?(v!=null&&b==="onScroll"&&Wr("scroll",e),c||l===v||(c=[])):(c=c||[]).push(b,v))}r&&(c=c||[]).push("style",r);var b=c;(t.updateQueue=b)&&(t.flags|=4)}};pM=function(e,t,r,n){r!==n&&(t.flags|=4)};function Jf(e,t){if(!en)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function yi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function hR(e,t,r){var n=t.pendingProps;switch(a1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(t),null;case 1:return Ji(t.type)&&Kg(),yi(t),null;case 3:return n=t.stateNode,Jc(),Kr(Yi),Kr(wi),p1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(lg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,to!==null&&(pb(to),to=null))),ob(e,t),yi(t),null;case 5:d1(t);var s=ru(Gd.current);if(r=t.type,e!==null&&t.stateNode!=null)dM(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ot(166));return yi(t),null}if(e=ru(Co.current),lg(t)){n=t.stateNode,r=t.type;var c=t.memoizedProps;switch(n[To]=t,n[Vd]=c,e=(t.mode&1)!==0,r){case"dialog":Wr("cancel",n),Wr("close",n);break;case"iframe":case"object":case"embed":Wr("load",n);break;case"video":case"audio":for(s=0;s<yd.length;s++)Wr(yd[s],n);break;case"source":Wr("error",n);break;case"img":case"image":case"link":Wr("error",n),Wr("load",n);break;case"details":Wr("toggle",n);break;case"input":AT(n,c),Wr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!c.multiple},Wr("invalid",n);break;case"textarea":CT(n,c),Wr("invalid",n)}z0(r,c),s=null;for(var d in c)if(c.hasOwnProperty(d)){var l=c[d];d==="children"?typeof l=="string"?n.textContent!==l&&(c.suppressHydrationWarning!==!0&&sg(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(c.suppressHydrationWarning!==!0&&sg(n.textContent,l,e),s=["children",""+l]):zd.hasOwnProperty(d)&&l!=null&&d==="onScroll"&&Wr("scroll",n)}switch(r){case"input":Qm(n),ET(n,c,!0);break;case"textarea":Qm(n),kT(n);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(n.onclick=Hg)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{d=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Uk(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=d.createElement(r,{is:n.is}):(e=d.createElement(r),r==="select"&&(d=e,n.multiple?d.multiple=!0:n.size&&(d.size=n.size))):e=d.createElementNS(e,r),e[To]=t,e[Vd]=n,fM(e,t,!1,!1),t.stateNode=e;e:{switch(d=D0(r,n),r){case"dialog":Wr("cancel",e),Wr("close",e),s=n;break;case"iframe":case"object":case"embed":Wr("load",e),s=n;break;case"video":case"audio":for(s=0;s<yd.length;s++)Wr(yd[s],e);s=n;break;case"source":Wr("error",e),s=n;break;case"img":case"image":case"link":Wr("error",e),Wr("load",e),s=n;break;case"details":Wr("toggle",e),s=n;break;case"input":AT(e,n),s=C0(e,n),Wr("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ln({},n,{value:void 0}),Wr("invalid",e);break;case"textarea":CT(e,n),s=M0(e,n),Wr("invalid",e);break;default:s=n}z0(r,s),l=s;for(c in l)if(l.hasOwnProperty(c)){var v=l[c];c==="style"?Gk(e,v):c==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&Vk(e,v)):c==="children"?typeof v=="string"?(r!=="textarea"||v!=="")&&Dd(e,v):typeof v=="number"&&Dd(e,""+v):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(zd.hasOwnProperty(c)?v!=null&&c==="onScroll"&&Wr("scroll",e):v!=null&&qw(e,c,v,d))}switch(r){case"input":Qm(e),ET(e,n,!1);break;case"textarea":Qm(e),kT(e);break;case"option":n.value!=null&&e.setAttribute("value",""+gl(n.value));break;case"select":e.multiple=!!n.multiple,c=n.value,c!=null?$c(e,!!n.multiple,c,!1):n.defaultValue!=null&&$c(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Hg)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yi(t),null;case 6:if(e&&t.stateNode!=null)pM(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ot(166));if(r=ru(Gd.current),ru(Co.current),lg(t)){if(n=t.stateNode,r=t.memoizedProps,n[To]=t,(c=n.nodeValue!==r)&&(e=ca,e!==null))switch(e.tag){case 3:sg(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sg(n.nodeValue,r,(e.mode&1)!==0)}c&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[To]=t,t.stateNode=n}return yi(t),null;case 13:if(Kr(on),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(en&&ua!==null&&t.mode&1&&!(t.flags&128))OI(),Xc(),t.flags|=98560,c=!1;else if(c=lg(t),n!==null&&n.dehydrated!==null){if(e===null){if(!c)throw Error(ot(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(ot(317));c[To]=t}else Xc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;yi(t),c=!1}else to!==null&&(pb(to),to=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||on.current&1?jn===0&&(jn=3):A1())),t.updateQueue!==null&&(t.flags|=4),yi(t),null);case 4:return Jc(),ob(e,t),e===null&&Fd(t.stateNode.containerInfo),yi(t),null;case 10:return u1(t.type._context),yi(t),null;case 17:return Ji(t.type)&&Kg(),yi(t),null;case 19:if(Kr(on),c=t.memoizedState,c===null)return yi(t),null;if(n=(t.flags&128)!==0,d=c.rendering,d===null)if(n)Jf(c,!1);else{if(jn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=ry(e),d!==null){for(t.flags|=128,Jf(c,!1),n=d.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)c=r,e=n,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,e=d.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Br(on,on.current&1|2),t.child}e=e.sibling}c.tail!==null&&Tn()>eh&&(t.flags|=128,n=!0,Jf(c,!1),t.lanes=4194304)}else{if(!n)if(e=ry(d),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Jf(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!en)return yi(t),null}else 2*Tn()-c.renderingStartTime>eh&&r!==1073741824&&(t.flags|=128,n=!0,Jf(c,!1),t.lanes=4194304);c.isBackwards?(d.sibling=t.child,t.child=d):(r=c.last,r!==null?r.sibling=d:t.child=d,c.last=d)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Tn(),t.sibling=null,r=on.current,Br(on,n?r&1|2:r&1),t):(yi(t),null);case 22:case 23:return P1(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?oa&1073741824&&(yi(t),t.subtreeFlags&6&&(t.flags|=8192)):yi(t),null;case 24:return null;case 25:return null}throw Error(ot(156,t.tag))}function fR(e,t){switch(a1(t),t.tag){case 1:return Ji(t.type)&&Kg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jc(),Kr(Yi),Kr(wi),p1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return d1(t),null;case 13:if(Kr(on),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ot(340));Xc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Kr(on),null;case 4:return Jc(),null;case 10:return u1(t.type._context),null;case 22:case 23:return P1(),null;case 24:return null;default:return null}}var hg=!1,_i=!1,dR=typeof WeakSet=="function"?WeakSet:Set,Et=null;function Oc(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){dn(e,t,n)}else r.current=null}function sb(e,t,r){try{r()}catch(n){dn(e,t,n)}}var vP=!1;function pR(e,t){if(q0=Gg,e=_I(),n1(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,c=n.focusNode;n=n.focusOffset;try{r.nodeType,c.nodeType}catch{r=null;break e}var d=0,l=-1,v=-1,b=0,S=0,P=e,k=null;t:for(;;){for(var z;P!==r||s!==0&&P.nodeType!==3||(l=d+s),P!==c||n!==0&&P.nodeType!==3||(v=d+n),P.nodeType===3&&(d+=P.nodeValue.length),(z=P.firstChild)!==null;)k=P,P=z;for(;;){if(P===e)break t;if(k===r&&++b===s&&(l=d),k===c&&++S===n&&(v=d),(z=P.nextSibling)!==null)break;P=k,k=P.parentNode}P=z}r=l===-1||v===-1?null:{start:l,end:v}}else r=null}r=r||{start:0,end:0}}else r=null;for(G0={focusedElem:e,selectionRange:r},Gg=!1,Et=t;Et!==null;)if(t=Et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Et=e;else for(;Et!==null;){t=Et;try{var B=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var j=B.memoizedProps,V=B.memoizedState,D=t.stateNode,R=D.getSnapshotBeforeUpdate(t.elementType===t.type?j:Ja(t.type,j),V);D.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var F=t.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ot(163))}}catch(X){dn(t,t.return,X)}if(e=t.sibling,e!==null){e.return=t.return,Et=e;break}Et=t.return}return B=vP,vP=!1,B}function Ad(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var c=s.destroy;s.destroy=void 0,c!==void 0&&sb(t,r,c)}s=s.next}while(s!==n)}}function yv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function lb(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function mM(e){var t=e.alternate;t!==null&&(e.alternate=null,mM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[To],delete t[Vd],delete t[H0],delete t[X3],delete t[Y3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gM(e){return e.tag===5||e.tag===3||e.tag===4}function _P(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ub(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Hg));else if(n!==4&&(e=e.child,e!==null))for(ub(e,t,r),e=e.sibling;e!==null;)ub(e,t,r),e=e.sibling}function cb(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(cb(e,t,r),e=e.sibling;e!==null;)cb(e,t,r),e=e.sibling}var ii=null,Qa=!1;function Gs(e,t,r){for(r=r.child;r!==null;)yM(e,t,r),r=r.sibling}function yM(e,t,r){if(Eo&&typeof Eo.onCommitFiberUnmount=="function")try{Eo.onCommitFiberUnmount(uv,r)}catch{}switch(r.tag){case 5:_i||Oc(r,t);case 6:var n=ii,s=Qa;ii=null,Gs(e,t,r),ii=n,Qa=s,ii!==null&&(Qa?(e=ii,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ii.removeChild(r.stateNode));break;case 18:ii!==null&&(Qa?(e=ii,r=r.stateNode,e.nodeType===8?jx(e.parentNode,r):e.nodeType===1&&jx(e,r),Rd(e)):jx(ii,r.stateNode));break;case 4:n=ii,s=Qa,ii=r.stateNode.containerInfo,Qa=!0,Gs(e,t,r),ii=n,Qa=s;break;case 0:case 11:case 14:case 15:if(!_i&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var c=s,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&sb(r,t,d),s=s.next}while(s!==n)}Gs(e,t,r);break;case 1:if(!_i&&(Oc(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){dn(r,t,l)}Gs(e,t,r);break;case 21:Gs(e,t,r);break;case 22:r.mode&1?(_i=(n=_i)||r.memoizedState!==null,Gs(e,t,r),_i=n):Gs(e,t,r);break;default:Gs(e,t,r)}}function xP(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new dR),t.forEach(function(n){var s=SR.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Xa(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var c=e,d=t,l=d;e:for(;l!==null;){switch(l.tag){case 5:ii=l.stateNode,Qa=!1;break e;case 3:ii=l.stateNode.containerInfo,Qa=!0;break e;case 4:ii=l.stateNode.containerInfo,Qa=!0;break e}l=l.return}if(ii===null)throw Error(ot(160));yM(c,d,s),ii=null,Qa=!1;var v=s.alternate;v!==null&&(v.return=null),s.return=null}catch(b){dn(s,t,b)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vM(t,e),t=t.sibling}function vM(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xa(t,e),bo(e),n&4){try{Ad(3,e,e.return),yv(3,e)}catch(j){dn(e,e.return,j)}try{Ad(5,e,e.return)}catch(j){dn(e,e.return,j)}}break;case 1:Xa(t,e),bo(e),n&512&&r!==null&&Oc(r,r.return);break;case 5:if(Xa(t,e),bo(e),n&512&&r!==null&&Oc(r,r.return),e.flags&32){var s=e.stateNode;try{Dd(s,"")}catch(j){dn(e,e.return,j)}}if(n&4&&(s=e.stateNode,s!=null)){var c=e.memoizedProps,d=r!==null?r.memoizedProps:c,l=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{l==="input"&&c.type==="radio"&&c.name!=null&&Bk(s,c),D0(l,d);var b=D0(l,c);for(d=0;d<v.length;d+=2){var S=v[d],P=v[d+1];S==="style"?Gk(s,P):S==="dangerouslySetInnerHTML"?Vk(s,P):S==="children"?Dd(s,P):qw(s,S,P,b)}switch(l){case"input":k0(s,c);break;case"textarea":Fk(s,c);break;case"select":var k=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!c.multiple;var z=c.value;z!=null?$c(s,!!c.multiple,z,!1):k!==!!c.multiple&&(c.defaultValue!=null?$c(s,!!c.multiple,c.defaultValue,!0):$c(s,!!c.multiple,c.multiple?[]:"",!1))}s[Vd]=c}catch(j){dn(e,e.return,j)}}break;case 6:if(Xa(t,e),bo(e),n&4){if(e.stateNode===null)throw Error(ot(162));s=e.stateNode,c=e.memoizedProps;try{s.nodeValue=c}catch(j){dn(e,e.return,j)}}break;case 3:if(Xa(t,e),bo(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Rd(t.containerInfo)}catch(j){dn(e,e.return,j)}break;case 4:Xa(t,e),bo(e);break;case 13:Xa(t,e),bo(e),s=e.child,s.flags&8192&&(c=s.memoizedState!==null,s.stateNode.isHidden=c,!c||s.alternate!==null&&s.alternate.memoizedState!==null||(S1=Tn())),n&4&&xP(e);break;case 22:if(S=r!==null&&r.memoizedState!==null,e.mode&1?(_i=(b=_i)||S,Xa(t,e),_i=b):Xa(t,e),bo(e),n&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!S&&e.mode&1)for(Et=e,S=e.child;S!==null;){for(P=Et=S;Et!==null;){switch(k=Et,z=k.child,k.tag){case 0:case 11:case 14:case 15:Ad(4,k,k.return);break;case 1:Oc(k,k.return);var B=k.stateNode;if(typeof B.componentWillUnmount=="function"){n=k,r=k.return;try{t=n,B.props=t.memoizedProps,B.state=t.memoizedState,B.componentWillUnmount()}catch(j){dn(n,r,j)}}break;case 5:Oc(k,k.return);break;case 22:if(k.memoizedState!==null){wP(P);continue}}z!==null?(z.return=k,Et=z):wP(P)}S=S.sibling}e:for(S=null,P=e;;){if(P.tag===5){if(S===null){S=P;try{s=P.stateNode,b?(c=s.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(l=P.stateNode,v=P.memoizedProps.style,d=v!=null&&v.hasOwnProperty("display")?v.display:null,l.style.display=qk("display",d))}catch(j){dn(e,e.return,j)}}}else if(P.tag===6){if(S===null)try{P.stateNode.nodeValue=b?"":P.memoizedProps}catch(j){dn(e,e.return,j)}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===e)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===e)break e;for(;P.sibling===null;){if(P.return===null||P.return===e)break e;S===P&&(S=null),P=P.return}S===P&&(S=null),P.sibling.return=P.return,P=P.sibling}}break;case 19:Xa(t,e),bo(e),n&4&&xP(e);break;case 21:break;default:Xa(t,e),bo(e)}}function bo(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(gM(r)){var n=r;break e}r=r.return}throw Error(ot(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Dd(s,""),n.flags&=-33);var c=_P(e);cb(e,c,s);break;case 3:case 4:var d=n.stateNode.containerInfo,l=_P(e);ub(e,l,d);break;default:throw Error(ot(161))}}catch(v){dn(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mR(e,t,r){Et=e,_M(e)}function _M(e,t,r){for(var n=(e.mode&1)!==0;Et!==null;){var s=Et,c=s.child;if(s.tag===22&&n){var d=s.memoizedState!==null||hg;if(!d){var l=s.alternate,v=l!==null&&l.memoizedState!==null||_i;l=hg;var b=_i;if(hg=d,(_i=v)&&!b)for(Et=s;Et!==null;)d=Et,v=d.child,d.tag===22&&d.memoizedState!==null?SP(s):v!==null?(v.return=d,Et=v):SP(s);for(;c!==null;)Et=c,_M(c),c=c.sibling;Et=s,hg=l,_i=b}bP(e)}else s.subtreeFlags&8772&&c!==null?(c.return=s,Et=c):bP(e)}}function bP(e){for(;Et!==null;){var t=Et;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_i||yv(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!_i)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Ja(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&aP(t,c,n);break;case 3:var d=t.updateQueue;if(d!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}aP(t,d,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&r.focus();break;case"img":v.src&&(r.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var b=t.alternate;if(b!==null){var S=b.memoizedState;if(S!==null){var P=S.dehydrated;P!==null&&Rd(P)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ot(163))}_i||t.flags&512&&lb(t)}catch(k){dn(t,t.return,k)}}if(t===e){Et=null;break}if(r=t.sibling,r!==null){r.return=t.return,Et=r;break}Et=t.return}}function wP(e){for(;Et!==null;){var t=Et;if(t===e){Et=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Et=r;break}Et=t.return}}function SP(e){for(;Et!==null;){var t=Et;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{yv(4,t)}catch(v){dn(t,r,v)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(v){dn(t,s,v)}}var c=t.return;try{lb(t)}catch(v){dn(t,c,v)}break;case 5:var d=t.return;try{lb(t)}catch(v){dn(t,d,v)}}}catch(v){dn(t,t.return,v)}if(t===e){Et=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Et=l;break}Et=t.return}}var gR=Math.ceil,ay=_s.ReactCurrentDispatcher,b1=_s.ReactCurrentOwner,Ma=_s.ReactCurrentBatchConfig,dr=0,Hn=null,An=null,oi=0,oa=0,zc=xl(0),jn=0,Kd=null,gu=0,vv=0,w1=0,Ed=null,Hi=null,S1=0,eh=1/0,ts=null,oy=!1,hb=null,fl=null,fg=!1,al=null,sy=0,Cd=0,fb=null,$g=-1,Rg=0;function $i(){return dr&6?Tn():$g!==-1?$g:$g=Tn()}function dl(e){return e.mode&1?dr&2&&oi!==0?oi&-oi:Q3.transition!==null?(Rg===0&&(Rg=nI()),Rg):(e=Pr,e!==0||(e=window.event,e=e===void 0?16:cI(e.type)),e):1}function ao(e,t,r,n){if(50<Cd)throw Cd=0,fb=null,Error(ot(185));Op(e,r,n),(!(dr&2)||e!==Hn)&&(e===Hn&&(!(dr&2)&&(vv|=r),jn===4&&rl(e,oi)),Qi(e,n),r===1&&dr===0&&!(t.mode&1)&&(eh=Tn()+500,pv&&bl()))}function Qi(e,t){var r=e.callbackNode;Q$(e,t);var n=qg(e,e===Hn?oi:0);if(n===0)r!==null&&OT(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&OT(r),t===1)e.tag===0?J3(TP.bind(null,e)):kI(TP.bind(null,e)),H3(function(){!(dr&6)&&bl()}),r=null;else{switch(iI(n)){case 1:r=Kw;break;case 4:r=tI;break;case 16:r=Vg;break;case 536870912:r=rI;break;default:r=Vg}r=EM(r,xM.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function xM(e,t){if($g=-1,Rg=0,dr&6)throw Error(ot(327));var r=e.callbackNode;if(Uc()&&e.callbackNode!==r)return null;var n=qg(e,e===Hn?oi:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ly(e,n);else{t=n;var s=dr;dr|=2;var c=wM();(Hn!==e||oi!==t)&&(ts=null,eh=Tn()+500,su(e,t));do try{_R();break}catch(l){bM(e,l)}while(!0);l1(),ay.current=c,dr=s,An!==null?t=0:(Hn=null,oi=0,t=jn)}if(t!==0){if(t===2&&(s=N0(e),s!==0&&(n=s,t=db(e,s))),t===1)throw r=Kd,su(e,0),rl(e,n),Qi(e,Tn()),r;if(t===6)rl(e,n);else{if(s=e.current.alternate,!(n&30)&&!yR(s)&&(t=ly(e,n),t===2&&(c=N0(e),c!==0&&(n=c,t=db(e,c))),t===1))throw r=Kd,su(e,0),rl(e,n),Qi(e,Tn()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(ot(345));case 2:Xl(e,Hi,ts);break;case 3:if(rl(e,n),(n&130023424)===n&&(t=S1+500-Tn(),10<t)){if(qg(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){$i(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Z0(Xl.bind(null,e,Hi,ts),t);break}Xl(e,Hi,ts);break;case 4:if(rl(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var d=31-io(n);c=1<<d,d=t[d],d>s&&(s=d),n&=~c}if(n=s,n=Tn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*gR(n/1960))-n,10<n){e.timeoutHandle=Z0(Xl.bind(null,e,Hi,ts),n);break}Xl(e,Hi,ts);break;case 5:Xl(e,Hi,ts);break;default:throw Error(ot(329))}}}return Qi(e,Tn()),e.callbackNode===r?xM.bind(null,e):null}function db(e,t){var r=Ed;return e.current.memoizedState.isDehydrated&&(su(e,t).flags|=256),e=ly(e,t),e!==2&&(t=Hi,Hi=r,t!==null&&pb(t)),e}function pb(e){Hi===null?Hi=e:Hi.push.apply(Hi,e)}function yR(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],c=s.getSnapshot;s=s.value;try{if(!so(c(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rl(e,t){for(t&=~w1,t&=~vv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-io(t),n=1<<r;e[r]=-1,t&=~n}}function TP(e){if(dr&6)throw Error(ot(327));Uc();var t=qg(e,0);if(!(t&1))return Qi(e,Tn()),null;var r=ly(e,t);if(e.tag!==0&&r===2){var n=N0(e);n!==0&&(t=n,r=db(e,n))}if(r===1)throw r=Kd,su(e,0),rl(e,t),Qi(e,Tn()),r;if(r===6)throw Error(ot(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xl(e,Hi,ts),Qi(e,Tn()),null}function T1(e,t){var r=dr;dr|=1;try{return e(t)}finally{dr=r,dr===0&&(eh=Tn()+500,pv&&bl())}}function yu(e){al!==null&&al.tag===0&&!(dr&6)&&Uc();var t=dr;dr|=1;var r=Ma.transition,n=Pr;try{if(Ma.transition=null,Pr=1,e)return e()}finally{Pr=n,Ma.transition=r,dr=t,!(dr&6)&&bl()}}function P1(){oa=zc.current,Kr(zc)}function su(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Z3(r)),An!==null)for(r=An.return;r!==null;){var n=r;switch(a1(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Kg();break;case 3:Jc(),Kr(Yi),Kr(wi),p1();break;case 5:d1(n);break;case 4:Jc();break;case 13:Kr(on);break;case 19:Kr(on);break;case 10:u1(n.type._context);break;case 22:case 23:P1()}r=r.return}if(Hn=e,An=e=pl(e.current,null),oi=oa=t,jn=0,Kd=null,w1=vv=gu=0,Hi=Ed=null,tu!==null){for(t=0;t<tu.length;t++)if(r=tu[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,c=r.pending;if(c!==null){var d=c.next;c.next=s,n.next=d}r.pending=n}tu=null}return e}function bM(e,t){do{var r=An;try{if(l1(),Dg.current=iy,ny){for(var n=sn.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ny=!1}if(mu=0,Wn=Ln=sn=null,Pd=!1,Wd=0,b1.current=null,r===null||r.return===null){jn=1,Kd=t,An=null;break}e:{var c=e,d=r.return,l=r,v=t;if(t=oi,l.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var b=v,S=l,P=S.tag;if(!(S.mode&1)&&(P===0||P===11||P===15)){var k=S.alternate;k?(S.updateQueue=k.updateQueue,S.memoizedState=k.memoizedState,S.lanes=k.lanes):(S.updateQueue=null,S.memoizedState=null)}var z=hP(d);if(z!==null){z.flags&=-257,fP(z,d,l,c,t),z.mode&1&&cP(c,b,t),t=z,v=b;var B=t.updateQueue;if(B===null){var j=new Set;j.add(v),t.updateQueue=j}else B.add(v);break e}else{if(!(t&1)){cP(c,b,t),A1();break e}v=Error(ot(426))}}else if(en&&l.mode&1){var V=hP(d);if(V!==null){!(V.flags&65536)&&(V.flags|=256),fP(V,d,l,c,t),o1(Qc(v,l));break e}}c=v=Qc(v,l),jn!==4&&(jn=2),Ed===null?Ed=[c]:Ed.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var D=iM(c,v,t);iP(c,D);break e;case 1:l=v;var R=c.type,F=c.stateNode;if(!(c.flags&128)&&(typeof R.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(fl===null||!fl.has(F)))){c.flags|=65536,t&=-t,c.lanes|=t;var X=aM(c,l,t);iP(c,X);break e}}c=c.return}while(c!==null)}TM(r)}catch(q){t=q,An===r&&r!==null&&(An=r=r.return);continue}break}while(!0)}function wM(){var e=ay.current;return ay.current=iy,e===null?iy:e}function A1(){(jn===0||jn===3||jn===2)&&(jn=4),Hn===null||!(gu&268435455)&&!(vv&268435455)||rl(Hn,oi)}function ly(e,t){var r=dr;dr|=2;var n=wM();(Hn!==e||oi!==t)&&(ts=null,su(e,t));do try{vR();break}catch(s){bM(e,s)}while(!0);if(l1(),dr=r,ay.current=n,An!==null)throw Error(ot(261));return Hn=null,oi=0,jn}function vR(){for(;An!==null;)SM(An)}function _R(){for(;An!==null&&!q$();)SM(An)}function SM(e){var t=AM(e.alternate,e,oa);e.memoizedProps=e.pendingProps,t===null?TM(e):An=t,b1.current=null}function TM(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=fR(r,t),r!==null){r.flags&=32767,An=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{jn=6,An=null;return}}else if(r=hR(r,t,oa),r!==null){An=r;return}if(t=t.sibling,t!==null){An=t;return}An=t=e}while(t!==null);jn===0&&(jn=5)}function Xl(e,t,r){var n=Pr,s=Ma.transition;try{Ma.transition=null,Pr=1,xR(e,t,r,n)}finally{Ma.transition=s,Pr=n}return null}function xR(e,t,r,n){do Uc();while(al!==null);if(dr&6)throw Error(ot(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ot(177));e.callbackNode=null,e.callbackPriority=0;var c=r.lanes|r.childLanes;if(e3(e,c),e===Hn&&(An=Hn=null,oi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||fg||(fg=!0,EM(Vg,function(){return Uc(),null})),c=(r.flags&15990)!==0,r.subtreeFlags&15990||c){c=Ma.transition,Ma.transition=null;var d=Pr;Pr=1;var l=dr;dr|=4,b1.current=null,pR(e,r),vM(r,e),B3(G0),Gg=!!q0,G0=q0=null,e.current=r,mR(r),G$(),dr=l,Pr=d,Ma.transition=c}else e.current=r;if(fg&&(fg=!1,al=e,sy=s),c=e.pendingLanes,c===0&&(fl=null),H$(r.stateNode),Qi(e,Tn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(oy)throw oy=!1,e=hb,hb=null,e;return sy&1&&e.tag!==0&&Uc(),c=e.pendingLanes,c&1?e===fb?Cd++:(Cd=0,fb=e):Cd=0,bl(),null}function Uc(){if(al!==null){var e=iI(sy),t=Ma.transition,r=Pr;try{if(Ma.transition=null,Pr=16>e?16:e,al===null)var n=!1;else{if(e=al,al=null,sy=0,dr&6)throw Error(ot(331));var s=dr;for(dr|=4,Et=e.current;Et!==null;){var c=Et,d=c.child;if(Et.flags&16){var l=c.deletions;if(l!==null){for(var v=0;v<l.length;v++){var b=l[v];for(Et=b;Et!==null;){var S=Et;switch(S.tag){case 0:case 11:case 15:Ad(8,S,c)}var P=S.child;if(P!==null)P.return=S,Et=P;else for(;Et!==null;){S=Et;var k=S.sibling,z=S.return;if(mM(S),S===b){Et=null;break}if(k!==null){k.return=z,Et=k;break}Et=z}}}var B=c.alternate;if(B!==null){var j=B.child;if(j!==null){B.child=null;do{var V=j.sibling;j.sibling=null,j=V}while(j!==null)}}Et=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,Et=d;else e:for(;Et!==null;){if(c=Et,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Ad(9,c,c.return)}var D=c.sibling;if(D!==null){D.return=c.return,Et=D;break e}Et=c.return}}var R=e.current;for(Et=R;Et!==null;){d=Et;var F=d.child;if(d.subtreeFlags&2064&&F!==null)F.return=d,Et=F;else e:for(d=R;Et!==null;){if(l=Et,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yv(9,l)}}catch(q){dn(l,l.return,q)}if(l===d){Et=null;break e}var X=l.sibling;if(X!==null){X.return=l.return,Et=X;break e}Et=l.return}}if(dr=s,bl(),Eo&&typeof Eo.onPostCommitFiberRoot=="function")try{Eo.onPostCommitFiberRoot(uv,e)}catch{}n=!0}return n}finally{Pr=r,Ma.transition=t}}return!1}function PP(e,t,r){t=Qc(r,t),t=iM(e,t,1),e=hl(e,t,1),t=$i(),e!==null&&(Op(e,1,t),Qi(e,t))}function dn(e,t,r){if(e.tag===3)PP(e,e,r);else for(;t!==null;){if(t.tag===3){PP(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(fl===null||!fl.has(n))){e=Qc(r,e),e=aM(t,e,1),t=hl(t,e,1),e=$i(),t!==null&&(Op(t,1,e),Qi(t,e));break}}t=t.return}}function bR(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=$i(),e.pingedLanes|=e.suspendedLanes&r,Hn===e&&(oi&r)===r&&(jn===4||jn===3&&(oi&130023424)===oi&&500>Tn()-S1?su(e,0):w1|=r),Qi(e,t)}function PM(e,t){t===0&&(e.mode&1?(t=rg,rg<<=1,!(rg&130023424)&&(rg=4194304)):t=1);var r=$i();e=ps(e,t),e!==null&&(Op(e,t,r),Qi(e,r))}function wR(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),PM(e,r)}function SR(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ot(314))}n!==null&&n.delete(t),PM(e,r)}var AM;AM=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Yi.current)Ki=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ki=!1,cR(e,t,r);Ki=!!(e.flags&131072)}else Ki=!1,en&&t.flags&1048576&&II(t,Jg,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;jg(e,t),e=t.pendingProps;var s=Kc(t,wi.current);Fc(t,r),s=g1(null,t,n,e,s,r);var c=y1();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ji(n)?(c=!0,Xg(t)):c=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,h1(t),s.updater=gv,t.stateNode=s,s._reactInternals=t,eb(t,n,e,r),t=nb(null,t,n,!0,c,r)):(t.tag=0,en&&c&&i1(t),Li(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(jg(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=PR(n),e=Ja(n,e),s){case 0:t=rb(null,t,n,e,r);break e;case 1:t=mP(null,t,n,e,r);break e;case 11:t=dP(null,t,n,e,r);break e;case 14:t=pP(null,t,n,Ja(n.type,e),r);break e}throw Error(ot(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ja(n,s),rb(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ja(n,s),mP(e,t,n,s,r);case 3:e:{if(uM(t),e===null)throw Error(ot(387));n=t.pendingProps,c=t.memoizedState,s=c.element,jI(e,t),ty(t,n,null,r);var d=t.memoizedState;if(n=d.element,c.isDehydrated)if(c={element:n,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){s=Qc(Error(ot(423)),t),t=gP(e,t,n,r,s);break e}else if(n!==s){s=Qc(Error(ot(424)),t),t=gP(e,t,n,r,s);break e}else for(ua=cl(t.stateNode.containerInfo.firstChild),ca=t,en=!0,to=null,r=DI(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xc(),n===s){t=ms(e,t,r);break e}Li(e,t,n,r)}t=t.child}return t;case 5:return $I(t),e===null&&Y0(t),n=t.type,s=t.pendingProps,c=e!==null?e.memoizedProps:null,d=s.children,W0(n,s)?d=null:c!==null&&W0(n,c)&&(t.flags|=32),lM(e,t),Li(e,t,d,r),t.child;case 6:return e===null&&Y0(t),null;case 13:return cM(e,t,r);case 4:return f1(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Yc(t,null,n,r):Li(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ja(n,s),dP(e,t,n,s,r);case 7:return Li(e,t,t.pendingProps,r),t.child;case 8:return Li(e,t,t.pendingProps.children,r),t.child;case 12:return Li(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,c=t.memoizedProps,d=s.value,Br(Qg,n._currentValue),n._currentValue=d,c!==null)if(so(c.value,d)){if(c.children===s.children&&!Yi.current){t=ms(e,t,r);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var l=c.dependencies;if(l!==null){d=c.child;for(var v=l.firstContext;v!==null;){if(v.context===n){if(c.tag===1){v=ls(-1,r&-r),v.tag=2;var b=c.updateQueue;if(b!==null){b=b.shared;var S=b.pending;S===null?v.next=v:(v.next=S.next,S.next=v),b.pending=v}}c.lanes|=r,v=c.alternate,v!==null&&(v.lanes|=r),J0(c.return,r,t),l.lanes|=r;break}v=v.next}}else if(c.tag===10)d=c.type===t.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(ot(341));d.lanes|=r,l=d.alternate,l!==null&&(l.lanes|=r),J0(d,r,t),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===t){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Li(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Fc(t,r),s=za(s),n=n(s),t.flags|=1,Li(e,t,n,r),t.child;case 14:return n=t.type,s=Ja(n,t.pendingProps),s=Ja(n.type,s),pP(e,t,n,s,r);case 15:return oM(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ja(n,s),jg(e,t),t.tag=1,Ji(n)?(e=!0,Xg(t)):e=!1,Fc(t,r),nM(t,n,s),eb(t,n,s,r),nb(null,t,n,!0,e,r);case 19:return hM(e,t,r);case 22:return sM(e,t,r)}throw Error(ot(156,t.tag))};function EM(e,t){return eI(e,t)}function TR(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ka(e,t,r,n){return new TR(e,t,r,n)}function E1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function PR(e){if(typeof e=="function")return E1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ww)return 11;if(e===Zw)return 14}return 2}function pl(e,t){var r=e.alternate;return r===null?(r=ka(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ng(e,t,r,n,s,c){var d=2;if(n=e,typeof e=="function")E1(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Sc:return lu(r.children,s,c,t);case Gw:d=8,s|=8;break;case T0:return e=ka(12,r,t,s|2),e.elementType=T0,e.lanes=c,e;case P0:return e=ka(13,r,t,s),e.elementType=P0,e.lanes=c,e;case A0:return e=ka(19,r,t,s),e.elementType=A0,e.lanes=c,e;case $k:return _v(r,s,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Lk:d=10;break e;case jk:d=9;break e;case Ww:d=11;break e;case Zw:d=14;break e;case Js:d=16,n=null;break e}throw Error(ot(130,e==null?e:typeof e,""))}return t=ka(d,r,t,s),t.elementType=e,t.type=n,t.lanes=c,t}function lu(e,t,r,n){return e=ka(7,e,n,t),e.lanes=r,e}function _v(e,t,r,n){return e=ka(22,e,n,t),e.elementType=$k,e.lanes=r,e.stateNode={isHidden:!1},e}function qx(e,t,r){return e=ka(6,e,null,t),e.lanes=r,e}function Gx(e,t,r){return t=ka(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function AR(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Px(0),this.expirationTimes=Px(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Px(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function C1(e,t,r,n,s,c,d,l,v){return e=new AR(e,t,r,l,v),t===1?(t=1,c===!0&&(t|=8)):t=0,c=ka(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},h1(c),e}function ER(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wc,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function CM(e){if(!e)return yl;e=e._reactInternals;e:{if(Tu(e)!==e||e.tag!==1)throw Error(ot(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ji(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ot(171))}if(e.tag===1){var r=e.type;if(Ji(r))return CI(e,r,t)}return t}function kM(e,t,r,n,s,c,d,l,v){return e=C1(r,n,!0,e,s,c,d,l,v),e.context=CM(null),r=e.current,n=$i(),s=dl(r),c=ls(n,s),c.callback=t??null,hl(r,c,s),e.current.lanes=s,Op(e,s,n),Qi(e,n),e}function xv(e,t,r,n){var s=t.current,c=$i(),d=dl(s);return r=CM(r),t.context===null?t.context=r:t.pendingContext=r,t=ls(c,d),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=hl(s,t,d),e!==null&&(ao(e,s,d,c),zg(e,s,d)),d}function uy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function AP(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function k1(e,t){AP(e,t),(e=e.alternate)&&AP(e,t)}function CR(){return null}var IM=typeof reportError=="function"?reportError:function(e){console.error(e)};function I1(e){this._internalRoot=e}bv.prototype.render=I1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ot(409));xv(e,t,null,null)};bv.prototype.unmount=I1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yu(function(){xv(null,e,null,null)}),t[ds]=null}};function bv(e){this._internalRoot=e}bv.prototype.unstable_scheduleHydration=function(e){if(e){var t=sI();e={blockedOn:null,target:e,priority:t};for(var r=0;r<tl.length&&t!==0&&t<tl[r].priority;r++);tl.splice(r,0,e),r===0&&uI(e)}};function M1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function EP(){}function kR(e,t,r,n,s){if(s){if(typeof n=="function"){var c=n;n=function(){var b=uy(d);c.call(b)}}var d=kM(t,n,e,0,null,!1,!1,"",EP);return e._reactRootContainer=d,e[ds]=d.current,Fd(e.nodeType===8?e.parentNode:e),yu(),d}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var b=uy(v);l.call(b)}}var v=C1(e,0,!1,null,null,!1,!1,"",EP);return e._reactRootContainer=v,e[ds]=v.current,Fd(e.nodeType===8?e.parentNode:e),yu(function(){xv(t,v,r,n)}),v}function Sv(e,t,r,n,s){var c=r._reactRootContainer;if(c){var d=c;if(typeof s=="function"){var l=s;s=function(){var v=uy(d);l.call(v)}}xv(t,d,e,s)}else d=kR(r,t,e,s,n);return uy(d)}aI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=gd(t.pendingLanes);r!==0&&(Xw(t,r|1),Qi(t,Tn()),!(dr&6)&&(eh=Tn()+500,bl()))}break;case 13:yu(function(){var n=ps(e,1);if(n!==null){var s=$i();ao(n,e,1,s)}}),k1(e,1)}};Yw=function(e){if(e.tag===13){var t=ps(e,134217728);if(t!==null){var r=$i();ao(t,e,134217728,r)}k1(e,134217728)}};oI=function(e){if(e.tag===13){var t=dl(e),r=ps(e,t);if(r!==null){var n=$i();ao(r,e,t,n)}k1(e,t)}};sI=function(){return Pr};lI=function(e,t){var r=Pr;try{return Pr=e,t()}finally{Pr=r}};j0=function(e,t,r){switch(t){case"input":if(k0(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=dv(n);if(!s)throw Error(ot(90));Nk(n),k0(n,s)}}}break;case"textarea":Fk(e,r);break;case"select":t=r.value,t!=null&&$c(e,!!r.multiple,t,!1)}};Hk=T1;Kk=yu;var IR={usingClientEntryPoint:!1,Events:[Dp,Ec,dv,Wk,Zk,T1]},Qf={findFiberByHostInstance:eu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MR={bundleType:Qf.bundleType,version:Qf.version,rendererPackageName:Qf.rendererPackageName,rendererConfig:Qf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_s.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Jk(e),e===null?null:e.stateNode},findFiberByHostInstance:Qf.findFiberByHostInstance||CR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dg.isDisabled&&dg.supportsFiber)try{uv=dg.inject(MR),Eo=dg}catch{}}fa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IR;fa.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!M1(t))throw Error(ot(200));return ER(e,t,null,r)};fa.createRoot=function(e,t){if(!M1(e))throw Error(ot(299));var r=!1,n="",s=IM;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=C1(e,1,!1,null,null,r,!1,n,s),e[ds]=t.current,Fd(e.nodeType===8?e.parentNode:e),new I1(t)};fa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ot(188)):(e=Object.keys(e).join(","),Error(ot(268,e)));return e=Jk(t),e=e===null?null:e.stateNode,e};fa.flushSync=function(e){return yu(e)};fa.hydrate=function(e,t,r){if(!wv(t))throw Error(ot(200));return Sv(null,e,t,!0,r)};fa.hydrateRoot=function(e,t,r){if(!M1(e))throw Error(ot(405));var n=r!=null&&r.hydratedSources||null,s=!1,c="",d=IM;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),t=kM(t,null,e,1,r??null,s,!1,c,d),e[ds]=t.current,Fd(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new bv(t)};fa.render=function(e,t,r){if(!wv(t))throw Error(ot(200));return Sv(null,e,t,!1,r)};fa.unmountComponentAtNode=function(e){if(!wv(e))throw Error(ot(40));return e._reactRootContainer?(yu(function(){Sv(null,null,e,!1,function(){e._reactRootContainer=null,e[ds]=null})}),!0):!1};fa.unstable_batchedUpdates=T1;fa.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!wv(r))throw Error(ot(200));if(e==null||e._reactInternals===void 0)throw Error(ot(38));return Sv(e,t,r,!1,n)};fa.version="18.3.1-next-f1338f8080-20240426";function MM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MM)}catch(e){console.error(e)}}MM(),Mk.exports=fa;var OR=Mk.exports,CP=OR;w0.createRoot=CP.createRoot,w0.hydrateRoot=CP.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Pu=(e,t)=>{const r=$e.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:l="",children:v,...b},S)=>$e.createElement("svg",{ref:S,...zR,width:s,height:s,stroke:n,strokeWidth:d?Number(c)*24/Number(s):c,className:["lucide",`lucide-${DR(e)}`,l].join(" "),...b},[...t.map(([P,k])=>$e.createElement(P,k)),...Array.isArray(v)?v:[v]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=Pu("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=Pu("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=Pu("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=Pu("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=Pu("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Pu("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=Pu("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function OM(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=OM(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function gr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=OM(e))&&(n&&(n+=" "),n+=t);return n}const O1="-",BR=e=>{const t=UR(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:d=>{const l=d.split(O1);return l[0]===""&&l.length!==1&&l.shift(),zM(l,t)||FR(d)},getConflictingClassGroupIds:(d,l)=>{const v=r[d]||[];return l&&n[d]?[...v,...n[d]]:v}}},zM=(e,t)=>{var d;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?zM(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const c=e.join(O1);return(d=t.validators.find(({validator:l})=>l(c)))==null?void 0:d.classGroupId},IP=/^\[(.+)\]$/,FR=e=>{if(IP.test(e)){const t=IP.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},UR=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return qR(Object.entries(e.classGroups),r).forEach(([c,d])=>{mb(d,n,c,t)}),n},mb=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const c=s===""?t:MP(t,s);c.classGroupId=r;return}if(typeof s=="function"){if(VR(s)){mb(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([c,d])=>{mb(d,MP(t,c),r,n)})})},MP=(e,t)=>{let r=e;return t.split(O1).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},VR=e=>e.isThemeGetter,qR=(e,t)=>t?e.map(([r,n])=>{const s=n.map(c=>typeof c=="string"?t+c:typeof c=="object"?Object.fromEntries(Object.entries(c).map(([d,l])=>[t+d,l])):c);return[r,s]}):e,GR=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(c,d)=>{r.set(c,d),t++,t>e&&(t=0,n=r,r=new Map)};return{get(c){let d=r.get(c);if(d!==void 0)return d;if((d=n.get(c))!==void 0)return s(c,d),d},set(c,d){r.has(c)?r.set(c,d):s(c,d)}}},DM="!",WR=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],c=t.length,d=l=>{const v=[];let b=0,S=0,P;for(let V=0;V<l.length;V++){let D=l[V];if(b===0){if(D===s&&(n||l.slice(V,V+c)===t)){v.push(l.slice(S,V)),S=V+c;continue}if(D==="/"){P=V;continue}}D==="["?b++:D==="]"&&b--}const k=v.length===0?l:l.substring(S),z=k.startsWith(DM),B=z?k.substring(1):k,j=P&&P>S?P-S:void 0;return{modifiers:v,hasImportantModifier:z,baseClassName:B,maybePostfixModifierPosition:j}};return r?l=>r({className:l,parseClassName:d}):d},ZR=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},HR=e=>({cache:GR(e.cacheSize),parseClassName:WR(e),...BR(e)}),KR=/\s+/,XR=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,c=[],d=e.trim().split(KR);let l="";for(let v=d.length-1;v>=0;v-=1){const b=d[v],{modifiers:S,hasImportantModifier:P,baseClassName:k,maybePostfixModifierPosition:z}=r(b);let B=!!z,j=n(B?k.substring(0,z):k);if(!j){if(!B){l=b+(l.length>0?" "+l:l);continue}if(j=n(k),!j){l=b+(l.length>0?" "+l:l);continue}B=!1}const V=ZR(S).join(":"),D=P?V+DM:V,R=D+j;if(c.includes(R))continue;c.push(R);const F=s(j,B);for(let X=0;X<F.length;++X){const q=F[X];c.push(D+q)}l=b+(l.length>0?" "+l:l)}return l};function YR(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=LM(t))&&(n&&(n+=" "),n+=r);return n}const LM=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=LM(e[n]))&&(r&&(r+=" "),r+=t);return r};function JR(e,...t){let r,n,s,c=d;function d(v){const b=t.reduce((S,P)=>P(S),e());return r=HR(b),n=r.cache.get,s=r.cache.set,c=l,l(v)}function l(v){const b=n(v);if(b)return b;const S=XR(v,r);return s(v,S),S}return function(){return c(YR.apply(null,arguments))}}const Gr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},jM=/^\[(?:([a-z-]+):)?(.+)\]$/i,QR=/^\d+\/\d+$/,eN=new Set(["px","full","screen"]),tN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,nN=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aN=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Jo=e=>Vc(e)||eN.has(e)||QR.test(e),Zs=e=>Ph(e,"length",dN),Vc=e=>!!e&&!Number.isNaN(Number(e)),Wx=e=>Ph(e,"number",Vc),ed=e=>!!e&&Number.isInteger(Number(e)),oN=e=>e.endsWith("%")&&Vc(e.slice(0,-1)),er=e=>jM.test(e),Hs=e=>tN.test(e),sN=new Set(["length","size","percentage"]),lN=e=>Ph(e,sN,$M),uN=e=>Ph(e,"position",$M),cN=new Set(["image","url"]),hN=e=>Ph(e,cN,mN),fN=e=>Ph(e,"",pN),td=()=>!0,Ph=(e,t,r)=>{const n=jM.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},dN=e=>rN.test(e)&&!nN.test(e),$M=()=>!1,pN=e=>iN.test(e),mN=e=>aN.test(e),gN=()=>{const e=Gr("colors"),t=Gr("spacing"),r=Gr("blur"),n=Gr("brightness"),s=Gr("borderColor"),c=Gr("borderRadius"),d=Gr("borderSpacing"),l=Gr("borderWidth"),v=Gr("contrast"),b=Gr("grayscale"),S=Gr("hueRotate"),P=Gr("invert"),k=Gr("gap"),z=Gr("gradientColorStops"),B=Gr("gradientColorStopPositions"),j=Gr("inset"),V=Gr("margin"),D=Gr("opacity"),R=Gr("padding"),F=Gr("saturate"),X=Gr("scale"),q=Gr("sepia"),W=Gr("skew"),ee=Gr("space"),le=Gr("translate"),ve=()=>["auto","contain","none"],Pe=()=>["auto","hidden","clip","visible","scroll"],Ce=()=>["auto",er,t],Te=()=>[er,t],Fe=()=>["",Jo,Zs],Re=()=>["auto",Vc,er],Be=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],qe=()=>["solid","dashed","dotted","double","none"],Ke=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>["start","end","center","between","around","evenly","stretch"],_e=()=>["","0",er],ke=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ue=()=>[Vc,er];return{cacheSize:500,separator:":",theme:{colors:[td],spacing:[Jo,Zs],blur:["none","",Hs,er],brightness:Ue(),borderColor:[e],borderRadius:["none","","full",Hs,er],borderSpacing:Te(),borderWidth:Fe(),contrast:Ue(),grayscale:_e(),hueRotate:Ue(),invert:_e(),gap:Te(),gradientColorStops:[e],gradientColorStopPositions:[oN,Zs],inset:Ce(),margin:Ce(),opacity:Ue(),padding:Te(),saturate:Ue(),scale:Ue(),sepia:_e(),skew:Ue(),space:Te(),translate:Te()},classGroups:{aspect:[{aspect:["auto","square","video",er]}],container:["container"],columns:[{columns:[Hs]}],"break-after":[{"break-after":ke()}],"break-before":[{"break-before":ke()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Be(),er]}],overflow:[{overflow:Pe()}],"overflow-x":[{"overflow-x":Pe()}],"overflow-y":[{"overflow-y":Pe()}],overscroll:[{overscroll:ve()}],"overscroll-x":[{"overscroll-x":ve()}],"overscroll-y":[{"overscroll-y":ve()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[j]}],"inset-x":[{"inset-x":[j]}],"inset-y":[{"inset-y":[j]}],start:[{start:[j]}],end:[{end:[j]}],top:[{top:[j]}],right:[{right:[j]}],bottom:[{bottom:[j]}],left:[{left:[j]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ed,er]}],basis:[{basis:Ce()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",er]}],grow:[{grow:_e()}],shrink:[{shrink:_e()}],order:[{order:["first","last","none",ed,er]}],"grid-cols":[{"grid-cols":[td]}],"col-start-end":[{col:["auto",{span:["full",ed,er]},er]}],"col-start":[{"col-start":Re()}],"col-end":[{"col-end":Re()}],"grid-rows":[{"grid-rows":[td]}],"row-start-end":[{row:["auto",{span:[ed,er]},er]}],"row-start":[{"row-start":Re()}],"row-end":[{"row-end":Re()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",er]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",er]}],gap:[{gap:[k]}],"gap-x":[{"gap-x":[k]}],"gap-y":[{"gap-y":[k]}],"justify-content":[{justify:["normal",...ce()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ce(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ce(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[R]}],px:[{px:[R]}],py:[{py:[R]}],ps:[{ps:[R]}],pe:[{pe:[R]}],pt:[{pt:[R]}],pr:[{pr:[R]}],pb:[{pb:[R]}],pl:[{pl:[R]}],m:[{m:[V]}],mx:[{mx:[V]}],my:[{my:[V]}],ms:[{ms:[V]}],me:[{me:[V]}],mt:[{mt:[V]}],mr:[{mr:[V]}],mb:[{mb:[V]}],ml:[{ml:[V]}],"space-x":[{"space-x":[ee]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[ee]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",er,t]}],"min-w":[{"min-w":[er,t,"min","max","fit"]}],"max-w":[{"max-w":[er,t,"none","full","min","max","fit","prose",{screen:[Hs]},Hs]}],h:[{h:[er,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[er,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[er,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[er,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Hs,Zs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wx]}],"font-family":[{font:[td]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",er]}],"line-clamp":[{"line-clamp":["none",Vc,Wx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Jo,er]}],"list-image":[{"list-image":["none",er]}],"list-style-type":[{list:["none","disc","decimal",er]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[D]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[D]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...qe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Jo,Zs]}],"underline-offset":[{"underline-offset":["auto",Jo,er]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Te()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",er]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",er]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[D]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Be(),uN]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",lN]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},hN]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[B]}],"gradient-via-pos":[{via:[B]}],"gradient-to-pos":[{to:[B]}],"gradient-from":[{from:[z]}],"gradient-via":[{via:[z]}],"gradient-to":[{to:[z]}],rounded:[{rounded:[c]}],"rounded-s":[{"rounded-s":[c]}],"rounded-e":[{"rounded-e":[c]}],"rounded-t":[{"rounded-t":[c]}],"rounded-r":[{"rounded-r":[c]}],"rounded-b":[{"rounded-b":[c]}],"rounded-l":[{"rounded-l":[c]}],"rounded-ss":[{"rounded-ss":[c]}],"rounded-se":[{"rounded-se":[c]}],"rounded-ee":[{"rounded-ee":[c]}],"rounded-es":[{"rounded-es":[c]}],"rounded-tl":[{"rounded-tl":[c]}],"rounded-tr":[{"rounded-tr":[c]}],"rounded-br":[{"rounded-br":[c]}],"rounded-bl":[{"rounded-bl":[c]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[D]}],"border-style":[{border:[...qe(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[D]}],"divide-style":[{divide:qe()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...qe()]}],"outline-offset":[{"outline-offset":[Jo,er]}],"outline-w":[{outline:[Jo,Zs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[D]}],"ring-offset-w":[{"ring-offset":[Jo,Zs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Hs,fN]}],"shadow-color":[{shadow:[td]}],opacity:[{opacity:[D]}],"mix-blend":[{"mix-blend":[...Ke(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ke()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[v]}],"drop-shadow":[{"drop-shadow":["","none",Hs,er]}],grayscale:[{grayscale:[b]}],"hue-rotate":[{"hue-rotate":[S]}],invert:[{invert:[P]}],saturate:[{saturate:[F]}],sepia:[{sepia:[q]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[v]}],"backdrop-grayscale":[{"backdrop-grayscale":[b]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[S]}],"backdrop-invert":[{"backdrop-invert":[P]}],"backdrop-opacity":[{"backdrop-opacity":[D]}],"backdrop-saturate":[{"backdrop-saturate":[F]}],"backdrop-sepia":[{"backdrop-sepia":[q]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[d]}],"border-spacing-x":[{"border-spacing-x":[d]}],"border-spacing-y":[{"border-spacing-y":[d]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",er]}],duration:[{duration:Ue()}],ease:[{ease:["linear","in","out","in-out",er]}],delay:[{delay:Ue()}],animate:[{animate:["none","spin","ping","pulse","bounce",er]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[X]}],"scale-x":[{"scale-x":[X]}],"scale-y":[{"scale-y":[X]}],rotate:[{rotate:[ed,er]}],"translate-x":[{"translate-x":[le]}],"translate-y":[{"translate-y":[le]}],"skew-x":[{"skew-x":[W]}],"skew-y":[{"skew-y":[W]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",er]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",er]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Te()}],"scroll-mx":[{"scroll-mx":Te()}],"scroll-my":[{"scroll-my":Te()}],"scroll-ms":[{"scroll-ms":Te()}],"scroll-me":[{"scroll-me":Te()}],"scroll-mt":[{"scroll-mt":Te()}],"scroll-mr":[{"scroll-mr":Te()}],"scroll-mb":[{"scroll-mb":Te()}],"scroll-ml":[{"scroll-ml":Te()}],"scroll-p":[{"scroll-p":Te()}],"scroll-px":[{"scroll-px":Te()}],"scroll-py":[{"scroll-py":Te()}],"scroll-ps":[{"scroll-ps":Te()}],"scroll-pe":[{"scroll-pe":Te()}],"scroll-pt":[{"scroll-pt":Te()}],"scroll-pr":[{"scroll-pr":Te()}],"scroll-pb":[{"scroll-pb":Te()}],"scroll-pl":[{"scroll-pl":Te()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",er]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Jo,Zs,Wx]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},yN=JR(gN);function Au(...e){return yN(gr(e))}const Di=$e.forwardRef(({className:e,variant:t="default",size:r="default",...n},s)=>J.jsx("button",{className:Au("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t==="default"&&"bg-blue-600 text-white hover:bg-blue-700",t==="outline"&&"border border-gray-300 bg-white hover:bg-gray-50",t==="ghost"&&"hover:bg-gray-100",r==="default"&&"h-10 px-4 py-2",r==="sm"&&"h-9 rounded-md px-3",r==="lg"&&"h-11 rounded-md px-8",e),ref:s,...n}));Di.displayName="Button";const vd=$e.forwardRef(({className:e,type:t,...r},n)=>J.jsx("input",{type:t,className:Au("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));vd.displayName="Input";const cy=$e.forwardRef(({className:e,children:t,...r},n)=>J.jsx("select",{className:Au("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r,children:t}));cy.displayName="Select";const RM=$e.forwardRef(({className:e,value:t,onValueChange:r,min:n=0,max:s=100,step:c=1,...d},l)=>J.jsx("input",{type:"range",ref:l,value:t,min:n,max:s,step:c,onChange:v=>r==null?void 0:r(Number(v.target.value)),className:Au("hazard-slider w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600","[&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:border [&::-webkit-slider-thumb]:border-gray-300 [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:shadow-md","[&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-blue-600 [&::-moz-range-thumb]:border [&::-moz-range-thumb]:border-gray-300 [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:shadow-md",e),style:{background:`linear-gradient(to right, rgb(37, 99, 235) 0%, rgb(37, 99, 235) ${((t||0)-(n||0))/((s||100)-(n||0))*100}%, rgb(229, 231, 235) ${((t||0)-(n||0))/((s||100)-(n||0))*100}%, rgb(229, 231, 235) 100%)`},...d}));RM.displayName="Slider";const Ks=({open:e,onOpenChange:t,children:r})=>e?J.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[J.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>t(!1)}),J.jsx("div",{className:"relative z-50 w-full max-w-lg mx-4",children:r})]}):null,es=$e.forwardRef(({className:e,children:t,onClose:r,...n},s)=>J.jsxs("div",{ref:s,className:Au("bg-white rounded-lg shadow-lg p-6 max-h-[90vh] overflow-y-auto",e),...n,children:[r&&J.jsx(Di,{variant:"ghost",size:"sm",className:"absolute top-4 right-4",onClick:r,children:J.jsx(NR,{className:"h-4 w-4"})}),t]}));es.displayName="DialogContent";const Xs=({children:e,className:t,...r})=>J.jsx("div",{className:Au("flex flex-col space-y-1.5 mb-4",t),...r,children:e}),Ys=({children:e,className:t,...r})=>J.jsx("h2",{className:Au("text-xl font-semibold",t),...r,children:e});var vN=Array.isArray,ea=vN,_N=typeof dd=="object"&&dd&&dd.Object===Object&&dd,NM=_N,xN=NM,bN=typeof self=="object"&&self&&self.Object===Object&&self,wN=xN||bN||Function("return this")(),zo=wN,SN=zo,TN=SN.Symbol,jp=TN,OP=jp,BM=Object.prototype,PN=BM.hasOwnProperty,AN=BM.toString,rd=OP?OP.toStringTag:void 0;function EN(e){var t=PN.call(e,rd),r=e[rd];try{e[rd]=void 0;var n=!0}catch{}var s=AN.call(e);return n&&(t?e[rd]=r:delete e[rd]),s}var CN=EN,kN=Object.prototype,IN=kN.toString;function MN(e){return IN.call(e)}var ON=MN,zP=jp,zN=CN,DN=ON,LN="[object Null]",jN="[object Undefined]",DP=zP?zP.toStringTag:void 0;function $N(e){return e==null?e===void 0?jN:LN:DP&&DP in Object(e)?zN(e):DN(e)}var xs=$N;function RN(e){return e!=null&&typeof e=="object"}var bs=RN,NN=xs,BN=bs,FN="[object Symbol]";function UN(e){return typeof e=="symbol"||BN(e)&&NN(e)==FN}var Ah=UN,VN=ea,qN=Ah,GN=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,WN=/^\w*$/;function ZN(e,t){if(VN(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||qN(e)?!0:WN.test(e)||!GN.test(e)||t!=null&&e in Object(t)}var z1=ZN;function HN(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var wl=HN;const Eh=Mr(wl);var KN=xs,XN=wl,YN="[object AsyncFunction]",JN="[object Function]",QN="[object GeneratorFunction]",eB="[object Proxy]";function tB(e){if(!XN(e))return!1;var t=KN(e);return t==JN||t==QN||t==YN||t==eB}var D1=tB;const or=Mr(D1);var rB=zo,nB=rB["__core-js_shared__"],iB=nB,Zx=iB,LP=function(){var e=/[^.]+$/.exec(Zx&&Zx.keys&&Zx.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function aB(e){return!!LP&&LP in e}var oB=aB,sB=Function.prototype,lB=sB.toString;function uB(e){if(e!=null){try{return lB.call(e)}catch{}try{return e+""}catch{}}return""}var FM=uB,cB=D1,hB=oB,fB=wl,dB=FM,pB=/[\\^$.*+?()[\]{}|]/g,mB=/^\[object .+?Constructor\]$/,gB=Function.prototype,yB=Object.prototype,vB=gB.toString,_B=yB.hasOwnProperty,xB=RegExp("^"+vB.call(_B).replace(pB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bB(e){if(!fB(e)||hB(e))return!1;var t=cB(e)?xB:mB;return t.test(dB(e))}var wB=bB;function SB(e,t){return e==null?void 0:e[t]}var TB=SB,PB=wB,AB=TB;function EB(e,t){var r=AB(e,t);return PB(r)?r:void 0}var Eu=EB,CB=Eu,kB=CB(Object,"create"),Tv=kB,jP=Tv;function IB(){this.__data__=jP?jP(null):{},this.size=0}var MB=IB;function OB(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var zB=OB,DB=Tv,LB="__lodash_hash_undefined__",jB=Object.prototype,$B=jB.hasOwnProperty;function RB(e){var t=this.__data__;if(DB){var r=t[e];return r===LB?void 0:r}return $B.call(t,e)?t[e]:void 0}var NB=RB,BB=Tv,FB=Object.prototype,UB=FB.hasOwnProperty;function VB(e){var t=this.__data__;return BB?t[e]!==void 0:UB.call(t,e)}var qB=VB,GB=Tv,WB="__lodash_hash_undefined__";function ZB(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=GB&&t===void 0?WB:t,this}var HB=ZB,KB=MB,XB=zB,YB=NB,JB=qB,QB=HB;function Ch(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ch.prototype.clear=KB;Ch.prototype.delete=XB;Ch.prototype.get=YB;Ch.prototype.has=JB;Ch.prototype.set=QB;var e5=Ch;function t5(){this.__data__=[],this.size=0}var r5=t5;function n5(e,t){return e===t||e!==e&&t!==t}var L1=n5,i5=L1;function a5(e,t){for(var r=e.length;r--;)if(i5(e[r][0],t))return r;return-1}var Pv=a5,o5=Pv,s5=Array.prototype,l5=s5.splice;function u5(e){var t=this.__data__,r=o5(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():l5.call(t,r,1),--this.size,!0}var c5=u5,h5=Pv;function f5(e){var t=this.__data__,r=h5(t,e);return r<0?void 0:t[r][1]}var d5=f5,p5=Pv;function m5(e){return p5(this.__data__,e)>-1}var g5=m5,y5=Pv;function v5(e,t){var r=this.__data__,n=y5(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _5=v5,x5=r5,b5=c5,w5=d5,S5=g5,T5=_5;function kh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}kh.prototype.clear=x5;kh.prototype.delete=b5;kh.prototype.get=w5;kh.prototype.has=S5;kh.prototype.set=T5;var Av=kh,P5=Eu,A5=zo,E5=P5(A5,"Map"),j1=E5,$P=e5,C5=Av,k5=j1;function I5(){this.size=0,this.__data__={hash:new $P,map:new(k5||C5),string:new $P}}var M5=I5;function O5(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var z5=O5,D5=z5;function L5(e,t){var r=e.__data__;return D5(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Ev=L5,j5=Ev;function $5(e){var t=j5(this,e).delete(e);return this.size-=t?1:0,t}var R5=$5,N5=Ev;function B5(e){return N5(this,e).get(e)}var F5=B5,U5=Ev;function V5(e){return U5(this,e).has(e)}var q5=V5,G5=Ev;function W5(e,t){var r=G5(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Z5=W5,H5=M5,K5=R5,X5=F5,Y5=q5,J5=Z5;function Ih(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ih.prototype.clear=H5;Ih.prototype.delete=K5;Ih.prototype.get=X5;Ih.prototype.has=Y5;Ih.prototype.set=J5;var $1=Ih,UM=$1,Q5="Expected a function";function R1(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Q5);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],c=r.cache;if(c.has(s))return c.get(s);var d=e.apply(this,n);return r.cache=c.set(s,d)||c,d};return r.cache=new(R1.Cache||UM),r}R1.Cache=UM;var VM=R1;const e4=Mr(VM);var t4=VM,r4=500;function n4(e){var t=t4(e,function(n){return r.size===r4&&r.clear(),n}),r=t.cache;return t}var i4=n4,a4=i4,o4=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s4=/\\(\\)?/g,l4=a4(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(o4,function(r,n,s,c){t.push(s?c.replace(s4,"$1"):n||r)}),t}),u4=l4;function c4(e,t){for(var r=-1,n=e==null?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}var N1=c4,RP=jp,h4=N1,f4=ea,d4=Ah,NP=RP?RP.prototype:void 0,BP=NP?NP.toString:void 0;function qM(e){if(typeof e=="string")return e;if(f4(e))return h4(e,qM)+"";if(d4(e))return BP?BP.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var p4=qM,m4=p4;function g4(e){return e==null?"":m4(e)}var GM=g4,y4=ea,v4=z1,_4=u4,x4=GM;function b4(e,t){return y4(e)?e:v4(e,t)?[e]:_4(x4(e))}var WM=b4,w4=Ah;function S4(e){if(typeof e=="string"||w4(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Cv=S4,T4=WM,P4=Cv;function A4(e,t){t=T4(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[P4(t[r++])];return r&&r==n?e:void 0}var B1=A4,E4=B1;function C4(e,t,r){var n=e==null?void 0:E4(e,t);return n===void 0?r:n}var ZM=C4;const Oa=Mr(ZM);function k4(e){return e==null}var I4=k4;const br=Mr(I4);var M4=xs,O4=ea,z4=bs,D4="[object String]";function L4(e){return typeof e=="string"||!O4(e)&&z4(e)&&M4(e)==D4}var j4=L4;const vu=Mr(j4);var HM={exports:{}},Ar={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F1=Symbol.for("react.element"),U1=Symbol.for("react.portal"),kv=Symbol.for("react.fragment"),Iv=Symbol.for("react.strict_mode"),Mv=Symbol.for("react.profiler"),Ov=Symbol.for("react.provider"),zv=Symbol.for("react.context"),$4=Symbol.for("react.server_context"),Dv=Symbol.for("react.forward_ref"),Lv=Symbol.for("react.suspense"),jv=Symbol.for("react.suspense_list"),$v=Symbol.for("react.memo"),Rv=Symbol.for("react.lazy"),R4=Symbol.for("react.offscreen"),KM;KM=Symbol.for("react.module.reference");function ja(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case F1:switch(e=e.type,e){case kv:case Mv:case Iv:case Lv:case jv:return e;default:switch(e=e&&e.$$typeof,e){case $4:case zv:case Dv:case Rv:case $v:case Ov:return e;default:return t}}case U1:return t}}}Ar.ContextConsumer=zv;Ar.ContextProvider=Ov;Ar.Element=F1;Ar.ForwardRef=Dv;Ar.Fragment=kv;Ar.Lazy=Rv;Ar.Memo=$v;Ar.Portal=U1;Ar.Profiler=Mv;Ar.StrictMode=Iv;Ar.Suspense=Lv;Ar.SuspenseList=jv;Ar.isAsyncMode=function(){return!1};Ar.isConcurrentMode=function(){return!1};Ar.isContextConsumer=function(e){return ja(e)===zv};Ar.isContextProvider=function(e){return ja(e)===Ov};Ar.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===F1};Ar.isForwardRef=function(e){return ja(e)===Dv};Ar.isFragment=function(e){return ja(e)===kv};Ar.isLazy=function(e){return ja(e)===Rv};Ar.isMemo=function(e){return ja(e)===$v};Ar.isPortal=function(e){return ja(e)===U1};Ar.isProfiler=function(e){return ja(e)===Mv};Ar.isStrictMode=function(e){return ja(e)===Iv};Ar.isSuspense=function(e){return ja(e)===Lv};Ar.isSuspenseList=function(e){return ja(e)===jv};Ar.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===kv||e===Mv||e===Iv||e===Lv||e===jv||e===R4||typeof e=="object"&&e!==null&&(e.$$typeof===Rv||e.$$typeof===$v||e.$$typeof===Ov||e.$$typeof===zv||e.$$typeof===Dv||e.$$typeof===KM||e.getModuleId!==void 0)};Ar.typeOf=ja;HM.exports=Ar;var N4=HM.exports,B4=xs,F4=bs,U4="[object Number]";function V4(e){return typeof e=="number"||F4(e)&&B4(e)==U4}var XM=V4;const q4=Mr(XM);var G4=XM;function W4(e){return G4(e)&&e!=+e}var Z4=W4;const $p=Mr(Z4);var no=function(t){return t===0?0:t>0?1:-1},nu=function(t){return vu(t)&&t.indexOf("%")===t.length-1},gt=function(t){return q4(t)&&!$p(t)},H4=function(t){return br(t)},$n=function(t){return gt(t)||vu(t)},K4=0,Nv=function(t){var r=++K4;return"".concat(t||"").concat(r)},_u=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!gt(t)&&!vu(t))return n;var c;if(nu(t)){var d=t.indexOf("%");c=r*parseFloat(t.slice(0,d))/100}else c=+t;return $p(c)&&(c=n),s&&c>r&&(c=r),c},nl=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},X4=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},vc=function(t,r){return gt(t)&&gt(r)?function(n){return t+n*(r-t)}:function(){return r}};function gb(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Oa(n,t))===r})}var Y4=function(t,r){return gt(t)&&gt(r)?t-r:vu(t)&&vu(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function qc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function yb(e){"@babel/helpers - typeof";return yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yb(e)}var J4=["viewBox","children"],Q4=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],FP=["points","pathLength"],Hx={svg:J4,polygon:FP,polyline:FP},V1=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],hy=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if($e.isValidElement(t)&&(n=t.props),!Eh(n))return null;var s={};return Object.keys(n).forEach(function(c){V1.includes(c)&&(s[c]=r||function(d){return n[c](n,d)})}),s},eF=function(t,r,n){return function(s){return t(r,n,s),null}},fy=function(t,r,n){if(!Eh(t)||yb(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(c){var d=t[c];V1.includes(c)&&typeof d=="function"&&(s||(s={}),s[c]=eF(d,r,n))}),s},tF=["children"],rF=["children"];function UP(e,t){if(e==null)return{};var r=nF(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nF(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var VP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},us=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},qP=null,Kx=null,q1=function e(t){if(t===qP&&Array.isArray(Kx))return Kx;var r=[];return $e.Children.forEach(t,function(n){br(n)||(N4.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Kx=r,qP=t,r};function oo(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return us(s)}):n=[us(t)],q1(e).forEach(function(s){var c=Oa(s,"type.displayName")||Oa(s,"type.name");n.indexOf(c)!==-1&&r.push(s)}),r}function sa(e,t){var r=oo(e,t);return r&&r[0]}var GP=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!gt(n)||n<=0||!gt(s)||s<=0)},iF=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],aF=function(t){return t&&t.type&&vu(t.type)&&iF.indexOf(t.type)>=0},oF=function(t,r,n,s){var c,d=(c=Hx==null?void 0:Hx[s])!==null&&c!==void 0?c:[];return r.startsWith("data-")||!or(t)&&(s&&d.includes(r)||Q4.includes(r))||n&&V1.includes(r)},xr=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if($e.isValidElement(t)&&(s=t.props),!Eh(s))return null;var c={};return Object.keys(s).forEach(function(d){var l;oF((l=s)===null||l===void 0?void 0:l[d],d,r,n)&&(c[d]=s[d])}),c},vb=function e(t,r){if(t===r)return!0;var n=$e.Children.count(t);if(n!==$e.Children.count(r))return!1;if(n===0)return!0;if(n===1)return WP(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var c=t[s],d=r[s];if(Array.isArray(c)||Array.isArray(d)){if(!e(c,d))return!1}else if(!WP(c,d))return!1}return!0},WP=function(t,r){if(br(t)&&br(r))return!0;if(!br(t)&&!br(r)){var n=t.props||{},s=n.children,c=UP(n,tF),d=r.props||{},l=d.children,v=UP(d,rF);return s&&l?qc(c,v)&&vb(s,l):!s&&!l?qc(c,v):!1}return!1},ZP=function(t,r){var n=[],s={};return q1(t).forEach(function(c,d){if(aF(c))n.push(c);else if(c){var l=us(c.type),v=r[l]||{},b=v.handler,S=v.once;if(b&&(!S||!s[l])){var P=b(c,l,d);n.push(P),s[l]=!0}}}),n},sF=function(t){var r=t&&t.type;return r&&VP[r]?VP[r]:null},lF=function(t,r){return q1(r).indexOf(t)},uF=["children","width","height","viewBox","className","style","title","desc"];function _b(){return _b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_b.apply(this,arguments)}function cF(e,t){if(e==null)return{};var r=hF(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hF(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function xb(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,c=e.className,d=e.style,l=e.title,v=e.desc,b=cF(e,uF),S=s||{width:r,height:n,x:0,y:0},P=gr("recharts-surface",c);return Me.createElement("svg",_b({},xr(b,!0,"svg"),{className:P,width:r,height:n,style:d,viewBox:"".concat(S.x," ").concat(S.y," ").concat(S.width," ").concat(S.height)}),Me.createElement("title",null,l),Me.createElement("desc",null,v),t)}var fF=["children","className"];function bb(){return bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bb.apply(this,arguments)}function dF(e,t){if(e==null)return{};var r=pF(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pF(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Zn=Me.forwardRef(function(e,t){var r=e.children,n=e.className,s=dF(e,fF),c=gr("recharts-layer",n);return Me.createElement("g",bb({className:c},xr(s,!0),{ref:t}),r)}),cs=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),c=2;c<n;c++)s[c-2]=arguments[c]};function mF(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var c=Array(s);++n<s;)c[n]=e[n+t];return c}var gF=mF,yF=gF;function vF(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:yF(e,t,r)}var _F=vF,xF="\\ud800-\\udfff",bF="\\u0300-\\u036f",wF="\\ufe20-\\ufe2f",SF="\\u20d0-\\u20ff",TF=bF+wF+SF,PF="\\ufe0e\\ufe0f",AF="\\u200d",EF=RegExp("["+AF+xF+TF+PF+"]");function CF(e){return EF.test(e)}var YM=CF;function kF(e){return e.split("")}var IF=kF,JM="\\ud800-\\udfff",MF="\\u0300-\\u036f",OF="\\ufe20-\\ufe2f",zF="\\u20d0-\\u20ff",DF=MF+OF+zF,LF="\\ufe0e\\ufe0f",jF="["+JM+"]",wb="["+DF+"]",Sb="\\ud83c[\\udffb-\\udfff]",$F="(?:"+wb+"|"+Sb+")",QM="[^"+JM+"]",eO="(?:\\ud83c[\\udde6-\\uddff]){2}",tO="[\\ud800-\\udbff][\\udc00-\\udfff]",RF="\\u200d",rO=$F+"?",nO="["+LF+"]?",NF="(?:"+RF+"(?:"+[QM,eO,tO].join("|")+")"+nO+rO+")*",BF=nO+rO+NF,FF="(?:"+[QM+wb+"?",wb,eO,tO,jF].join("|")+")",UF=RegExp(Sb+"(?="+Sb+")|"+FF+BF,"g");function VF(e){return e.match(UF)||[]}var qF=VF,GF=IF,WF=YM,ZF=qF;function HF(e){return WF(e)?ZF(e):GF(e)}var KF=HF,XF=_F,YF=YM,JF=KF,QF=GM;function e6(e){return function(t){t=QF(t);var r=YF(t)?JF(t):void 0,n=r?r[0]:t.charAt(0),s=r?XF(r,1).join(""):t.slice(1);return n[e]()+s}}var t6=e6,r6=t6,n6=r6("toUpperCase"),i6=n6;const Bv=Mr(i6);function Nr(e){return function(){return e}}const iO=Math.cos,dy=Math.sin,lo=Math.sqrt,py=Math.PI,Fv=2*py,Tb=Math.PI,Pb=2*Tb,Yl=1e-6,a6=Pb-Yl;function aO(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function o6(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return aO;const r=10**t;return function(n){this._+=n[0];for(let s=1,c=n.length;s<c;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class s6{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?aO:o6(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,c,d){this._append`C${+t},${+r},${+n},${+s},${this._x1=+c},${this._y1=+d}`}arcTo(t,r,n,s,c){if(t=+t,r=+r,n=+n,s=+s,c=+c,c<0)throw new Error(`negative radius: ${c}`);let d=this._x1,l=this._y1,v=n-t,b=s-r,S=d-t,P=l-r,k=S*S+P*P;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(k>Yl)if(!(Math.abs(P*v-b*S)>Yl)||!c)this._append`L${this._x1=t},${this._y1=r}`;else{let z=n-d,B=s-l,j=v*v+b*b,V=z*z+B*B,D=Math.sqrt(j),R=Math.sqrt(k),F=c*Math.tan((Tb-Math.acos((j+k-V)/(2*D*R)))/2),X=F/R,q=F/D;Math.abs(X-1)>Yl&&this._append`L${t+X*S},${r+X*P}`,this._append`A${c},${c},0,0,${+(P*z>S*B)},${this._x1=t+q*v},${this._y1=r+q*b}`}}arc(t,r,n,s,c,d){if(t=+t,r=+r,n=+n,d=!!d,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),v=n*Math.sin(s),b=t+l,S=r+v,P=1^d,k=d?s-c:c-s;this._x1===null?this._append`M${b},${S}`:(Math.abs(this._x1-b)>Yl||Math.abs(this._y1-S)>Yl)&&this._append`L${b},${S}`,n&&(k<0&&(k=k%Pb+Pb),k>a6?this._append`A${n},${n},0,1,${P},${t-l},${r-v}A${n},${n},0,1,${P},${this._x1=b},${this._y1=S}`:k>Yl&&this._append`A${n},${n},0,${+(k>=Tb)},${P},${this._x1=t+n*Math.cos(c)},${this._y1=r+n*Math.sin(c)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function G1(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new s6(t)}function W1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oO(e){this._context=e}oO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Uv(e){return new oO(e)}function sO(e){return e[0]}function lO(e){return e[1]}function uO(e,t){var r=Nr(!0),n=null,s=Uv,c=null,d=G1(l);e=typeof e=="function"?e:e===void 0?sO:Nr(e),t=typeof t=="function"?t:t===void 0?lO:Nr(t);function l(v){var b,S=(v=W1(v)).length,P,k=!1,z;for(n==null&&(c=s(z=d())),b=0;b<=S;++b)!(b<S&&r(P=v[b],b,v))===k&&((k=!k)?c.lineStart():c.lineEnd()),k&&c.point(+e(P,b,v),+t(P,b,v));if(z)return c=null,z+""||null}return l.x=function(v){return arguments.length?(e=typeof v=="function"?v:Nr(+v),l):e},l.y=function(v){return arguments.length?(t=typeof v=="function"?v:Nr(+v),l):t},l.defined=function(v){return arguments.length?(r=typeof v=="function"?v:Nr(!!v),l):r},l.curve=function(v){return arguments.length?(s=v,n!=null&&(c=s(n)),l):s},l.context=function(v){return arguments.length?(v==null?n=c=null:c=s(n=v),l):n},l}function pg(e,t,r){var n=null,s=Nr(!0),c=null,d=Uv,l=null,v=G1(b);e=typeof e=="function"?e:e===void 0?sO:Nr(+e),t=typeof t=="function"?t:Nr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?lO:Nr(+r);function b(P){var k,z,B,j=(P=W1(P)).length,V,D=!1,R,F=new Array(j),X=new Array(j);for(c==null&&(l=d(R=v())),k=0;k<=j;++k){if(!(k<j&&s(V=P[k],k,P))===D)if(D=!D)z=k,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),B=k-1;B>=z;--B)l.point(F[B],X[B]);l.lineEnd(),l.areaEnd()}D&&(F[k]=+e(V,k,P),X[k]=+t(V,k,P),l.point(n?+n(V,k,P):F[k],r?+r(V,k,P):X[k]))}if(R)return l=null,R+""||null}function S(){return uO().defined(s).curve(d).context(c)}return b.x=function(P){return arguments.length?(e=typeof P=="function"?P:Nr(+P),n=null,b):e},b.x0=function(P){return arguments.length?(e=typeof P=="function"?P:Nr(+P),b):e},b.x1=function(P){return arguments.length?(n=P==null?null:typeof P=="function"?P:Nr(+P),b):n},b.y=function(P){return arguments.length?(t=typeof P=="function"?P:Nr(+P),r=null,b):t},b.y0=function(P){return arguments.length?(t=typeof P=="function"?P:Nr(+P),b):t},b.y1=function(P){return arguments.length?(r=P==null?null:typeof P=="function"?P:Nr(+P),b):r},b.lineX0=b.lineY0=function(){return S().x(e).y(t)},b.lineY1=function(){return S().x(e).y(r)},b.lineX1=function(){return S().x(n).y(t)},b.defined=function(P){return arguments.length?(s=typeof P=="function"?P:Nr(!!P),b):s},b.curve=function(P){return arguments.length?(d=P,c!=null&&(l=d(c)),b):d},b.context=function(P){return arguments.length?(P==null?c=l=null:l=d(c=P),b):c},b}class cO{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function l6(e){return new cO(e,!0)}function u6(e){return new cO(e,!1)}const Z1={draw(e,t){const r=lo(t/py);e.moveTo(r,0),e.arc(0,0,r,0,Fv)}},c6={draw(e,t){const r=lo(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},hO=lo(1/3),h6=hO*2,f6={draw(e,t){const r=lo(t/h6),n=r*hO;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},d6={draw(e,t){const r=lo(t),n=-r/2;e.rect(n,n,r,r)}},p6=.8908130915292852,fO=dy(py/10)/dy(7*py/10),m6=dy(Fv/10)*fO,g6=-iO(Fv/10)*fO,y6={draw(e,t){const r=lo(t*p6),n=m6*r,s=g6*r;e.moveTo(0,-r),e.lineTo(n,s);for(let c=1;c<5;++c){const d=Fv*c/5,l=iO(d),v=dy(d);e.lineTo(v*r,-l*r),e.lineTo(l*n-v*s,v*n+l*s)}e.closePath()}},Xx=lo(3),v6={draw(e,t){const r=-lo(t/(Xx*3));e.moveTo(0,r*2),e.lineTo(-Xx*r,-r),e.lineTo(Xx*r,-r),e.closePath()}},Ta=-.5,Pa=lo(3)/2,Ab=1/lo(12),_6=(Ab/2+1)*3,x6={draw(e,t){const r=lo(t/_6),n=r/2,s=r*Ab,c=n,d=r*Ab+r,l=-c,v=d;e.moveTo(n,s),e.lineTo(c,d),e.lineTo(l,v),e.lineTo(Ta*n-Pa*s,Pa*n+Ta*s),e.lineTo(Ta*c-Pa*d,Pa*c+Ta*d),e.lineTo(Ta*l-Pa*v,Pa*l+Ta*v),e.lineTo(Ta*n+Pa*s,Ta*s-Pa*n),e.lineTo(Ta*c+Pa*d,Ta*d-Pa*c),e.lineTo(Ta*l+Pa*v,Ta*v-Pa*l),e.closePath()}};function b6(e,t){let r=null,n=G1(s);e=typeof e=="function"?e:Nr(e||Z1),t=typeof t=="function"?t:Nr(t===void 0?64:+t);function s(){let c;if(r||(r=c=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),c)return r=null,c+""||null}return s.type=function(c){return arguments.length?(e=typeof c=="function"?c:Nr(c),s):e},s.size=function(c){return arguments.length?(t=typeof c=="function"?c:Nr(+c),s):t},s.context=function(c){return arguments.length?(r=c??null,s):r},s}function my(){}function gy(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function dO(e){this._context=e}dO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function w6(e){return new dO(e)}function pO(e){this._context=e}pO.prototype={areaStart:my,areaEnd:my,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:gy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function S6(e){return new pO(e)}function mO(e){this._context=e}mO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:gy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function T6(e){return new mO(e)}function gO(e){this._context=e}gO.prototype={areaStart:my,areaEnd:my,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function P6(e){return new gO(e)}function HP(e){return e<0?-1:1}function KP(e,t,r){var n=e._x1-e._x0,s=t-e._x1,c=(e._y1-e._y0)/(n||s<0&&-0),d=(r-e._y1)/(s||n<0&&-0),l=(c*s+d*n)/(n+s);return(HP(c)+HP(d))*Math.min(Math.abs(c),Math.abs(d),.5*Math.abs(l))||0}function XP(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Yx(e,t,r){var n=e._x0,s=e._y0,c=e._x1,d=e._y1,l=(c-n)/3;e._context.bezierCurveTo(n+l,s+l*t,c-l,d-l*r,c,d)}function yy(e){this._context=e}yy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Yx(this,this._t0,XP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Yx(this,XP(this,r=KP(this,e,t)),r);break;default:Yx(this,this._t0,r=KP(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function yO(e){this._context=new vO(e)}(yO.prototype=Object.create(yy.prototype)).point=function(e,t){yy.prototype.point.call(this,t,e)};function vO(e){this._context=e}vO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,c){this._context.bezierCurveTo(t,e,n,r,c,s)}};function A6(e){return new yy(e)}function E6(e){return new yO(e)}function _O(e){this._context=e}_O.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=YP(e),s=YP(t),c=0,d=1;d<r;++c,++d)this._context.bezierCurveTo(n[0][c],s[0][c],n[1][c],s[1][c],e[d],t[d]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function YP(e){var t,r=e.length-1,n,s=new Array(r),c=new Array(r),d=new Array(r);for(s[0]=0,c[0]=2,d[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,c[t]=4,d[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,c[r-1]=7,d[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/c[t-1],c[t]-=n,d[t]-=n*d[t-1];for(s[r-1]=d[r-1]/c[r-1],t=r-2;t>=0;--t)s[t]=(d[t]-s[t+1])/c[t];for(c[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)c[t]=2*e[t+1]-s[t+1];return[s,c]}function C6(e){return new _O(e)}function Vv(e,t){this._context=e,this._t=t}Vv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function k6(e){return new Vv(e,.5)}function I6(e){return new Vv(e,0)}function M6(e){return new Vv(e,1)}function th(e,t){if((d=e.length)>1)for(var r=1,n,s,c=e[t[0]],d,l=c.length;r<d;++r)for(s=c,c=e[t[r]],n=0;n<l;++n)c[n][1]+=c[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Eb(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function O6(e,t){return e[t]}function z6(e){const t=[];return t.key=e,t}function D6(){var e=Nr([]),t=Eb,r=th,n=O6;function s(c){var d=Array.from(e.apply(this,arguments),z6),l,v=d.length,b=-1,S;for(const P of c)for(l=0,++b;l<v;++l)(d[l][b]=[0,+n(P,d[l].key,b,c)]).data=P;for(l=0,S=W1(t(d));l<v;++l)d[S[l]].index=l;return r(d,S),d}return s.keys=function(c){return arguments.length?(e=typeof c=="function"?c:Nr(Array.from(c)),s):e},s.value=function(c){return arguments.length?(n=typeof c=="function"?c:Nr(+c),s):n},s.order=function(c){return arguments.length?(t=c==null?Eb:typeof c=="function"?c:Nr(Array.from(c)),s):t},s.offset=function(c){return arguments.length?(r=c??th,s):r},s}function L6(e,t){if((n=e.length)>0){for(var r,n,s=0,c=e[0].length,d;s<c;++s){for(d=r=0;r<n;++r)d+=e[r][s][1]||0;if(d)for(r=0;r<n;++r)e[r][s][1]/=d}th(e,t)}}function j6(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,c=n.length;r<c;++r){for(var d=0,l=0;d<s;++d)l+=e[d][r][1]||0;n[r][1]+=n[r][0]=-l/2}th(e,t)}}function $6(e,t){if(!(!((d=e.length)>0)||!((c=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,c,d;n<c;++n){for(var l=0,v=0,b=0;l<d;++l){for(var S=e[t[l]],P=S[n][1]||0,k=S[n-1][1]||0,z=(P-k)/2,B=0;B<l;++B){var j=e[t[B]],V=j[n][1]||0,D=j[n-1][1]||0;z+=V-D}v+=P,b+=z*P}s[n-1][1]+=s[n-1][0]=r,v&&(r-=b/v)}s[n-1][1]+=s[n-1][0]=r,th(e,t)}}function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}var R6=["type","size","sizeType"];function Cb(){return Cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cb.apply(this,arguments)}function JP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JP(Object(r),!0).forEach(function(n){N6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N6(e,t,r){return t=B6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B6(e){var t=F6(e,"string");return Xd(t)=="symbol"?t:t+""}function F6(e,t){if(Xd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U6(e,t){if(e==null)return{};var r=V6(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function V6(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var xO={symbolCircle:Z1,symbolCross:c6,symbolDiamond:f6,symbolSquare:d6,symbolStar:y6,symbolTriangle:v6,symbolWye:x6},q6=Math.PI/180,G6=function(t){var r="symbol".concat(Bv(t));return xO[r]||Z1},W6=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*q6;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Z6=function(t,r){xO["symbol".concat(Bv(t))]=r},H1=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,c=s===void 0?64:s,d=t.sizeType,l=d===void 0?"area":d,v=U6(t,R6),b=QP(QP({},v),{},{type:n,size:c,sizeType:l}),S=function(){var V=G6(n),D=b6().type(V).size(W6(c,l,n));return D()},P=b.className,k=b.cx,z=b.cy,B=xr(b,!0);return k===+k&&z===+z&&c===+c?Me.createElement("path",Cb({},B,{className:gr("recharts-symbols",P),transform:"translate(".concat(k,", ").concat(z,")"),d:S()})):null};H1.registerSymbol=Z6;function rh(e){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rh(e)}function kb(){return kb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kb.apply(this,arguments)}function eA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function H6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eA(Object(r),!0).forEach(function(n){Yd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wO(n.key),n)}}function Y6(e,t,r){return t&&X6(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function J6(e,t,r){return t=vy(t),Q6(e,bO()?Reflect.construct(t,r||[],vy(e).constructor):t.apply(e,r))}function Q6(e,t){if(t&&(rh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e8(e)}function e8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bO=function(){return!!e})()}function vy(e){return vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vy(e)}function t8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ib(e,t)}function Ib(e,t){return Ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Ib(e,t)}function Yd(e,t,r){return t=wO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wO(e){var t=r8(e,"string");return rh(t)=="symbol"?t:t+""}function r8(e,t){if(rh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Aa=32,K1=function(e){function t(){return K6(this,t),J6(this,t,arguments)}return t8(t,e),Y6(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,c=Aa/2,d=Aa/6,l=Aa/3,v=n.inactive?s:n.color;if(n.type==="plainline")return Me.createElement("line",{strokeWidth:4,fill:"none",stroke:v,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:c,x2:Aa,y2:c,className:"recharts-legend-icon"});if(n.type==="line")return Me.createElement("path",{strokeWidth:4,fill:"none",stroke:v,d:"M0,".concat(c,"h").concat(l,`
            A`).concat(d,",").concat(d,",0,1,1,").concat(2*l,",").concat(c,`
            H`).concat(Aa,"M").concat(2*l,",").concat(c,`
            A`).concat(d,",").concat(d,",0,1,1,").concat(l,",").concat(c),className:"recharts-legend-icon"});if(n.type==="rect")return Me.createElement("path",{stroke:"none",fill:v,d:"M0,".concat(Aa/8,"h").concat(Aa,"v").concat(Aa*3/4,"h").concat(-Aa,"z"),className:"recharts-legend-icon"});if(Me.isValidElement(n.legendIcon)){var b=H6({},n);return delete b.legendIcon,Me.cloneElement(n.legendIcon,b)}return Me.createElement(H1,{fill:v,cx:c,cy:c,size:Aa,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,c=s.payload,d=s.iconSize,l=s.layout,v=s.formatter,b=s.inactiveColor,S={x:0,y:0,width:Aa,height:Aa},P={display:l==="horizontal"?"inline-block":"block",marginRight:10},k={display:"inline-block",verticalAlign:"middle",marginRight:4};return c.map(function(z,B){var j=z.formatter||v,V=gr(Yd(Yd({"recharts-legend-item":!0},"legend-item-".concat(B),!0),"inactive",z.inactive));if(z.type==="none")return null;var D=or(z.value)?null:z.value;cs(!or(z.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var R=z.inactive?b:z.color;return Me.createElement("li",kb({className:V,style:P,key:"legend-item-".concat(B)},fy(n.props,z,B)),Me.createElement(xb,{width:d,height:d,viewBox:S,style:k},n.renderIcon(z)),Me.createElement("span",{className:"recharts-legend-item-text",style:{color:R}},j?j(D,z,B):D))})}},{key:"render",value:function(){var n=this.props,s=n.payload,c=n.layout,d=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:c==="horizontal"?d:"left"};return Me.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}($e.PureComponent);Yd(K1,"displayName","Legend");Yd(K1,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var n8=Av;function i8(){this.__data__=new n8,this.size=0}var a8=i8;function o8(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var s8=o8;function l8(e){return this.__data__.get(e)}var u8=l8;function c8(e){return this.__data__.has(e)}var h8=c8,f8=Av,d8=j1,p8=$1,m8=200;function g8(e,t){var r=this.__data__;if(r instanceof f8){var n=r.__data__;if(!d8||n.length<m8-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new p8(n)}return r.set(e,t),this.size=r.size,this}var y8=g8,v8=Av,_8=a8,x8=s8,b8=u8,w8=h8,S8=y8;function Mh(e){var t=this.__data__=new v8(e);this.size=t.size}Mh.prototype.clear=_8;Mh.prototype.delete=x8;Mh.prototype.get=b8;Mh.prototype.has=w8;Mh.prototype.set=S8;var SO=Mh,T8="__lodash_hash_undefined__";function P8(e){return this.__data__.set(e,T8),this}var A8=P8;function E8(e){return this.__data__.has(e)}var C8=E8,k8=$1,I8=A8,M8=C8;function _y(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new k8;++t<r;)this.add(e[t])}_y.prototype.add=_y.prototype.push=I8;_y.prototype.has=M8;var TO=_y;function O8(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var PO=O8;function z8(e,t){return e.has(t)}var AO=z8,D8=TO,L8=PO,j8=AO,$8=1,R8=2;function N8(e,t,r,n,s,c){var d=r&$8,l=e.length,v=t.length;if(l!=v&&!(d&&v>l))return!1;var b=c.get(e),S=c.get(t);if(b&&S)return b==t&&S==e;var P=-1,k=!0,z=r&R8?new D8:void 0;for(c.set(e,t),c.set(t,e);++P<l;){var B=e[P],j=t[P];if(n)var V=d?n(j,B,P,t,e,c):n(B,j,P,e,t,c);if(V!==void 0){if(V)continue;k=!1;break}if(z){if(!L8(t,function(D,R){if(!j8(z,R)&&(B===D||s(B,D,r,n,c)))return z.push(R)})){k=!1;break}}else if(!(B===j||s(B,j,r,n,c))){k=!1;break}}return c.delete(e),c.delete(t),k}var EO=N8,B8=zo,F8=B8.Uint8Array,U8=F8;function V8(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}var q8=V8;function G8(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var X1=G8,tA=jp,rA=U8,W8=L1,Z8=EO,H8=q8,K8=X1,X8=1,Y8=2,J8="[object Boolean]",Q8="[object Date]",eU="[object Error]",tU="[object Map]",rU="[object Number]",nU="[object RegExp]",iU="[object Set]",aU="[object String]",oU="[object Symbol]",sU="[object ArrayBuffer]",lU="[object DataView]",nA=tA?tA.prototype:void 0,Jx=nA?nA.valueOf:void 0;function uU(e,t,r,n,s,c,d){switch(r){case lU:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case sU:return!(e.byteLength!=t.byteLength||!c(new rA(e),new rA(t)));case J8:case Q8:case rU:return W8(+e,+t);case eU:return e.name==t.name&&e.message==t.message;case nU:case aU:return e==t+"";case tU:var l=H8;case iU:var v=n&X8;if(l||(l=K8),e.size!=t.size&&!v)return!1;var b=d.get(e);if(b)return b==t;n|=Y8,d.set(e,t);var S=Z8(l(e),l(t),n,s,c,d);return d.delete(e),S;case oU:if(Jx)return Jx.call(e)==Jx.call(t)}return!1}var cU=uU;function hU(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var CO=hU,fU=CO,dU=ea;function pU(e,t,r){var n=t(e);return dU(e)?n:fU(n,r(e))}var mU=pU;function gU(e,t){for(var r=-1,n=e==null?0:e.length,s=0,c=[];++r<n;){var d=e[r];t(d,r,e)&&(c[s++]=d)}return c}var yU=gU;function vU(){return[]}var _U=vU,xU=yU,bU=_U,wU=Object.prototype,SU=wU.propertyIsEnumerable,iA=Object.getOwnPropertySymbols,TU=iA?function(e){return e==null?[]:(e=Object(e),xU(iA(e),function(t){return SU.call(e,t)}))}:bU,PU=TU;function AU(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var EU=AU,CU=xs,kU=bs,IU="[object Arguments]";function MU(e){return kU(e)&&CU(e)==IU}var OU=MU,aA=OU,zU=bs,kO=Object.prototype,DU=kO.hasOwnProperty,LU=kO.propertyIsEnumerable,jU=aA(function(){return arguments}())?aA:function(e){return zU(e)&&DU.call(e,"callee")&&!LU.call(e,"callee")},Y1=jU,xy={exports:{}};function $U(){return!1}var RU=$U;xy.exports;(function(e,t){var r=zo,n=RU,s=t&&!t.nodeType&&t,c=s&&!0&&e&&!e.nodeType&&e,d=c&&c.exports===s,l=d?r.Buffer:void 0,v=l?l.isBuffer:void 0,b=v||n;e.exports=b})(xy,xy.exports);var IO=xy.exports,NU=9007199254740991,BU=/^(?:0|[1-9]\d*)$/;function FU(e,t){var r=typeof e;return t=t??NU,!!t&&(r=="number"||r!="symbol"&&BU.test(e))&&e>-1&&e%1==0&&e<t}var J1=FU,UU=9007199254740991;function VU(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=UU}var Q1=VU,qU=xs,GU=Q1,WU=bs,ZU="[object Arguments]",HU="[object Array]",KU="[object Boolean]",XU="[object Date]",YU="[object Error]",JU="[object Function]",QU="[object Map]",eV="[object Number]",tV="[object Object]",rV="[object RegExp]",nV="[object Set]",iV="[object String]",aV="[object WeakMap]",oV="[object ArrayBuffer]",sV="[object DataView]",lV="[object Float32Array]",uV="[object Float64Array]",cV="[object Int8Array]",hV="[object Int16Array]",fV="[object Int32Array]",dV="[object Uint8Array]",pV="[object Uint8ClampedArray]",mV="[object Uint16Array]",gV="[object Uint32Array]",Zr={};Zr[lV]=Zr[uV]=Zr[cV]=Zr[hV]=Zr[fV]=Zr[dV]=Zr[pV]=Zr[mV]=Zr[gV]=!0;Zr[ZU]=Zr[HU]=Zr[oV]=Zr[KU]=Zr[sV]=Zr[XU]=Zr[YU]=Zr[JU]=Zr[QU]=Zr[eV]=Zr[tV]=Zr[rV]=Zr[nV]=Zr[iV]=Zr[aV]=!1;function yV(e){return WU(e)&&GU(e.length)&&!!Zr[qU(e)]}var vV=yV;function _V(e){return function(t){return e(t)}}var MO=_V,by={exports:{}};by.exports;(function(e,t){var r=NM,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,c=s&&s.exports===n,d=c&&r.process,l=function(){try{var v=s&&s.require&&s.require("util").types;return v||d&&d.binding&&d.binding("util")}catch{}}();e.exports=l})(by,by.exports);var xV=by.exports,bV=vV,wV=MO,oA=xV,sA=oA&&oA.isTypedArray,SV=sA?wV(sA):bV,OO=SV,TV=EU,PV=Y1,AV=ea,EV=IO,CV=J1,kV=OO,IV=Object.prototype,MV=IV.hasOwnProperty;function OV(e,t){var r=AV(e),n=!r&&PV(e),s=!r&&!n&&EV(e),c=!r&&!n&&!s&&kV(e),d=r||n||s||c,l=d?TV(e.length,String):[],v=l.length;for(var b in e)(t||MV.call(e,b))&&!(d&&(b=="length"||s&&(b=="offset"||b=="parent")||c&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||CV(b,v)))&&l.push(b);return l}var zV=OV,DV=Object.prototype;function LV(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||DV;return e===r}var jV=LV;function $V(e,t){return function(r){return e(t(r))}}var zO=$V,RV=zO,NV=RV(Object.keys,Object),BV=NV,FV=jV,UV=BV,VV=Object.prototype,qV=VV.hasOwnProperty;function GV(e){if(!FV(e))return UV(e);var t=[];for(var r in Object(e))qV.call(e,r)&&r!="constructor"&&t.push(r);return t}var WV=GV,ZV=D1,HV=Q1;function KV(e){return e!=null&&HV(e.length)&&!ZV(e)}var Rp=KV,XV=zV,YV=WV,JV=Rp;function QV(e){return JV(e)?XV(e):YV(e)}var qv=QV,e9=mU,t9=PU,r9=qv;function n9(e){return e9(e,r9,t9)}var i9=n9,lA=i9,a9=1,o9=Object.prototype,s9=o9.hasOwnProperty;function l9(e,t,r,n,s,c){var d=r&a9,l=lA(e),v=l.length,b=lA(t),S=b.length;if(v!=S&&!d)return!1;for(var P=v;P--;){var k=l[P];if(!(d?k in t:s9.call(t,k)))return!1}var z=c.get(e),B=c.get(t);if(z&&B)return z==t&&B==e;var j=!0;c.set(e,t),c.set(t,e);for(var V=d;++P<v;){k=l[P];var D=e[k],R=t[k];if(n)var F=d?n(R,D,k,t,e,c):n(D,R,k,e,t,c);if(!(F===void 0?D===R||s(D,R,r,n,c):F)){j=!1;break}V||(V=k=="constructor")}if(j&&!V){var X=e.constructor,q=t.constructor;X!=q&&"constructor"in e&&"constructor"in t&&!(typeof X=="function"&&X instanceof X&&typeof q=="function"&&q instanceof q)&&(j=!1)}return c.delete(e),c.delete(t),j}var u9=l9,c9=Eu,h9=zo,f9=c9(h9,"DataView"),d9=f9,p9=Eu,m9=zo,g9=p9(m9,"Promise"),y9=g9,v9=Eu,_9=zo,x9=v9(_9,"Set"),DO=x9,b9=Eu,w9=zo,S9=b9(w9,"WeakMap"),T9=S9,Mb=d9,Ob=j1,zb=y9,Db=DO,Lb=T9,LO=xs,Oh=FM,uA="[object Map]",P9="[object Object]",cA="[object Promise]",hA="[object Set]",fA="[object WeakMap]",dA="[object DataView]",A9=Oh(Mb),E9=Oh(Ob),C9=Oh(zb),k9=Oh(Db),I9=Oh(Lb),Jl=LO;(Mb&&Jl(new Mb(new ArrayBuffer(1)))!=dA||Ob&&Jl(new Ob)!=uA||zb&&Jl(zb.resolve())!=cA||Db&&Jl(new Db)!=hA||Lb&&Jl(new Lb)!=fA)&&(Jl=function(e){var t=LO(e),r=t==P9?e.constructor:void 0,n=r?Oh(r):"";if(n)switch(n){case A9:return dA;case E9:return uA;case C9:return cA;case k9:return hA;case I9:return fA}return t});var M9=Jl,Qx=SO,O9=EO,z9=cU,D9=u9,pA=M9,mA=ea,gA=IO,L9=OO,j9=1,yA="[object Arguments]",vA="[object Array]",mg="[object Object]",$9=Object.prototype,_A=$9.hasOwnProperty;function R9(e,t,r,n,s,c){var d=mA(e),l=mA(t),v=d?vA:pA(e),b=l?vA:pA(t);v=v==yA?mg:v,b=b==yA?mg:b;var S=v==mg,P=b==mg,k=v==b;if(k&&gA(e)){if(!gA(t))return!1;d=!0,S=!1}if(k&&!S)return c||(c=new Qx),d||L9(e)?O9(e,t,r,n,s,c):z9(e,t,v,r,n,s,c);if(!(r&j9)){var z=S&&_A.call(e,"__wrapped__"),B=P&&_A.call(t,"__wrapped__");if(z||B){var j=z?e.value():e,V=B?t.value():t;return c||(c=new Qx),s(j,V,r,n,c)}}return k?(c||(c=new Qx),D9(e,t,r,n,s,c)):!1}var N9=R9,B9=N9,xA=bs;function jO(e,t,r,n,s){return e===t?!0:e==null||t==null||!xA(e)&&!xA(t)?e!==e&&t!==t:B9(e,t,r,n,jO,s)}var eS=jO,F9=SO,U9=eS,V9=1,q9=2;function G9(e,t,r,n){var s=r.length,c=s,d=!n;if(e==null)return!c;for(e=Object(e);s--;){var l=r[s];if(d&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<c;){l=r[s];var v=l[0],b=e[v],S=l[1];if(d&&l[2]){if(b===void 0&&!(v in e))return!1}else{var P=new F9;if(n)var k=n(b,S,v,e,t,P);if(!(k===void 0?U9(S,b,V9|q9,n,P):k))return!1}}return!0}var W9=G9,Z9=wl;function H9(e){return e===e&&!Z9(e)}var $O=H9,K9=$O,X9=qv;function Y9(e){for(var t=X9(e),r=t.length;r--;){var n=t[r],s=e[n];t[r]=[n,s,K9(s)]}return t}var J9=Y9;function Q9(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var RO=Q9,eq=W9,tq=J9,rq=RO;function nq(e){var t=tq(e);return t.length==1&&t[0][2]?rq(t[0][0],t[0][1]):function(r){return r===e||eq(r,e,t)}}var iq=nq;function aq(e,t){return e!=null&&t in Object(e)}var oq=aq,sq=WM,lq=Y1,uq=ea,cq=J1,hq=Q1,fq=Cv;function dq(e,t,r){t=sq(t,e);for(var n=-1,s=t.length,c=!1;++n<s;){var d=fq(t[n]);if(!(c=e!=null&&r(e,d)))break;e=e[d]}return c||++n!=s?c:(s=e==null?0:e.length,!!s&&hq(s)&&cq(d,s)&&(uq(e)||lq(e)))}var pq=dq,mq=oq,gq=pq;function yq(e,t){return e!=null&&gq(e,t,mq)}var vq=yq,_q=eS,xq=ZM,bq=vq,wq=z1,Sq=$O,Tq=RO,Pq=Cv,Aq=1,Eq=2;function Cq(e,t){return wq(e)&&Sq(t)?Tq(Pq(e),t):function(r){var n=xq(r,e);return n===void 0&&n===t?bq(r,e):_q(t,n,Aq|Eq)}}var kq=Cq;function Iq(e){return e}var zh=Iq;function Mq(e){return function(t){return t==null?void 0:t[e]}}var Oq=Mq,zq=B1;function Dq(e){return function(t){return zq(t,e)}}var Lq=Dq,jq=Oq,$q=Lq,Rq=z1,Nq=Cv;function Bq(e){return Rq(e)?jq(Nq(e)):$q(e)}var Fq=Bq,Uq=iq,Vq=kq,qq=zh,Gq=ea,Wq=Fq;function Zq(e){return typeof e=="function"?e:e==null?qq:typeof e=="object"?Gq(e)?Vq(e[0],e[1]):Uq(e):Wq(e)}var Sl=Zq;function Hq(e,t,r,n){for(var s=e.length,c=r+(n?1:-1);n?c--:++c<s;)if(t(e[c],c,e))return c;return-1}var NO=Hq;function Kq(e){return e!==e}var Xq=Kq;function Yq(e,t,r){for(var n=r-1,s=e.length;++n<s;)if(e[n]===t)return n;return-1}var Jq=Yq,Qq=NO,eG=Xq,tG=Jq;function rG(e,t,r){return t===t?tG(e,t,r):Qq(e,eG,r)}var nG=rG,iG=nG;function aG(e,t){var r=e==null?0:e.length;return!!r&&iG(e,t,0)>-1}var oG=aG;function sG(e,t,r){for(var n=-1,s=e==null?0:e.length;++n<s;)if(r(t,e[n]))return!0;return!1}var lG=sG;function uG(){}var cG=uG,e0=DO,hG=cG,fG=X1,dG=1/0,pG=e0&&1/fG(new e0([,-0]))[1]==dG?function(e){return new e0(e)}:hG,mG=pG,gG=TO,yG=oG,vG=lG,_G=AO,xG=mG,bG=X1,wG=200;function SG(e,t,r){var n=-1,s=yG,c=e.length,d=!0,l=[],v=l;if(r)d=!1,s=vG;else if(c>=wG){var b=t?null:xG(e);if(b)return bG(b);d=!1,s=_G,v=new gG}else v=t?[]:l;e:for(;++n<c;){var S=e[n],P=t?t(S):S;if(S=r||S!==0?S:0,d&&P===P){for(var k=v.length;k--;)if(v[k]===P)continue e;t&&v.push(P),l.push(S)}else s(v,P,r)||(v!==l&&v.push(P),l.push(S))}return l}var TG=SG,PG=Sl,AG=TG;function EG(e,t){return e&&e.length?AG(e,PG(t)):[]}var CG=EG;const bA=Mr(CG);function BO(e,t,r){return t===!0?bA(e,r):or(t)?bA(e,t):e}function nh(e){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nh(e)}var kG=["ref"];function wA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wA(Object(r),!0).forEach(function(n){Gv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UO(n.key),n)}}function MG(e,t,r){return t&&SA(e.prototype,t),r&&SA(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function OG(e,t,r){return t=wy(t),zG(e,FO()?Reflect.construct(t,r||[],wy(e).constructor):t.apply(e,r))}function zG(e,t){if(t&&(nh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DG(e)}function DG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FO=function(){return!!e})()}function wy(e){return wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wy(e)}function LG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jb(e,t)}function jb(e,t){return jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},jb(e,t)}function Gv(e,t,r){return t=UO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UO(e){var t=jG(e,"string");return nh(t)=="symbol"?t:t+""}function jG(e,t){if(nh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function $G(e,t){if(e==null)return{};var r=RG(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function RG(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function NG(e){return e.value}function BG(e,t){if(Me.isValidElement(e))return Me.cloneElement(e,t);if(typeof e=="function")return Me.createElement(e,t);t.ref;var r=$G(t,kG);return Me.createElement(K1,r)}var TA=1,uu=function(e){function t(){var r;IG(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return r=OG(this,t,[].concat(s)),Gv(r,"lastBoundingBox",{width:-1,height:-1}),r}return LG(t,e),MG(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>TA||Math.abs(s.height-this.lastBoundingBox.height)>TA)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Qo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,c=s.layout,d=s.align,l=s.verticalAlign,v=s.margin,b=s.chartWidth,S=s.chartHeight,P,k;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(d==="center"&&c==="vertical"){var z=this.getBBoxSnapshot();P={left:((b||0)-z.width)/2}}else P=d==="right"?{right:v&&v.right||0}:{left:v&&v.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var B=this.getBBoxSnapshot();k={top:((S||0)-B.height)/2}}else k=l==="bottom"?{bottom:v&&v.bottom||0}:{top:v&&v.top||0};return Qo(Qo({},P),k)}},{key:"render",value:function(){var n=this,s=this.props,c=s.content,d=s.width,l=s.height,v=s.wrapperStyle,b=s.payloadUniqBy,S=s.payload,P=Qo(Qo({position:"absolute",width:d||"auto",height:l||"auto"},this.getDefaultPosition(v)),v);return Me.createElement("div",{className:"recharts-legend-wrapper",style:P,ref:function(z){n.wrapperNode=z}},BG(c,Qo(Qo({},this.props),{},{payload:BO(S,b,NG)})))}}],[{key:"getWithHeight",value:function(n,s){var c=Qo(Qo({},this.defaultProps),n.props),d=c.layout;return d==="vertical"&&gt(n.props.height)?{height:n.props.height}:d==="horizontal"?{width:n.props.width||s}:null}}])}($e.PureComponent);Gv(uu,"displayName","Legend");Gv(uu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var PA=jp,FG=Y1,UG=ea,AA=PA?PA.isConcatSpreadable:void 0;function VG(e){return UG(e)||FG(e)||!!(AA&&e&&e[AA])}var qG=VG,GG=CO,WG=qG;function VO(e,t,r,n,s){var c=-1,d=e.length;for(r||(r=WG),s||(s=[]);++c<d;){var l=e[c];t>0&&r(l)?t>1?VO(l,t-1,r,n,s):GG(s,l):n||(s[s.length]=l)}return s}var qO=VO;function ZG(e){return function(t,r,n){for(var s=-1,c=Object(t),d=n(t),l=d.length;l--;){var v=d[e?l:++s];if(r(c[v],v,c)===!1)break}return t}}var HG=ZG,KG=HG,XG=KG(),YG=XG,JG=YG,QG=qv;function e7(e,t){return e&&JG(e,t,QG)}var GO=e7,t7=Rp;function r7(e,t){return function(r,n){if(r==null)return r;if(!t7(r))return e(r,n);for(var s=r.length,c=t?s:-1,d=Object(r);(t?c--:++c<s)&&n(d[c],c,d)!==!1;);return r}}var n7=r7,i7=GO,a7=n7,o7=a7(i7),tS=o7,s7=tS,l7=Rp;function u7(e,t){var r=-1,n=l7(e)?Array(e.length):[];return s7(e,function(s,c,d){n[++r]=t(s,c,d)}),n}var WO=u7;function c7(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var h7=c7,EA=Ah;function f7(e,t){if(e!==t){var r=e!==void 0,n=e===null,s=e===e,c=EA(e),d=t!==void 0,l=t===null,v=t===t,b=EA(t);if(!l&&!b&&!c&&e>t||c&&d&&v&&!l&&!b||n&&d&&v||!r&&v||!s)return 1;if(!n&&!c&&!b&&e<t||b&&r&&s&&!n&&!c||l&&r&&s||!d&&s||!v)return-1}return 0}var d7=f7,p7=d7;function m7(e,t,r){for(var n=-1,s=e.criteria,c=t.criteria,d=s.length,l=r.length;++n<d;){var v=p7(s[n],c[n]);if(v){if(n>=l)return v;var b=r[n];return v*(b=="desc"?-1:1)}}return e.index-t.index}var g7=m7,t0=N1,y7=B1,v7=Sl,_7=WO,x7=h7,b7=MO,w7=g7,S7=zh,T7=ea;function P7(e,t,r){t.length?t=t0(t,function(c){return T7(c)?function(d){return y7(d,c.length===1?c[0]:c)}:c}):t=[S7];var n=-1;t=t0(t,b7(v7));var s=_7(e,function(c,d,l){var v=t0(t,function(b){return b(c)});return{criteria:v,index:++n,value:c}});return x7(s,function(c,d){return w7(c,d,r)})}var A7=P7;function E7(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var C7=E7,k7=C7,CA=Math.max;function I7(e,t,r){return t=CA(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,c=CA(n.length-t,0),d=Array(c);++s<c;)d[s]=n[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=n[s];return l[t]=r(d),k7(e,this,l)}}var M7=I7;function O7(e){return function(){return e}}var z7=O7,D7=Eu,L7=function(){try{var e=D7(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ZO=L7,j7=z7,kA=ZO,$7=zh,R7=kA?function(e,t){return kA(e,"toString",{configurable:!0,enumerable:!1,value:j7(t),writable:!0})}:$7,N7=R7,B7=800,F7=16,U7=Date.now;function V7(e){var t=0,r=0;return function(){var n=U7(),s=F7-(n-r);if(r=n,s>0){if(++t>=B7)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var q7=V7,G7=N7,W7=q7,Z7=W7(G7),H7=Z7,K7=zh,X7=M7,Y7=H7;function J7(e,t){return Y7(X7(e,t,K7),e+"")}var Q7=J7,eW=L1,tW=Rp,rW=J1,nW=wl;function iW(e,t,r){if(!nW(r))return!1;var n=typeof t;return(n=="number"?tW(r)&&rW(t,r.length):n=="string"&&t in r)?eW(r[t],e):!1}var Wv=iW,aW=qO,oW=A7,sW=Q7,IA=Wv,lW=sW(function(e,t){if(e==null)return[];var r=t.length;return r>1&&IA(e,t[0],t[1])?t=[]:r>2&&IA(t[0],t[1],t[2])&&(t=[t[0]]),oW(e,aW(t,1),[])}),uW=lW;const rS=Mr(uW);function Jd(e){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jd(e)}function $b(){return $b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$b.apply(this,arguments)}function cW(e,t){return pW(e)||dW(e,t)||fW(e,t)||hW()}function hW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fW(e,t){if(e){if(typeof e=="string")return MA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MA(e,t)}}function MA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,c,d,l=[],v=!0,b=!1;try{if(c=(r=r.call(e)).next,t!==0)for(;!(v=(n=c.call(r)).done)&&(l.push(n.value),l.length!==t);v=!0);}catch(S){b=!0,s=S}finally{try{if(!v&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(b)throw s}}return l}}function pW(e){if(Array.isArray(e))return e}function OA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function r0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OA(Object(r),!0).forEach(function(n){mW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mW(e,t,r){return t=gW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gW(e){var t=yW(e,"string");return Jd(t)=="symbol"?t:t+""}function yW(e,t){if(Jd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vW(e){return Array.isArray(e)&&$n(e[0])&&$n(e[1])?e.join(" ~ "):e}var _W=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,c=s===void 0?{}:s,d=t.itemStyle,l=d===void 0?{}:d,v=t.labelStyle,b=v===void 0?{}:v,S=t.payload,P=t.formatter,k=t.itemSorter,z=t.wrapperClassName,B=t.labelClassName,j=t.label,V=t.labelFormatter,D=t.accessibilityLayer,R=D===void 0?!1:D,F=function(){if(S&&S.length){var Te={padding:0,margin:0},Fe=(k?rS(S,k):S).map(function(Re,Be){if(Re.type==="none")return null;var qe=r0({display:"block",paddingTop:4,paddingBottom:4,color:Re.color||"#000"},l),Ke=Re.formatter||P||vW,ce=Re.value,_e=Re.name,ke=ce,Ue=_e;if(Ke&&ke!=null&&Ue!=null){var je=Ke(ce,_e,Re,Be,S);if(Array.isArray(je)){var Qe=cW(je,2);ke=Qe[0],Ue=Qe[1]}else ke=je}return Me.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Be),style:qe},$n(Ue)?Me.createElement("span",{className:"recharts-tooltip-item-name"},Ue):null,$n(Ue)?Me.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Me.createElement("span",{className:"recharts-tooltip-item-value"},ke),Me.createElement("span",{className:"recharts-tooltip-item-unit"},Re.unit||""))});return Me.createElement("ul",{className:"recharts-tooltip-item-list",style:Te},Fe)}return null},X=r0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},c),q=r0({margin:0},b),W=!br(j),ee=W?j:"",le=gr("recharts-default-tooltip",z),ve=gr("recharts-tooltip-label",B);W&&V&&S!==void 0&&S!==null&&(ee=V(j,S));var Pe=R?{role:"status","aria-live":"assertive"}:{};return Me.createElement("div",$b({className:le,style:X},Pe),Me.createElement("p",{className:ve,style:q},Me.isValidElement(ee)?ee:"".concat(ee)),F())};function Qd(e){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(e)}function gg(e,t,r){return t=xW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xW(e){var t=bW(e,"string");return Qd(t)=="symbol"?t:t+""}function bW(e,t){if(Qd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nd="recharts-tooltip-wrapper",wW={visibility:"hidden"};function SW(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return gr(nd,gg(gg(gg(gg({},"".concat(nd,"-right"),gt(r)&&t&&gt(t.x)&&r>=t.x),"".concat(nd,"-left"),gt(r)&&t&&gt(t.x)&&r<t.x),"".concat(nd,"-bottom"),gt(n)&&t&&gt(t.y)&&n>=t.y),"".concat(nd,"-top"),gt(n)&&t&&gt(t.y)&&n<t.y))}function zA(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,c=e.position,d=e.reverseDirection,l=e.tooltipDimension,v=e.viewBox,b=e.viewBoxDimension;if(c&&gt(c[n]))return c[n];var S=r[n]-l-s,P=r[n]+s;if(t[n])return d[n]?S:P;if(d[n]){var k=S,z=v[n];return k<z?Math.max(P,v[n]):Math.max(S,v[n])}var B=P+l,j=v[n]+b;return B>j?Math.max(S,v[n]):Math.max(P,v[n])}function TW(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function PW(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,c=e.reverseDirection,d=e.tooltipBox,l=e.useTranslate3d,v=e.viewBox,b,S,P;return d.height>0&&d.width>0&&r?(S=zA({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:c,tooltipDimension:d.width,viewBox:v,viewBoxDimension:v.width}),P=zA({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:c,tooltipDimension:d.height,viewBox:v,viewBoxDimension:v.height}),b=TW({translateX:S,translateY:P,useTranslate3d:l})):b=wW,{cssProperties:b,cssClasses:SW({translateX:S,translateY:P,coordinate:r})}}function ih(e){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ih(e)}function DA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function LA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DA(Object(r),!0).forEach(function(n){Nb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KO(n.key),n)}}function CW(e,t,r){return t&&EW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kW(e,t,r){return t=Sy(t),IW(e,HO()?Reflect.construct(t,r||[],Sy(e).constructor):t.apply(e,r))}function IW(e,t){if(t&&(ih(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MW(e)}function MW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HO=function(){return!!e})()}function Sy(e){return Sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sy(e)}function OW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rb(e,t)}function Rb(e,t){return Rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Rb(e,t)}function Nb(e,t,r){return t=KO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KO(e){var t=zW(e,"string");return ih(t)=="symbol"?t:t+""}function zW(e,t){if(ih(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ih(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jA=1,DW=function(e){function t(){var r;AW(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return r=kW(this,t,[].concat(s)),Nb(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Nb(r,"handleKeyDown",function(d){if(d.key==="Escape"){var l,v,b,S;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(v=r.props.coordinate)===null||v===void 0?void 0:v.x)!==null&&l!==void 0?l:0,y:(b=(S=r.props.coordinate)===null||S===void 0?void 0:S.y)!==null&&b!==void 0?b:0}})}}),r}return OW(t,e),CW(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>jA||Math.abs(n.height-this.state.lastBoundingBox.height)>jA)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,c=s.active,d=s.allowEscapeViewBox,l=s.animationDuration,v=s.animationEasing,b=s.children,S=s.coordinate,P=s.hasPayload,k=s.isAnimationActive,z=s.offset,B=s.position,j=s.reverseDirection,V=s.useTranslate3d,D=s.viewBox,R=s.wrapperStyle,F=PW({allowEscapeViewBox:d,coordinate:S,offsetTopLeft:z,position:B,reverseDirection:j,tooltipBox:this.state.lastBoundingBox,useTranslate3d:V,viewBox:D}),X=F.cssClasses,q=F.cssProperties,W=LA(LA({transition:k&&c?"transform ".concat(l,"ms ").concat(v):void 0},q),{},{pointerEvents:"none",visibility:!this.state.dismissed&&c&&P?"visible":"hidden",position:"absolute",top:0,left:0},R);return Me.createElement("div",{tabIndex:-1,className:X,style:W,ref:function(le){n.wrapperNode=le}},b)}}])}($e.PureComponent),LW=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Np={isSsr:LW()};function ah(e){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ah(e)}function $A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function RA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$A(Object(r),!0).forEach(function(n){nS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$A(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YO(n.key),n)}}function RW(e,t,r){return t&&$W(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NW(e,t,r){return t=Ty(t),BW(e,XO()?Reflect.construct(t,r||[],Ty(e).constructor):t.apply(e,r))}function BW(e,t){if(t&&(ah(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FW(e)}function FW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XO=function(){return!!e})()}function Ty(e){return Ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ty(e)}function UW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bb(e,t)}function Bb(e,t){return Bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Bb(e,t)}function nS(e,t,r){return t=YO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YO(e){var t=VW(e,"string");return ah(t)=="symbol"?t:t+""}function VW(e,t){if(ah(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function qW(e){return e.dataKey}function GW(e,t){return Me.isValidElement(e)?Me.cloneElement(e,t):typeof e=="function"?Me.createElement(e,t):Me.createElement(_W,t)}var So=function(e){function t(){return jW(this,t),NW(this,t,arguments)}return UW(t,e),RW(t,[{key:"render",value:function(){var n=this,s=this.props,c=s.active,d=s.allowEscapeViewBox,l=s.animationDuration,v=s.animationEasing,b=s.content,S=s.coordinate,P=s.filterNull,k=s.isAnimationActive,z=s.offset,B=s.payload,j=s.payloadUniqBy,V=s.position,D=s.reverseDirection,R=s.useTranslate3d,F=s.viewBox,X=s.wrapperStyle,q=B??[];P&&q.length&&(q=BO(B.filter(function(ee){return ee.value!=null&&(ee.hide!==!0||n.props.includeHidden)}),j,qW));var W=q.length>0;return Me.createElement(DW,{allowEscapeViewBox:d,animationDuration:l,animationEasing:v,isAnimationActive:k,active:c,coordinate:S,hasPayload:W,offset:z,position:V,reverseDirection:D,useTranslate3d:R,viewBox:F,wrapperStyle:X},GW(b,RA(RA({},this.props),{},{payload:q})))}}])}($e.PureComponent);nS(So,"displayName","Tooltip");nS(So,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Np.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var WW=zo,ZW=function(){return WW.Date.now()},HW=ZW,KW=/\s/;function XW(e){for(var t=e.length;t--&&KW.test(e.charAt(t)););return t}var YW=XW,JW=YW,QW=/^\s+/;function eZ(e){return e&&e.slice(0,JW(e)+1).replace(QW,"")}var tZ=eZ,rZ=tZ,NA=wl,nZ=Ah,BA=NaN,iZ=/^[-+]0x[0-9a-f]+$/i,aZ=/^0b[01]+$/i,oZ=/^0o[0-7]+$/i,sZ=parseInt;function lZ(e){if(typeof e=="number")return e;if(nZ(e))return BA;if(NA(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=NA(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=rZ(e);var r=aZ.test(e);return r||oZ.test(e)?sZ(e.slice(2),r?2:8):iZ.test(e)?BA:+e}var JO=lZ,uZ=wl,n0=HW,FA=JO,cZ="Expected a function",hZ=Math.max,fZ=Math.min;function dZ(e,t,r){var n,s,c,d,l,v,b=0,S=!1,P=!1,k=!0;if(typeof e!="function")throw new TypeError(cZ);t=FA(t)||0,uZ(r)&&(S=!!r.leading,P="maxWait"in r,c=P?hZ(FA(r.maxWait)||0,t):c,k="trailing"in r?!!r.trailing:k);function z(W){var ee=n,le=s;return n=s=void 0,b=W,d=e.apply(le,ee),d}function B(W){return b=W,l=setTimeout(D,t),S?z(W):d}function j(W){var ee=W-v,le=W-b,ve=t-ee;return P?fZ(ve,c-le):ve}function V(W){var ee=W-v,le=W-b;return v===void 0||ee>=t||ee<0||P&&le>=c}function D(){var W=n0();if(V(W))return R(W);l=setTimeout(D,j(W))}function R(W){return l=void 0,k&&n?z(W):(n=s=void 0,d)}function F(){l!==void 0&&clearTimeout(l),b=0,n=v=s=l=void 0}function X(){return l===void 0?d:R(n0())}function q(){var W=n0(),ee=V(W);if(n=arguments,s=this,v=W,ee){if(l===void 0)return B(v);if(P)return clearTimeout(l),l=setTimeout(D,t),z(v)}return l===void 0&&(l=setTimeout(D,t)),d}return q.cancel=F,q.flush=X,q}var pZ=dZ,mZ=pZ,gZ=wl,yZ="Expected a function";function vZ(e,t,r){var n=!0,s=!0;if(typeof e!="function")throw new TypeError(yZ);return gZ(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),mZ(e,t,{leading:n,maxWait:t,trailing:s})}var _Z=vZ;const QO=Mr(_Z);function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}function UA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UA(Object(r),!0).forEach(function(n){xZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xZ(e,t,r){return t=bZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bZ(e){var t=wZ(e,"string");return ep(t)=="symbol"?t:t+""}function wZ(e,t){if(ep(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SZ(e,t){return EZ(e)||AZ(e,t)||PZ(e,t)||TZ()}function TZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PZ(e,t){if(e){if(typeof e=="string")return VA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VA(e,t)}}function VA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function AZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,c,d,l=[],v=!0,b=!1;try{if(c=(r=r.call(e)).next,t!==0)for(;!(v=(n=c.call(r)).done)&&(l.push(n.value),l.length!==t);v=!0);}catch(S){b=!0,s=S}finally{try{if(!v&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(b)throw s}}return l}}function EZ(e){if(Array.isArray(e))return e}var CZ=$e.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,c=e.width,d=c===void 0?"100%":c,l=e.height,v=l===void 0?"100%":l,b=e.minWidth,S=b===void 0?0:b,P=e.minHeight,k=e.maxHeight,z=e.children,B=e.debounce,j=B===void 0?0:B,V=e.id,D=e.className,R=e.onResize,F=e.style,X=F===void 0?{}:F,q=$e.useRef(null),W=$e.useRef();W.current=R,$e.useImperativeHandle(t,function(){return Object.defineProperty(q.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),q.current},configurable:!0})});var ee=$e.useState({containerWidth:s.width,containerHeight:s.height}),le=SZ(ee,2),ve=le[0],Pe=le[1],Ce=$e.useCallback(function(Fe,Re){Pe(function(Be){var qe=Math.round(Fe),Ke=Math.round(Re);return Be.containerWidth===qe&&Be.containerHeight===Ke?Be:{containerWidth:qe,containerHeight:Ke}})},[]);$e.useEffect(function(){var Fe=function(_e){var ke,Ue=_e[0].contentRect,je=Ue.width,Qe=Ue.height;Ce(je,Qe),(ke=W.current)===null||ke===void 0||ke.call(W,je,Qe)};j>0&&(Fe=QO(Fe,j,{trailing:!0,leading:!1}));var Re=new ResizeObserver(Fe),Be=q.current.getBoundingClientRect(),qe=Be.width,Ke=Be.height;return Ce(qe,Ke),Re.observe(q.current),function(){Re.disconnect()}},[Ce,j]);var Te=$e.useMemo(function(){var Fe=ve.containerWidth,Re=ve.containerHeight;if(Fe<0||Re<0)return null;cs(nu(d)||nu(v),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,d,v),cs(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Be=nu(d)?Fe:d,qe=nu(v)?Re:v;r&&r>0&&(Be?qe=Be/r:qe&&(Be=qe*r),k&&qe>k&&(qe=k)),cs(Be>0||qe>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Be,qe,d,v,S,P,r);var Ke=!Array.isArray(z)&&us(z.type).endsWith("Chart");return Me.Children.map(z,function(ce){return Me.isValidElement(ce)?$e.cloneElement(ce,yg({width:Be,height:qe},Ke?{style:yg({height:"100%",width:"100%",maxHeight:qe,maxWidth:Be},ce.props.style)}:{})):ce})},[r,z,v,k,P,S,ve,d]);return Me.createElement("div",{id:V?"".concat(V):void 0,className:gr("recharts-responsive-container",D),style:yg(yg({},X),{},{width:d,height:v,minWidth:S,minHeight:P,maxHeight:k}),ref:q},Te)}),ez=function(t){return null};ez.displayName="Cell";function tp(e){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tp(e)}function qA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(r),!0).forEach(function(n){kZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kZ(e,t,r){return t=IZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IZ(e){var t=MZ(e,"string");return tp(t)=="symbol"?t:t+""}function MZ(e,t){if(tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _c={widthCache:{},cacheCount:0},OZ=2e3,zZ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},GA="recharts_measurement_span";function DZ(e){var t=Fb({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var kd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Np.isSsr)return{width:0,height:0};var n=DZ(r),s=JSON.stringify({text:t,copyStyle:n});if(_c.widthCache[s])return _c.widthCache[s];try{var c=document.getElementById(GA);c||(c=document.createElement("span"),c.setAttribute("id",GA),c.setAttribute("aria-hidden","true"),document.body.appendChild(c));var d=Fb(Fb({},zZ),n);Object.assign(c.style,d),c.textContent="".concat(t);var l=c.getBoundingClientRect(),v={width:l.width,height:l.height};return _c.widthCache[s]=v,++_c.cacheCount>OZ&&(_c.cacheCount=0,_c.widthCache={}),v}catch{return{width:0,height:0}}},LZ=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function rp(e){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(e)}function Py(e,t){return NZ(e)||RZ(e,t)||$Z(e,t)||jZ()}function jZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Z(e,t){if(e){if(typeof e=="string")return WA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WA(e,t)}}function WA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function RZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,c,d,l=[],v=!0,b=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;v=!1}else for(;!(v=(n=c.call(r)).done)&&(l.push(n.value),l.length!==t);v=!0);}catch(S){b=!0,s=S}finally{try{if(!v&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(b)throw s}}return l}}function NZ(e){if(Array.isArray(e))return e}function BZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UZ(n.key),n)}}function FZ(e,t,r){return t&&ZA(e.prototype,t),r&&ZA(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function UZ(e){var t=VZ(e,"string");return rp(t)=="symbol"?t:t+""}function VZ(e,t){if(rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var HA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qZ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,GZ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,tz={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},WZ=Object.keys(tz),Dc="NaN";function ZZ(e,t){return e*tz[t]}var vg=function(){function e(t,r){BZ(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!qZ.test(r)&&(this.num=NaN,this.unit=""),WZ.includes(r)&&(this.num=ZZ(t,r),this.unit="px")}return FZ(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=GZ.exec(r))!==null&&n!==void 0?n:[],c=Py(s,3),d=c[1],l=c[2];return new e(parseFloat(d),l??"")}}])}();function rz(e){if(e.includes(Dc))return Dc;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=HA.exec(t))!==null&&r!==void 0?r:[],s=Py(n,4),c=s[1],d=s[2],l=s[3],v=vg.parse(c??""),b=vg.parse(l??""),S=d==="*"?v.multiply(b):v.divide(b);if(S.isNaN())return Dc;t=t.replace(HA,S.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var P,k=(P=KA.exec(t))!==null&&P!==void 0?P:[],z=Py(k,4),B=z[1],j=z[2],V=z[3],D=vg.parse(B??""),R=vg.parse(V??""),F=j==="+"?D.add(R):D.subtract(R);if(F.isNaN())return Dc;t=t.replace(KA,F.toString())}return t}var XA=/\(([^()]*)\)/;function HZ(e){for(var t=e;t.includes("(");){var r=XA.exec(t),n=Py(r,2),s=n[1];t=t.replace(XA,rz(s))}return t}function KZ(e){var t=e.replace(/\s+/g,"");return t=HZ(t),t=rz(t),t}function XZ(e){try{return KZ(e)}catch{return Dc}}function i0(e){var t=XZ(e.slice(5,-1));return t===Dc?"":t}var YZ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],JZ=["dx","dy","angle","className","breakAll"];function Ub(){return Ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ub.apply(this,arguments)}function YA(e,t){if(e==null)return{};var r=QZ(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function QZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function JA(e,t){return nH(e)||rH(e,t)||tH(e,t)||eH()}function eH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tH(e,t){if(e){if(typeof e=="string")return QA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QA(e,t)}}function QA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,c,d,l=[],v=!0,b=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;v=!1}else for(;!(v=(n=c.call(r)).done)&&(l.push(n.value),l.length!==t);v=!0);}catch(S){b=!0,s=S}finally{try{if(!v&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(b)throw s}}return l}}function nH(e){if(Array.isArray(e))return e}var nz=/[ \f\n\r\t\v\u2028\u2029]+/,iz=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var c=[];br(r)||(n?c=r.toString().split(""):c=r.toString().split(nz));var d=c.map(function(v){return{word:v,width:kd(v,s).width}}),l=n?0:kd("",s).width;return{wordsWithComputedWidth:d,spaceWidth:l}}catch{return null}},iH=function(t,r,n,s,c){var d=t.maxLines,l=t.children,v=t.style,b=t.breakAll,S=gt(d),P=l,k=function(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Be.reduce(function(qe,Ke){var ce=Ke.word,_e=Ke.width,ke=qe[qe.length-1];if(ke&&(s==null||c||ke.width+_e+n<Number(s)))ke.words.push(ce),ke.width+=_e+n;else{var Ue={words:[ce],width:_e};qe.push(Ue)}return qe},[])},z=k(r),B=function(Be){return Be.reduce(function(qe,Ke){return qe.width>Ke.width?qe:Ke})};if(!S)return z;for(var j="",V=function(Be){var qe=P.slice(0,Be),Ke=iz({breakAll:b,style:v,children:qe+j}).wordsWithComputedWidth,ce=k(Ke),_e=ce.length>d||B(ce).width>Number(s);return[_e,ce]},D=0,R=P.length-1,F=0,X;D<=R&&F<=P.length-1;){var q=Math.floor((D+R)/2),W=q-1,ee=V(W),le=JA(ee,2),ve=le[0],Pe=le[1],Ce=V(q),Te=JA(Ce,1),Fe=Te[0];if(!ve&&!Fe&&(D=q+1),ve&&Fe&&(R=q-1),!ve&&Fe){X=Pe;break}F++}return X||z},eE=function(t){var r=br(t)?[]:t.toString().split(nz);return[{words:r}]},aH=function(t){var r=t.width,n=t.scaleToFit,s=t.children,c=t.style,d=t.breakAll,l=t.maxLines;if((r||n)&&!Np.isSsr){var v,b,S=iz({breakAll:d,children:s,style:c});if(S){var P=S.wordsWithComputedWidth,k=S.spaceWidth;v=P,b=k}else return eE(s);return iH({breakAll:d,children:s,maxLines:l,style:c},v,b,r,n)}return eE(s)},tE="#808080",Ay=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,c=s===void 0?0:s,d=t.lineHeight,l=d===void 0?"1em":d,v=t.capHeight,b=v===void 0?"0.71em":v,S=t.scaleToFit,P=S===void 0?!1:S,k=t.textAnchor,z=k===void 0?"start":k,B=t.verticalAnchor,j=B===void 0?"end":B,V=t.fill,D=V===void 0?tE:V,R=YA(t,YZ),F=$e.useMemo(function(){return aH({breakAll:R.breakAll,children:R.children,maxLines:R.maxLines,scaleToFit:P,style:R.style,width:R.width})},[R.breakAll,R.children,R.maxLines,P,R.style,R.width]),X=R.dx,q=R.dy,W=R.angle,ee=R.className,le=R.breakAll,ve=YA(R,JZ);if(!$n(n)||!$n(c))return null;var Pe=n+(gt(X)?X:0),Ce=c+(gt(q)?q:0),Te;switch(j){case"start":Te=i0("calc(".concat(b,")"));break;case"middle":Te=i0("calc(".concat((F.length-1)/2," * -").concat(l," + (").concat(b," / 2))"));break;default:Te=i0("calc(".concat(F.length-1," * -").concat(l,")"));break}var Fe=[];if(P){var Re=F[0].width,Be=R.width;Fe.push("scale(".concat((gt(Be)?Be/Re:1)/Re,")"))}return W&&Fe.push("rotate(".concat(W,", ").concat(Pe,", ").concat(Ce,")")),Fe.length&&(ve.transform=Fe.join(" ")),Me.createElement("text",Ub({},xr(ve,!0),{x:Pe,y:Ce,className:gr("recharts-text",ee),textAnchor:z,fill:D.includes("url")?tE:D}),F.map(function(qe,Ke){var ce=qe.words.join(le?"":" ");return Me.createElement("tspan",{x:Pe,dy:Ke===0?Te:l,key:"".concat(ce,"-").concat(Ke)},ce)}))};function ml(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oH(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iS(e){let t,r,n;e.length!==2?(t=ml,r=(l,v)=>ml(e(l),v),n=(l,v)=>e(l)-v):(t=e===ml||e===oH?e:sH,r=e,n=e);function s(l,v,b=0,S=l.length){if(b<S){if(t(v,v)!==0)return S;do{const P=b+S>>>1;r(l[P],v)<0?b=P+1:S=P}while(b<S)}return b}function c(l,v,b=0,S=l.length){if(b<S){if(t(v,v)!==0)return S;do{const P=b+S>>>1;r(l[P],v)<=0?b=P+1:S=P}while(b<S)}return b}function d(l,v,b=0,S=l.length){const P=s(l,v,b,S-1);return P>b&&n(l[P-1],v)>-n(l[P],v)?P-1:P}return{left:s,center:d,right:c}}function sH(){return 0}function az(e){return e===null?NaN:+e}function*lH(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const uH=iS(ml),Bp=uH.right;iS(az).center;class rE extends Map{constructor(t,r=fH){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(nE(this,t))}has(t){return super.has(nE(this,t))}set(t,r){return super.set(cH(this,t),r)}delete(t){return super.delete(hH(this,t))}}function nE({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function cH({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function hH({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function fH(e){return e!==null&&typeof e=="object"?e.valueOf():e}function dH(e=ml){if(e===ml)return oz;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function oz(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const pH=Math.sqrt(50),mH=Math.sqrt(10),gH=Math.sqrt(2);function Ey(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),c=n/Math.pow(10,s),d=c>=pH?10:c>=mH?5:c>=gH?2:1;let l,v,b;return s<0?(b=Math.pow(10,-s)/d,l=Math.round(e*b),v=Math.round(t*b),l/b<e&&++l,v/b>t&&--v,b=-b):(b=Math.pow(10,s)*d,l=Math.round(e/b),v=Math.round(t/b),l*b<e&&++l,v*b>t&&--v),v<l&&.5<=r&&r<2?Ey(e,t,r*2):[l,v,b]}function Vb(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,c,d]=n?Ey(t,e,r):Ey(e,t,r);if(!(c>=s))return[];const l=c-s+1,v=new Array(l);if(n)if(d<0)for(let b=0;b<l;++b)v[b]=(c-b)/-d;else for(let b=0;b<l;++b)v[b]=(c-b)*d;else if(d<0)for(let b=0;b<l;++b)v[b]=(s+b)/-d;else for(let b=0;b<l;++b)v[b]=(s+b)*d;return v}function qb(e,t,r){return t=+t,e=+e,r=+r,Ey(e,t,r)[2]}function Gb(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?qb(t,e,r):qb(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function iE(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function aE(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function sz(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?oz:dH(s);n>r;){if(n-r>600){const v=n-r+1,b=t-r+1,S=Math.log(v),P=.5*Math.exp(2*S/3),k=.5*Math.sqrt(S*P*(v-P)/v)*(b-v/2<0?-1:1),z=Math.max(r,Math.floor(t-b*P/v+k)),B=Math.min(n,Math.floor(t+(v-b)*P/v+k));sz(e,t,z,B,s)}const c=e[t];let d=r,l=n;for(id(e,r,t),s(e[n],c)>0&&id(e,r,n);d<l;){for(id(e,d,l),++d,--l;s(e[d],c)<0;)++d;for(;s(e[l],c)>0;)--l}s(e[r],c)===0?id(e,r,l):(++l,id(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function id(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function yH(e,t,r){if(e=Float64Array.from(lH(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return aE(e);if(t>=1)return iE(e);var n,s=(n-1)*t,c=Math.floor(s),d=iE(sz(e,c).subarray(0,c+1)),l=aE(e.subarray(c+1));return d+(l-d)*(s-c)}}function vH(e,t,r=az){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,c=Math.floor(s),d=+r(e[c],c,e),l=+r(e[c+1],c+1,e);return d+(l-d)*(s-c)}}function _H(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,c=new Array(s);++n<s;)c[n]=e+n*r;return c}function $a(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ws(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Wb=Symbol("implicit");function aS(){var e=new rE,t=[],r=[],n=Wb;function s(c){let d=e.get(c);if(d===void 0){if(n!==Wb)return n;e.set(c,d=t.push(c)-1)}return r[d%r.length]}return s.domain=function(c){if(!arguments.length)return t.slice();t=[],e=new rE;for(const d of c)e.has(d)||e.set(d,t.push(d)-1);return s},s.range=function(c){return arguments.length?(r=Array.from(c),s):r.slice()},s.unknown=function(c){return arguments.length?(n=c,s):n},s.copy=function(){return aS(t,r).unknown(n)},$a.apply(s,arguments),s}function np(){var e=aS().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,c,d,l=!1,v=0,b=0,S=.5;delete e.unknown;function P(){var k=t().length,z=s<n,B=z?s:n,j=z?n:s;c=(j-B)/Math.max(1,k-v+b*2),l&&(c=Math.floor(c)),B+=(j-B-c*(k-v))*S,d=c*(1-v),l&&(B=Math.round(B),d=Math.round(d));var V=_H(k).map(function(D){return B+c*D});return r(z?V.reverse():V)}return e.domain=function(k){return arguments.length?(t(k),P()):t()},e.range=function(k){return arguments.length?([n,s]=k,n=+n,s=+s,P()):[n,s]},e.rangeRound=function(k){return[n,s]=k,n=+n,s=+s,l=!0,P()},e.bandwidth=function(){return d},e.step=function(){return c},e.round=function(k){return arguments.length?(l=!!k,P()):l},e.padding=function(k){return arguments.length?(v=Math.min(1,b=+k),P()):v},e.paddingInner=function(k){return arguments.length?(v=Math.min(1,k),P()):v},e.paddingOuter=function(k){return arguments.length?(b=+k,P()):b},e.align=function(k){return arguments.length?(S=Math.max(0,Math.min(1,k)),P()):S},e.copy=function(){return np(t(),[n,s]).round(l).paddingInner(v).paddingOuter(b).align(S)},$a.apply(P(),arguments)}function lz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return lz(t())},e}function Id(){return lz(np.apply(null,arguments).paddingInner(1))}function oS(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function uz(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Fp(){}var ip=.7,Cy=1/ip,Gc="\\s*([+-]?\\d+)\\s*",ap="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xH=/^#([0-9a-f]{3,8})$/,bH=new RegExp(`^rgb\\(${Gc},${Gc},${Gc}\\)$`),wH=new RegExp(`^rgb\\(${ko},${ko},${ko}\\)$`),SH=new RegExp(`^rgba\\(${Gc},${Gc},${Gc},${ap}\\)$`),TH=new RegExp(`^rgba\\(${ko},${ko},${ko},${ap}\\)$`),PH=new RegExp(`^hsl\\(${ap},${ko},${ko}\\)$`),AH=new RegExp(`^hsla\\(${ap},${ko},${ko},${ap}\\)$`),oE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oS(Fp,op,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:sE,formatHex:sE,formatHex8:EH,formatHsl:CH,formatRgb:lE,toString:lE});function sE(){return this.rgb().formatHex()}function EH(){return this.rgb().formatHex8()}function CH(){return cz(this).formatHsl()}function lE(){return this.rgb().formatRgb()}function op(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=xH.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?uE(t):r===3?new Xi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?_g(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?_g(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bH.exec(e))?new Xi(t[1],t[2],t[3],1):(t=wH.exec(e))?new Xi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=SH.exec(e))?_g(t[1],t[2],t[3],t[4]):(t=TH.exec(e))?_g(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=PH.exec(e))?fE(t[1],t[2]/100,t[3]/100,1):(t=AH.exec(e))?fE(t[1],t[2]/100,t[3]/100,t[4]):oE.hasOwnProperty(e)?uE(oE[e]):e==="transparent"?new Xi(NaN,NaN,NaN,0):null}function uE(e){return new Xi(e>>16&255,e>>8&255,e&255,1)}function _g(e,t,r,n){return n<=0&&(e=t=r=NaN),new Xi(e,t,r,n)}function kH(e){return e instanceof Fp||(e=op(e)),e?(e=e.rgb(),new Xi(e.r,e.g,e.b,e.opacity)):new Xi}function Zb(e,t,r,n){return arguments.length===1?kH(e):new Xi(e,t,r,n??1)}function Xi(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}oS(Xi,Zb,uz(Fp,{brighter(e){return e=e==null?Cy:Math.pow(Cy,e),new Xi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ip:Math.pow(ip,e),new Xi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xi(cu(this.r),cu(this.g),cu(this.b),ky(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cE,formatHex:cE,formatHex8:IH,formatRgb:hE,toString:hE}));function cE(){return`#${iu(this.r)}${iu(this.g)}${iu(this.b)}`}function IH(){return`#${iu(this.r)}${iu(this.g)}${iu(this.b)}${iu((isNaN(this.opacity)?1:this.opacity)*255)}`}function hE(){const e=ky(this.opacity);return`${e===1?"rgb(":"rgba("}${cu(this.r)}, ${cu(this.g)}, ${cu(this.b)}${e===1?")":`, ${e})`}`}function ky(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function iu(e){return e=cu(e),(e<16?"0":"")+e.toString(16)}function fE(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ro(e,t,r,n)}function cz(e){if(e instanceof ro)return new ro(e.h,e.s,e.l,e.opacity);if(e instanceof Fp||(e=op(e)),!e)return new ro;if(e instanceof ro)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),c=Math.max(t,r,n),d=NaN,l=c-s,v=(c+s)/2;return l?(t===c?d=(r-n)/l+(r<n)*6:r===c?d=(n-t)/l+2:d=(t-r)/l+4,l/=v<.5?c+s:2-c-s,d*=60):l=v>0&&v<1?0:d,new ro(d,l,v,e.opacity)}function MH(e,t,r,n){return arguments.length===1?cz(e):new ro(e,t,r,n??1)}function ro(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}oS(ro,MH,uz(Fp,{brighter(e){return e=e==null?Cy:Math.pow(Cy,e),new ro(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ip:Math.pow(ip,e),new ro(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Xi(a0(e>=240?e-240:e+120,s,n),a0(e,s,n),a0(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new ro(dE(this.h),xg(this.s),xg(this.l),ky(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ky(this.opacity);return`${e===1?"hsl(":"hsla("}${dE(this.h)}, ${xg(this.s)*100}%, ${xg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function dE(e){return e=(e||0)%360,e<0?e+360:e}function xg(e){return Math.max(0,Math.min(1,e||0))}function a0(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const sS=e=>()=>e;function OH(e,t){return function(r){return e+r*t}}function zH(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function DH(e){return(e=+e)==1?hz:function(t,r){return r-t?zH(t,r,e):sS(isNaN(t)?r:t)}}function hz(e,t){var r=t-e;return r?OH(e,r):sS(isNaN(e)?t:e)}const pE=function e(t){var r=DH(t);function n(s,c){var d=r((s=Zb(s)).r,(c=Zb(c)).r),l=r(s.g,c.g),v=r(s.b,c.b),b=hz(s.opacity,c.opacity);return function(S){return s.r=d(S),s.g=l(S),s.b=v(S),s.opacity=b(S),s+""}}return n.gamma=e,n}(1);function LH(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(c){for(s=0;s<r;++s)n[s]=e[s]*(1-c)+t[s]*c;return n}}function jH(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function $H(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),c=new Array(r),d;for(d=0;d<n;++d)s[d]=Dh(e[d],t[d]);for(;d<r;++d)c[d]=t[d];return function(l){for(d=0;d<n;++d)c[d]=s[d](l);return c}}function RH(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Iy(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function NH(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Dh(e[s],t[s]):n[s]=t[s];return function(c){for(s in r)n[s]=r[s](c);return n}}var Hb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o0=new RegExp(Hb.source,"g");function BH(e){return function(){return e}}function FH(e){return function(t){return e(t)+""}}function UH(e,t){var r=Hb.lastIndex=o0.lastIndex=0,n,s,c,d=-1,l=[],v=[];for(e=e+"",t=t+"";(n=Hb.exec(e))&&(s=o0.exec(t));)(c=s.index)>r&&(c=t.slice(r,c),l[d]?l[d]+=c:l[++d]=c),(n=n[0])===(s=s[0])?l[d]?l[d]+=s:l[++d]=s:(l[++d]=null,v.push({i:d,x:Iy(n,s)})),r=o0.lastIndex;return r<t.length&&(c=t.slice(r),l[d]?l[d]+=c:l[++d]=c),l.length<2?v[0]?FH(v[0].x):BH(t):(t=v.length,function(b){for(var S=0,P;S<t;++S)l[(P=v[S]).i]=P.x(b);return l.join("")})}function Dh(e,t){var r=typeof t,n;return t==null||r==="boolean"?sS(t):(r==="number"?Iy:r==="string"?(n=op(t))?(t=n,pE):UH:t instanceof op?pE:t instanceof Date?RH:jH(t)?LH:Array.isArray(t)?$H:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?NH:Iy)(e,t)}function lS(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function VH(e,t){t===void 0&&(t=e,e=Dh);for(var r=0,n=t.length-1,s=t[0],c=new Array(n<0?0:n);r<n;)c[r]=e(s,s=t[++r]);return function(d){var l=Math.max(0,Math.min(n-1,Math.floor(d*=n)));return c[l](d-l)}}function qH(e){return function(){return e}}function My(e){return+e}var mE=[0,1];function ji(e){return e}function Kb(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:qH(isNaN(t)?NaN:.5)}function GH(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function WH(e,t,r){var n=e[0],s=e[1],c=t[0],d=t[1];return s<n?(n=Kb(s,n),c=r(d,c)):(n=Kb(n,s),c=r(c,d)),function(l){return c(n(l))}}function ZH(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),c=new Array(n),d=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++d<n;)s[d]=Kb(e[d],e[d+1]),c[d]=r(t[d],t[d+1]);return function(l){var v=Bp(e,l,1,n)-1;return c[v](s[v](l))}}function Up(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Zv(){var e=mE,t=mE,r=Dh,n,s,c,d=ji,l,v,b;function S(){var k=Math.min(e.length,t.length);return d!==ji&&(d=GH(e[0],e[k-1])),l=k>2?ZH:WH,v=b=null,P}function P(k){return k==null||isNaN(k=+k)?c:(v||(v=l(e.map(n),t,r)))(n(d(k)))}return P.invert=function(k){return d(s((b||(b=l(t,e.map(n),Iy)))(k)))},P.domain=function(k){return arguments.length?(e=Array.from(k,My),S()):e.slice()},P.range=function(k){return arguments.length?(t=Array.from(k),S()):t.slice()},P.rangeRound=function(k){return t=Array.from(k),r=lS,S()},P.clamp=function(k){return arguments.length?(d=k?!0:ji,S()):d!==ji},P.interpolate=function(k){return arguments.length?(r=k,S()):r},P.unknown=function(k){return arguments.length?(c=k,P):c},function(k,z){return n=k,s=z,S()}}function uS(){return Zv()(ji,ji)}function HH(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Oy(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function oh(e){return e=Oy(Math.abs(e)),e?e[1]:NaN}function KH(e,t){return function(r,n){for(var s=r.length,c=[],d=0,l=e[0],v=0;s>0&&l>0&&(v+l+1>n&&(l=Math.max(1,n-v)),c.push(r.substring(s-=l,s+l)),!((v+=l+1)>n));)l=e[d=(d+1)%e.length];return c.reverse().join(t)}}function XH(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var YH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sp(e){if(!(t=YH.exec(e)))throw new Error("invalid format: "+e);var t;return new cS({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}sp.prototype=cS.prototype;function cS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}cS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function JH(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var fz;function QH(e,t){var r=Oy(e,t);if(!r)return e+"";var n=r[0],s=r[1],c=s-(fz=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,d=n.length;return c===d?n:c>d?n+new Array(c-d+1).join("0"):c>0?n.slice(0,c)+"."+n.slice(c):"0."+new Array(1-c).join("0")+Oy(e,Math.max(0,t+c-1))[0]}function gE(e,t){var r=Oy(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const yE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:HH,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gE(e*100,t),r:gE,s:QH,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vE(e){return e}var _E=Array.prototype.map,xE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function eK(e){var t=e.grouping===void 0||e.thousands===void 0?vE:KH(_E.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",c=e.numerals===void 0?vE:XH(_E.call(e.numerals,String)),d=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",v=e.nan===void 0?"NaN":e.nan+"";function b(P){P=sp(P);var k=P.fill,z=P.align,B=P.sign,j=P.symbol,V=P.zero,D=P.width,R=P.comma,F=P.precision,X=P.trim,q=P.type;q==="n"?(R=!0,q="g"):yE[q]||(F===void 0&&(F=12),X=!0,q="g"),(V||k==="0"&&z==="=")&&(V=!0,k="0",z="=");var W=j==="$"?r:j==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",ee=j==="$"?n:/[%p]/.test(q)?d:"",le=yE[q],ve=/[defgprs%]/.test(q);F=F===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,F)):Math.max(0,Math.min(20,F));function Pe(Ce){var Te=W,Fe=ee,Re,Be,qe;if(q==="c")Fe=le(Ce)+Fe,Ce="";else{Ce=+Ce;var Ke=Ce<0||1/Ce<0;if(Ce=isNaN(Ce)?v:le(Math.abs(Ce),F),X&&(Ce=JH(Ce)),Ke&&+Ce==0&&B!=="+"&&(Ke=!1),Te=(Ke?B==="("?B:l:B==="-"||B==="("?"":B)+Te,Fe=(q==="s"?xE[8+fz/3]:"")+Fe+(Ke&&B==="("?")":""),ve){for(Re=-1,Be=Ce.length;++Re<Be;)if(qe=Ce.charCodeAt(Re),48>qe||qe>57){Fe=(qe===46?s+Ce.slice(Re+1):Ce.slice(Re))+Fe,Ce=Ce.slice(0,Re);break}}}R&&!V&&(Ce=t(Ce,1/0));var ce=Te.length+Ce.length+Fe.length,_e=ce<D?new Array(D-ce+1).join(k):"";switch(R&&V&&(Ce=t(_e+Ce,_e.length?D-Fe.length:1/0),_e=""),z){case"<":Ce=Te+Ce+Fe+_e;break;case"=":Ce=Te+_e+Ce+Fe;break;case"^":Ce=_e.slice(0,ce=_e.length>>1)+Te+Ce+Fe+_e.slice(ce);break;default:Ce=_e+Te+Ce+Fe;break}return c(Ce)}return Pe.toString=function(){return P+""},Pe}function S(P,k){var z=b((P=sp(P),P.type="f",P)),B=Math.max(-8,Math.min(8,Math.floor(oh(k)/3)))*3,j=Math.pow(10,-B),V=xE[8+B/3];return function(D){return z(j*D)+V}}return{format:b,formatPrefix:S}}var bg,hS,dz;tK({thousands:",",grouping:[3],currency:["$",""]});function tK(e){return bg=eK(e),hS=bg.format,dz=bg.formatPrefix,bg}function rK(e){return Math.max(0,-oh(Math.abs(e)))}function nK(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(oh(t)/3)))*3-oh(Math.abs(e)))}function iK(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,oh(t)-oh(e))+1}function pz(e,t,r,n){var s=Gb(e,t,r),c;switch(n=sp(n??",f"),n.type){case"s":{var d=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(c=nK(s,d))&&(n.precision=c),dz(n,d)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(c=iK(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=c-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(c=rK(s))&&(n.precision=c-(n.type==="%")*2);break}}return hS(n)}function Tl(e){var t=e.domain;return e.ticks=function(r){var n=t();return Vb(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return pz(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,c=n.length-1,d=n[s],l=n[c],v,b,S=10;for(l<d&&(b=d,d=l,l=b,b=s,s=c,c=b);S-- >0;){if(b=qb(d,l,r),b===v)return n[s]=d,n[c]=l,t(n);if(b>0)d=Math.floor(d/b)*b,l=Math.ceil(l/b)*b;else if(b<0)d=Math.ceil(d*b)/b,l=Math.floor(l*b)/b;else break;v=b}return e},e}function zy(){var e=uS();return e.copy=function(){return Up(e,zy())},$a.apply(e,arguments),Tl(e)}function mz(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,My),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return mz(e).unknown(t)},e=arguments.length?Array.from(e,My):[0,1],Tl(r)}function gz(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],c=e[n],d;return c<s&&(d=r,r=n,n=d,d=s,s=c,c=d),e[r]=t.floor(s),e[n]=t.ceil(c),e}function bE(e){return Math.log(e)}function wE(e){return Math.exp(e)}function aK(e){return-Math.log(-e)}function oK(e){return-Math.exp(-e)}function sK(e){return isFinite(e)?+("1e"+e):e<0?0:e}function lK(e){return e===10?sK:e===Math.E?Math.exp:t=>Math.pow(e,t)}function uK(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function SE(e){return(t,r)=>-e(-t,r)}function fS(e){const t=e(bE,wE),r=t.domain;let n=10,s,c;function d(){return s=uK(n),c=lK(n),r()[0]<0?(s=SE(s),c=SE(c),e(aK,oK)):e(bE,wE),t}return t.base=function(l){return arguments.length?(n=+l,d()):n},t.domain=function(l){return arguments.length?(r(l),d()):r()},t.ticks=l=>{const v=r();let b=v[0],S=v[v.length-1];const P=S<b;P&&([b,S]=[S,b]);let k=s(b),z=s(S),B,j;const V=l==null?10:+l;let D=[];if(!(n%1)&&z-k<V){if(k=Math.floor(k),z=Math.ceil(z),b>0){for(;k<=z;++k)for(B=1;B<n;++B)if(j=k<0?B/c(-k):B*c(k),!(j<b)){if(j>S)break;D.push(j)}}else for(;k<=z;++k)for(B=n-1;B>=1;--B)if(j=k>0?B/c(-k):B*c(k),!(j<b)){if(j>S)break;D.push(j)}D.length*2<V&&(D=Vb(b,S,V))}else D=Vb(k,z,Math.min(z-k,V)).map(c);return P?D.reverse():D},t.tickFormat=(l,v)=>{if(l==null&&(l=10),v==null&&(v=n===10?"s":","),typeof v!="function"&&(!(n%1)&&(v=sp(v)).precision==null&&(v.trim=!0),v=hS(v)),l===1/0)return v;const b=Math.max(1,n*l/t.ticks().length);return S=>{let P=S/c(Math.round(s(S)));return P*n<n-.5&&(P*=n),P<=b?v(S):""}},t.nice=()=>r(gz(r(),{floor:l=>c(Math.floor(s(l))),ceil:l=>c(Math.ceil(s(l)))})),t}function yz(){const e=fS(Zv()).domain([1,10]);return e.copy=()=>Up(e,yz()).base(e.base()),$a.apply(e,arguments),e}function TE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function PE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function dS(e){var t=1,r=e(TE(t),PE(t));return r.constant=function(n){return arguments.length?e(TE(t=+n),PE(t)):t},Tl(r)}function vz(){var e=dS(Zv());return e.copy=function(){return Up(e,vz()).constant(e.constant())},$a.apply(e,arguments)}function AE(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function cK(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function hK(e){return e<0?-e*e:e*e}function pS(e){var t=e(ji,ji),r=1;function n(){return r===1?e(ji,ji):r===.5?e(cK,hK):e(AE(r),AE(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Tl(t)}function mS(){var e=pS(Zv());return e.copy=function(){return Up(e,mS()).exponent(e.exponent())},$a.apply(e,arguments),e}function fK(){return mS.apply(null,arguments).exponent(.5)}function EE(e){return Math.sign(e)*e*e}function dK(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function _z(){var e=uS(),t=[0,1],r=!1,n;function s(c){var d=dK(e(c));return isNaN(d)?n:r?Math.round(d):d}return s.invert=function(c){return e.invert(EE(c))},s.domain=function(c){return arguments.length?(e.domain(c),s):e.domain()},s.range=function(c){return arguments.length?(e.range((t=Array.from(c,My)).map(EE)),s):t.slice()},s.rangeRound=function(c){return s.range(c).round(!0)},s.round=function(c){return arguments.length?(r=!!c,s):r},s.clamp=function(c){return arguments.length?(e.clamp(c),s):e.clamp()},s.unknown=function(c){return arguments.length?(n=c,s):n},s.copy=function(){return _z(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},$a.apply(s,arguments),Tl(s)}function xz(){var e=[],t=[],r=[],n;function s(){var d=0,l=Math.max(1,t.length);for(r=new Array(l-1);++d<l;)r[d-1]=vH(e,d/l);return c}function c(d){return d==null||isNaN(d=+d)?n:t[Bp(r,d)]}return c.invertExtent=function(d){var l=t.indexOf(d);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},c.domain=function(d){if(!arguments.length)return e.slice();e=[];for(let l of d)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ml),s()},c.range=function(d){return arguments.length?(t=Array.from(d),s()):t.slice()},c.unknown=function(d){return arguments.length?(n=d,c):n},c.quantiles=function(){return r.slice()},c.copy=function(){return xz().domain(e).range(t).unknown(n)},$a.apply(c,arguments)}function bz(){var e=0,t=1,r=1,n=[.5],s=[0,1],c;function d(v){return v!=null&&v<=v?s[Bp(n,v,0,r)]:c}function l(){var v=-1;for(n=new Array(r);++v<r;)n[v]=((v+1)*t-(v-r)*e)/(r+1);return d}return d.domain=function(v){return arguments.length?([e,t]=v,e=+e,t=+t,l()):[e,t]},d.range=function(v){return arguments.length?(r=(s=Array.from(v)).length-1,l()):s.slice()},d.invertExtent=function(v){var b=s.indexOf(v);return b<0?[NaN,NaN]:b<1?[e,n[0]]:b>=r?[n[r-1],t]:[n[b-1],n[b]]},d.unknown=function(v){return arguments.length&&(c=v),d},d.thresholds=function(){return n.slice()},d.copy=function(){return bz().domain([e,t]).range(s).unknown(c)},$a.apply(Tl(d),arguments)}function wz(){var e=[.5],t=[0,1],r,n=1;function s(c){return c!=null&&c<=c?t[Bp(e,c,0,n)]:r}return s.domain=function(c){return arguments.length?(e=Array.from(c),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(c){return arguments.length?(t=Array.from(c),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(c){var d=t.indexOf(c);return[e[d-1],e[d]]},s.unknown=function(c){return arguments.length?(r=c,s):r},s.copy=function(){return wz().domain(e).range(t).unknown(r)},$a.apply(s,arguments)}const s0=new Date,l0=new Date;function Rn(e,t,r,n){function s(c){return e(c=arguments.length===0?new Date:new Date(+c)),c}return s.floor=c=>(e(c=new Date(+c)),c),s.ceil=c=>(e(c=new Date(c-1)),t(c,1),e(c),c),s.round=c=>{const d=s(c),l=s.ceil(c);return c-d<l-c?d:l},s.offset=(c,d)=>(t(c=new Date(+c),d==null?1:Math.floor(d)),c),s.range=(c,d,l)=>{const v=[];if(c=s.ceil(c),l=l==null?1:Math.floor(l),!(c<d)||!(l>0))return v;let b;do v.push(b=new Date(+c)),t(c,l),e(c);while(b<c&&c<d);return v},s.filter=c=>Rn(d=>{if(d>=d)for(;e(d),!c(d);)d.setTime(d-1)},(d,l)=>{if(d>=d)if(l<0)for(;++l<=0;)for(;t(d,-1),!c(d););else for(;--l>=0;)for(;t(d,1),!c(d););}),r&&(s.count=(c,d)=>(s0.setTime(+c),l0.setTime(+d),e(s0),e(l0),Math.floor(r(s0,l0))),s.every=c=>(c=Math.floor(c),!isFinite(c)||!(c>0)?null:c>1?s.filter(n?d=>n(d)%c===0:d=>s.count(0,d)%c===0):s)),s}const Dy=Rn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Dy.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Rn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Dy);Dy.range;const as=1e3,Ia=as*60,os=Ia*60,gs=os*24,gS=gs*7,CE=gs*30,u0=gs*365,au=Rn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*as)},(e,t)=>(t-e)/as,e=>e.getUTCSeconds());au.range;const yS=Rn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*as)},(e,t)=>{e.setTime(+e+t*Ia)},(e,t)=>(t-e)/Ia,e=>e.getMinutes());yS.range;const vS=Rn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ia)},(e,t)=>(t-e)/Ia,e=>e.getUTCMinutes());vS.range;const _S=Rn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*as-e.getMinutes()*Ia)},(e,t)=>{e.setTime(+e+t*os)},(e,t)=>(t-e)/os,e=>e.getHours());_S.range;const xS=Rn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*os)},(e,t)=>(t-e)/os,e=>e.getUTCHours());xS.range;const Vp=Rn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ia)/gs,e=>e.getDate()-1);Vp.range;const Hv=Rn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/gs,e=>e.getUTCDate()-1);Hv.range;const Sz=Rn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/gs,e=>Math.floor(e/gs));Sz.range;function Cu(e){return Rn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ia)/gS)}const Kv=Cu(0),Ly=Cu(1),pK=Cu(2),mK=Cu(3),sh=Cu(4),gK=Cu(5),yK=Cu(6);Kv.range;Ly.range;pK.range;mK.range;sh.range;gK.range;yK.range;function ku(e){return Rn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/gS)}const Xv=ku(0),jy=ku(1),vK=ku(2),_K=ku(3),lh=ku(4),xK=ku(5),bK=ku(6);Xv.range;jy.range;vK.range;_K.range;lh.range;xK.range;bK.range;const bS=Rn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());bS.range;const wS=Rn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());wS.range;const ys=Rn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ys.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Rn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ys.range;const vs=Rn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());vs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Rn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});vs.range;function Tz(e,t,r,n,s,c){const d=[[au,1,as],[au,5,5*as],[au,15,15*as],[au,30,30*as],[c,1,Ia],[c,5,5*Ia],[c,15,15*Ia],[c,30,30*Ia],[s,1,os],[s,3,3*os],[s,6,6*os],[s,12,12*os],[n,1,gs],[n,2,2*gs],[r,1,gS],[t,1,CE],[t,3,3*CE],[e,1,u0]];function l(b,S,P){const k=S<b;k&&([b,S]=[S,b]);const z=P&&typeof P.range=="function"?P:v(b,S,P),B=z?z.range(b,+S+1):[];return k?B.reverse():B}function v(b,S,P){const k=Math.abs(S-b)/P,z=iS(([,,V])=>V).right(d,k);if(z===d.length)return e.every(Gb(b/u0,S/u0,P));if(z===0)return Dy.every(Math.max(Gb(b,S,P),1));const[B,j]=d[k/d[z-1][2]<d[z][2]/k?z-1:z];return B.every(j)}return[l,v]}const[wK,SK]=Tz(vs,wS,Xv,Sz,xS,vS),[TK,PK]=Tz(ys,bS,Kv,Vp,_S,yS);function c0(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function h0(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ad(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function AK(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,c=e.days,d=e.shortDays,l=e.months,v=e.shortMonths,b=od(s),S=sd(s),P=od(c),k=sd(c),z=od(d),B=sd(d),j=od(l),V=sd(l),D=od(v),R=sd(v),F={a:Ke,A:ce,b:_e,B:ke,c:null,d:DE,e:DE,f:KK,g:aX,G:sX,H:WK,I:ZK,j:HK,L:Pz,m:XK,M:YK,p:Ue,q:je,Q:$E,s:RE,S:JK,u:QK,U:eX,V:tX,w:rX,W:nX,x:null,X:null,y:iX,Y:oX,Z:lX,"%":jE},X={a:Qe,A:pt,b:Dt,B:Rt,c:null,d:LE,e:LE,f:fX,g:wX,G:TX,H:uX,I:cX,j:hX,L:Ez,m:dX,M:pX,p:Bt,q:Jt,Q:$E,s:RE,S:mX,u:gX,U:yX,V:vX,w:_X,W:xX,x:null,X:null,y:bX,Y:SX,Z:PX,"%":jE},q={a:Pe,A:Ce,b:Te,B:Fe,c:Re,d:OE,e:OE,f:UK,g:ME,G:IE,H:zE,I:zE,j:RK,L:FK,m:$K,M:NK,p:ve,q:jK,Q:qK,s:GK,S:BK,u:MK,U:OK,V:zK,w:IK,W:DK,x:Be,X:qe,y:ME,Y:IE,Z:LK,"%":VK};F.x=W(r,F),F.X=W(n,F),F.c=W(t,F),X.x=W(r,X),X.X=W(n,X),X.c=W(t,X);function W(Ye,nt){return function(At){var ze=[],kt=-1,$t=0,mt=Ye.length,yt,Ot,Ht;for(At instanceof Date||(At=new Date(+At));++kt<mt;)Ye.charCodeAt(kt)===37&&(ze.push(Ye.slice($t,kt)),(Ot=kE[yt=Ye.charAt(++kt)])!=null?yt=Ye.charAt(++kt):Ot=yt==="e"?" ":"0",(Ht=nt[yt])&&(yt=Ht(At,Ot)),ze.push(yt),$t=kt+1);return ze.push(Ye.slice($t,kt)),ze.join("")}}function ee(Ye,nt){return function(At){var ze=ad(1900,void 0,1),kt=le(ze,Ye,At+="",0),$t,mt;if(kt!=At.length)return null;if("Q"in ze)return new Date(ze.Q);if("s"in ze)return new Date(ze.s*1e3+("L"in ze?ze.L:0));if(nt&&!("Z"in ze)&&(ze.Z=0),"p"in ze&&(ze.H=ze.H%12+ze.p*12),ze.m===void 0&&(ze.m="q"in ze?ze.q:0),"V"in ze){if(ze.V<1||ze.V>53)return null;"w"in ze||(ze.w=1),"Z"in ze?($t=h0(ad(ze.y,0,1)),mt=$t.getUTCDay(),$t=mt>4||mt===0?jy.ceil($t):jy($t),$t=Hv.offset($t,(ze.V-1)*7),ze.y=$t.getUTCFullYear(),ze.m=$t.getUTCMonth(),ze.d=$t.getUTCDate()+(ze.w+6)%7):($t=c0(ad(ze.y,0,1)),mt=$t.getDay(),$t=mt>4||mt===0?Ly.ceil($t):Ly($t),$t=Vp.offset($t,(ze.V-1)*7),ze.y=$t.getFullYear(),ze.m=$t.getMonth(),ze.d=$t.getDate()+(ze.w+6)%7)}else("W"in ze||"U"in ze)&&("w"in ze||(ze.w="u"in ze?ze.u%7:"W"in ze?1:0),mt="Z"in ze?h0(ad(ze.y,0,1)).getUTCDay():c0(ad(ze.y,0,1)).getDay(),ze.m=0,ze.d="W"in ze?(ze.w+6)%7+ze.W*7-(mt+5)%7:ze.w+ze.U*7-(mt+6)%7);return"Z"in ze?(ze.H+=ze.Z/100|0,ze.M+=ze.Z%100,h0(ze)):c0(ze)}}function le(Ye,nt,At,ze){for(var kt=0,$t=nt.length,mt=At.length,yt,Ot;kt<$t;){if(ze>=mt)return-1;if(yt=nt.charCodeAt(kt++),yt===37){if(yt=nt.charAt(kt++),Ot=q[yt in kE?nt.charAt(kt++):yt],!Ot||(ze=Ot(Ye,At,ze))<0)return-1}else if(yt!=At.charCodeAt(ze++))return-1}return ze}function ve(Ye,nt,At){var ze=b.exec(nt.slice(At));return ze?(Ye.p=S.get(ze[0].toLowerCase()),At+ze[0].length):-1}function Pe(Ye,nt,At){var ze=z.exec(nt.slice(At));return ze?(Ye.w=B.get(ze[0].toLowerCase()),At+ze[0].length):-1}function Ce(Ye,nt,At){var ze=P.exec(nt.slice(At));return ze?(Ye.w=k.get(ze[0].toLowerCase()),At+ze[0].length):-1}function Te(Ye,nt,At){var ze=D.exec(nt.slice(At));return ze?(Ye.m=R.get(ze[0].toLowerCase()),At+ze[0].length):-1}function Fe(Ye,nt,At){var ze=j.exec(nt.slice(At));return ze?(Ye.m=V.get(ze[0].toLowerCase()),At+ze[0].length):-1}function Re(Ye,nt,At){return le(Ye,t,nt,At)}function Be(Ye,nt,At){return le(Ye,r,nt,At)}function qe(Ye,nt,At){return le(Ye,n,nt,At)}function Ke(Ye){return d[Ye.getDay()]}function ce(Ye){return c[Ye.getDay()]}function _e(Ye){return v[Ye.getMonth()]}function ke(Ye){return l[Ye.getMonth()]}function Ue(Ye){return s[+(Ye.getHours()>=12)]}function je(Ye){return 1+~~(Ye.getMonth()/3)}function Qe(Ye){return d[Ye.getUTCDay()]}function pt(Ye){return c[Ye.getUTCDay()]}function Dt(Ye){return v[Ye.getUTCMonth()]}function Rt(Ye){return l[Ye.getUTCMonth()]}function Bt(Ye){return s[+(Ye.getUTCHours()>=12)]}function Jt(Ye){return 1+~~(Ye.getUTCMonth()/3)}return{format:function(Ye){var nt=W(Ye+="",F);return nt.toString=function(){return Ye},nt},parse:function(Ye){var nt=ee(Ye+="",!1);return nt.toString=function(){return Ye},nt},utcFormat:function(Ye){var nt=W(Ye+="",X);return nt.toString=function(){return Ye},nt},utcParse:function(Ye){var nt=ee(Ye+="",!0);return nt.toString=function(){return Ye},nt}}}var kE={"-":"",_:" ",0:"0"},Kn=/^\s*\d+/,EK=/^%/,CK=/[\\^$*+?|[\]().{}]/g;function yr(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",c=s.length;return n+(c<r?new Array(r-c+1).join(t)+s:s)}function kK(e){return e.replace(CK,"\\$&")}function od(e){return new RegExp("^(?:"+e.map(kK).join("|")+")","i")}function sd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function IK(e,t,r){var n=Kn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function MK(e,t,r){var n=Kn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function OK(e,t,r){var n=Kn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function zK(e,t,r){var n=Kn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function DK(e,t,r){var n=Kn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function IE(e,t,r){var n=Kn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function ME(e,t,r){var n=Kn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function LK(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function jK(e,t,r){var n=Kn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function $K(e,t,r){var n=Kn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function OE(e,t,r){var n=Kn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function RK(e,t,r){var n=Kn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function zE(e,t,r){var n=Kn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function NK(e,t,r){var n=Kn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function BK(e,t,r){var n=Kn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function FK(e,t,r){var n=Kn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function UK(e,t,r){var n=Kn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function VK(e,t,r){var n=EK.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function qK(e,t,r){var n=Kn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function GK(e,t,r){var n=Kn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function DE(e,t){return yr(e.getDate(),t,2)}function WK(e,t){return yr(e.getHours(),t,2)}function ZK(e,t){return yr(e.getHours()%12||12,t,2)}function HK(e,t){return yr(1+Vp.count(ys(e),e),t,3)}function Pz(e,t){return yr(e.getMilliseconds(),t,3)}function KK(e,t){return Pz(e,t)+"000"}function XK(e,t){return yr(e.getMonth()+1,t,2)}function YK(e,t){return yr(e.getMinutes(),t,2)}function JK(e,t){return yr(e.getSeconds(),t,2)}function QK(e){var t=e.getDay();return t===0?7:t}function eX(e,t){return yr(Kv.count(ys(e)-1,e),t,2)}function Az(e){var t=e.getDay();return t>=4||t===0?sh(e):sh.ceil(e)}function tX(e,t){return e=Az(e),yr(sh.count(ys(e),e)+(ys(e).getDay()===4),t,2)}function rX(e){return e.getDay()}function nX(e,t){return yr(Ly.count(ys(e)-1,e),t,2)}function iX(e,t){return yr(e.getFullYear()%100,t,2)}function aX(e,t){return e=Az(e),yr(e.getFullYear()%100,t,2)}function oX(e,t){return yr(e.getFullYear()%1e4,t,4)}function sX(e,t){var r=e.getDay();return e=r>=4||r===0?sh(e):sh.ceil(e),yr(e.getFullYear()%1e4,t,4)}function lX(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+yr(t/60|0,"0",2)+yr(t%60,"0",2)}function LE(e,t){return yr(e.getUTCDate(),t,2)}function uX(e,t){return yr(e.getUTCHours(),t,2)}function cX(e,t){return yr(e.getUTCHours()%12||12,t,2)}function hX(e,t){return yr(1+Hv.count(vs(e),e),t,3)}function Ez(e,t){return yr(e.getUTCMilliseconds(),t,3)}function fX(e,t){return Ez(e,t)+"000"}function dX(e,t){return yr(e.getUTCMonth()+1,t,2)}function pX(e,t){return yr(e.getUTCMinutes(),t,2)}function mX(e,t){return yr(e.getUTCSeconds(),t,2)}function gX(e){var t=e.getUTCDay();return t===0?7:t}function yX(e,t){return yr(Xv.count(vs(e)-1,e),t,2)}function Cz(e){var t=e.getUTCDay();return t>=4||t===0?lh(e):lh.ceil(e)}function vX(e,t){return e=Cz(e),yr(lh.count(vs(e),e)+(vs(e).getUTCDay()===4),t,2)}function _X(e){return e.getUTCDay()}function xX(e,t){return yr(jy.count(vs(e)-1,e),t,2)}function bX(e,t){return yr(e.getUTCFullYear()%100,t,2)}function wX(e,t){return e=Cz(e),yr(e.getUTCFullYear()%100,t,2)}function SX(e,t){return yr(e.getUTCFullYear()%1e4,t,4)}function TX(e,t){var r=e.getUTCDay();return e=r>=4||r===0?lh(e):lh.ceil(e),yr(e.getUTCFullYear()%1e4,t,4)}function PX(){return"+0000"}function jE(){return"%"}function $E(e){return+e}function RE(e){return Math.floor(+e/1e3)}var xc,kz,Iz;AX({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function AX(e){return xc=AK(e),kz=xc.format,xc.parse,Iz=xc.utcFormat,xc.utcParse,xc}function EX(e){return new Date(e)}function CX(e){return e instanceof Date?+e:+new Date(+e)}function SS(e,t,r,n,s,c,d,l,v,b){var S=uS(),P=S.invert,k=S.domain,z=b(".%L"),B=b(":%S"),j=b("%I:%M"),V=b("%I %p"),D=b("%a %d"),R=b("%b %d"),F=b("%B"),X=b("%Y");function q(W){return(v(W)<W?z:l(W)<W?B:d(W)<W?j:c(W)<W?V:n(W)<W?s(W)<W?D:R:r(W)<W?F:X)(W)}return S.invert=function(W){return new Date(P(W))},S.domain=function(W){return arguments.length?k(Array.from(W,CX)):k().map(EX)},S.ticks=function(W){var ee=k();return e(ee[0],ee[ee.length-1],W??10)},S.tickFormat=function(W,ee){return ee==null?q:b(ee)},S.nice=function(W){var ee=k();return(!W||typeof W.range!="function")&&(W=t(ee[0],ee[ee.length-1],W??10)),W?k(gz(ee,W)):S},S.copy=function(){return Up(S,SS(e,t,r,n,s,c,d,l,v,b))},S}function kX(){return $a.apply(SS(TK,PK,ys,bS,Kv,Vp,_S,yS,au,kz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function IX(){return $a.apply(SS(wK,SK,vs,wS,Xv,Hv,xS,vS,au,Iz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Yv(){var e=0,t=1,r,n,s,c,d=ji,l=!1,v;function b(P){return P==null||isNaN(P=+P)?v:d(s===0?.5:(P=(c(P)-r)*s,l?Math.max(0,Math.min(1,P)):P))}b.domain=function(P){return arguments.length?([e,t]=P,r=c(e=+e),n=c(t=+t),s=r===n?0:1/(n-r),b):[e,t]},b.clamp=function(P){return arguments.length?(l=!!P,b):l},b.interpolator=function(P){return arguments.length?(d=P,b):d};function S(P){return function(k){var z,B;return arguments.length?([z,B]=k,d=P(z,B),b):[d(0),d(1)]}}return b.range=S(Dh),b.rangeRound=S(lS),b.unknown=function(P){return arguments.length?(v=P,b):v},function(P){return c=P,r=P(e),n=P(t),s=r===n?0:1/(n-r),b}}function Pl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Mz(){var e=Tl(Yv()(ji));return e.copy=function(){return Pl(e,Mz())},ws.apply(e,arguments)}function Oz(){var e=fS(Yv()).domain([1,10]);return e.copy=function(){return Pl(e,Oz()).base(e.base())},ws.apply(e,arguments)}function zz(){var e=dS(Yv());return e.copy=function(){return Pl(e,zz()).constant(e.constant())},ws.apply(e,arguments)}function TS(){var e=pS(Yv());return e.copy=function(){return Pl(e,TS()).exponent(e.exponent())},ws.apply(e,arguments)}function MX(){return TS.apply(null,arguments).exponent(.5)}function Dz(){var e=[],t=ji;function r(n){if(n!=null&&!isNaN(n=+n))return t((Bp(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ml),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,c)=>yH(e,c/n))},r.copy=function(){return Dz(t).domain(e)},ws.apply(r,arguments)}function Jv(){var e=0,t=.5,r=1,n=1,s,c,d,l,v,b=ji,S,P=!1,k;function z(j){return isNaN(j=+j)?k:(j=.5+((j=+S(j))-c)*(n*j<n*c?l:v),b(P?Math.max(0,Math.min(1,j)):j))}z.domain=function(j){return arguments.length?([e,t,r]=j,s=S(e=+e),c=S(t=+t),d=S(r=+r),l=s===c?0:.5/(c-s),v=c===d?0:.5/(d-c),n=c<s?-1:1,z):[e,t,r]},z.clamp=function(j){return arguments.length?(P=!!j,z):P},z.interpolator=function(j){return arguments.length?(b=j,z):b};function B(j){return function(V){var D,R,F;return arguments.length?([D,R,F]=V,b=VH(j,[D,R,F]),z):[b(0),b(.5),b(1)]}}return z.range=B(Dh),z.rangeRound=B(lS),z.unknown=function(j){return arguments.length?(k=j,z):k},function(j){return S=j,s=j(e),c=j(t),d=j(r),l=s===c?0:.5/(c-s),v=c===d?0:.5/(d-c),n=c<s?-1:1,z}}function Lz(){var e=Tl(Jv()(ji));return e.copy=function(){return Pl(e,Lz())},ws.apply(e,arguments)}function jz(){var e=fS(Jv()).domain([.1,1,10]);return e.copy=function(){return Pl(e,jz()).base(e.base())},ws.apply(e,arguments)}function $z(){var e=dS(Jv());return e.copy=function(){return Pl(e,$z()).constant(e.constant())},ws.apply(e,arguments)}function PS(){var e=pS(Jv());return e.copy=function(){return Pl(e,PS()).exponent(e.exponent())},ws.apply(e,arguments)}function OX(){return PS.apply(null,arguments).exponent(.5)}const NE=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:np,scaleDiverging:Lz,scaleDivergingLog:jz,scaleDivergingPow:PS,scaleDivergingSqrt:OX,scaleDivergingSymlog:$z,scaleIdentity:mz,scaleImplicit:Wb,scaleLinear:zy,scaleLog:yz,scaleOrdinal:aS,scalePoint:Id,scalePow:mS,scaleQuantile:xz,scaleQuantize:bz,scaleRadial:_z,scaleSequential:Mz,scaleSequentialLog:Oz,scaleSequentialPow:TS,scaleSequentialQuantile:Dz,scaleSequentialSqrt:MX,scaleSequentialSymlog:zz,scaleSqrt:fK,scaleSymlog:vz,scaleThreshold:wz,scaleTime:kX,scaleUtc:IX,tickFormat:pz},Symbol.toStringTag,{value:"Module"}));var zX=Ah;function DX(e,t,r){for(var n=-1,s=e.length;++n<s;){var c=e[n],d=t(c);if(d!=null&&(l===void 0?d===d&&!zX(d):r(d,l)))var l=d,v=c}return v}var Rz=DX;function LX(e,t){return e>t}var jX=LX,$X=Rz,RX=jX,NX=zh;function BX(e){return e&&e.length?$X(e,NX,RX):void 0}var FX=BX;const Qv=Mr(FX);function UX(e,t){return e<t}var VX=UX,qX=Rz,GX=VX,WX=zh;function ZX(e){return e&&e.length?qX(e,WX,GX):void 0}var HX=ZX;const e_=Mr(HX);var KX=N1,XX=Sl,YX=WO,JX=ea;function QX(e,t){var r=JX(e)?KX:YX;return r(e,XX(t))}var eY=QX,tY=qO,rY=eY;function nY(e,t){return tY(rY(e,t),1)}var iY=nY;const aY=Mr(iY);var oY=eS;function sY(e,t){return oY(e,t)}var lY=sY;const AS=Mr(lY);var Lh=1e9,uY={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},CS,tn=!0,La="[DecimalError] ",hu=La+"Invalid argument: ",ES=La+"Exponent out of range: ",jh=Math.floor,Ql=Math.pow,cY=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,la,Gn=1e7,Hr=7,Nz=9007199254740991,$y=jh(Nz/Hr),Ct={};Ct.absoluteValue=Ct.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ct.comparedTo=Ct.cmp=function(e){var t,r,n,s,c=this;if(e=new c.constructor(e),c.s!==e.s)return c.s||-e.s;if(c.e!==e.e)return c.e>e.e^c.s<0?1:-1;for(n=c.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(c.d[t]!==e.d[t])return c.d[t]>e.d[t]^c.s<0?1:-1;return n===s?0:n>s^c.s<0?1:-1};Ct.decimalPlaces=Ct.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Hr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ct.dividedBy=Ct.div=function(e){return hs(this,new this.constructor(e))};Ct.dividedToIntegerBy=Ct.idiv=function(e){var t=this,r=t.constructor;return Dr(hs(t,new r(e),0,1),r.precision)};Ct.equals=Ct.eq=function(e){return!this.cmp(e)};Ct.exponent=function(){return En(this)};Ct.greaterThan=Ct.gt=function(e){return this.cmp(e)>0};Ct.greaterThanOrEqualTo=Ct.gte=function(e){return this.cmp(e)>=0};Ct.isInteger=Ct.isint=function(){return this.e>this.d.length-2};Ct.isNegative=Ct.isneg=function(){return this.s<0};Ct.isPositive=Ct.ispos=function(){return this.s>0};Ct.isZero=function(){return this.s===0};Ct.lessThan=Ct.lt=function(e){return this.cmp(e)<0};Ct.lessThanOrEqualTo=Ct.lte=function(e){return this.cmp(e)<1};Ct.logarithm=Ct.log=function(e){var t,r=this,n=r.constructor,s=n.precision,c=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(la))throw Error(La+"NaN");if(r.s<1)throw Error(La+(r.s?"NaN":"-Infinity"));return r.eq(la)?new n(0):(tn=!1,t=hs(lp(r,c),lp(e,c),c),tn=!0,Dr(t,s))};Ct.minus=Ct.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Uz(t,e):Bz(t,(e.s=-e.s,e))};Ct.modulo=Ct.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(La+"NaN");return r.s?(tn=!1,t=hs(r,e,0,1).times(e),tn=!0,r.minus(t)):Dr(new n(r),s)};Ct.naturalExponential=Ct.exp=function(){return Fz(this)};Ct.naturalLogarithm=Ct.ln=function(){return lp(this)};Ct.negated=Ct.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ct.plus=Ct.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Bz(t,e):Uz(t,(e.s=-e.s,e))};Ct.precision=Ct.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(hu+e);if(t=En(s)+1,n=s.d.length-1,r=n*Hr+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ct.squareRoot=Ct.sqrt=function(){var e,t,r,n,s,c,d,l=this,v=l.constructor;if(l.s<1){if(!l.s)return new v(0);throw Error(La+"NaN")}for(e=En(l),tn=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Po(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=jh((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new v(t)):n=new v(s.toString()),r=v.precision,s=d=r+3;;)if(c=n,n=c.plus(hs(l,c,d+2)).times(.5),Po(c.d).slice(0,d)===(t=Po(n.d)).slice(0,d)){if(t=t.slice(d-3,d+1),s==d&&t=="4999"){if(Dr(c,r+1,0),c.times(c).eq(l)){n=c;break}}else if(t!="9999")break;d+=4}return tn=!0,Dr(n,r)};Ct.times=Ct.mul=function(e){var t,r,n,s,c,d,l,v,b,S=this,P=S.constructor,k=S.d,z=(e=new P(e)).d;if(!S.s||!e.s)return new P(0);for(e.s*=S.s,r=S.e+e.e,v=k.length,b=z.length,v<b&&(c=k,k=z,z=c,d=v,v=b,b=d),c=[],d=v+b,n=d;n--;)c.push(0);for(n=b;--n>=0;){for(t=0,s=v+n;s>n;)l=c[s]+z[n]*k[s-n-1]+t,c[s--]=l%Gn|0,t=l/Gn|0;c[s]=(c[s]+t)%Gn|0}for(;!c[--d];)c.pop();return t?++r:c.shift(),e.d=c,e.e=r,tn?Dr(e,P.precision):e};Ct.toDecimalPlaces=Ct.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Mo(e,0,Lh),t===void 0?t=n.rounding:Mo(t,0,8),Dr(r,e+En(r)+1,t))};Ct.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=xu(n,!0):(Mo(e,0,Lh),t===void 0?t=s.rounding:Mo(t,0,8),n=Dr(new s(n),e+1,t),r=xu(n,!0,e+1)),r};Ct.toFixed=function(e,t){var r,n,s=this,c=s.constructor;return e===void 0?xu(s):(Mo(e,0,Lh),t===void 0?t=c.rounding:Mo(t,0,8),n=Dr(new c(s),e+En(s)+1,t),r=xu(n.abs(),!1,e+En(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ct.toInteger=Ct.toint=function(){var e=this,t=e.constructor;return Dr(new t(e),En(e)+1,t.rounding)};Ct.toNumber=function(){return+this};Ct.toPower=Ct.pow=function(e){var t,r,n,s,c,d,l=this,v=l.constructor,b=12,S=+(e=new v(e));if(!e.s)return new v(la);if(l=new v(l),!l.s){if(e.s<1)throw Error(La+"Infinity");return l}if(l.eq(la))return l;if(n=v.precision,e.eq(la))return Dr(l,n);if(t=e.e,r=e.d.length-1,d=t>=r,c=l.s,d){if((r=S<0?-S:S)<=Nz){for(s=new v(la),t=Math.ceil(n/Hr+4),tn=!1;r%2&&(s=s.times(l),FE(s.d,t)),r=jh(r/2),r!==0;)l=l.times(l),FE(l.d,t);return tn=!0,e.s<0?new v(la).div(s):Dr(s,n)}}else if(c<0)throw Error(La+"NaN");return c=c<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,tn=!1,s=e.times(lp(l,n+b)),tn=!0,s=Fz(s),s.s=c,s};Ct.toPrecision=function(e,t){var r,n,s=this,c=s.constructor;return e===void 0?(r=En(s),n=xu(s,r<=c.toExpNeg||r>=c.toExpPos)):(Mo(e,1,Lh),t===void 0?t=c.rounding:Mo(t,0,8),s=Dr(new c(s),e,t),r=En(s),n=xu(s,e<=r||r<=c.toExpNeg,e)),n};Ct.toSignificantDigits=Ct.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Mo(e,1,Lh),t===void 0?t=n.rounding:Mo(t,0,8)),Dr(new n(r),e,t)};Ct.toString=Ct.valueOf=Ct.val=Ct.toJSON=Ct[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=En(e),r=e.constructor;return xu(e,t<=r.toExpNeg||t>=r.toExpPos)};function Bz(e,t){var r,n,s,c,d,l,v,b,S=e.constructor,P=S.precision;if(!e.s||!t.s)return t.s||(t=new S(e)),tn?Dr(t,P):t;if(v=e.d,b=t.d,d=e.e,s=t.e,v=v.slice(),c=d-s,c){for(c<0?(n=v,c=-c,l=b.length):(n=b,s=d,l=v.length),d=Math.ceil(P/Hr),l=d>l?d+1:l+1,c>l&&(c=l,n.length=1),n.reverse();c--;)n.push(0);n.reverse()}for(l=v.length,c=b.length,l-c<0&&(c=l,n=b,b=v,v=n),r=0;c;)r=(v[--c]=v[c]+b[c]+r)/Gn|0,v[c]%=Gn;for(r&&(v.unshift(r),++s),l=v.length;v[--l]==0;)v.pop();return t.d=v,t.e=s,tn?Dr(t,P):t}function Mo(e,t,r){if(e!==~~e||e<t||e>r)throw Error(hu+e)}function Po(e){var t,r,n,s=e.length-1,c="",d=e[0];if(s>0){for(c+=d,t=1;t<s;t++)n=e[t]+"",r=Hr-n.length,r&&(c+=el(r)),c+=n;d=e[t],n=d+"",r=Hr-n.length,r&&(c+=el(r))}else if(d===0)return"0";for(;d%10===0;)d/=10;return c+d}var hs=function(){function e(n,s){var c,d=0,l=n.length;for(n=n.slice();l--;)c=n[l]*s+d,n[l]=c%Gn|0,d=c/Gn|0;return d&&n.unshift(d),n}function t(n,s,c,d){var l,v;if(c!=d)v=c>d?1:-1;else for(l=v=0;l<c;l++)if(n[l]!=s[l]){v=n[l]>s[l]?1:-1;break}return v}function r(n,s,c){for(var d=0;c--;)n[c]-=d,d=n[c]<s[c]?1:0,n[c]=d*Gn+n[c]-s[c];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,c,d){var l,v,b,S,P,k,z,B,j,V,D,R,F,X,q,W,ee,le,ve=n.constructor,Pe=n.s==s.s?1:-1,Ce=n.d,Te=s.d;if(!n.s)return new ve(n);if(!s.s)throw Error(La+"Division by zero");for(v=n.e-s.e,ee=Te.length,q=Ce.length,z=new ve(Pe),B=z.d=[],b=0;Te[b]==(Ce[b]||0);)++b;if(Te[b]>(Ce[b]||0)&&--v,c==null?R=c=ve.precision:d?R=c+(En(n)-En(s))+1:R=c,R<0)return new ve(0);if(R=R/Hr+2|0,b=0,ee==1)for(S=0,Te=Te[0],R++;(b<q||S)&&R--;b++)F=S*Gn+(Ce[b]||0),B[b]=F/Te|0,S=F%Te|0;else{for(S=Gn/(Te[0]+1)|0,S>1&&(Te=e(Te,S),Ce=e(Ce,S),ee=Te.length,q=Ce.length),X=ee,j=Ce.slice(0,ee),V=j.length;V<ee;)j[V++]=0;le=Te.slice(),le.unshift(0),W=Te[0],Te[1]>=Gn/2&&++W;do S=0,l=t(Te,j,ee,V),l<0?(D=j[0],ee!=V&&(D=D*Gn+(j[1]||0)),S=D/W|0,S>1?(S>=Gn&&(S=Gn-1),P=e(Te,S),k=P.length,V=j.length,l=t(P,j,k,V),l==1&&(S--,r(P,ee<k?le:Te,k))):(S==0&&(l=S=1),P=Te.slice()),k=P.length,k<V&&P.unshift(0),r(j,P,V),l==-1&&(V=j.length,l=t(Te,j,ee,V),l<1&&(S++,r(j,ee<V?le:Te,V))),V=j.length):l===0&&(S++,j=[0]),B[b++]=S,l&&j[0]?j[V++]=Ce[X]||0:(j=[Ce[X]],V=1);while((X++<q||j[0]!==void 0)&&R--)}return B[0]||B.shift(),z.e=v,Dr(z,d?c+En(z)+1:c)}}();function Fz(e,t){var r,n,s,c,d,l,v=0,b=0,S=e.constructor,P=S.precision;if(En(e)>16)throw Error(ES+En(e));if(!e.s)return new S(la);for(tn=!1,l=P,d=new S(.03125);e.abs().gte(.1);)e=e.times(d),b+=5;for(n=Math.log(Ql(2,b))/Math.LN10*2+5|0,l+=n,r=s=c=new S(la),S.precision=l;;){if(s=Dr(s.times(e),l),r=r.times(++v),d=c.plus(hs(s,r,l)),Po(d.d).slice(0,l)===Po(c.d).slice(0,l)){for(;b--;)c=Dr(c.times(c),l);return S.precision=P,t==null?(tn=!0,Dr(c,P)):c}c=d}}function En(e){for(var t=e.e*Hr,r=e.d[0];r>=10;r/=10)t++;return t}function f0(e,t,r){if(t>e.LN10.sd())throw tn=!0,r&&(e.precision=r),Error(La+"LN10 precision limit exceeded");return Dr(new e(e.LN10),t)}function el(e){for(var t="";e--;)t+="0";return t}function lp(e,t){var r,n,s,c,d,l,v,b,S,P=1,k=10,z=e,B=z.d,j=z.constructor,V=j.precision;if(z.s<1)throw Error(La+(z.s?"NaN":"-Infinity"));if(z.eq(la))return new j(0);if(t==null?(tn=!1,b=V):b=t,z.eq(10))return t==null&&(tn=!0),f0(j,b);if(b+=k,j.precision=b,r=Po(B),n=r.charAt(0),c=En(z),Math.abs(c)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)z=z.times(e),r=Po(z.d),n=r.charAt(0),P++;c=En(z),n>1?(z=new j("0."+r),c++):z=new j(n+"."+r.slice(1))}else return v=f0(j,b+2,V).times(c+""),z=lp(new j(n+"."+r.slice(1)),b-k).plus(v),j.precision=V,t==null?(tn=!0,Dr(z,V)):z;for(l=d=z=hs(z.minus(la),z.plus(la),b),S=Dr(z.times(z),b),s=3;;){if(d=Dr(d.times(S),b),v=l.plus(hs(d,new j(s),b)),Po(v.d).slice(0,b)===Po(l.d).slice(0,b))return l=l.times(2),c!==0&&(l=l.plus(f0(j,b+2,V).times(c+""))),l=hs(l,new j(P),b),j.precision=V,t==null?(tn=!0,Dr(l,V)):l;l=v,s+=2}}function BE(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=jh(r/Hr),e.d=[],n=(r+1)%Hr,r<0&&(n+=Hr),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Hr;n<s;)e.d.push(+t.slice(n,n+=Hr));t=t.slice(n),n=Hr-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),tn&&(e.e>$y||e.e<-$y))throw Error(ES+r)}else e.s=0,e.e=0,e.d=[0];return e}function Dr(e,t,r){var n,s,c,d,l,v,b,S,P=e.d;for(d=1,c=P[0];c>=10;c/=10)d++;if(n=t-d,n<0)n+=Hr,s=t,b=P[S=0];else{if(S=Math.ceil((n+1)/Hr),c=P.length,S>=c)return e;for(b=c=P[S],d=1;c>=10;c/=10)d++;n%=Hr,s=n-Hr+d}if(r!==void 0&&(c=Ql(10,d-s-1),l=b/c%10|0,v=t<0||P[S+1]!==void 0||b%c,v=r<4?(l||v)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||v||r==6&&(n>0?s>0?b/Ql(10,d-s):0:P[S-1])%10&1||r==(e.s<0?8:7))),t<1||!P[0])return v?(c=En(e),P.length=1,t=t-c-1,P[0]=Ql(10,(Hr-t%Hr)%Hr),e.e=jh(-t/Hr)||0):(P.length=1,P[0]=e.e=e.s=0),e;if(n==0?(P.length=S,c=1,S--):(P.length=S+1,c=Ql(10,Hr-n),P[S]=s>0?(b/Ql(10,d-s)%Ql(10,s)|0)*c:0),v)for(;;)if(S==0){(P[0]+=c)==Gn&&(P[0]=1,++e.e);break}else{if(P[S]+=c,P[S]!=Gn)break;P[S--]=0,c=1}for(n=P.length;P[--n]===0;)P.pop();if(tn&&(e.e>$y||e.e<-$y))throw Error(ES+En(e));return e}function Uz(e,t){var r,n,s,c,d,l,v,b,S,P,k=e.constructor,z=k.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new k(e),tn?Dr(t,z):t;if(v=e.d,P=t.d,n=t.e,b=e.e,v=v.slice(),d=b-n,d){for(S=d<0,S?(r=v,d=-d,l=P.length):(r=P,n=b,l=v.length),s=Math.max(Math.ceil(z/Hr),l)+2,d>s&&(d=s,r.length=1),r.reverse(),s=d;s--;)r.push(0);r.reverse()}else{for(s=v.length,l=P.length,S=s<l,S&&(l=s),s=0;s<l;s++)if(v[s]!=P[s]){S=v[s]<P[s];break}d=0}for(S&&(r=v,v=P,P=r,t.s=-t.s),l=v.length,s=P.length-l;s>0;--s)v[l++]=0;for(s=P.length;s>d;){if(v[--s]<P[s]){for(c=s;c&&v[--c]===0;)v[c]=Gn-1;--v[c],v[s]+=Gn}v[s]-=P[s]}for(;v[--l]===0;)v.pop();for(;v[0]===0;v.shift())--n;return v[0]?(t.d=v,t.e=n,tn?Dr(t,z):t):new k(0)}function xu(e,t,r){var n,s=En(e),c=Po(e.d),d=c.length;return t?(r&&(n=r-d)>0?c=c.charAt(0)+"."+c.slice(1)+el(n):d>1&&(c=c.charAt(0)+"."+c.slice(1)),c=c+(s<0?"e":"e+")+s):s<0?(c="0."+el(-s-1)+c,r&&(n=r-d)>0&&(c+=el(n))):s>=d?(c+=el(s+1-d),r&&(n=r-s-1)>0&&(c=c+"."+el(n))):((n=s+1)<d&&(c=c.slice(0,n)+"."+c.slice(n)),r&&(n=r-d)>0&&(s+1===d&&(c+="."),c+=el(n))),e.s<0?"-"+c:c}function FE(e,t){if(e.length>t)return e.length=t,!0}function Vz(e){var t,r,n;function s(c){var d=this;if(!(d instanceof s))return new s(c);if(d.constructor=s,c instanceof s){d.s=c.s,d.e=c.e,d.d=(c=c.d)?c.slice():c;return}if(typeof c=="number"){if(c*0!==0)throw Error(hu+c);if(c>0)d.s=1;else if(c<0)c=-c,d.s=-1;else{d.s=0,d.e=0,d.d=[0];return}if(c===~~c&&c<1e7){d.e=0,d.d=[c];return}return BE(d,c.toString())}else if(typeof c!="string")throw Error(hu+c);if(c.charCodeAt(0)===45?(c=c.slice(1),d.s=-1):d.s=1,cY.test(c))BE(d,c);else throw Error(hu+c)}if(s.prototype=Ct,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=Vz,s.config=s.set=hY,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function hY(e){if(!e||typeof e!="object")throw Error(La+"Object expected");var t,r,n,s=["precision",1,Lh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(jh(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(hu+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(hu+r+": "+n);return this}var CS=Vz(uY);la=new CS(1);const Ir=CS;function fY(e){return gY(e)||mY(e)||pY(e)||dY()}function dY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pY(e,t){if(e){if(typeof e=="string")return Xb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xb(e,t)}}function mY(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function gY(e){if(Array.isArray(e))return Xb(e)}function Xb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yY=function(t){return t},qz={},Gz=function(t){return t===qz},UE=function(t){return function r(){return arguments.length===0||arguments.length===1&&Gz(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},vY=function e(t,r){return t===1?r:UE(function(){for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];var d=s.filter(function(l){return l!==qz}).length;return d>=t?r.apply(void 0,s):e(t-d,UE(function(){for(var l=arguments.length,v=new Array(l),b=0;b<l;b++)v[b]=arguments[b];var S=s.map(function(P){return Gz(P)?v.shift():P});return r.apply(void 0,fY(S).concat(v))}))})},t_=function(t){return vY(t.length,t)},Yb=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},_Y=t_(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),xY=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return yY;var s=r.reverse(),c=s[0],d=s.slice(1);return function(){return d.reduce(function(l,v){return v(l)},c.apply(void 0,arguments))}},Jb=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},Wz=function(t){var r=null,n=null;return function(){for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return r&&c.every(function(l,v){return l===r[v]})||(r=c,n=t.apply(void 0,c)),n}};function bY(e){var t;return e===0?t=1:t=Math.floor(new Ir(e).abs().log(10).toNumber())+1,t}function wY(e,t,r){for(var n=new Ir(e),s=0,c=[];n.lt(t)&&s<1e5;)c.push(n.toNumber()),n=n.add(r),s++;return c}var SY=t_(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),TY=t_(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),PY=t_(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const r_={rangeStep:wY,getDigitCount:bY,interpolateNumber:SY,uninterpolateNumber:TY,uninterpolateTruncation:PY};function Qb(e){return CY(e)||EY(e)||Zz(e)||AY()}function AY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EY(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function CY(e){if(Array.isArray(e))return ew(e)}function up(e,t){return MY(e)||IY(e,t)||Zz(e,t)||kY()}function kY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zz(e,t){if(e){if(typeof e=="string")return ew(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ew(e,t)}}function ew(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IY(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,c=void 0;try{for(var d=e[Symbol.iterator](),l;!(n=(l=d.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(v){s=!0,c=v}finally{try{!n&&d.return!=null&&d.return()}finally{if(s)throw c}}return r}}function MY(e){if(Array.isArray(e))return e}function Hz(e){var t=up(e,2),r=t[0],n=t[1],s=r,c=n;return r>n&&(s=n,c=r),[s,c]}function Kz(e,t,r){if(e.lte(0))return new Ir(0);var n=r_.getDigitCount(e.toNumber()),s=new Ir(10).pow(n),c=e.div(s),d=n!==1?.05:.1,l=new Ir(Math.ceil(c.div(d).toNumber())).add(r).mul(d),v=l.mul(s);return t?v:new Ir(Math.ceil(v))}function OY(e,t,r){var n=1,s=new Ir(e);if(!s.isint()&&r){var c=Math.abs(e);c<1?(n=new Ir(10).pow(r_.getDigitCount(e)-1),s=new Ir(Math.floor(s.div(n).toNumber())).mul(n)):c>1&&(s=new Ir(Math.floor(e)))}else e===0?s=new Ir(Math.floor((t-1)/2)):r||(s=new Ir(Math.floor(e)));var d=Math.floor((t-1)/2),l=xY(_Y(function(v){return s.add(new Ir(v-d).mul(n)).toNumber()}),Yb);return l(0,t)}function Xz(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ir(0),tickMin:new Ir(0),tickMax:new Ir(0)};var c=Kz(new Ir(t).sub(e).div(r-1),n,s),d;e<=0&&t>=0?d=new Ir(0):(d=new Ir(e).add(t).div(2),d=d.sub(new Ir(d).mod(c)));var l=Math.ceil(d.sub(e).div(c).toNumber()),v=Math.ceil(new Ir(t).sub(d).div(c).toNumber()),b=l+v+1;return b>r?Xz(e,t,r,n,s+1):(b<r&&(v=t>0?v+(r-b):v,l=t>0?l:l+(r-b)),{step:c,tickMin:d.sub(new Ir(l).mul(c)),tickMax:d.add(new Ir(v).mul(c))})}function zY(e){var t=up(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=Math.max(s,2),l=Hz([r,n]),v=up(l,2),b=v[0],S=v[1];if(b===-1/0||S===1/0){var P=S===1/0?[b].concat(Qb(Yb(0,s-1).map(function(){return 1/0}))):[].concat(Qb(Yb(0,s-1).map(function(){return-1/0})),[S]);return r>n?Jb(P):P}if(b===S)return OY(b,s,c);var k=Xz(b,S,d,c),z=k.step,B=k.tickMin,j=k.tickMax,V=r_.rangeStep(B,j.add(new Ir(.1).mul(z)),z);return r>n?Jb(V):V}function DY(e,t){var r=up(e,2),n=r[0],s=r[1],c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=Hz([n,s]),l=up(d,2),v=l[0],b=l[1];if(v===-1/0||b===1/0)return[n,s];if(v===b)return[v];var S=Math.max(t,2),P=Kz(new Ir(b).sub(v).div(S-1),c,0),k=[].concat(Qb(r_.rangeStep(new Ir(v),new Ir(b).sub(new Ir(.99).mul(P)),P)),[b]);return n>s?Jb(k):k}var LY=Wz(zY),jY=Wz(DY),$Y="Invariant failed";function bu(e,t){throw new Error($Y)}var RY=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function uh(e){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uh(e)}function Ry(){return Ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ry.apply(this,arguments)}function NY(e,t){return VY(e)||UY(e,t)||FY(e,t)||BY()}function BY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FY(e,t){if(e){if(typeof e=="string")return VE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VE(e,t)}}function VE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function UY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,c,d,l=[],v=!0,b=!1;try{if(c=(r=r.call(e)).next,t!==0)for(;!(v=(n=c.call(r)).done)&&(l.push(n.value),l.length!==t);v=!0);}catch(S){b=!0,s=S}finally{try{if(!v&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(b)throw s}}return l}}function VY(e){if(Array.isArray(e))return e}function qY(e,t){if(e==null)return{};var r=GY(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function GY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function WY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qz(n.key),n)}}function HY(e,t,r){return t&&ZY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function KY(e,t,r){return t=Ny(t),XY(e,Yz()?Reflect.construct(t,r||[],Ny(e).constructor):t.apply(e,r))}function XY(e,t){if(t&&(uh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YY(e)}function YY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yz=function(){return!!e})()}function Ny(e){return Ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ny(e)}function JY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tw(e,t)}function tw(e,t){return tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},tw(e,t)}function Jz(e,t,r){return t=Qz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qz(e){var t=QY(e,"string");return uh(t)=="symbol"?t:t+""}function QY(e,t){if(uh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(uh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var n_=function(e){function t(){return WY(this,t),KY(this,t,arguments)}return JY(t,e),HY(t,[{key:"render",value:function(){var n=this.props,s=n.offset,c=n.layout,d=n.width,l=n.dataKey,v=n.data,b=n.dataPointFormatter,S=n.xAxis,P=n.yAxis,k=qY(n,RY),z=xr(k,!1);this.props.direction==="x"&&S.type!=="number"&&bu();var B=v.map(function(j){var V=b(j,l),D=V.x,R=V.y,F=V.value,X=V.errorVal;if(!X)return null;var q=[],W,ee;if(Array.isArray(X)){var le=NY(X,2);W=le[0],ee=le[1]}else W=ee=X;if(c==="vertical"){var ve=S.scale,Pe=R+s,Ce=Pe+d,Te=Pe-d,Fe=ve(F-W),Re=ve(F+ee);q.push({x1:Re,y1:Ce,x2:Re,y2:Te}),q.push({x1:Fe,y1:Pe,x2:Re,y2:Pe}),q.push({x1:Fe,y1:Ce,x2:Fe,y2:Te})}else if(c==="horizontal"){var Be=P.scale,qe=D+s,Ke=qe-d,ce=qe+d,_e=Be(F-W),ke=Be(F+ee);q.push({x1:Ke,y1:ke,x2:ce,y2:ke}),q.push({x1:qe,y1:_e,x2:qe,y2:ke}),q.push({x1:Ke,y1:_e,x2:ce,y2:_e})}return Me.createElement(Zn,Ry({className:"recharts-errorBar",key:"bar-".concat(q.map(function(Ue){return"".concat(Ue.x1,"-").concat(Ue.x2,"-").concat(Ue.y1,"-").concat(Ue.y2)}))},z),q.map(function(Ue){return Me.createElement("line",Ry({},Ue,{key:"line-".concat(Ue.x1,"-").concat(Ue.x2,"-").concat(Ue.y1,"-").concat(Ue.y2)}))}))});return Me.createElement(Zn,{className:"recharts-errorBars"},B)}}])}(Me.Component);Jz(n_,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Jz(n_,"displayName","ErrorBar");function cp(e){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(e)}function qE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qE(Object(r),!0).forEach(function(n){eJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eJ(e,t,r){return t=tJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tJ(e){var t=rJ(e,"string");return cp(t)=="symbol"?t:t+""}function rJ(e,t){if(cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eD=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,c=t.legendContent,d=sa(r,uu);if(!d)return null;var l=uu.defaultProps,v=l!==void 0?Hl(Hl({},l),d.props):{},b;return d.props&&d.props.payload?b=d.props&&d.props.payload:c==="children"?b=(n||[]).reduce(function(S,P){var k=P.item,z=P.props,B=z.sectors||z.data||[];return S.concat(B.map(function(j){return{type:d.props.iconType||k.props.legendType,value:j.name,color:j.fill,payload:j}}))},[]):b=(n||[]).map(function(S){var P=S.item,k=P.type.defaultProps,z=k!==void 0?Hl(Hl({},k),P.props):{},B=z.dataKey,j=z.name,V=z.legendType,D=z.hide;return{inactive:D,dataKey:B,type:v.iconType||V||"square",color:kS(P),value:j||B,payload:z}}),Hl(Hl(Hl({},v),uu.getWithHeight(d,s)),{},{payload:b,item:d})};function hp(e){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hp(e)}function GE(e){return oJ(e)||aJ(e)||iJ(e)||nJ()}function nJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iJ(e,t){if(e){if(typeof e=="string")return rw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rw(e,t)}}function aJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oJ(e){if(Array.isArray(e))return rw(e)}function rw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function WE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(r),!0).forEach(function(n){Wc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wc(e,t,r){return t=sJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sJ(e){var t=lJ(e,"string");return hp(t)=="symbol"?t:t+""}function lJ(e,t){if(hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oo(e,t,r){return br(e)||br(t)?r:$n(t)?Oa(e,t,r):or(t)?t(e):r}function Md(e,t,r,n){var s=aY(e,function(l){return Oo(l,t)});if(r==="number"){var c=s.filter(function(l){return gt(l)||parseFloat(l)});return c.length?[e_(c),Qv(c)]:[1/0,-1/0]}var d=n?s.filter(function(l){return!br(l)}):s;return d.map(function(l){return $n(l)||l instanceof Date?l:""})}var uJ=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,d=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(c&&c.axisType==="angleAxis"&&Math.abs(Math.abs(c.range[1]-c.range[0])-360)<=1e-6)for(var v=c.range,b=0;b<l;b++){var S=b>0?s[b-1].coordinate:s[l-1].coordinate,P=s[b].coordinate,k=b>=l-1?s[0].coordinate:s[b+1].coordinate,z=void 0;if(no(P-S)!==no(k-P)){var B=[];if(no(k-P)===no(v[1]-v[0])){z=k;var j=P+v[1]-v[0];B[0]=Math.min(j,(j+S)/2),B[1]=Math.max(j,(j+S)/2)}else{z=S;var V=k+v[1]-v[0];B[0]=Math.min(P,(V+P)/2),B[1]=Math.max(P,(V+P)/2)}var D=[Math.min(P,(z+P)/2),Math.max(P,(z+P)/2)];if(t>D[0]&&t<=D[1]||t>=B[0]&&t<=B[1]){d=s[b].index;break}}else{var R=Math.min(S,k),F=Math.max(S,k);if(t>(R+P)/2&&t<=(F+P)/2){d=s[b].index;break}}}else for(var X=0;X<l;X++)if(X===0&&t<=(n[X].coordinate+n[X+1].coordinate)/2||X>0&&X<l-1&&t>(n[X].coordinate+n[X-1].coordinate)/2&&t<=(n[X].coordinate+n[X+1].coordinate)/2||X===l-1&&t>(n[X].coordinate+n[X-1].coordinate)/2){d=n[X].index;break}return d},kS=function(t){var r,n=t,s=n.type.displayName,c=(r=t.type)!==null&&r!==void 0&&r.defaultProps?pn(pn({},t.type.defaultProps),t.props):t.props,d=c.stroke,l=c.fill,v;switch(s){case"Line":v=d;break;case"Area":case"Radar":v=d&&d!=="none"?d:l;break;default:v=l;break}return v},cJ=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,c=s===void 0?{}:s;if(!c)return{};for(var d={},l=Object.keys(c),v=0,b=l.length;v<b;v++)for(var S=c[l[v]].stackGroups,P=Object.keys(S),k=0,z=P.length;k<z;k++){var B=S[P[k]],j=B.items,V=B.cateAxisId,D=j.filter(function(ee){return us(ee.type).indexOf("Bar")>=0});if(D&&D.length){var R=D[0].type.defaultProps,F=R!==void 0?pn(pn({},R),D[0].props):D[0].props,X=F.barSize,q=F[V];d[q]||(d[q]=[]);var W=br(X)?r:X;d[q].push({item:D[0],stackList:D.slice(1),barSize:br(W)?void 0:_u(W,n,0)})}}return d},hJ=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,c=t.sizeList,d=c===void 0?[]:c,l=t.maxBarSize,v=d.length;if(v<1)return null;var b=_u(r,s,0,!0),S,P=[];if(d[0].barSize===+d[0].barSize){var k=!1,z=s/v,B=d.reduce(function(X,q){return X+q.barSize||0},0);B+=(v-1)*b,B>=s&&(B-=(v-1)*b,b=0),B>=s&&z>0&&(k=!0,z*=.9,B=v*z);var j=(s-B)/2>>0,V={offset:j-b,size:0};S=d.reduce(function(X,q){var W={item:q.item,position:{offset:V.offset+V.size+b,size:k?z:q.barSize}},ee=[].concat(GE(X),[W]);return V=ee[ee.length-1].position,q.stackList&&q.stackList.length&&q.stackList.forEach(function(le){ee.push({item:le,position:V})}),ee},P)}else{var D=_u(n,s,0,!0);s-2*D-(v-1)*b<=0&&(b=0);var R=(s-2*D-(v-1)*b)/v;R>1&&(R>>=0);var F=l===+l?Math.min(R,l):R;S=d.reduce(function(X,q,W){var ee=[].concat(GE(X),[{item:q.item,position:{offset:D+(R+b)*W+(R-F)/2,size:F}}]);return q.stackList&&q.stackList.length&&q.stackList.forEach(function(le){ee.push({item:le,position:ee[ee.length-1].position})}),ee},P)}return S},fJ=function(t,r,n,s){var c=n.children,d=n.width,l=n.margin,v=d-(l.left||0)-(l.right||0),b=eD({children:c,legendWidth:v});if(b){var S=s||{},P=S.width,k=S.height,z=b.align,B=b.verticalAlign,j=b.layout;if((j==="vertical"||j==="horizontal"&&B==="middle")&&z!=="center"&&gt(t[z]))return pn(pn({},t),{},Wc({},z,t[z]+(P||0)));if((j==="horizontal"||j==="vertical"&&z==="center")&&B!=="middle"&&gt(t[B]))return pn(pn({},t),{},Wc({},B,t[B]+(k||0)))}return t},dJ=function(t,r,n){return br(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},tD=function(t,r,n,s,c){var d=r.props.children,l=oo(d,n_).filter(function(b){return dJ(s,c,b.props.direction)});if(l&&l.length){var v=l.map(function(b){return b.props.dataKey});return t.reduce(function(b,S){var P=Oo(S,n);if(br(P))return b;var k=Array.isArray(P)?[e_(P),Qv(P)]:[P,P],z=v.reduce(function(B,j){var V=Oo(S,j,0),D=k[0]-Math.abs(Array.isArray(V)?V[0]:V),R=k[1]+Math.abs(Array.isArray(V)?V[1]:V);return[Math.min(D,B[0]),Math.max(R,B[1])]},[1/0,-1/0]);return[Math.min(z[0],b[0]),Math.max(z[1],b[1])]},[1/0,-1/0])}return null},pJ=function(t,r,n,s,c){var d=r.map(function(l){return tD(t,l,n,c,s)}).filter(function(l){return!br(l)});return d&&d.length?d.reduce(function(l,v){return[Math.min(l[0],v[0]),Math.max(l[1],v[1])]},[1/0,-1/0]):null},rD=function(t,r,n,s,c){var d=r.map(function(v){var b=v.props.dataKey;return n==="number"&&b&&tD(t,v,b,s)||Md(t,b,n,c)});if(n==="number")return d.reduce(function(v,b){return[Math.min(v[0],b[0]),Math.max(v[1],b[1])]},[1/0,-1/0]);var l={};return d.reduce(function(v,b){for(var S=0,P=b.length;S<P;S++)l[b[S]]||(l[b[S]]=!0,v.push(b[S]));return v},[])},nD=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},iD=function(t,r,n,s){if(s)return t.map(function(v){return v.coordinate});var c,d,l=t.map(function(v){return v.coordinate===r&&(c=!0),v.coordinate===n&&(d=!0),v.coordinate});return c||l.push(r),d||l.push(n),l},ss=function(t,r,n){if(!t)return null;var s=t.scale,c=t.duplicateDomain,d=t.type,l=t.range,v=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,b=(r||n)&&d==="category"&&s.bandwidth?s.bandwidth()/v:0;if(b=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?no(l[0]-l[1])*2*b:b,r&&(t.ticks||t.niceTicks)){var S=(t.ticks||t.niceTicks).map(function(P){var k=c?c.indexOf(P):P;return{coordinate:s(k)+b,value:P,offset:b}});return S.filter(function(P){return!$p(P.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(P,k){return{coordinate:s(P)+b,value:P,index:k,offset:b}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(P){return{coordinate:s(P)+b,value:P,offset:b}}):s.domain().map(function(P,k){return{coordinate:s(P)+b,value:c?c[P]:P,index:k,offset:b}})},d0=new WeakMap,wg=function(t,r){if(typeof r!="function")return t;d0.has(t)||d0.set(t,new WeakMap);var n=d0.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},mJ=function(t,r,n){var s=t.scale,c=t.type,d=t.layout,l=t.axisType;if(s==="auto")return d==="radial"&&l==="radiusAxis"?{scale:np(),realScaleType:"band"}:d==="radial"&&l==="angleAxis"?{scale:zy(),realScaleType:"linear"}:c==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Id(),realScaleType:"point"}:c==="category"?{scale:np(),realScaleType:"band"}:{scale:zy(),realScaleType:"linear"};if(vu(s)){var v="scale".concat(Bv(s));return{scale:(NE[v]||Id)(),realScaleType:NE[v]?v:"point"}}return or(s)?{scale:s}:{scale:Id(),realScaleType:"point"}},ZE=1e-4,gJ=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),c=Math.min(s[0],s[1])-ZE,d=Math.max(s[0],s[1])+ZE,l=t(r[0]),v=t(r[n-1]);(l<c||l>d||v<c||v>d)&&t.domain([r[0],r[n-1]])}},yJ=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},vJ=function(t,r){if(!r||r.length!==2||!gt(r[0])||!gt(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),c=[t[0],t[1]];return(!gt(t[0])||t[0]<n)&&(c[0]=n),(!gt(t[1])||t[1]>s)&&(c[1]=s),c[0]>s&&(c[0]=s),c[1]<n&&(c[1]=n),c},_J=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var c=0,d=0,l=0;l<r;++l){var v=$p(t[l][n][1])?t[l][n][0]:t[l][n][1];v>=0?(t[l][n][0]=c,t[l][n][1]=c+v,c=t[l][n][1]):(t[l][n][0]=d,t[l][n][1]=d+v,d=t[l][n][1])}},xJ=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var c=0,d=0;d<r;++d){var l=$p(t[d][n][1])?t[d][n][0]:t[d][n][1];l>=0?(t[d][n][0]=c,t[d][n][1]=c+l,c=t[d][n][1]):(t[d][n][0]=0,t[d][n][1]=0)}},bJ={sign:_J,expand:L6,none:th,silhouette:j6,wiggle:$6,positive:xJ},wJ=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),c=bJ[n],d=D6().keys(s).value(function(l,v){return+Oo(l,v,0)}).order(Eb).offset(c);return d(t)},SJ=function(t,r,n,s,c,d){if(!t)return null;var l=d?r.reverse():r,v={},b=l.reduce(function(P,k){var z,B=(z=k.type)!==null&&z!==void 0&&z.defaultProps?pn(pn({},k.type.defaultProps),k.props):k.props,j=B.stackId,V=B.hide;if(V)return P;var D=B[n],R=P[D]||{hasStack:!1,stackGroups:{}};if($n(j)){var F=R.stackGroups[j]||{numericAxisId:n,cateAxisId:s,items:[]};F.items.push(k),R.hasStack=!0,R.stackGroups[j]=F}else R.stackGroups[Nv("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[k]};return pn(pn({},P),{},Wc({},D,R))},v),S={};return Object.keys(b).reduce(function(P,k){var z=b[k];if(z.hasStack){var B={};z.stackGroups=Object.keys(z.stackGroups).reduce(function(j,V){var D=z.stackGroups[V];return pn(pn({},j),{},Wc({},V,{numericAxisId:n,cateAxisId:s,items:D.items,stackedData:wJ(t,D.items,c)}))},B)}return pn(pn({},P),{},Wc({},k,z))},S)},TJ=function(t,r){var n=r.realScaleType,s=r.type,c=r.tickCount,d=r.originalDomain,l=r.allowDecimals,v=n||r.scale;if(v!=="auto"&&v!=="linear")return null;if(c&&s==="number"&&d&&(d[0]==="auto"||d[1]==="auto")){var b=t.domain();if(!b.length)return null;var S=LY(b,c,l);return t.domain([e_(S),Qv(S)]),{niceTicks:S}}if(c&&s==="number"){var P=t.domain(),k=jY(P,c,l);return{niceTicks:k}}return null},HE=function(t){var r=t.axis,n=t.ticks,s=t.offset,c=t.bandSize,d=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var v=Oo(d,r.dataKey,r.domain[l]);return br(v)?null:r.scale(v)-c/2+s},PJ=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),c=Math.max(n[0],n[1]);return s<=0&&c>=0?0:c<0?c:s}return n[0]},AJ=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?pn(pn({},t.type.defaultProps),t.props):t.props,c=s.stackId;if($n(c)){var d=r[c];if(d){var l=d.items.indexOf(t);return l>=0?d.stackedData[l]:null}}return null},EJ=function(t){return t.reduce(function(r,n){return[e_(n.concat([r[0]]).filter(gt)),Qv(n.concat([r[1]]).filter(gt))]},[1/0,-1/0])},aD=function(t,r,n){return Object.keys(t).reduce(function(s,c){var d=t[c],l=d.stackedData,v=l.reduce(function(b,S){var P=EJ(S.slice(r,n+1));return[Math.min(b[0],P[0]),Math.max(b[1],P[1])]},[1/0,-1/0]);return[Math.min(v[0],s[0]),Math.max(v[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},KE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,XE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nw=function(t,r,n){if(or(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(gt(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(KE.test(t[0])){var c=+KE.exec(t[0])[1];s[0]=r[0]-c}else or(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(gt(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(XE.test(t[1])){var d=+XE.exec(t[1])[1];s[1]=r[1]+d}else or(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},By=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var c=rS(r,function(P){return P.coordinate}),d=1/0,l=1,v=c.length;l<v;l++){var b=c[l],S=c[l-1];d=Math.min((b.coordinate||0)-(S.coordinate||0),d)}return d===1/0?0:d}return n?void 0:0},YE=function(t,r,n){return!t||!t.length||AS(t,Oa(n,"type.defaultProps.domain"))?r:t},oD=function(t,r){var n=t.type.defaultProps?pn(pn({},t.type.defaultProps),t.props):t.props,s=n.dataKey,c=n.name,d=n.unit,l=n.formatter,v=n.tooltipType,b=n.chartType,S=n.hide;return pn(pn({},xr(t,!1)),{},{dataKey:s,unit:d,formatter:l,name:c||s,color:kS(t),value:Oo(r,s),type:v,payload:r,chartType:b,hide:S})};function fp(e){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}function JE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(r),!0).forEach(function(n){CJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CJ(e,t,r){return t=kJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kJ(e){var t=IJ(e,"string");return fp(t)=="symbol"?t:t+""}function IJ(e,t){if(fp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fy=Math.PI/180,MJ=function(t){return t*180/Math.PI},ai=function(t,r,n,s){return{x:t+Math.cos(-Fy*s)*n,y:r+Math.sin(-Fy*s)*n}},OJ=function(t,r){var n=t.x,s=t.y,c=r.x,d=r.y;return Math.sqrt(Math.pow(n-c,2)+Math.pow(s-d,2))},zJ=function(t,r){var n=t.x,s=t.y,c=r.cx,d=r.cy,l=OJ({x:n,y:s},{x:c,y:d});if(l<=0)return{radius:l};var v=(n-c)/l,b=Math.acos(v);return s>d&&(b=2*Math.PI-b),{radius:l,angle:MJ(b),angleInRadian:b}},DJ=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),c=Math.floor(n/360),d=Math.min(s,c);return{startAngle:r-d*360,endAngle:n-d*360}},LJ=function(t,r){var n=r.startAngle,s=r.endAngle,c=Math.floor(n/360),d=Math.floor(s/360),l=Math.min(c,d);return t+l*360},eC=function(t,r){var n=t.x,s=t.y,c=zJ({x:n,y:s},r),d=c.radius,l=c.angle,v=r.innerRadius,b=r.outerRadius;if(d<v||d>b)return!1;if(d===0)return!0;var S=DJ(r),P=S.startAngle,k=S.endAngle,z=l,B;if(P<=k){for(;z>k;)z-=360;for(;z<P;)z+=360;B=z>=P&&z<=k}else{for(;z>P;)z-=360;for(;z<k;)z+=360;B=z>=k&&z<=P}return B?QE(QE({},r),{},{radius:d,angle:LJ(z,r)}):null};function dp(e){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}var jJ=["offset"];function $J(e){return FJ(e)||BJ(e)||NJ(e)||RJ()}function RJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NJ(e,t){if(e){if(typeof e=="string")return iw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iw(e,t)}}function BJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FJ(e){if(Array.isArray(e))return iw(e)}function iw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function UJ(e,t){if(e==null)return{};var r=VJ(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function VJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function tC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(r),!0).forEach(function(n){qJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qJ(e,t,r){return t=GJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GJ(e){var t=WJ(e,"string");return dp(t)=="symbol"?t:t+""}function WJ(e,t){if(dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pp(){return pp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pp.apply(this,arguments)}var ZJ=function(t){var r=t.value,n=t.formatter,s=br(t.children)?r:t.children;return or(n)?n(s):s},HJ=function(t,r){var n=no(r-t),s=Math.min(Math.abs(r-t),360);return n*s},KJ=function(t,r,n){var s=t.position,c=t.viewBox,d=t.offset,l=t.className,v=c,b=v.cx,S=v.cy,P=v.innerRadius,k=v.outerRadius,z=v.startAngle,B=v.endAngle,j=v.clockWise,V=(P+k)/2,D=HJ(z,B),R=D>=0?1:-1,F,X;s==="insideStart"?(F=z+R*d,X=j):s==="insideEnd"?(F=B-R*d,X=!j):s==="end"&&(F=B+R*d,X=j),X=D<=0?X:!X;var q=ai(b,S,V,F),W=ai(b,S,V,F+(X?1:-1)*359),ee="M".concat(q.x,",").concat(q.y,`
    A`).concat(V,",").concat(V,",0,1,").concat(X?0:1,`,
    `).concat(W.x,",").concat(W.y),le=br(t.id)?Nv("recharts-radial-line-"):t.id;return Me.createElement("text",pp({},n,{dominantBaseline:"central",className:gr("recharts-radial-bar-label",l)}),Me.createElement("defs",null,Me.createElement("path",{id:le,d:ee})),Me.createElement("textPath",{xlinkHref:"#".concat(le)},r))},XJ=function(t){var r=t.viewBox,n=t.offset,s=t.position,c=r,d=c.cx,l=c.cy,v=c.innerRadius,b=c.outerRadius,S=c.startAngle,P=c.endAngle,k=(S+P)/2;if(s==="outside"){var z=ai(d,l,b+n,k),B=z.x,j=z.y;return{x:B,y:j,textAnchor:B>=d?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:d,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:d,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:d,y:l,textAnchor:"middle",verticalAnchor:"end"};var V=(v+b)/2,D=ai(d,l,V,k),R=D.x,F=D.y;return{x:R,y:F,textAnchor:"middle",verticalAnchor:"middle"}},YJ=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,c=t.position,d=r,l=d.x,v=d.y,b=d.width,S=d.height,P=S>=0?1:-1,k=P*s,z=P>0?"end":"start",B=P>0?"start":"end",j=b>=0?1:-1,V=j*s,D=j>0?"end":"start",R=j>0?"start":"end";if(c==="top"){var F={x:l+b/2,y:v-P*s,textAnchor:"middle",verticalAnchor:z};return Dn(Dn({},F),n?{height:Math.max(v-n.y,0),width:b}:{})}if(c==="bottom"){var X={x:l+b/2,y:v+S+k,textAnchor:"middle",verticalAnchor:B};return Dn(Dn({},X),n?{height:Math.max(n.y+n.height-(v+S),0),width:b}:{})}if(c==="left"){var q={x:l-V,y:v+S/2,textAnchor:D,verticalAnchor:"middle"};return Dn(Dn({},q),n?{width:Math.max(q.x-n.x,0),height:S}:{})}if(c==="right"){var W={x:l+b+V,y:v+S/2,textAnchor:R,verticalAnchor:"middle"};return Dn(Dn({},W),n?{width:Math.max(n.x+n.width-W.x,0),height:S}:{})}var ee=n?{width:b,height:S}:{};return c==="insideLeft"?Dn({x:l+V,y:v+S/2,textAnchor:R,verticalAnchor:"middle"},ee):c==="insideRight"?Dn({x:l+b-V,y:v+S/2,textAnchor:D,verticalAnchor:"middle"},ee):c==="insideTop"?Dn({x:l+b/2,y:v+k,textAnchor:"middle",verticalAnchor:B},ee):c==="insideBottom"?Dn({x:l+b/2,y:v+S-k,textAnchor:"middle",verticalAnchor:z},ee):c==="insideTopLeft"?Dn({x:l+V,y:v+k,textAnchor:R,verticalAnchor:B},ee):c==="insideTopRight"?Dn({x:l+b-V,y:v+k,textAnchor:D,verticalAnchor:B},ee):c==="insideBottomLeft"?Dn({x:l+V,y:v+S-k,textAnchor:R,verticalAnchor:z},ee):c==="insideBottomRight"?Dn({x:l+b-V,y:v+S-k,textAnchor:D,verticalAnchor:z},ee):Eh(c)&&(gt(c.x)||nu(c.x))&&(gt(c.y)||nu(c.y))?Dn({x:l+_u(c.x,b),y:v+_u(c.y,S),textAnchor:"end",verticalAnchor:"end"},ee):Dn({x:l+b/2,y:v+S/2,textAnchor:"middle",verticalAnchor:"middle"},ee)},JJ=function(t){return"cx"in t&&gt(t.cx)};function xi(e){var t=e.offset,r=t===void 0?5:t,n=UJ(e,jJ),s=Dn({offset:r},n),c=s.viewBox,d=s.position,l=s.value,v=s.children,b=s.content,S=s.className,P=S===void 0?"":S,k=s.textBreakAll;if(!c||br(l)&&br(v)&&!$e.isValidElement(b)&&!or(b))return null;if($e.isValidElement(b))return $e.cloneElement(b,s);var z;if(or(b)){if(z=$e.createElement(b,s),$e.isValidElement(z))return z}else z=ZJ(s);var B=JJ(c),j=xr(s,!0);if(B&&(d==="insideStart"||d==="insideEnd"||d==="end"))return KJ(s,z,j);var V=B?XJ(s):YJ(s);return Me.createElement(Ay,pp({className:gr("recharts-label",P)},j,V,{breakAll:k}),z)}xi.displayName="Label";var sD=function(t){var r=t.cx,n=t.cy,s=t.angle,c=t.startAngle,d=t.endAngle,l=t.r,v=t.radius,b=t.innerRadius,S=t.outerRadius,P=t.x,k=t.y,z=t.top,B=t.left,j=t.width,V=t.height,D=t.clockWise,R=t.labelViewBox;if(R)return R;if(gt(j)&&gt(V)){if(gt(P)&&gt(k))return{x:P,y:k,width:j,height:V};if(gt(z)&&gt(B))return{x:z,y:B,width:j,height:V}}return gt(P)&&gt(k)?{x:P,y:k,width:0,height:0}:gt(r)&&gt(n)?{cx:r,cy:n,startAngle:c||s||0,endAngle:d||s||0,innerRadius:b||0,outerRadius:S||v||l||0,clockWise:D}:t.viewBox?t.viewBox:{}},QJ=function(t,r){return t?t===!0?Me.createElement(xi,{key:"label-implicit",viewBox:r}):$n(t)?Me.createElement(xi,{key:"label-implicit",viewBox:r,value:t}):$e.isValidElement(t)?t.type===xi?$e.cloneElement(t,{key:"label-implicit",viewBox:r}):Me.createElement(xi,{key:"label-implicit",content:t,viewBox:r}):or(t)?Me.createElement(xi,{key:"label-implicit",content:t,viewBox:r}):Eh(t)?Me.createElement(xi,pp({viewBox:r},t,{key:"label-implicit"})):null:null},eQ=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,c=sD(t),d=oo(s,xi).map(function(v,b){return $e.cloneElement(v,{viewBox:r||c,key:"label-".concat(b)})});if(!n)return d;var l=QJ(t.label,r||c);return[l].concat($J(d))};xi.parseViewBox=sD;xi.renderCallByParent=eQ;function tQ(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var rQ=tQ;const nQ=Mr(rQ);function mp(e){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mp(e)}var iQ=["valueAccessor"],aQ=["data","dataKey","clockWise","id","textBreakAll"];function oQ(e){return cQ(e)||uQ(e)||lQ(e)||sQ()}function sQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lQ(e,t){if(e){if(typeof e=="string")return aw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aw(e,t)}}function uQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cQ(e){if(Array.isArray(e))return aw(e)}function aw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Uy(){return Uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uy.apply(this,arguments)}function rC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(r),!0).forEach(function(n){hQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hQ(e,t,r){return t=fQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fQ(e){var t=dQ(e,"string");return mp(t)=="symbol"?t:t+""}function dQ(e,t){if(mp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iC(e,t){if(e==null)return{};var r=pQ(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var mQ=function(t){return Array.isArray(t.value)?nQ(t.value):t.value};function fu(e){var t=e.valueAccessor,r=t===void 0?mQ:t,n=iC(e,iQ),s=n.data,c=n.dataKey,d=n.clockWise,l=n.id,v=n.textBreakAll,b=iC(n,aQ);return!s||!s.length?null:Me.createElement(Zn,{className:"recharts-label-list"},s.map(function(S,P){var k=br(c)?r(S,P):Oo(S&&S.payload,c),z=br(l)?{}:{id:"".concat(l,"-").concat(P)};return Me.createElement(xi,Uy({},xr(S,!0),b,z,{parentViewBox:S.parentViewBox,value:k,textBreakAll:v,viewBox:xi.parseViewBox(br(d)?S:nC(nC({},S),{},{clockWise:d})),key:"label-".concat(P),index:P}))}))}fu.displayName="LabelList";function gQ(e,t){return e?e===!0?Me.createElement(fu,{key:"labelList-implicit",data:t}):Me.isValidElement(e)||or(e)?Me.createElement(fu,{key:"labelList-implicit",data:t,content:e}):Eh(e)?Me.createElement(fu,Uy({data:t},e,{key:"labelList-implicit"})):null:null}function yQ(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=oo(n,fu).map(function(d,l){return $e.cloneElement(d,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var c=gQ(e.label,t);return[c].concat(oQ(s))}fu.renderCallByParent=yQ;function gp(e){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(e)}function ow(){return ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ow.apply(this,arguments)}function aC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aC(Object(r),!0).forEach(function(n){vQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vQ(e,t,r){return t=_Q(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Q(e){var t=xQ(e,"string");return gp(t)=="symbol"?t:t+""}function xQ(e,t){if(gp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bQ=function(t,r){var n=no(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},Sg=function(t){var r=t.cx,n=t.cy,s=t.radius,c=t.angle,d=t.sign,l=t.isExternal,v=t.cornerRadius,b=t.cornerIsExternal,S=v*(l?1:-1)+s,P=Math.asin(v/S)/Fy,k=b?c:c+d*P,z=ai(r,n,S,k),B=ai(r,n,s,k),j=b?c-d*P:c,V=ai(r,n,S*Math.cos(P*Fy),j);return{center:z,circleTangency:B,lineTangency:V,theta:P}},lD=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,c=t.outerRadius,d=t.startAngle,l=t.endAngle,v=bQ(d,l),b=d+v,S=ai(r,n,c,d),P=ai(r,n,c,b),k="M ".concat(S.x,",").concat(S.y,`
    A `).concat(c,",").concat(c,`,0,
    `).concat(+(Math.abs(v)>180),",").concat(+(d>b),`,
    `).concat(P.x,",").concat(P.y,`
  `);if(s>0){var z=ai(r,n,s,d),B=ai(r,n,s,b);k+="L ".concat(B.x,",").concat(B.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(v)>180),",").concat(+(d<=b),`,
            `).concat(z.x,",").concat(z.y," Z")}else k+="L ".concat(r,",").concat(n," Z");return k},wQ=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,c=t.outerRadius,d=t.cornerRadius,l=t.forceCornerRadius,v=t.cornerIsExternal,b=t.startAngle,S=t.endAngle,P=no(S-b),k=Sg({cx:r,cy:n,radius:c,angle:b,sign:P,cornerRadius:d,cornerIsExternal:v}),z=k.circleTangency,B=k.lineTangency,j=k.theta,V=Sg({cx:r,cy:n,radius:c,angle:S,sign:-P,cornerRadius:d,cornerIsExternal:v}),D=V.circleTangency,R=V.lineTangency,F=V.theta,X=v?Math.abs(b-S):Math.abs(b-S)-j-F;if(X<0)return l?"M ".concat(B.x,",").concat(B.y,`
        a`).concat(d,",").concat(d,",0,0,1,").concat(d*2,`,0
        a`).concat(d,",").concat(d,",0,0,1,").concat(-d*2,`,0
      `):lD({cx:r,cy:n,innerRadius:s,outerRadius:c,startAngle:b,endAngle:S});var q="M ".concat(B.x,",").concat(B.y,`
    A`).concat(d,",").concat(d,",0,0,").concat(+(P<0),",").concat(z.x,",").concat(z.y,`
    A`).concat(c,",").concat(c,",0,").concat(+(X>180),",").concat(+(P<0),",").concat(D.x,",").concat(D.y,`
    A`).concat(d,",").concat(d,",0,0,").concat(+(P<0),",").concat(R.x,",").concat(R.y,`
  `);if(s>0){var W=Sg({cx:r,cy:n,radius:s,angle:b,sign:P,isExternal:!0,cornerRadius:d,cornerIsExternal:v}),ee=W.circleTangency,le=W.lineTangency,ve=W.theta,Pe=Sg({cx:r,cy:n,radius:s,angle:S,sign:-P,isExternal:!0,cornerRadius:d,cornerIsExternal:v}),Ce=Pe.circleTangency,Te=Pe.lineTangency,Fe=Pe.theta,Re=v?Math.abs(b-S):Math.abs(b-S)-ve-Fe;if(Re<0&&d===0)return"".concat(q,"L").concat(r,",").concat(n,"Z");q+="L".concat(Te.x,",").concat(Te.y,`
      A`).concat(d,",").concat(d,",0,0,").concat(+(P<0),",").concat(Ce.x,",").concat(Ce.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(Re>180),",").concat(+(P>0),",").concat(ee.x,",").concat(ee.y,`
      A`).concat(d,",").concat(d,",0,0,").concat(+(P<0),",").concat(le.x,",").concat(le.y,"Z")}else q+="L".concat(r,",").concat(n,"Z");return q},SQ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},uD=function(t){var r=oC(oC({},SQ),t),n=r.cx,s=r.cy,c=r.innerRadius,d=r.outerRadius,l=r.cornerRadius,v=r.forceCornerRadius,b=r.cornerIsExternal,S=r.startAngle,P=r.endAngle,k=r.className;if(d<c||S===P)return null;var z=gr("recharts-sector",k),B=d-c,j=_u(l,B,0,!0),V;return j>0&&Math.abs(S-P)<360?V=wQ({cx:n,cy:s,innerRadius:c,outerRadius:d,cornerRadius:Math.min(j,B/2),forceCornerRadius:v,cornerIsExternal:b,startAngle:S,endAngle:P}):V=lD({cx:n,cy:s,innerRadius:c,outerRadius:d,startAngle:S,endAngle:P}),Me.createElement("path",ow({},xr(r,!0),{className:z,d:V,role:"img"}))};function yp(e){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yp(e)}function sw(){return sw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sw.apply(this,arguments)}function sC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(r),!0).forEach(function(n){TQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TQ(e,t,r){return t=PQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PQ(e){var t=AQ(e,"string");return yp(t)=="symbol"?t:t+""}function AQ(e,t){if(yp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uC={curveBasisClosed:S6,curveBasisOpen:T6,curveBasis:w6,curveBumpX:l6,curveBumpY:u6,curveLinearClosed:P6,curveLinear:Uv,curveMonotoneX:A6,curveMonotoneY:E6,curveNatural:C6,curveStep:k6,curveStepAfter:M6,curveStepBefore:I6},Tg=function(t){return t.x===+t.x&&t.y===+t.y},ld=function(t){return t.x},ud=function(t){return t.y},EQ=function(t,r){if(or(t))return t;var n="curve".concat(Bv(t));return(n==="curveMonotone"||n==="curveBump")&&r?uC["".concat(n).concat(r==="vertical"?"Y":"X")]:uC[n]||Uv},CQ=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,c=s===void 0?[]:s,d=t.baseLine,l=t.layout,v=t.connectNulls,b=v===void 0?!1:v,S=EQ(n,l),P=b?c.filter(function(j){return Tg(j)}):c,k;if(Array.isArray(d)){var z=b?d.filter(function(j){return Tg(j)}):d,B=P.map(function(j,V){return lC(lC({},j),{},{base:z[V]})});return l==="vertical"?k=pg().y(ud).x1(ld).x0(function(j){return j.base.x}):k=pg().x(ld).y1(ud).y0(function(j){return j.base.y}),k.defined(Tg).curve(S),k(B)}return l==="vertical"&&gt(d)?k=pg().y(ud).x1(ld).x0(d):gt(d)?k=pg().x(ld).y1(ud).y0(d):k=uO().x(ld).y(ud),k.defined(Tg).curve(S),k(P)},cC=function(t){var r=t.className,n=t.points,s=t.path,c=t.pathRef;if((!n||!n.length)&&!s)return null;var d=n&&n.length?CQ(t):s;return $e.createElement("path",sw({},xr(t,!1),hy(t),{className:gr("recharts-curve",r),d,ref:c}))},cD={exports:{}},kQ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",IQ=kQ,MQ=IQ;function hD(){}function fD(){}fD.resetWarningCache=hD;var OQ=function(){function e(n,s,c,d,l,v){if(v!==MQ){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:fD,resetWarningCache:hD};return r.PropTypes=r,r};cD.exports=OQ();var zQ=cD.exports;const wr=Mr(zQ);var DQ=Object.getOwnPropertyNames,LQ=Object.getOwnPropertySymbols,jQ=Object.prototype.hasOwnProperty;function hC(e,t){return function(n,s,c){return e(n,s,c)&&t(n,s,c)}}function Pg(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);var c=s.cache,d=c.get(r),l=c.get(n);if(d&&l)return d===n&&l===r;c.set(r,n),c.set(n,r);var v=e(r,n,s);return c.delete(r),c.delete(n),v}}function $Q(e){return e!=null?e[Symbol.toStringTag]:void 0}function fC(e){return DQ(e).concat(LQ(e))}var RQ=Object.hasOwn||function(e,t){return jQ.call(e,t)};function Iu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var NQ="__v",BQ="__o",FQ="_owner",dC=Object.getOwnPropertyDescriptor,pC=Object.keys;function UQ(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function VQ(e,t){return Iu(e.getTime(),t.getTime())}function qQ(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function GQ(e,t){return e===t}function mC(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var s=new Array(n),c=e.entries(),d,l,v=0;(d=c.next())&&!d.done;){for(var b=t.entries(),S=!1,P=0;(l=b.next())&&!l.done;){if(s[P]){P++;continue}var k=d.value,z=l.value;if(r.equals(k[0],z[0],v,P,e,t,r)&&r.equals(k[1],z[1],k[0],z[0],e,t,r)){S=s[P]=!0;break}P++}if(!S)return!1;v++}return!0}var WQ=Iu;function ZQ(e,t,r){var n=pC(e),s=n.length;if(pC(t).length!==s)return!1;for(;s-- >0;)if(!dD(e,t,r,n[s]))return!1;return!0}function cd(e,t,r){var n=fC(e),s=n.length;if(fC(t).length!==s)return!1;for(var c,d,l;s-- >0;)if(c=n[s],!dD(e,t,r,c)||(d=dC(e,c),l=dC(t,c),(d||l)&&(!d||!l||d.configurable!==l.configurable||d.enumerable!==l.enumerable||d.writable!==l.writable)))return!1;return!0}function HQ(e,t){return Iu(e.valueOf(),t.valueOf())}function KQ(e,t){return e.source===t.source&&e.flags===t.flags}function gC(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var s=new Array(n),c=e.values(),d,l;(d=c.next())&&!d.done;){for(var v=t.values(),b=!1,S=0;(l=v.next())&&!l.done;){if(!s[S]&&r.equals(d.value,l.value,d.value,l.value,e,t,r)){b=s[S]=!0;break}S++}if(!b)return!1}return!0}function XQ(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function YQ(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function dD(e,t,r,n){return(n===FQ||n===BQ||n===NQ)&&(e.$$typeof||t.$$typeof)?!0:RQ(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var JQ="[object Arguments]",QQ="[object Boolean]",eee="[object Date]",tee="[object Error]",ree="[object Map]",nee="[object Number]",iee="[object Object]",aee="[object RegExp]",oee="[object Set]",see="[object String]",lee="[object URL]",uee=Array.isArray,yC=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,vC=Object.assign,cee=Object.prototype.toString.call.bind(Object.prototype.toString);function hee(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,s=e.areFunctionsEqual,c=e.areMapsEqual,d=e.areNumbersEqual,l=e.areObjectsEqual,v=e.arePrimitiveWrappersEqual,b=e.areRegExpsEqual,S=e.areSetsEqual,P=e.areTypedArraysEqual,k=e.areUrlsEqual,z=e.unknownTagComparators;return function(j,V,D){if(j===V)return!0;if(j==null||V==null)return!1;var R=typeof j;if(R!==typeof V)return!1;if(R!=="object")return R==="number"?d(j,V,D):R==="function"?s(j,V,D):!1;var F=j.constructor;if(F!==V.constructor)return!1;if(F===Object)return l(j,V,D);if(uee(j))return t(j,V,D);if(yC!=null&&yC(j))return P(j,V,D);if(F===Date)return r(j,V,D);if(F===RegExp)return b(j,V,D);if(F===Map)return c(j,V,D);if(F===Set)return S(j,V,D);var X=cee(j);if(X===eee)return r(j,V,D);if(X===aee)return b(j,V,D);if(X===ree)return c(j,V,D);if(X===oee)return S(j,V,D);if(X===iee)return typeof j.then!="function"&&typeof V.then!="function"&&l(j,V,D);if(X===lee)return k(j,V,D);if(X===tee)return n(j,V,D);if(X===JQ)return l(j,V,D);if(X===QQ||X===nee||X===see)return v(j,V,D);if(z){var q=z[X];if(!q){var W=$Q(j);W&&(q=z[W])}if(q)return q(j,V,D)}return!1}}function fee(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,s={areArraysEqual:n?cd:UQ,areDatesEqual:VQ,areErrorsEqual:qQ,areFunctionsEqual:GQ,areMapsEqual:n?hC(mC,cd):mC,areNumbersEqual:WQ,areObjectsEqual:n?cd:ZQ,arePrimitiveWrappersEqual:HQ,areRegExpsEqual:KQ,areSetsEqual:n?hC(gC,cd):gC,areTypedArraysEqual:n?cd:XQ,areUrlsEqual:YQ,unknownTagComparators:void 0};if(r&&(s=vC({},s,r(s))),t){var c=Pg(s.areArraysEqual),d=Pg(s.areMapsEqual),l=Pg(s.areObjectsEqual),v=Pg(s.areSetsEqual);s=vC({},s,{areArraysEqual:c,areMapsEqual:d,areObjectsEqual:l,areSetsEqual:v})}return s}function dee(e){return function(t,r,n,s,c,d,l){return e(t,r,l)}}function pee(e){var t=e.circular,r=e.comparator,n=e.createState,s=e.equals,c=e.strict;if(n)return function(v,b){var S=n(),P=S.cache,k=P===void 0?t?new WeakMap:void 0:P,z=S.meta;return r(v,b,{cache:k,equals:s,meta:z,strict:c})};if(t)return function(v,b){return r(v,b,{cache:new WeakMap,equals:s,meta:void 0,strict:c})};var d={cache:void 0,equals:s,meta:void 0,strict:c};return function(v,b){return r(v,b,d)}}var mee=Al();Al({strict:!0});Al({circular:!0});Al({circular:!0,strict:!0});Al({createInternalComparator:function(){return Iu}});Al({strict:!0,createInternalComparator:function(){return Iu}});Al({circular:!0,createInternalComparator:function(){return Iu}});Al({circular:!0,createInternalComparator:function(){return Iu},strict:!0});function Al(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,s=e.createState,c=e.strict,d=c===void 0?!1:c,l=fee(e),v=hee(l),b=n?n(v):dee(v);return pee({circular:r,comparator:v,createState:s,equals:b,strict:d})}function gee(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function _C(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(c){r<0&&(r=c),c-r>t?(e(c),r=-1):gee(s)};requestAnimationFrame(n)}function lw(e){"@babel/helpers - typeof";return lw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lw(e)}function yee(e){return bee(e)||xee(e)||_ee(e)||vee()}function vee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ee(e,t){if(e){if(typeof e=="string")return xC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xC(e,t)}}function xC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bee(e){if(Array.isArray(e))return e}function wee(){var e={},t=function(){return null},r=!1,n=function s(c){if(!r){if(Array.isArray(c)){if(!c.length)return;var d=c,l=yee(d),v=l[0],b=l.slice(1);if(typeof v=="number"){_C(s.bind(null,b),v);return}s(v),_C(s.bind(null,b));return}lw(c)==="object"&&(e=c,t(e)),typeof c=="function"&&c()}};return{stop:function(){r=!0},start:function(c){r=!1,n(c)},subscribe:function(c){return t=c,function(){t=function(){return null}}}}}function vp(e){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(e)}function bC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(r),!0).forEach(function(n){pD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pD(e,t,r){return t=See(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function See(e){var t=Tee(e,"string");return vp(t)==="symbol"?t:String(t)}function Tee(e,t){if(vp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pee=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(c){return s.includes(c)})})},Aee=function(t){return t},Eee=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Od=function(t,r){return Object.keys(r).reduce(function(n,s){return wC(wC({},n),{},pD({},s,t(s,r[s])))},{})},SC=function(t,r,n){return t.map(function(s){return"".concat(Eee(s)," ").concat(r,"ms ").concat(n)}).join(",")};function Cee(e,t){return Mee(e)||Iee(e,t)||mD(e,t)||kee()}function kee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,c,d,l=[],v=!0,b=!1;try{if(c=(r=r.call(e)).next,t!==0)for(;!(v=(n=c.call(r)).done)&&(l.push(n.value),l.length!==t);v=!0);}catch(S){b=!0,s=S}finally{try{if(!v&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(b)throw s}}return l}}function Mee(e){if(Array.isArray(e))return e}function Oee(e){return Lee(e)||Dee(e)||mD(e)||zee()}function zee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mD(e,t){if(e){if(typeof e=="string")return uw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uw(e,t)}}function Dee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lee(e){if(Array.isArray(e))return uw(e)}function uw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Vy=1e-4,gD=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},yD=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},TC=function(t,r){return function(n){var s=gD(t,r);return yD(s,n)}},jee=function(t,r){return function(n){var s=gD(t,r),c=[].concat(Oee(s.map(function(d,l){return d*l}).slice(1)),[0]);return yD(c,n)}},PC=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],c=r[1],d=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,c=0,d=1,l=1;break;case"ease":s=.25,c=.1,d=.25,l=1;break;case"ease-in":s=.42,c=0,d=1,l=1;break;case"ease-out":s=.42,c=0,d=.58,l=1;break;case"ease-in-out":s=0,c=0,d=.58,l=1;break;default:{var v=r[0].split("(");if(v[0]==="cubic-bezier"&&v[1].split(")")[0].split(",").length===4){var b=v[1].split(")")[0].split(",").map(function(V){return parseFloat(V)}),S=Cee(b,4);s=S[0],c=S[1],d=S[2],l=S[3]}}}var P=TC(s,d),k=TC(c,l),z=jee(s,d),B=function(D){return D>1?1:D<0?0:D},j=function(D){for(var R=D>1?1:D,F=R,X=0;X<8;++X){var q=P(F)-R,W=z(F);if(Math.abs(q-R)<Vy||W<Vy)return k(F);F=B(F-q/W)}return k(F)};return j.isStepper=!1,j},$ee=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,c=s===void 0?8:s,d=t.dt,l=d===void 0?17:d,v=function(S,P,k){var z=-(S-P)*n,B=k*c,j=k+(z-B)*l/1e3,V=k*l/1e3+S;return Math.abs(V-P)<Vy&&Math.abs(j)<Vy?[P,0]:[V,j]};return v.isStepper=!0,v.dt=l,v},Ree=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return PC(s);case"spring":return $ee();default:if(s.split("(")[0]==="cubic-bezier")return PC(s)}return typeof s=="function"?s:null};function _p(e){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_p(e)}function AC(e){return Fee(e)||Bee(e)||vD(e)||Nee()}function Nee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Fee(e){if(Array.isArray(e))return hw(e)}function EC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(r),!0).forEach(function(n){cw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cw(e,t,r){return t=Uee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uee(e){var t=Vee(e,"string");return _p(t)==="symbol"?t:String(t)}function Vee(e,t){if(_p(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_p(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qee(e,t){return Zee(e)||Wee(e,t)||vD(e,t)||Gee()}function Gee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vD(e,t){if(e){if(typeof e=="string")return hw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hw(e,t)}}function hw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,c,d,l=[],v=!0,b=!1;try{if(c=(r=r.call(e)).next,t!==0)for(;!(v=(n=c.call(r)).done)&&(l.push(n.value),l.length!==t);v=!0);}catch(S){b=!0,s=S}finally{try{if(!v&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(b)throw s}}return l}}function Zee(e){if(Array.isArray(e))return e}var qy=function(t,r,n){return t+(r-t)*n},fw=function(t){var r=t.from,n=t.to;return r!==n},Hee=function e(t,r,n){var s=Od(function(c,d){if(fw(d)){var l=t(d.from,d.to,d.velocity),v=qee(l,2),b=v[0],S=v[1];return ni(ni({},d),{},{from:b,velocity:S})}return d},r);return n<1?Od(function(c,d){return fw(d)?ni(ni({},d),{},{velocity:qy(d.velocity,s[c].velocity,n),from:qy(d.from,s[c].from,n)}):d},r):e(t,s,n-1)};const Kee=function(e,t,r,n,s){var c=Pee(e,t),d=c.reduce(function(V,D){return ni(ni({},V),{},cw({},D,[e[D],t[D]]))},{}),l=c.reduce(function(V,D){return ni(ni({},V),{},cw({},D,{from:e[D],velocity:0,to:t[D]}))},{}),v=-1,b,S,P=function(){return null},k=function(){return Od(function(D,R){return R.from},l)},z=function(){return!Object.values(l).filter(fw).length},B=function(D){b||(b=D);var R=D-b,F=R/r.dt;l=Hee(r,l,F),s(ni(ni(ni({},e),t),k())),b=D,z()||(v=requestAnimationFrame(P))},j=function(D){S||(S=D);var R=(D-S)/n,F=Od(function(q,W){return qy.apply(void 0,AC(W).concat([r(R)]))},d);if(s(ni(ni(ni({},e),t),F)),R<1)v=requestAnimationFrame(P);else{var X=Od(function(q,W){return qy.apply(void 0,AC(W).concat([r(1)]))},d);s(ni(ni(ni({},e),t),X))}};return P=r.isStepper?B:j,function(){return requestAnimationFrame(P),function(){cancelAnimationFrame(v)}}};function ch(e){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ch(e)}var Xee=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Yee(e,t){if(e==null)return{};var r=Jee(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Jee(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,c;for(c=0;c<n.length;c++)s=n[c],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function p0(e){return rte(e)||tte(e)||ete(e)||Qee()}function Qee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ete(e,t){if(e){if(typeof e=="string")return dw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dw(e,t)}}function tte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rte(e){if(Array.isArray(e))return dw(e)}function dw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(r),!0).forEach(function(n){_d(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _d(e,t,r){return t=_D(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ite(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_D(n.key),n)}}function ate(e,t,r){return t&&ite(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _D(e){var t=ote(e,"string");return ch(t)==="symbol"?t:String(t)}function ote(e,t){if(ch(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ch(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ste(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pw(e,t)}function pw(e,t){return pw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},pw(e,t)}function lte(e){var t=ute();return function(){var n=Gy(e),s;if(t){var c=Gy(this).constructor;s=Reflect.construct(n,arguments,c)}else s=n.apply(this,arguments);return mw(this,s)}}function mw(e,t){if(t&&(ch(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gw(e)}function gw(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ute(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gy(e){return Gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gy(e)}var vl=function(e){ste(r,e);var t=lte(r);function r(n,s){var c;nte(this,r),c=t.call(this,n,s);var d=c.props,l=d.isActive,v=d.attributeName,b=d.from,S=d.to,P=d.steps,k=d.children,z=d.duration;if(c.handleStyleChange=c.handleStyleChange.bind(gw(c)),c.changeStyle=c.changeStyle.bind(gw(c)),!l||z<=0)return c.state={style:{}},typeof k=="function"&&(c.state={style:S}),mw(c);if(P&&P.length)c.state={style:P[0].style};else if(b){if(typeof k=="function")return c.state={style:b},mw(c);c.state={style:v?_d({},v,b):b}}else c.state={style:{}};return c}return ate(r,[{key:"componentDidMount",value:function(){var s=this.props,c=s.isActive,d=s.canBegin;this.mounted=!0,!(!c||!d)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var c=this.props,d=c.isActive,l=c.canBegin,v=c.attributeName,b=c.shouldReAnimate,S=c.to,P=c.from,k=this.state.style;if(l){if(!d){var z={style:v?_d({},v,S):S};this.state&&k&&(v&&k[v]!==S||!v&&k!==S)&&this.setState(z);return}if(!(mee(s.to,S)&&s.canBegin&&s.isActive)){var B=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var j=B||b?P:s.to;if(this.state&&k){var V={style:v?_d({},v,j):j};(v&&k[v]!==j||!v&&k!==j)&&this.setState(V)}this.runAnimation(Ya(Ya({},this.props),{},{from:j,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var c=this,d=s.from,l=s.to,v=s.duration,b=s.easing,S=s.begin,P=s.onAnimationEnd,k=s.onAnimationStart,z=Kee(d,l,Ree(b),v,this.changeStyle),B=function(){c.stopJSAnimation=z()};this.manager.start([k,S,B,v,P])}},{key:"runStepAnimation",value:function(s){var c=this,d=s.steps,l=s.begin,v=s.onAnimationStart,b=d[0],S=b.style,P=b.duration,k=P===void 0?0:P,z=function(j,V,D){if(D===0)return j;var R=V.duration,F=V.easing,X=F===void 0?"ease":F,q=V.style,W=V.properties,ee=V.onAnimationEnd,le=D>0?d[D-1]:V,ve=W||Object.keys(q);if(typeof X=="function"||X==="spring")return[].concat(p0(j),[c.runJSAnimation.bind(c,{from:le.style,to:q,duration:R,easing:X}),R]);var Pe=SC(ve,R,X),Ce=Ya(Ya(Ya({},le.style),q),{},{transition:Pe});return[].concat(p0(j),[Ce,R,ee]).filter(Aee)};return this.manager.start([v].concat(p0(d.reduce(z,[S,Math.max(k,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=wee());var c=s.begin,d=s.duration,l=s.attributeName,v=s.to,b=s.easing,S=s.onAnimationStart,P=s.onAnimationEnd,k=s.steps,z=s.children,B=this.manager;if(this.unSubscribe=B.subscribe(this.handleStyleChange),typeof b=="function"||typeof z=="function"||b==="spring"){this.runJSAnimation(s);return}if(k.length>1){this.runStepAnimation(s);return}var j=l?_d({},l,v):v,V=SC(Object.keys(j),d,b);B.start([S,c,Ya(Ya({},j),{},{transition:V}),d,P])}},{key:"render",value:function(){var s=this.props,c=s.children;s.begin;var d=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var v=Yee(s,Xee),b=$e.Children.count(c),S=this.state.style;if(typeof c=="function")return c(S);if(!l||b===0||d<=0)return c;var P=function(z){var B=z.props,j=B.style,V=j===void 0?{}:j,D=B.className,R=$e.cloneElement(z,Ya(Ya({},v),{},{style:Ya(Ya({},V),S),className:D}));return R};return b===1?P($e.Children.only(c)):Me.createElement("div",null,$e.Children.map(c,function(k){return P(k)}))}}]),r}($e.PureComponent);vl.displayName="Animate";vl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};vl.propTypes={from:wr.oneOfType([wr.object,wr.string]),to:wr.oneOfType([wr.object,wr.string]),attributeName:wr.string,duration:wr.number,begin:wr.number,easing:wr.oneOfType([wr.string,wr.func]),steps:wr.arrayOf(wr.shape({duration:wr.number.isRequired,style:wr.object.isRequired,easing:wr.oneOfType([wr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),wr.func]),properties:wr.arrayOf("string"),onAnimationEnd:wr.func})),children:wr.oneOfType([wr.node,wr.func]),isActive:wr.bool,canBegin:wr.bool,onAnimationEnd:wr.func,shouldReAnimate:wr.bool,onAnimationStart:wr.func,onAnimationReStart:wr.func};function xp(e){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xp(e)}function Wy(){return Wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wy.apply(this,arguments)}function cte(e,t){return pte(e)||dte(e,t)||fte(e,t)||hte()}function hte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fte(e,t){if(e){if(typeof e=="string")return kC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kC(e,t)}}function kC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,c,d,l=[],v=!0,b=!1;try{if(c=(r=r.call(e)).next,t!==0)for(;!(v=(n=c.call(r)).done)&&(l.push(n.value),l.length!==t);v=!0);}catch(S){b=!0,s=S}finally{try{if(!v&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(b)throw s}}return l}}function pte(e){if(Array.isArray(e))return e}function IC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function MC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IC(Object(r),!0).forEach(function(n){mte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mte(e,t,r){return t=gte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gte(e){var t=yte(e,"string");return xp(t)=="symbol"?t:t+""}function yte(e,t){if(xp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OC=function(t,r,n,s,c){var d=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,v=n>=0?1:-1,b=s>=0&&n>=0||s<0&&n<0?1:0,S;if(d>0&&c instanceof Array){for(var P=[0,0,0,0],k=0,z=4;k<z;k++)P[k]=c[k]>d?d:c[k];S="M".concat(t,",").concat(r+l*P[0]),P[0]>0&&(S+="A ".concat(P[0],",").concat(P[0],",0,0,").concat(b,",").concat(t+v*P[0],",").concat(r)),S+="L ".concat(t+n-v*P[1],",").concat(r),P[1]>0&&(S+="A ".concat(P[1],",").concat(P[1],",0,0,").concat(b,`,
        `).concat(t+n,",").concat(r+l*P[1])),S+="L ".concat(t+n,",").concat(r+s-l*P[2]),P[2]>0&&(S+="A ".concat(P[2],",").concat(P[2],",0,0,").concat(b,`,
        `).concat(t+n-v*P[2],",").concat(r+s)),S+="L ".concat(t+v*P[3],",").concat(r+s),P[3]>0&&(S+="A ".concat(P[3],",").concat(P[3],",0,0,").concat(b,`,
        `).concat(t,",").concat(r+s-l*P[3])),S+="Z"}else if(d>0&&c===+c&&c>0){var B=Math.min(d,c);S="M ".concat(t,",").concat(r+l*B,`
            A `).concat(B,",").concat(B,",0,0,").concat(b,",").concat(t+v*B,",").concat(r,`
            L `).concat(t+n-v*B,",").concat(r,`
            A `).concat(B,",").concat(B,",0,0,").concat(b,",").concat(t+n,",").concat(r+l*B,`
            L `).concat(t+n,",").concat(r+s-l*B,`
            A `).concat(B,",").concat(B,",0,0,").concat(b,",").concat(t+n-v*B,",").concat(r+s,`
            L `).concat(t+v*B,",").concat(r+s,`
            A `).concat(B,",").concat(B,",0,0,").concat(b,",").concat(t,",").concat(r+s-l*B," Z")}else S="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return S},vte=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,c=r.x,d=r.y,l=r.width,v=r.height;if(Math.abs(l)>0&&Math.abs(v)>0){var b=Math.min(c,c+l),S=Math.max(c,c+l),P=Math.min(d,d+v),k=Math.max(d,d+v);return n>=b&&n<=S&&s>=P&&s<=k}return!1},_te={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},IS=function(t){var r=MC(MC({},_te),t),n=$e.useRef(),s=$e.useState(-1),c=cte(s,2),d=c[0],l=c[1];$e.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var X=n.current.getTotalLength();X&&l(X)}catch{}},[]);var v=r.x,b=r.y,S=r.width,P=r.height,k=r.radius,z=r.className,B=r.animationEasing,j=r.animationDuration,V=r.animationBegin,D=r.isAnimationActive,R=r.isUpdateAnimationActive;if(v!==+v||b!==+b||S!==+S||P!==+P||S===0||P===0)return null;var F=gr("recharts-rectangle",z);return R?Me.createElement(vl,{canBegin:d>0,from:{width:S,height:P,x:v,y:b},to:{width:S,height:P,x:v,y:b},duration:j,animationEasing:B,isActive:R},function(X){var q=X.width,W=X.height,ee=X.x,le=X.y;return Me.createElement(vl,{canBegin:d>0,from:"0px ".concat(d===-1?1:d,"px"),to:"".concat(d,"px 0px"),attributeName:"strokeDasharray",begin:V,duration:j,isActive:D,easing:B},Me.createElement("path",Wy({},xr(r,!0),{className:F,d:OC(ee,le,q,W,k),ref:n})))}):Me.createElement("path",Wy({},xr(r,!0),{className:F,d:OC(v,b,S,P,k)}))};function yw(){return yw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yw.apply(this,arguments)}var xD=function(t){var r=t.cx,n=t.cy,s=t.r,c=t.className,d=gr("recharts-dot",c);return r===+r&&n===+n&&s===+s?$e.createElement("circle",yw({},xr(t,!1),hy(t),{className:d,cx:r,cy:n,r:s})):null};function bp(e){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bp(e)}var xte=["x","y","top","left","width","height","className"];function vw(){return vw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vw.apply(this,arguments)}function zC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bte(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zC(Object(r),!0).forEach(function(n){wte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wte(e,t,r){return t=Ste(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ste(e){var t=Tte(e,"string");return bp(t)=="symbol"?t:t+""}function Tte(e,t){if(bp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pte(e,t){if(e==null)return{};var r=Ate(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ate(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Ete=function(t,r,n,s,c,d){return"M".concat(t,",").concat(c,"v").concat(s,"M").concat(d,",").concat(r,"h").concat(n)},Cte=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,c=s===void 0?0:s,d=t.top,l=d===void 0?0:d,v=t.left,b=v===void 0?0:v,S=t.width,P=S===void 0?0:S,k=t.height,z=k===void 0?0:k,B=t.className,j=Pte(t,xte),V=bte({x:n,y:c,top:l,left:b,width:P,height:z},j);return!gt(n)||!gt(c)||!gt(P)||!gt(z)||!gt(l)||!gt(b)?null:Me.createElement("path",vw({},xr(V,!0),{className:gr("recharts-cross",B),d:Ete(n,c,P,z,l,b)}))},kte=zO,Ite=kte(Object.getPrototypeOf,Object),Mte=Ite,Ote=xs,zte=Mte,Dte=bs,Lte="[object Object]",jte=Function.prototype,$te=Object.prototype,bD=jte.toString,Rte=$te.hasOwnProperty,Nte=bD.call(Object);function Bte(e){if(!Dte(e)||Ote(e)!=Lte)return!1;var t=zte(e);if(t===null)return!0;var r=Rte.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&bD.call(r)==Nte}var Fte=Bte;const Ute=Mr(Fte);var Vte=xs,qte=bs,Gte="[object Boolean]";function Wte(e){return e===!0||e===!1||qte(e)&&Vte(e)==Gte}var Zte=Wte;const Hte=Mr(Zte);function wp(e){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(e)}function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zy.apply(this,arguments)}function Kte(e,t){return Qte(e)||Jte(e,t)||Yte(e,t)||Xte()}function Xte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yte(e,t){if(e){if(typeof e=="string")return DC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DC(e,t)}}function DC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,c,d,l=[],v=!0,b=!1;try{if(c=(r=r.call(e)).next,t!==0)for(;!(v=(n=c.call(r)).done)&&(l.push(n.value),l.length!==t);v=!0);}catch(S){b=!0,s=S}finally{try{if(!v&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(b)throw s}}return l}}function Qte(e){if(Array.isArray(e))return e}function LC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LC(Object(r),!0).forEach(function(n){ere(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ere(e,t,r){return t=tre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tre(e){var t=rre(e,"string");return wp(t)=="symbol"?t:t+""}function rre(e,t){if(wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $C=function(t,r,n,s,c){var d=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-d/2,",").concat(r+c),l+="L ".concat(t+n-d/2-s,",").concat(r+c),l+="L ".concat(t,",").concat(r," Z"),l},nre={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ire=function(t){var r=jC(jC({},nre),t),n=$e.useRef(),s=$e.useState(-1),c=Kte(s,2),d=c[0],l=c[1];$e.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var F=n.current.getTotalLength();F&&l(F)}catch{}},[]);var v=r.x,b=r.y,S=r.upperWidth,P=r.lowerWidth,k=r.height,z=r.className,B=r.animationEasing,j=r.animationDuration,V=r.animationBegin,D=r.isUpdateAnimationActive;if(v!==+v||b!==+b||S!==+S||P!==+P||k!==+k||S===0&&P===0||k===0)return null;var R=gr("recharts-trapezoid",z);return D?Me.createElement(vl,{canBegin:d>0,from:{upperWidth:0,lowerWidth:0,height:k,x:v,y:b},to:{upperWidth:S,lowerWidth:P,height:k,x:v,y:b},duration:j,animationEasing:B,isActive:D},function(F){var X=F.upperWidth,q=F.lowerWidth,W=F.height,ee=F.x,le=F.y;return Me.createElement(vl,{canBegin:d>0,from:"0px ".concat(d===-1?1:d,"px"),to:"".concat(d,"px 0px"),attributeName:"strokeDasharray",begin:V,duration:j,easing:B},Me.createElement("path",Zy({},xr(r,!0),{className:R,d:$C(ee,le,X,q,W),ref:n})))}):Me.createElement("g",null,Me.createElement("path",Zy({},xr(r,!0),{className:R,d:$C(v,b,S,P,k)})))},are=["option","shapeType","propTransformer","activeClassName","isActive"];function Sp(e){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sp(e)}function ore(e,t){if(e==null)return{};var r=sre(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function sre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function RC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RC(Object(r),!0).forEach(function(n){lre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lre(e,t,r){return t=ure(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ure(e){var t=cre(e,"string");return Sp(t)=="symbol"?t:t+""}function cre(e,t){if(Sp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hre(e,t){return Hy(Hy({},t),e)}function fre(e,t){return e==="symbols"}function NC(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return Me.createElement(IS,r);case"trapezoid":return Me.createElement(ire,r);case"sector":return Me.createElement(uD,r);case"symbols":if(fre(t))return Me.createElement(H1,r);break;default:return null}}function dre(e){return $e.isValidElement(e)?e.props:e}function pre(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?hre:n,c=e.activeClassName,d=c===void 0?"recharts-active-shape":c,l=e.isActive,v=ore(e,are),b;if($e.isValidElement(t))b=$e.cloneElement(t,Hy(Hy({},v),dre(t)));else if(or(t))b=t(v);else if(Ute(t)&&!Hte(t)){var S=s(t,v);b=Me.createElement(NC,{shapeType:r,elementProps:S})}else{var P=v;b=Me.createElement(NC,{shapeType:r,elementProps:P})}return l?Me.createElement(Zn,{className:d},b):b}function i_(e,t){return t!=null&&"trapezoids"in e.props}function a_(e,t){return t!=null&&"sectors"in e.props}function Tp(e,t){return t!=null&&"points"in e.props}function mre(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,c=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&c}function gre(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function yre(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function vre(e,t){var r;return i_(e,t)?r=mre:a_(e,t)?r=gre:Tp(e,t)&&(r=yre),r}function _re(e,t){var r;return i_(e,t)?r="trapezoids":a_(e,t)?r="sectors":Tp(e,t)&&(r="points"),r}function xre(e,t){if(i_(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(a_(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Tp(e,t)?t.payload:{}}function bre(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=_re(r,t),c=xre(r,t),d=n.filter(function(v,b){var S=AS(c,v),P=r.props[s].filter(function(B){var j=vre(r,t);return j(B,t)}),k=r.props[s].indexOf(P[P.length-1]),z=b===k;return S&&z}),l=n.indexOf(d[d.length-1]);return l}var wre=Math.ceil,Sre=Math.max;function Tre(e,t,r,n){for(var s=-1,c=Sre(wre((t-e)/(r||1)),0),d=Array(c);c--;)d[n?c:++s]=e,e+=r;return d}var Pre=Tre,Are=JO,BC=1/0,Ere=17976931348623157e292;function Cre(e){if(!e)return e===0?e:0;if(e=Are(e),e===BC||e===-BC){var t=e<0?-1:1;return t*Ere}return e===e?e:0}var wD=Cre,kre=Pre,Ire=Wv,m0=wD;function Mre(e){return function(t,r,n){return n&&typeof n!="number"&&Ire(t,r,n)&&(r=n=void 0),t=m0(t),r===void 0?(r=t,t=0):r=m0(r),n=n===void 0?t<r?1:-1:m0(n),kre(t,r,n,e)}}var Ore=Mre,zre=Ore,Dre=zre(),Lre=Dre;const Ky=Mr(Lre);function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function FC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function UC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FC(Object(r),!0).forEach(function(n){SD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SD(e,t,r){return t=jre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jre(e){var t=$re(e,"string");return Pp(t)=="symbol"?t:t+""}function $re(e,t){if(Pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rre=["Webkit","Moz","O","ms"],Nre=function(t,r){var n=t.replace(/(\w)/,function(c){return c.toUpperCase()}),s=Rre.reduce(function(c,d){return UC(UC({},c),{},SD({},d+n,r))},{});return s[t]=r,s};function hh(e){"@babel/helpers - typeof";return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hh(e)}function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xy.apply(this,arguments)}function VC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function g0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VC(Object(r),!0).forEach(function(n){aa(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PD(n.key),n)}}function Fre(e,t,r){return t&&qC(e.prototype,t),r&&qC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ure(e,t,r){return t=Yy(t),Vre(e,TD()?Reflect.construct(t,r||[],Yy(e).constructor):t.apply(e,r))}function Vre(e,t){if(t&&(hh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qre(e)}function qre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TD=function(){return!!e})()}function Yy(e){return Yy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yy(e)}function Gre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_w(e,t)}function _w(e,t){return _w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},_w(e,t)}function aa(e,t,r){return t=PD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PD(e){var t=Wre(e,"string");return hh(t)=="symbol"?t:t+""}function Wre(e,t){if(hh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Zre=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,c=t.x,d=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var v=r.length,b=Id().domain(Ky(0,v)).range([c,c+d-l]),S=b.domain().map(function(P){return b(P)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:b(n),endX:b(s),scale:b,scaleValues:S}},GC=function(t){return t.changedTouches&&!!t.changedTouches.length},fh=function(e){function t(r){var n;return Bre(this,t),n=Ure(this,t,[r]),aa(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),aa(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),aa(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,c=s.endIndex,d=s.onDragEnd,l=s.startIndex;d==null||d({endIndex:c,startIndex:l})}),n.detachDragEndListener()}),aa(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),aa(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),aa(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),aa(n,"handleSlideDragStart",function(s){var c=GC(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:c.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Gre(t,e),Fre(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,c=n.endX,d=this.state.scaleValues,l=this.props,v=l.gap,b=l.data,S=b.length-1,P=Math.min(s,c),k=Math.max(s,c),z=t.getIndexInRange(d,P),B=t.getIndexInRange(d,k);return{startIndex:z-z%v,endIndex:B===S?S:B-B%v}}},{key:"getTextOfTick",value:function(n){var s=this.props,c=s.data,d=s.tickFormatter,l=s.dataKey,v=Oo(c[n],l,n);return or(d)?d(v,n):v}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,c=s.slideMoveStartX,d=s.startX,l=s.endX,v=this.props,b=v.x,S=v.width,P=v.travellerWidth,k=v.startIndex,z=v.endIndex,B=v.onChange,j=n.pageX-c;j>0?j=Math.min(j,b+S-P-l,b+S-P-d):j<0&&(j=Math.max(j,b-d,b-l));var V=this.getIndex({startX:d+j,endX:l+j});(V.startIndex!==k||V.endIndex!==z)&&B&&B(V),this.setState({startX:d+j,endX:l+j,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var c=GC(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:c.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,c=s.brushMoveStartX,d=s.movingTravellerId,l=s.endX,v=s.startX,b=this.state[d],S=this.props,P=S.x,k=S.width,z=S.travellerWidth,B=S.onChange,j=S.gap,V=S.data,D={startX:this.state.startX,endX:this.state.endX},R=n.pageX-c;R>0?R=Math.min(R,P+k-z-b):R<0&&(R=Math.max(R,P-b)),D[d]=b+R;var F=this.getIndex(D),X=F.startIndex,q=F.endIndex,W=function(){var le=V.length-1;return d==="startX"&&(l>v?X%j===0:q%j===0)||l<v&&q===le||d==="endX"&&(l>v?q%j===0:X%j===0)||l>v&&q===le};this.setState(aa(aa({},d,b+R),"brushMoveStartX",n.pageX),function(){B&&W()&&B(F)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var c=this,d=this.state,l=d.scaleValues,v=d.startX,b=d.endX,S=this.state[s],P=l.indexOf(S);if(P!==-1){var k=P+n;if(!(k===-1||k>=l.length)){var z=l[k];s==="startX"&&z>=b||s==="endX"&&z<=v||this.setState(aa({},s,z),function(){c.props.onChange(c.getIndex({startX:c.state.startX,endX:c.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,c=n.y,d=n.width,l=n.height,v=n.fill,b=n.stroke;return Me.createElement("rect",{stroke:b,fill:v,x:s,y:c,width:d,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,c=n.y,d=n.width,l=n.height,v=n.data,b=n.children,S=n.padding,P=$e.Children.only(b);return P?Me.cloneElement(P,{x:s,y:c,width:d,height:l,margin:S,compact:!0,data:v}):null}},{key:"renderTravellerLayer",value:function(n,s){var c,d,l=this,v=this.props,b=v.y,S=v.travellerWidth,P=v.height,k=v.traveller,z=v.ariaLabel,B=v.data,j=v.startIndex,V=v.endIndex,D=Math.max(n,this.props.x),R=g0(g0({},xr(this.props,!1)),{},{x:D,y:b,width:S,height:P}),F=z||"Min value: ".concat((c=B[j])===null||c===void 0?void 0:c.name,", Max value: ").concat((d=B[V])===null||d===void 0?void 0:d.name);return Me.createElement(Zn,{tabIndex:0,role:"slider","aria-label":F,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(q){["ArrowLeft","ArrowRight"].includes(q.key)&&(q.preventDefault(),q.stopPropagation(),l.handleTravellerMoveKeyboard(q.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(k,R))}},{key:"renderSlide",value:function(n,s){var c=this.props,d=c.y,l=c.height,v=c.stroke,b=c.travellerWidth,S=Math.min(n,s)+b,P=Math.max(Math.abs(s-n)-b,0);return Me.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:v,fillOpacity:.2,x:S,y:d,width:P,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,c=n.endIndex,d=n.y,l=n.height,v=n.travellerWidth,b=n.stroke,S=this.state,P=S.startX,k=S.endX,z=5,B={pointerEvents:"none",fill:b};return Me.createElement(Zn,{className:"recharts-brush-texts"},Me.createElement(Ay,Xy({textAnchor:"end",verticalAnchor:"middle",x:Math.min(P,k)-z,y:d+l/2},B),this.getTextOfTick(s)),Me.createElement(Ay,Xy({textAnchor:"start",verticalAnchor:"middle",x:Math.max(P,k)+v+z,y:d+l/2},B),this.getTextOfTick(c)))}},{key:"render",value:function(){var n=this.props,s=n.data,c=n.className,d=n.children,l=n.x,v=n.y,b=n.width,S=n.height,P=n.alwaysShowText,k=this.state,z=k.startX,B=k.endX,j=k.isTextActive,V=k.isSlideMoving,D=k.isTravellerMoving,R=k.isTravellerFocused;if(!s||!s.length||!gt(l)||!gt(v)||!gt(b)||!gt(S)||b<=0||S<=0)return null;var F=gr("recharts-brush",c),X=Me.Children.count(d)===1,q=Nre("userSelect","none");return Me.createElement(Zn,{className:F,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:q},this.renderBackground(),X&&this.renderPanorama(),this.renderSlide(z,B),this.renderTravellerLayer(z,"startX"),this.renderTravellerLayer(B,"endX"),(j||V||D||R||P)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,c=n.y,d=n.width,l=n.height,v=n.stroke,b=Math.floor(c+l/2)-1;return Me.createElement(Me.Fragment,null,Me.createElement("rect",{x:s,y:c,width:d,height:l,fill:v,stroke:"none"}),Me.createElement("line",{x1:s+1,y1:b,x2:s+d-1,y2:b,fill:"none",stroke:"#fff"}),Me.createElement("line",{x1:s+1,y1:b+2,x2:s+d-1,y2:b+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var c;return Me.isValidElement(n)?c=Me.cloneElement(n,s):or(n)?c=n(s):c=t.renderDefaultTraveller(s),c}},{key:"getDerivedStateFromProps",value:function(n,s){var c=n.data,d=n.width,l=n.x,v=n.travellerWidth,b=n.updateId,S=n.startIndex,P=n.endIndex;if(c!==s.prevData||b!==s.prevUpdateId)return g0({prevData:c,prevTravellerWidth:v,prevUpdateId:b,prevX:l,prevWidth:d},c&&c.length?Zre({data:c,width:d,x:l,travellerWidth:v,startIndex:S,endIndex:P}):{scale:null,scaleValues:null});if(s.scale&&(d!==s.prevWidth||l!==s.prevX||v!==s.prevTravellerWidth)){s.scale.range([l,l+d-v]);var k=s.scale.domain().map(function(z){return s.scale(z)});return{prevData:c,prevTravellerWidth:v,prevUpdateId:b,prevX:l,prevWidth:d,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:k}}return null}},{key:"getIndexInRange",value:function(n,s){for(var c=n.length,d=0,l=c-1;l-d>1;){var v=Math.floor((d+l)/2);n[v]>s?l=v:d=v}return s>=n[l]?l:d}}])}($e.PureComponent);aa(fh,"displayName","Brush");aa(fh,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Hre=tS;function Kre(e,t){var r;return Hre(e,function(n,s,c){return r=t(n,s,c),!r}),!!r}var Xre=Kre,Yre=PO,Jre=Sl,Qre=Xre,ene=ea,tne=Wv;function rne(e,t,r){var n=ene(e)?Yre:Qre;return r&&tne(e,t,r)&&(t=void 0),n(e,Jre(t))}var nne=rne;const ine=Mr(nne);var Io=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},WC=ZO;function ane(e,t,r){t=="__proto__"&&WC?WC(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var one=ane,sne=one,lne=GO,une=Sl;function cne(e,t){var r={};return t=une(t),lne(e,function(n,s,c){sne(r,s,t(n,s,c))}),r}var hne=cne;const fne=Mr(hne);function dne(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var pne=dne,mne=tS;function gne(e,t){var r=!0;return mne(e,function(n,s,c){return r=!!t(n,s,c),r}),r}var yne=gne,vne=pne,_ne=yne,xne=Sl,bne=ea,wne=Wv;function Sne(e,t,r){var n=bne(e)?vne:_ne;return r&&wne(e,t,r)&&(t=void 0),n(e,xne(t))}var Tne=Sne;const AD=Mr(Tne);var Pne=["x","y"];function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}function xw(){return xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xw.apply(this,arguments)}function ZC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZC(Object(r),!0).forEach(function(n){Ane(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ane(e,t,r){return t=Ene(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ene(e){var t=Cne(e,"string");return Ap(t)=="symbol"?t:t+""}function Cne(e,t){if(Ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kne(e,t){if(e==null)return{};var r=Ine(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ine(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Mne(e,t){var r=e.x,n=e.y,s=kne(e,Pne),c="".concat(r),d=parseInt(c,10),l="".concat(n),v=parseInt(l,10),b="".concat(t.height||s.height),S=parseInt(b,10),P="".concat(t.width||s.width),k=parseInt(P,10);return hd(hd(hd(hd(hd({},t),s),d?{x:d}:{}),v?{y:v}:{}),{},{height:S,width:k,name:t.name,radius:t.radius})}function HC(e){return Me.createElement(pre,xw({shapeType:"rectangle",propTransformer:Mne,activeClassName:"recharts-active-bar"},e))}var One=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var c=gt(n)||H4(n);return c?t(n,s):(c||bu(),r)}},zne=["value","background"],ED;function dh(e){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dh(e)}function Dne(e,t){if(e==null)return{};var r=Lne(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Lne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Jy(){return Jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jy.apply(this,arguments)}function KC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KC(Object(r),!0).forEach(function(n){ol(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kD(n.key),n)}}function $ne(e,t,r){return t&&XC(e.prototype,t),r&&XC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rne(e,t,r){return t=Qy(t),Nne(e,CD()?Reflect.construct(t,r||[],Qy(e).constructor):t.apply(e,r))}function Nne(e,t){if(t&&(dh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bne(e)}function Bne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CD=function(){return!!e})()}function Qy(e){return Qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qy(e)}function Fne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bw(e,t)}function bw(e,t){return bw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},bw(e,t)}function ol(e,t,r){return t=kD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kD(e){var t=Une(e,"string");return dh(t)=="symbol"?t:t+""}function Une(e,t){if(dh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ao=function(e){function t(){var r;jne(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return r=Rne(this,t,[].concat(s)),ol(r,"state",{isAnimationFinished:!1}),ol(r,"id",Nv("recharts-bar-")),ol(r,"handleAnimationEnd",function(){var d=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),d&&d()}),ol(r,"handleAnimationStart",function(){var d=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),d&&d()}),r}return Fne(t,e),$ne(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,c=this.props,d=c.shape,l=c.dataKey,v=c.activeIndex,b=c.activeBar,S=xr(this.props,!1);return n&&n.map(function(P,k){var z=k===v,B=z?b:d,j=Pn(Pn(Pn({},S),P),{},{isActive:z,option:B,index:k,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return Me.createElement(Zn,Jy({className:"recharts-bar-rectangle"},fy(s.props,P,k),{key:"rectangle-".concat(P==null?void 0:P.x,"-").concat(P==null?void 0:P.y,"-").concat(P==null?void 0:P.value,"-").concat(k)}),Me.createElement(HC,j))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,c=s.data,d=s.layout,l=s.isAnimationActive,v=s.animationBegin,b=s.animationDuration,S=s.animationEasing,P=s.animationId,k=this.state.prevData;return Me.createElement(vl,{begin:v,duration:b,isActive:l,easing:S,from:{t:0},to:{t:1},key:"bar-".concat(P),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(z){var B=z.t,j=c.map(function(V,D){var R=k&&k[D];if(R){var F=vc(R.x,V.x),X=vc(R.y,V.y),q=vc(R.width,V.width),W=vc(R.height,V.height);return Pn(Pn({},V),{},{x:F(B),y:X(B),width:q(B),height:W(B)})}if(d==="horizontal"){var ee=vc(0,V.height),le=ee(B);return Pn(Pn({},V),{},{y:V.y+V.height-le,height:le})}var ve=vc(0,V.width),Pe=ve(B);return Pn(Pn({},V),{},{width:Pe})});return Me.createElement(Zn,null,n.renderRectanglesStatically(j))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,c=n.isAnimationActive,d=this.state.prevData;return c&&s&&s.length&&(!d||!AS(d,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,c=s.data,d=s.dataKey,l=s.activeIndex,v=xr(this.props.background,!1);return c.map(function(b,S){b.value;var P=b.background,k=Dne(b,zne);if(!P)return null;var z=Pn(Pn(Pn(Pn(Pn({},k),{},{fill:"#eee"},P),v),fy(n.props,b,S)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:d,index:S,className:"recharts-bar-background-rectangle"});return Me.createElement(HC,Jy({key:"background-bar-".concat(S),option:n.props.background,isActive:S===l},z))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var c=this.props,d=c.data,l=c.xAxis,v=c.yAxis,b=c.layout,S=c.children,P=oo(S,n_);if(!P)return null;var k=b==="vertical"?d[0].height/2:d[0].width/2,z=function(V,D){var R=Array.isArray(V.value)?V.value[1]:V.value;return{x:V.x,y:V.y,value:R,errorVal:Oo(V,D)}},B={clipPath:n?"url(#clipPath-".concat(s,")"):null};return Me.createElement(Zn,B,P.map(function(j){return Me.cloneElement(j,{key:"error-bar-".concat(s,"-").concat(j.props.dataKey),data:d,xAxis:l,yAxis:v,layout:b,offset:k,dataPointFormatter:z})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,c=n.data,d=n.className,l=n.xAxis,v=n.yAxis,b=n.left,S=n.top,P=n.width,k=n.height,z=n.isAnimationActive,B=n.background,j=n.id;if(s||!c||!c.length)return null;var V=this.state.isAnimationFinished,D=gr("recharts-bar",d),R=l&&l.allowDataOverflow,F=v&&v.allowDataOverflow,X=R||F,q=br(j)?this.id:j;return Me.createElement(Zn,{className:D},R||F?Me.createElement("defs",null,Me.createElement("clipPath",{id:"clipPath-".concat(q)},Me.createElement("rect",{x:R?b:b-P/2,y:F?S:S-k/2,width:R?P:P*2,height:F?k:k*2}))):null,Me.createElement(Zn,{className:"recharts-bar-rectangles",clipPath:X?"url(#clipPath-".concat(q,")"):null},B?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(X,q),(!z||V)&&fu.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])}($e.PureComponent);ED=Ao;ol(Ao,"displayName","Bar");ol(Ao,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Np.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ol(Ao,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,c=e.xAxis,d=e.yAxis,l=e.xAxisTicks,v=e.yAxisTicks,b=e.stackedData,S=e.dataStartIndex,P=e.displayedData,k=e.offset,z=yJ(n,r);if(!z)return null;var B=t.layout,j=r.type.defaultProps,V=j!==void 0?Pn(Pn({},j),r.props):r.props,D=V.dataKey,R=V.children,F=V.minPointSize,X=B==="horizontal"?d:c,q=b?X.scale.domain():null,W=PJ({numericAxis:X}),ee=oo(R,ez),le=P.map(function(ve,Pe){var Ce,Te,Fe,Re,Be,qe;b?Ce=vJ(b[S+Pe],q):(Ce=Oo(ve,D),Array.isArray(Ce)||(Ce=[W,Ce]));var Ke=One(F,ED.defaultProps.minPointSize)(Ce[1],Pe);if(B==="horizontal"){var ce,_e=[d.scale(Ce[0]),d.scale(Ce[1])],ke=_e[0],Ue=_e[1];Te=HE({axis:c,ticks:l,bandSize:s,offset:z.offset,entry:ve,index:Pe}),Fe=(ce=Ue??ke)!==null&&ce!==void 0?ce:void 0,Re=z.size;var je=ke-Ue;if(Be=Number.isNaN(je)?0:je,qe={x:Te,y:d.y,width:Re,height:d.height},Math.abs(Ke)>0&&Math.abs(Be)<Math.abs(Ke)){var Qe=no(Be||Ke)*(Math.abs(Ke)-Math.abs(Be));Fe-=Qe,Be+=Qe}}else{var pt=[c.scale(Ce[0]),c.scale(Ce[1])],Dt=pt[0],Rt=pt[1];if(Te=Dt,Fe=HE({axis:d,ticks:v,bandSize:s,offset:z.offset,entry:ve,index:Pe}),Re=Rt-Dt,Be=z.size,qe={x:c.x,y:Fe,width:c.width,height:Be},Math.abs(Ke)>0&&Math.abs(Re)<Math.abs(Ke)){var Bt=no(Re||Ke)*(Math.abs(Ke)-Math.abs(Re));Re+=Bt}}return Pn(Pn(Pn({},ve),{},{x:Te,y:Fe,width:Re,height:Be,value:b?Ce:Ce[1],payload:ve,background:qe},ee&&ee[Pe]&&ee[Pe].props),{},{tooltipPayload:[oD(r,ve)],tooltipPosition:{x:Te+Re/2,y:Fe+Be/2}})});return Pn({data:le,layout:B},k)});function Ep(e){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}function Vne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ID(n.key),n)}}function qne(e,t,r){return t&&YC(e.prototype,t),r&&YC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function JC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JC(Object(r),!0).forEach(function(n){o_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o_(e,t,r){return t=ID(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ID(e){var t=Gne(e,"string");return Ep(t)=="symbol"?t:t+""}function Gne(e,t){if(Ep(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wne=function(t,r,n,s,c){var d=t.width,l=t.height,v=t.layout,b=t.children,S=Object.keys(r),P={left:n.left,leftMirror:n.left,right:d-n.right,rightMirror:d-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},k=!!sa(b,Ao);return S.reduce(function(z,B){var j=r[B],V=j.orientation,D=j.domain,R=j.padding,F=R===void 0?{}:R,X=j.mirror,q=j.reversed,W="".concat(V).concat(X?"Mirror":""),ee,le,ve,Pe,Ce;if(j.type==="number"&&(j.padding==="gap"||j.padding==="no-gap")){var Te=D[1]-D[0],Fe=1/0,Re=j.categoricalDomain.sort(Y4);if(Re.forEach(function(pt,Dt){Dt>0&&(Fe=Math.min((pt||0)-(Re[Dt-1]||0),Fe))}),Number.isFinite(Fe)){var Be=Fe/Te,qe=j.layout==="vertical"?n.height:n.width;if(j.padding==="gap"&&(ee=Be*qe/2),j.padding==="no-gap"){var Ke=_u(t.barCategoryGap,Be*qe),ce=Be*qe/2;ee=ce-Ke-(ce-Ke)/qe*Ke}}}s==="xAxis"?le=[n.left+(F.left||0)+(ee||0),n.left+n.width-(F.right||0)-(ee||0)]:s==="yAxis"?le=v==="horizontal"?[n.top+n.height-(F.bottom||0),n.top+(F.top||0)]:[n.top+(F.top||0)+(ee||0),n.top+n.height-(F.bottom||0)-(ee||0)]:le=j.range,q&&(le=[le[1],le[0]]);var _e=mJ(j,c,k),ke=_e.scale,Ue=_e.realScaleType;ke.domain(D).range(le),gJ(ke);var je=TJ(ke,eo(eo({},j),{},{realScaleType:Ue}));s==="xAxis"?(Ce=V==="top"&&!X||V==="bottom"&&X,ve=n.left,Pe=P[W]-Ce*j.height):s==="yAxis"&&(Ce=V==="left"&&!X||V==="right"&&X,ve=P[W]-Ce*j.width,Pe=n.top);var Qe=eo(eo(eo({},j),je),{},{realScaleType:Ue,x:ve,y:Pe,scale:ke,width:s==="xAxis"?n.width:j.width,height:s==="yAxis"?n.height:j.height});return Qe.bandSize=By(Qe,je),!j.hide&&s==="xAxis"?P[W]+=(Ce?-1:1)*Qe.height:j.hide||(P[W]+=(Ce?-1:1)*Qe.width),eo(eo({},z),{},o_({},B,Qe))},{})},MD=function(t,r){var n=t.x,s=t.y,c=r.x,d=r.y;return{x:Math.min(n,c),y:Math.min(s,d),width:Math.abs(c-n),height:Math.abs(d-s)}},Zne=function(t){var r=t.x1,n=t.y1,s=t.x2,c=t.y2;return MD({x:r,y:n},{x:s,y:c})},OD=function(){function e(t){Vne(this,e),this.scale=t}return qne(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,c=n.position;if(r!==void 0){if(c)switch(c){case"start":return this.scale(r);case"middle":{var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var v=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+v}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],c=n[n.length-1];return s<=c?r>=s&&r<=c:r>=c&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])}();o_(OD,"EPS",1e-4);var MS=function(t){var r=Object.keys(t).reduce(function(n,s){return eo(eo({},n),{},o_({},s,OD.create(t[s])))},{});return eo(eo({},r),{},{apply:function(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=c.bandAware,l=c.position;return fne(s,function(v,b){return r[b].apply(v,{bandAware:d,position:l})})},isInRange:function(s){return AD(s,function(c,d){return r[d].isInRange(c)})}})};function Hne(e){return(e%180+180)%180}var Kne=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=Hne(s),d=c*Math.PI/180,l=Math.atan(n/r),v=d>l&&d<Math.PI-l?n/Math.sin(d):r/Math.cos(d);return Math.abs(v)},Xne=Sl,Yne=Rp,Jne=qv;function Qne(e){return function(t,r,n){var s=Object(t);if(!Yne(t)){var c=Xne(r);t=Jne(t),r=function(l){return c(s[l],l,s)}}var d=e(t,r,n);return d>-1?s[c?t[d]:d]:void 0}}var eie=Qne,tie=wD;function rie(e){var t=tie(e),r=t%1;return t===t?r?t-r:t:0}var nie=rie,iie=NO,aie=Sl,oie=nie,sie=Math.max;function lie(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var s=r==null?0:oie(r);return s<0&&(s=sie(n+s,0)),iie(e,aie(t),s)}var uie=lie,cie=eie,hie=uie,fie=cie(hie),die=fie;const pie=Mr(die);var mie=e4(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),OS=$e.createContext(void 0),zS=$e.createContext(void 0),zD=$e.createContext(void 0),DD=$e.createContext({}),LD=$e.createContext(void 0),jD=$e.createContext(0),$D=$e.createContext(0),QC=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,c=r.offset,d=t.clipPathId,l=t.children,v=t.width,b=t.height,S=mie(c);return Me.createElement(OS.Provider,{value:n},Me.createElement(zS.Provider,{value:s},Me.createElement(DD.Provider,{value:c},Me.createElement(zD.Provider,{value:S},Me.createElement(LD.Provider,{value:d},Me.createElement(jD.Provider,{value:b},Me.createElement($D.Provider,{value:v},l)))))))},gie=function(){return $e.useContext(LD)},RD=function(t){var r=$e.useContext(OS);r==null&&bu();var n=r[t];return n==null&&bu(),n},yie=function(){var t=$e.useContext(OS);return nl(t)},vie=function(){var t=$e.useContext(zS),r=pie(t,function(n){return AD(n.domain,Number.isFinite)});return r||nl(t)},ND=function(t){var r=$e.useContext(zS);r==null&&bu();var n=r[t];return n==null&&bu(),n},_ie=function(){var t=$e.useContext(zD);return t},xie=function(){return $e.useContext(DD)},DS=function(){return $e.useContext($D)},LS=function(){return $e.useContext(jD)};function ph(e){"@babel/helpers - typeof";return ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ph(e)}function bie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FD(n.key),n)}}function Sie(e,t,r){return t&&wie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tie(e,t,r){return t=ev(t),Pie(e,BD()?Reflect.construct(t,r||[],ev(e).constructor):t.apply(e,r))}function Pie(e,t){if(t&&(ph(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aie(e)}function Aie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BD=function(){return!!e})()}function ev(e){return ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ev(e)}function Eie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ww(e,t)}function ww(e,t){return ww=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ww(e,t)}function ek(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ek(Object(r),!0).forEach(function(n){jS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ek(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jS(e,t,r){return t=FD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FD(e){var t=Cie(e,"string");return ph(t)=="symbol"?t:t+""}function Cie(e,t){if(ph(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ph(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function kie(e,t){return zie(e)||Oie(e,t)||Mie(e,t)||Iie()}function Iie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mie(e,t){if(e){if(typeof e=="string")return rk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rk(e,t)}}function rk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Oie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,c,d,l=[],v=!0,b=!1;try{if(c=(r=r.call(e)).next,t!==0)for(;!(v=(n=c.call(r)).done)&&(l.push(n.value),l.length!==t);v=!0);}catch(S){b=!0,s=S}finally{try{if(!v&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(b)throw s}}return l}}function zie(e){if(Array.isArray(e))return e}function Sw(){return Sw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sw.apply(this,arguments)}var Die=function(t,r){var n;return Me.isValidElement(t)?n=Me.cloneElement(t,r):or(t)?n=t(r):n=Me.createElement("line",Sw({},r,{className:"recharts-reference-line-line"})),n},Lie=function(t,r,n,s,c,d,l,v,b){var S=c.x,P=c.y,k=c.width,z=c.height;if(n){var B=b.y,j=t.y.apply(B,{position:d});if(Io(b,"discard")&&!t.y.isInRange(j))return null;var V=[{x:S+k,y:j},{x:S,y:j}];return v==="left"?V.reverse():V}if(r){var D=b.x,R=t.x.apply(D,{position:d});if(Io(b,"discard")&&!t.x.isInRange(R))return null;var F=[{x:R,y:P+z},{x:R,y:P}];return l==="top"?F.reverse():F}if(s){var X=b.segment,q=X.map(function(W){return t.apply(W,{position:d})});return Io(b,"discard")&&ine(q,function(W){return!t.isInRange(W)})?null:q}return null};function jie(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,c=e.yAxisId,d=e.shape,l=e.className,v=e.alwaysShow,b=gie(),S=RD(s),P=ND(c),k=_ie();if(!b||!k)return null;cs(v===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var z=MS({x:S.scale,y:P.scale}),B=$n(t),j=$n(r),V=n&&n.length===2,D=Lie(z,B,j,V,k,e.position,S.orientation,P.orientation,e);if(!D)return null;var R=kie(D,2),F=R[0],X=F.x,q=F.y,W=R[1],ee=W.x,le=W.y,ve=Io(e,"hidden")?"url(#".concat(b,")"):void 0,Pe=tk(tk({clipPath:ve},xr(e,!0)),{},{x1:X,y1:q,x2:ee,y2:le});return Me.createElement(Zn,{className:gr("recharts-reference-line",l)},Die(d,Pe),xi.renderCallByParent(e,Zne({x1:X,y1:q,x2:ee,y2:le})))}var $S=function(e){function t(){return bie(this,t),Tie(this,t,arguments)}return Eie(t,e),Sie(t,[{key:"render",value:function(){return Me.createElement(jie,this.props)}}])}(Me.Component);jS($S,"displayName","ReferenceLine");jS($S,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Tw(){return Tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tw.apply(this,arguments)}function mh(e){"@babel/helpers - typeof";return mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mh(e)}function nk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ik(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nk(Object(r),!0).forEach(function(n){s_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VD(n.key),n)}}function Nie(e,t,r){return t&&Rie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bie(e,t,r){return t=tv(t),Fie(e,UD()?Reflect.construct(t,r||[],tv(e).constructor):t.apply(e,r))}function Fie(e,t){if(t&&(mh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uie(e)}function Uie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UD=function(){return!!e})()}function tv(e){return tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tv(e)}function Vie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pw(e,t)}function Pw(e,t){return Pw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Pw(e,t)}function s_(e,t,r){return t=VD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VD(e){var t=qie(e,"string");return mh(t)=="symbol"?t:t+""}function qie(e,t){if(mh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gie=function(t){var r=t.x,n=t.y,s=t.xAxis,c=t.yAxis,d=MS({x:s.scale,y:c.scale}),l=d.apply({x:r,y:n},{bandAware:!0});return Io(t,"discard")&&!d.isInRange(l)?null:l},l_=function(e){function t(){return $ie(this,t),Bie(this,t,arguments)}return Vie(t,e),Nie(t,[{key:"render",value:function(){var n=this.props,s=n.x,c=n.y,d=n.r,l=n.alwaysShow,v=n.clipPathId,b=$n(s),S=$n(c);if(cs(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!b||!S)return null;var P=Gie(this.props);if(!P)return null;var k=P.x,z=P.y,B=this.props,j=B.shape,V=B.className,D=Io(this.props,"hidden")?"url(#".concat(v,")"):void 0,R=ik(ik({clipPath:D},xr(this.props,!0)),{},{cx:k,cy:z});return Me.createElement(Zn,{className:gr("recharts-reference-dot",V)},t.renderDot(j,R),xi.renderCallByParent(this.props,{x:k-d,y:z-d,width:2*d,height:2*d}))}}])}(Me.Component);s_(l_,"displayName","ReferenceDot");s_(l_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});s_(l_,"renderDot",function(e,t){var r;return Me.isValidElement(e)?r=Me.cloneElement(e,t):or(e)?r=e(t):r=Me.createElement(xD,Tw({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Aw(){return Aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Aw.apply(this,arguments)}function gh(e){"@babel/helpers - typeof";return gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gh(e)}function ak(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ok(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ak(Object(r),!0).forEach(function(n){u_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ak(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GD(n.key),n)}}function Hie(e,t,r){return t&&Zie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kie(e,t,r){return t=rv(t),Xie(e,qD()?Reflect.construct(t,r||[],rv(e).constructor):t.apply(e,r))}function Xie(e,t){if(t&&(gh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yie(e)}function Yie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qD=function(){return!!e})()}function rv(e){return rv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rv(e)}function Jie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ew(e,t)}function Ew(e,t){return Ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Ew(e,t)}function u_(e,t,r){return t=GD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GD(e){var t=Qie(e,"string");return gh(t)=="symbol"?t:t+""}function Qie(e,t){if(gh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var eae=function(t,r,n,s,c){var d=c.x1,l=c.x2,v=c.y1,b=c.y2,S=c.xAxis,P=c.yAxis;if(!S||!P)return null;var k=MS({x:S.scale,y:P.scale}),z={x:t?k.x.apply(d,{position:"start"}):k.x.rangeMin,y:n?k.y.apply(v,{position:"start"}):k.y.rangeMin},B={x:r?k.x.apply(l,{position:"end"}):k.x.rangeMax,y:s?k.y.apply(b,{position:"end"}):k.y.rangeMax};return Io(c,"discard")&&(!k.isInRange(z)||!k.isInRange(B))?null:MD(z,B)},c_=function(e){function t(){return Wie(this,t),Kie(this,t,arguments)}return Jie(t,e),Hie(t,[{key:"render",value:function(){var n=this.props,s=n.x1,c=n.x2,d=n.y1,l=n.y2,v=n.className,b=n.alwaysShow,S=n.clipPathId;cs(b===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var P=$n(s),k=$n(c),z=$n(d),B=$n(l),j=this.props.shape;if(!P&&!k&&!z&&!B&&!j)return null;var V=eae(P,k,z,B,this.props);if(!V&&!j)return null;var D=Io(this.props,"hidden")?"url(#".concat(S,")"):void 0;return Me.createElement(Zn,{className:gr("recharts-reference-area",v)},t.renderRect(j,ok(ok({clipPath:D},xr(this.props,!0)),V)),xi.renderCallByParent(this.props,V))}}])}(Me.Component);u_(c_,"displayName","ReferenceArea");u_(c_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});u_(c_,"renderRect",function(e,t){var r;return Me.isValidElement(e)?r=Me.cloneElement(e,t):or(e)?r=e(t):r=Me.createElement(IS,Aw({},t,{className:"recharts-reference-area-rect"})),r});function WD(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function tae(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Kne(n,r)}function rae(e,t,r){var n=r==="width",s=e.x,c=e.y,d=e.width,l=e.height;return t===1?{start:n?s:c,end:n?s+d:c+l}:{start:n?s+d:c+l,end:n?s:c}}function nv(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var c=r();return e*(t-e*c/2-n)>=0&&e*(t+e*c/2-s)<=0}function nae(e,t){return WD(e,t+1)}function iae(e,t,r,n,s){for(var c=(n||[]).slice(),d=t.start,l=t.end,v=0,b=1,S=d,P=function(){var B=n==null?void 0:n[v];if(B===void 0)return{v:WD(n,b)};var j=v,V,D=function(){return V===void 0&&(V=r(B,j)),V},R=B.coordinate,F=v===0||nv(e,R,D,S,l);F||(v=0,S=d,b+=1),F&&(S=R+e*(D()/2+s),v+=b)},k;b<=c.length;)if(k=P(),k)return k.v;return[]}function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function sk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sk(Object(r),!0).forEach(function(n){aae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aae(e,t,r){return t=oae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oae(e){var t=sae(e,"string");return Cp(t)=="symbol"?t:t+""}function sae(e,t){if(Cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lae(e,t,r,n,s){for(var c=(n||[]).slice(),d=c.length,l=t.start,v=t.end,b=function(k){var z=c[k],B,j=function(){return B===void 0&&(B=r(z,k)),B};if(k===d-1){var V=e*(z.coordinate+e*j()/2-v);c[k]=z=vi(vi({},z),{},{tickCoord:V>0?z.coordinate-V*e:z.coordinate})}else c[k]=z=vi(vi({},z),{},{tickCoord:z.coordinate});var D=nv(e,z.tickCoord,j,l,v);D&&(v=z.tickCoord-e*(j()/2+s),c[k]=vi(vi({},z),{},{isShow:!0}))},S=d-1;S>=0;S--)b(S);return c}function uae(e,t,r,n,s,c){var d=(n||[]).slice(),l=d.length,v=t.start,b=t.end;if(c){var S=n[l-1],P=r(S,l-1),k=e*(S.coordinate+e*P/2-b);d[l-1]=S=vi(vi({},S),{},{tickCoord:k>0?S.coordinate-k*e:S.coordinate});var z=nv(e,S.tickCoord,function(){return P},v,b);z&&(b=S.tickCoord-e*(P/2+s),d[l-1]=vi(vi({},S),{},{isShow:!0}))}for(var B=c?l-1:l,j=function(R){var F=d[R],X,q=function(){return X===void 0&&(X=r(F,R)),X};if(R===0){var W=e*(F.coordinate-e*q()/2-v);d[R]=F=vi(vi({},F),{},{tickCoord:W<0?F.coordinate-W*e:F.coordinate})}else d[R]=F=vi(vi({},F),{},{tickCoord:F.coordinate});var ee=nv(e,F.tickCoord,q,v,b);ee&&(v=F.tickCoord+e*(q()/2+s),d[R]=vi(vi({},F),{},{isShow:!0}))},V=0;V<B;V++)j(V);return d}function RS(e,t,r){var n=e.tick,s=e.ticks,c=e.viewBox,d=e.minTickGap,l=e.orientation,v=e.interval,b=e.tickFormatter,S=e.unit,P=e.angle;if(!s||!s.length||!n)return[];if(gt(v)||Np.isSsr)return nae(s,typeof v=="number"&&gt(v)?v:0);var k=[],z=l==="top"||l==="bottom"?"width":"height",B=S&&z==="width"?kd(S,{fontSize:t,letterSpacing:r}):{width:0,height:0},j=function(F,X){var q=or(b)?b(F.value,X):F.value;return z==="width"?tae(kd(q,{fontSize:t,letterSpacing:r}),B,P):kd(q,{fontSize:t,letterSpacing:r})[z]},V=s.length>=2?no(s[1].coordinate-s[0].coordinate):1,D=rae(c,V,z);return v==="equidistantPreserveStart"?iae(V,D,j,s,d):(v==="preserveStart"||v==="preserveStartEnd"?k=uae(V,D,j,s,d,v==="preserveStartEnd"):k=lae(V,D,j,s,d),k.filter(function(R){return R.isShow}))}var cae=["viewBox"],hae=["viewBox"],fae=["ticks"];function yh(e){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yh(e)}function Lc(){return Lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lc.apply(this,arguments)}function lk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lk(Object(r),!0).forEach(function(n){NS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y0(e,t){if(e==null)return{};var r=dae(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function pae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HD(n.key),n)}}function mae(e,t,r){return t&&uk(e.prototype,t),r&&uk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function gae(e,t,r){return t=iv(t),yae(e,ZD()?Reflect.construct(t,r||[],iv(e).constructor):t.apply(e,r))}function yae(e,t){if(t&&(yh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vae(e)}function vae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZD=function(){return!!e})()}function iv(e){return iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},iv(e)}function _ae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cw(e,t)}function Cw(e,t){return Cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Cw(e,t)}function NS(e,t,r){return t=HD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HD(e){var t=xae(e,"string");return yh(t)=="symbol"?t:t+""}function xae(e,t){if(yh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $h=function(e){function t(r){var n;return pae(this,t),n=gae(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return _ae(t,e),mae(t,[{key:"shouldComponentUpdate",value:function(n,s){var c=n.viewBox,d=y0(n,cae),l=this.props,v=l.viewBox,b=y0(l,hae);return!qc(c,v)||!qc(d,b)||!qc(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,c=s.x,d=s.y,l=s.width,v=s.height,b=s.orientation,S=s.tickSize,P=s.mirror,k=s.tickMargin,z,B,j,V,D,R,F=P?-1:1,X=n.tickSize||S,q=gt(n.tickCoord)?n.tickCoord:n.coordinate;switch(b){case"top":z=B=n.coordinate,V=d+ +!P*v,j=V-F*X,R=j-F*k,D=q;break;case"left":j=V=n.coordinate,B=c+ +!P*l,z=B-F*X,D=z-F*k,R=q;break;case"right":j=V=n.coordinate,B=c+ +P*l,z=B+F*X,D=z+F*k,R=q;break;default:z=B=n.coordinate,V=d+ +P*v,j=V+F*X,R=j+F*k,D=q;break}return{line:{x1:z,y1:j,x2:B,y2:V},tick:{x:D,y:R}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,c=n.mirror,d;switch(s){case"left":d=c?"start":"end";break;case"right":d=c?"end":"start";break;default:d="middle";break}return d}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,c=n.mirror,d="end";switch(s){case"left":case"right":d="middle";break;case"top":d=c?"start":"end";break;default:d=c?"end":"start";break}return d}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,c=n.y,d=n.width,l=n.height,v=n.orientation,b=n.mirror,S=n.axisLine,P=zn(zn(zn({},xr(this.props,!1)),xr(S,!1)),{},{fill:"none"});if(v==="top"||v==="bottom"){var k=+(v==="top"&&!b||v==="bottom"&&b);P=zn(zn({},P),{},{x1:s,y1:c+k*l,x2:s+d,y2:c+k*l})}else{var z=+(v==="left"&&!b||v==="right"&&b);P=zn(zn({},P),{},{x1:s+z*d,y1:c,x2:s+z*d,y2:c+l})}return Me.createElement("line",Lc({},P,{className:gr("recharts-cartesian-axis-line",Oa(S,"className"))}))}},{key:"renderTicks",value:function(n,s,c){var d=this,l=this.props,v=l.tickLine,b=l.stroke,S=l.tick,P=l.tickFormatter,k=l.unit,z=RS(zn(zn({},this.props),{},{ticks:n}),s,c),B=this.getTickTextAnchor(),j=this.getTickVerticalAnchor(),V=xr(this.props,!1),D=xr(S,!1),R=zn(zn({},V),{},{fill:"none"},xr(v,!1)),F=z.map(function(X,q){var W=d.getTickLineCoord(X),ee=W.line,le=W.tick,ve=zn(zn(zn(zn({textAnchor:B,verticalAnchor:j},V),{},{stroke:"none",fill:b},D),le),{},{index:q,payload:X,visibleTicksCount:z.length,tickFormatter:P});return Me.createElement(Zn,Lc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(X.value,"-").concat(X.coordinate,"-").concat(X.tickCoord)},fy(d.props,X,q)),v&&Me.createElement("line",Lc({},R,ee,{className:gr("recharts-cartesian-axis-tick-line",Oa(v,"className"))})),S&&t.renderTickItem(S,ve,"".concat(or(P)?P(X.value,q):X.value).concat(k||"")))});return Me.createElement("g",{className:"recharts-cartesian-axis-ticks"},F)}},{key:"render",value:function(){var n=this,s=this.props,c=s.axisLine,d=s.width,l=s.height,v=s.ticksGenerator,b=s.className,S=s.hide;if(S)return null;var P=this.props,k=P.ticks,z=y0(P,fae),B=k;return or(v)&&(B=k&&k.length>0?v(this.props):v(z)),d<=0||l<=0||!B||!B.length?null:Me.createElement(Zn,{className:gr("recharts-cartesian-axis",b),ref:function(V){n.layerReference=V}},c&&this.renderAxisLine(),this.renderTicks(B,this.state.fontSize,this.state.letterSpacing),xi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,c){var d,l=gr(s.className,"recharts-cartesian-axis-tick-value");return Me.isValidElement(n)?d=Me.cloneElement(n,zn(zn({},s),{},{className:l})):or(n)?d=n(zn(zn({},s),{},{className:l})):d=Me.createElement(Ay,Lc({},s,{className:"recharts-cartesian-axis-tick-value"}),c),d}}])}($e.Component);NS($h,"displayName","CartesianAxis");NS($h,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var bae=["x1","y1","x2","y2","key"],wae=["offset"];function wu(e){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wu(e)}function ck(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ck(Object(r),!0).forEach(function(n){Sae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ck(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sae(e,t,r){return t=Tae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tae(e){var t=Pae(e,"string");return wu(t)=="symbol"?t:t+""}function Pae(e,t){if(wu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ou(){return ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ou.apply(this,arguments)}function hk(e,t){if(e==null)return{};var r=Aae(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Aae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Eae=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,c=t.y,d=t.width,l=t.height,v=t.ry;return Me.createElement("rect",{x:s,y:c,ry:v,width:d,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function KD(e,t){var r;if(Me.isValidElement(e))r=Me.cloneElement(e,t);else if(or(e))r=e(t);else{var n=t.x1,s=t.y1,c=t.x2,d=t.y2,l=t.key,v=hk(t,bae),b=xr(v,!1);b.offset;var S=hk(b,wae);r=Me.createElement("line",ou({},S,{x1:n,y1:s,x2:c,y2:d,fill:"none",key:l}))}return r}function Cae(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,c=e.horizontalPoints;if(!s||!c||!c.length)return null;var d=c.map(function(l,v){var b=bi(bi({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(v),index:v});return KD(s,b)});return Me.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function kae(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,c=e.verticalPoints;if(!s||!c||!c.length)return null;var d=c.map(function(l,v){var b=bi(bi({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(v),index:v});return KD(s,b)});return Me.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function Iae(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,c=e.width,d=e.height,l=e.horizontalPoints,v=e.horizontal,b=v===void 0?!0:v;if(!b||!t||!t.length)return null;var S=l.map(function(k){return Math.round(k+s-s)}).sort(function(k,z){return k-z});s!==S[0]&&S.unshift(0);var P=S.map(function(k,z){var B=!S[z+1],j=B?s+d-k:S[z+1]-k;if(j<=0)return null;var V=z%t.length;return Me.createElement("rect",{key:"react-".concat(z),y:k,x:n,height:j,width:c,stroke:"none",fill:t[V],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Me.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},P)}function Mae(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,c=e.x,d=e.y,l=e.width,v=e.height,b=e.verticalPoints;if(!r||!n||!n.length)return null;var S=b.map(function(k){return Math.round(k+c-c)}).sort(function(k,z){return k-z});c!==S[0]&&S.unshift(0);var P=S.map(function(k,z){var B=!S[z+1],j=B?c+l-k:S[z+1]-k;if(j<=0)return null;var V=z%n.length;return Me.createElement("rect",{key:"react-".concat(z),x:k,y:d,width:j,height:v,stroke:"none",fill:n[V],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return Me.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},P)}var Oae=function(t,r){var n=t.xAxis,s=t.width,c=t.height,d=t.offset;return iD(RS(bi(bi(bi({},$h.defaultProps),n),{},{ticks:ss(n,!0),viewBox:{x:0,y:0,width:s,height:c}})),d.left,d.left+d.width,r)},zae=function(t,r){var n=t.yAxis,s=t.width,c=t.height,d=t.offset;return iD(RS(bi(bi(bi({},$h.defaultProps),n),{},{ticks:ss(n,!0),viewBox:{x:0,y:0,width:s,height:c}})),d.top,d.top+d.height,r)},bc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function XD(e){var t,r,n,s,c,d,l=DS(),v=LS(),b=xie(),S=bi(bi({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:bc.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:bc.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:bc.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:bc.horizontalFill,vertical:(c=e.vertical)!==null&&c!==void 0?c:bc.vertical,verticalFill:(d=e.verticalFill)!==null&&d!==void 0?d:bc.verticalFill,x:gt(e.x)?e.x:b.left,y:gt(e.y)?e.y:b.top,width:gt(e.width)?e.width:b.width,height:gt(e.height)?e.height:b.height}),P=S.x,k=S.y,z=S.width,B=S.height,j=S.syncWithTicks,V=S.horizontalValues,D=S.verticalValues,R=yie(),F=vie();if(!gt(z)||z<=0||!gt(B)||B<=0||!gt(P)||P!==+P||!gt(k)||k!==+k)return null;var X=S.verticalCoordinatesGenerator||Oae,q=S.horizontalCoordinatesGenerator||zae,W=S.horizontalPoints,ee=S.verticalPoints;if((!W||!W.length)&&or(q)){var le=V&&V.length,ve=q({yAxis:F?bi(bi({},F),{},{ticks:le?V:F.ticks}):void 0,width:l,height:v,offset:b},le?!0:j);cs(Array.isArray(ve),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(wu(ve),"]")),Array.isArray(ve)&&(W=ve)}if((!ee||!ee.length)&&or(X)){var Pe=D&&D.length,Ce=X({xAxis:R?bi(bi({},R),{},{ticks:Pe?D:R.ticks}):void 0,width:l,height:v,offset:b},Pe?!0:j);cs(Array.isArray(Ce),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(wu(Ce),"]")),Array.isArray(Ce)&&(ee=Ce)}return Me.createElement("g",{className:"recharts-cartesian-grid"},Me.createElement(Eae,{fill:S.fill,fillOpacity:S.fillOpacity,x:S.x,y:S.y,width:S.width,height:S.height,ry:S.ry}),Me.createElement(Cae,ou({},S,{offset:b,horizontalPoints:W,xAxis:R,yAxis:F})),Me.createElement(kae,ou({},S,{offset:b,verticalPoints:ee,xAxis:R,yAxis:F})),Me.createElement(Iae,ou({},S,{horizontalPoints:W})),Me.createElement(Mae,ou({},S,{verticalPoints:ee})))}XD.displayName="CartesianGrid";function vh(e){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vh(e)}function Dae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QD(n.key),n)}}function jae(e,t,r){return t&&Lae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $ae(e,t,r){return t=av(t),Rae(e,YD()?Reflect.construct(t,r||[],av(e).constructor):t.apply(e,r))}function Rae(e,t){if(t&&(vh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nae(e)}function Nae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YD=function(){return!!e})()}function av(e){return av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},av(e)}function Bae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kw(e,t)}function kw(e,t){return kw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},kw(e,t)}function JD(e,t,r){return t=QD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QD(e){var t=Fae(e,"string");return vh(t)=="symbol"?t:t+""}function Fae(e,t){if(vh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Iw(){return Iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Iw.apply(this,arguments)}function Uae(e){var t=e.xAxisId,r=DS(),n=LS(),s=RD(t);return s==null?null:$e.createElement($h,Iw({},s,{className:gr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(d){return ss(d,!0)}}))}var h_=function(e){function t(){return Dae(this,t),$ae(this,t,arguments)}return Bae(t,e),jae(t,[{key:"render",value:function(){return $e.createElement(Uae,this.props)}}])}($e.Component);JD(h_,"displayName","XAxis");JD(h_,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function _h(e){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_h(e)}function Vae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rL(n.key),n)}}function Gae(e,t,r){return t&&qae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wae(e,t,r){return t=ov(t),Zae(e,eL()?Reflect.construct(t,r||[],ov(e).constructor):t.apply(e,r))}function Zae(e,t){if(t&&(_h(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hae(e)}function Hae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eL=function(){return!!e})()}function ov(e){return ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ov(e)}function Kae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mw(e,t)}function Mw(e,t){return Mw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Mw(e,t)}function tL(e,t,r){return t=rL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rL(e){var t=Xae(e,"string");return _h(t)=="symbol"?t:t+""}function Xae(e,t){if(_h(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ow(){return Ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ow.apply(this,arguments)}var Yae=function(t){var r=t.yAxisId,n=DS(),s=LS(),c=ND(r);return c==null?null:$e.createElement($h,Ow({},c,{className:gr("recharts-".concat(c.axisType," ").concat(c.axisType),c.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return ss(l,!0)}}))},Zc=function(e){function t(){return Vae(this,t),Wae(this,t,arguments)}return Kae(t,e),Gae(t,[{key:"render",value:function(){return $e.createElement(Yae,this.props)}}])}($e.Component);tL(Zc,"displayName","YAxis");tL(Zc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function fk(e){return toe(e)||eoe(e)||Qae(e)||Jae()}function Jae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qae(e,t){if(e){if(typeof e=="string")return zw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zw(e,t)}}function eoe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function toe(e){if(Array.isArray(e))return zw(e)}function zw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Dw=function(t,r,n,s,c){var d=oo(t,$S),l=oo(t,l_),v=[].concat(fk(d),fk(l)),b=oo(t,c_),S="".concat(s,"Id"),P=s[0],k=r;if(v.length&&(k=v.reduce(function(j,V){if(V.props[S]===n&&Io(V.props,"extendDomain")&&gt(V.props[P])){var D=V.props[P];return[Math.min(j[0],D),Math.max(j[1],D)]}return j},k)),b.length){var z="".concat(P,"1"),B="".concat(P,"2");k=b.reduce(function(j,V){if(V.props[S]===n&&Io(V.props,"extendDomain")&&gt(V.props[z])&&gt(V.props[B])){var D=V.props[z],R=V.props[B];return[Math.min(j[0],D,R),Math.max(j[1],D,R)]}return j},k)}return c&&c.length&&(k=c.reduce(function(j,V){return gt(V)?[Math.min(j[0],V),Math.max(j[1],V)]:j},k)),k},nL={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(v,b,S){this.fn=v,this.context=b,this.once=S||!1}function c(v,b,S,P,k){if(typeof S!="function")throw new TypeError("The listener must be a function");var z=new s(S,P||v,k),B=r?r+b:b;return v._events[B]?v._events[B].fn?v._events[B]=[v._events[B],z]:v._events[B].push(z):(v._events[B]=z,v._eventsCount++),v}function d(v,b){--v._eventsCount===0?v._events=new n:delete v._events[b]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var b=[],S,P;if(this._eventsCount===0)return b;for(P in S=this._events)t.call(S,P)&&b.push(r?P.slice(1):P);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(S)):b},l.prototype.listeners=function(b){var S=r?r+b:b,P=this._events[S];if(!P)return[];if(P.fn)return[P.fn];for(var k=0,z=P.length,B=new Array(z);k<z;k++)B[k]=P[k].fn;return B},l.prototype.listenerCount=function(b){var S=r?r+b:b,P=this._events[S];return P?P.fn?1:P.length:0},l.prototype.emit=function(b,S,P,k,z,B){var j=r?r+b:b;if(!this._events[j])return!1;var V=this._events[j],D=arguments.length,R,F;if(V.fn){switch(V.once&&this.removeListener(b,V.fn,void 0,!0),D){case 1:return V.fn.call(V.context),!0;case 2:return V.fn.call(V.context,S),!0;case 3:return V.fn.call(V.context,S,P),!0;case 4:return V.fn.call(V.context,S,P,k),!0;case 5:return V.fn.call(V.context,S,P,k,z),!0;case 6:return V.fn.call(V.context,S,P,k,z,B),!0}for(F=1,R=new Array(D-1);F<D;F++)R[F-1]=arguments[F];V.fn.apply(V.context,R)}else{var X=V.length,q;for(F=0;F<X;F++)switch(V[F].once&&this.removeListener(b,V[F].fn,void 0,!0),D){case 1:V[F].fn.call(V[F].context);break;case 2:V[F].fn.call(V[F].context,S);break;case 3:V[F].fn.call(V[F].context,S,P);break;case 4:V[F].fn.call(V[F].context,S,P,k);break;default:if(!R)for(q=1,R=new Array(D-1);q<D;q++)R[q-1]=arguments[q];V[F].fn.apply(V[F].context,R)}}return!0},l.prototype.on=function(b,S,P){return c(this,b,S,P,!1)},l.prototype.once=function(b,S,P){return c(this,b,S,P,!0)},l.prototype.removeListener=function(b,S,P,k){var z=r?r+b:b;if(!this._events[z])return this;if(!S)return d(this,z),this;var B=this._events[z];if(B.fn)B.fn===S&&(!k||B.once)&&(!P||B.context===P)&&d(this,z);else{for(var j=0,V=[],D=B.length;j<D;j++)(B[j].fn!==S||k&&!B[j].once||P&&B[j].context!==P)&&V.push(B[j]);V.length?this._events[z]=V.length===1?V[0]:V:d(this,z)}return this},l.prototype.removeAllListeners=function(b){var S;return b?(S=r?r+b:b,this._events[S]&&d(this,S)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(nL);var roe=nL.exports;const noe=Mr(roe);var v0=new noe,_0="recharts.syncMouseEvents";function kp(e){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(e)}function ioe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aoe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iL(n.key),n)}}function ooe(e,t,r){return t&&aoe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function x0(e,t,r){return t=iL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iL(e){var t=soe(e,"string");return kp(t)=="symbol"?t:t+""}function soe(e,t){if(kp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var loe=function(){function e(){ioe(this,e),x0(this,"activeIndex",0),x0(this,"coordinateList",[]),x0(this,"layout","horizontal")}return ooe(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,c=s===void 0?null:s,d=r.container,l=d===void 0?null:d,v=r.layout,b=v===void 0?null:v,S=r.offset,P=S===void 0?null:S,k=r.mouseHandlerCallback,z=k===void 0?null:k;this.coordinateList=(n=c??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=b??this.layout,this.offset=P??this.offset,this.mouseHandlerCallback=z??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),c=s.x,d=s.y,l=s.height,v=this.coordinateList[this.activeIndex].coordinate,b=((r=window)===null||r===void 0?void 0:r.scrollX)||0,S=((n=window)===null||n===void 0?void 0:n.scrollY)||0,P=c+v+b,k=d+this.offset.top+l/2+S;this.mouseHandlerCallback({pageX:P,pageY:k})}}}])}();function uoe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],s=e==null?void 0:e[1];if(n&&s&&gt(n)&&gt(s))return!0}return!1}function coe(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function aL(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,c=e.endAngle,d=ai(t,r,n,s),l=ai(t,r,n,c);return{points:[d,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:c}}function hoe(e,t,r){var n,s,c,d;if(e==="horizontal")n=t.x,c=n,s=r.top,d=r.top+r.height;else if(e==="vertical")s=t.y,d=s,n=r.left,c=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,v=t.cy,b=t.innerRadius,S=t.outerRadius,P=t.angle,k=ai(l,v,b,P),z=ai(l,v,S,P);n=k.x,s=k.y,c=z.x,d=z.y}else return aL(t);return[{x:n,y:s},{x:c,y:d}]}function Ip(e){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}function dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ag(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dk(Object(r),!0).forEach(function(n){foe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function foe(e,t,r){return t=doe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function doe(e){var t=poe(e,"string");return Ip(t)=="symbol"?t:t+""}function poe(e,t){if(Ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function moe(e){var t,r,n=e.element,s=e.tooltipEventType,c=e.isActive,d=e.activeCoordinate,l=e.activePayload,v=e.offset,b=e.activeTooltipIndex,S=e.tooltipAxisBandSize,P=e.layout,k=e.chartName,z=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!z||!c||!d||k!=="ScatterChart"&&s!=="axis")return null;var B,j=cC;if(k==="ScatterChart")B=d,j=Cte;else if(k==="BarChart")B=coe(P,d,v,S),j=IS;else if(P==="radial"){var V=aL(d),D=V.cx,R=V.cy,F=V.radius,X=V.startAngle,q=V.endAngle;B={cx:D,cy:R,startAngle:X,endAngle:q,innerRadius:F,outerRadius:F},j=uD}else B={points:hoe(P,d,v)},j=cC;var W=Ag(Ag(Ag(Ag({stroke:"#ccc",pointerEvents:"none"},v),B),xr(z,!1)),{},{payload:l,payloadIndex:b,className:gr("recharts-tooltip-cursor",z.className)});return $e.isValidElement(z)?$e.cloneElement(z,W):$e.createElement(j,W)}var goe=["item"],yoe=["children","className","width","height","style","compact","title","desc"];function xh(e){"@babel/helpers - typeof";return xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xh(e)}function jc(){return jc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jc.apply(this,arguments)}function pk(e,t){return xoe(e)||_oe(e,t)||sL(e,t)||voe()}function voe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _oe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,c,d,l=[],v=!0,b=!1;try{if(c=(r=r.call(e)).next,t!==0)for(;!(v=(n=c.call(r)).done)&&(l.push(n.value),l.length!==t);v=!0);}catch(S){b=!0,s=S}finally{try{if(!v&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(b)throw s}}return l}}function xoe(e){if(Array.isArray(e))return e}function mk(e,t){if(e==null)return{};var r=boe(e,t),n,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function boe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function woe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Soe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lL(n.key),n)}}function Toe(e,t,r){return t&&Soe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Poe(e,t,r){return t=sv(t),Aoe(e,oL()?Reflect.construct(t,r||[],sv(e).constructor):t.apply(e,r))}function Aoe(e,t){if(t&&(xh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eoe(e)}function Eoe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oL=function(){return!!e})()}function sv(e){return sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sv(e)}function Coe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lw(e,t)}function Lw(e,t){return Lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Lw(e,t)}function bh(e){return Moe(e)||Ioe(e)||sL(e)||koe()}function koe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sL(e,t){if(e){if(typeof e=="string")return jw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jw(e,t)}}function Ioe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Moe(e){if(Array.isArray(e))return jw(e)}function jw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gk(Object(r),!0).forEach(function(n){Vt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vt(e,t,r){return t=lL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lL(e){var t=Ooe(e,"string");return xh(t)=="symbol"?t:t+""}function Ooe(e,t){if(xh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zoe={xAxis:["bottom","top"],yAxis:["left","right"]},Doe={width:"100%",height:"100%"},uL={x:0,y:0};function Eg(e){return e}var Loe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},joe=function(t,r,n,s){var c=r.find(function(S){return S&&S.index===n});if(c){if(t==="horizontal")return{x:c.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:c.coordinate};if(t==="centric"){var d=c.coordinate,l=s.radius;return He(He(He({},s),ai(s.cx,s.cy,l,d)),{},{angle:d,radius:l})}var v=c.coordinate,b=s.angle;return He(He(He({},s),ai(s.cx,s.cy,v,b)),{},{angle:b,radius:v})}return uL},f_=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,c=r.dataEndIndex,d=(n??[]).reduce(function(l,v){var b=v.props.data;return b&&b.length?[].concat(bh(l),bh(b)):l},[]);return d.length>0?d:t&&t.length&&gt(s)&&gt(c)?t.slice(s,c+1):[]};function cL(e){return e==="number"?[0,"auto"]:void 0}var $w=function(t,r,n,s){var c=t.graphicalItems,d=t.tooltipAxis,l=f_(r,t);return n<0||!c||!c.length||n>=l.length?null:c.reduce(function(v,b){var S,P=(S=b.props.data)!==null&&S!==void 0?S:r;P&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(P=P.slice(t.dataStartIndex,t.dataEndIndex+1));var k;if(d.dataKey&&!d.allowDuplicatedCategory){var z=P===void 0?l:P;k=gb(z,d.dataKey,s)}else k=P&&P[n]||l[n];return k?[].concat(bh(v),[oD(b,k)]):v},[])},yk=function(t,r,n,s){var c=s||{x:t.chartX,y:t.chartY},d=Loe(c,n),l=t.orderedTooltipTicks,v=t.tooltipAxis,b=t.tooltipTicks,S=uJ(d,l,b,v);if(S>=0&&b){var P=b[S]&&b[S].value,k=$w(t,r,S,P),z=joe(n,l,S,c);return{activeTooltipIndex:S,activeLabel:P,activePayload:k,activeCoordinate:z}}return null},$oe=function(t,r){var n=r.axes,s=r.graphicalItems,c=r.axisType,d=r.axisIdKey,l=r.stackGroups,v=r.dataStartIndex,b=r.dataEndIndex,S=t.layout,P=t.children,k=t.stackOffset,z=nD(S,c);return n.reduce(function(B,j){var V,D=j.type.defaultProps!==void 0?He(He({},j.type.defaultProps),j.props):j.props,R=D.type,F=D.dataKey,X=D.allowDataOverflow,q=D.allowDuplicatedCategory,W=D.scale,ee=D.ticks,le=D.includeHidden,ve=D[d];if(B[ve])return B;var Pe=f_(t.data,{graphicalItems:s.filter(function(je){var Qe,pt=d in je.props?je.props[d]:(Qe=je.type.defaultProps)===null||Qe===void 0?void 0:Qe[d];return pt===ve}),dataStartIndex:v,dataEndIndex:b}),Ce=Pe.length,Te,Fe,Re;uoe(D.domain,X,R)&&(Te=nw(D.domain,null,X),z&&(R==="number"||W!=="auto")&&(Re=Md(Pe,F,"category")));var Be=cL(R);if(!Te||Te.length===0){var qe,Ke=(qe=D.domain)!==null&&qe!==void 0?qe:Be;if(F){if(Te=Md(Pe,F,R),R==="category"&&z){var ce=X4(Te);q&&ce?(Fe=Te,Te=Ky(0,Ce)):q||(Te=YE(Ke,Te,j).reduce(function(je,Qe){return je.indexOf(Qe)>=0?je:[].concat(bh(je),[Qe])},[]))}else if(R==="category")q?Te=Te.filter(function(je){return je!==""&&!br(je)}):Te=YE(Ke,Te,j).reduce(function(je,Qe){return je.indexOf(Qe)>=0||Qe===""||br(Qe)?je:[].concat(bh(je),[Qe])},[]);else if(R==="number"){var _e=pJ(Pe,s.filter(function(je){var Qe,pt,Dt=d in je.props?je.props[d]:(Qe=je.type.defaultProps)===null||Qe===void 0?void 0:Qe[d],Rt="hide"in je.props?je.props.hide:(pt=je.type.defaultProps)===null||pt===void 0?void 0:pt.hide;return Dt===ve&&(le||!Rt)}),F,c,S);_e&&(Te=_e)}z&&(R==="number"||W!=="auto")&&(Re=Md(Pe,F,"category"))}else z?Te=Ky(0,Ce):l&&l[ve]&&l[ve].hasStack&&R==="number"?Te=k==="expand"?[0,1]:aD(l[ve].stackGroups,v,b):Te=rD(Pe,s.filter(function(je){var Qe=d in je.props?je.props[d]:je.type.defaultProps[d],pt="hide"in je.props?je.props.hide:je.type.defaultProps.hide;return Qe===ve&&(le||!pt)}),R,S,!0);if(R==="number")Te=Dw(P,Te,ve,c,ee),Ke&&(Te=nw(Ke,Te,X));else if(R==="category"&&Ke){var ke=Ke,Ue=Te.every(function(je){return ke.indexOf(je)>=0});Ue&&(Te=ke)}}return He(He({},B),{},Vt({},ve,He(He({},D),{},{axisType:c,domain:Te,categoricalDomain:Re,duplicateDomain:Fe,originalDomain:(V=D.domain)!==null&&V!==void 0?V:Be,isCategorical:z,layout:S})))},{})},Roe=function(t,r){var n=r.graphicalItems,s=r.Axis,c=r.axisType,d=r.axisIdKey,l=r.stackGroups,v=r.dataStartIndex,b=r.dataEndIndex,S=t.layout,P=t.children,k=f_(t.data,{graphicalItems:n,dataStartIndex:v,dataEndIndex:b}),z=k.length,B=nD(S,c),j=-1;return n.reduce(function(V,D){var R=D.type.defaultProps!==void 0?He(He({},D.type.defaultProps),D.props):D.props,F=R[d],X=cL("number");if(!V[F]){j++;var q;return B?q=Ky(0,z):l&&l[F]&&l[F].hasStack?(q=aD(l[F].stackGroups,v,b),q=Dw(P,q,F,c)):(q=nw(X,rD(k,n.filter(function(W){var ee,le,ve=d in W.props?W.props[d]:(ee=W.type.defaultProps)===null||ee===void 0?void 0:ee[d],Pe="hide"in W.props?W.props.hide:(le=W.type.defaultProps)===null||le===void 0?void 0:le.hide;return ve===F&&!Pe}),"number",S),s.defaultProps.allowDataOverflow),q=Dw(P,q,F,c)),He(He({},V),{},Vt({},F,He(He({axisType:c},s.defaultProps),{},{hide:!0,orientation:Oa(zoe,"".concat(c,".").concat(j%2),null),domain:q,originalDomain:X,isCategorical:B,layout:S})))}return V},{})},Noe=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,c=r.AxisComp,d=r.graphicalItems,l=r.stackGroups,v=r.dataStartIndex,b=r.dataEndIndex,S=t.children,P="".concat(s,"Id"),k=oo(S,c),z={};return k&&k.length?z=$oe(t,{axes:k,graphicalItems:d,axisType:s,axisIdKey:P,stackGroups:l,dataStartIndex:v,dataEndIndex:b}):d&&d.length&&(z=Roe(t,{Axis:c,graphicalItems:d,axisType:s,axisIdKey:P,stackGroups:l,dataStartIndex:v,dataEndIndex:b})),z},Boe=function(t){var r=nl(t),n=ss(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:rS(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:By(r,n)}},vk=function(t){var r=t.children,n=t.defaultShowTooltip,s=sa(r,fh),c=0,d=0;return t.data&&t.data.length!==0&&(d=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(c=s.props.startIndex),s.props.endIndex>=0&&(d=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:c,dataEndIndex:d,activeTooltipIndex:-1,isTooltipActive:!!n}},Foe=function(t){return!t||!t.length?!1:t.some(function(r){var n=us(r&&r.type);return n&&n.indexOf("Bar")>=0})},_k=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Uoe=function(t,r){var n=t.props,s=t.graphicalItems,c=t.xAxisMap,d=c===void 0?{}:c,l=t.yAxisMap,v=l===void 0?{}:l,b=n.width,S=n.height,P=n.children,k=n.margin||{},z=sa(P,fh),B=sa(P,uu),j=Object.keys(v).reduce(function(q,W){var ee=v[W],le=ee.orientation;return!ee.mirror&&!ee.hide?He(He({},q),{},Vt({},le,q[le]+ee.width)):q},{left:k.left||0,right:k.right||0}),V=Object.keys(d).reduce(function(q,W){var ee=d[W],le=ee.orientation;return!ee.mirror&&!ee.hide?He(He({},q),{},Vt({},le,Oa(q,"".concat(le))+ee.height)):q},{top:k.top||0,bottom:k.bottom||0}),D=He(He({},V),j),R=D.bottom;z&&(D.bottom+=z.props.height||fh.defaultProps.height),B&&r&&(D=fJ(D,s,n,r));var F=b-D.left-D.right,X=S-D.top-D.bottom;return He(He({brushBottom:R},D),{},{width:Math.max(F,0),height:Math.max(X,0)})},Voe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},qoe=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,c=s===void 0?"axis":s,d=t.validateTooltipEventTypes,l=d===void 0?["axis"]:d,v=t.axisComponents,b=t.legendContent,S=t.formatAxisMap,P=t.defaultProps,k=function(D,R){var F=R.graphicalItems,X=R.stackGroups,q=R.offset,W=R.updateId,ee=R.dataStartIndex,le=R.dataEndIndex,ve=D.barSize,Pe=D.layout,Ce=D.barGap,Te=D.barCategoryGap,Fe=D.maxBarSize,Re=_k(Pe),Be=Re.numericAxisName,qe=Re.cateAxisName,Ke=Foe(F),ce=[];return F.forEach(function(_e,ke){var Ue=f_(D.data,{graphicalItems:[_e],dataStartIndex:ee,dataEndIndex:le}),je=_e.type.defaultProps!==void 0?He(He({},_e.type.defaultProps),_e.props):_e.props,Qe=je.dataKey,pt=je.maxBarSize,Dt=je["".concat(Be,"Id")],Rt=je["".concat(qe,"Id")],Bt={},Jt=v.reduce(function(Xr,un){var hr=R["".concat(un.axisType,"Map")],nr=je["".concat(un.axisType,"Id")];hr&&hr[nr]||un.axisType==="zAxis"||bu();var Si=hr[nr];return He(He({},Xr),{},Vt(Vt({},un.axisType,Si),"".concat(un.axisType,"Ticks"),ss(Si)))},Bt),Ye=Jt[qe],nt=Jt["".concat(qe,"Ticks")],At=X&&X[Dt]&&X[Dt].hasStack&&AJ(_e,X[Dt].stackGroups),ze=us(_e.type).indexOf("Bar")>=0,kt=By(Ye,nt),$t=[],mt=Ke&&cJ({barSize:ve,stackGroups:X,totalSize:Voe(Jt,qe)});if(ze){var yt,Ot,Ht=br(pt)?Fe:pt,mn=(yt=(Ot=By(Ye,nt,!0))!==null&&Ot!==void 0?Ot:Ht)!==null&&yt!==void 0?yt:0;$t=hJ({barGap:Ce,barCategoryGap:Te,bandSize:mn!==kt?mn:kt,sizeList:mt[Rt],maxBarSize:Ht}),mn!==kt&&($t=$t.map(function(Xr){return He(He({},Xr),{},{position:He(He({},Xr.position),{},{offset:Xr.position.offset-mn/2})})}))}var Ne=_e&&_e.type&&_e.type.getComposedData;Ne&&ce.push({props:He(He({},Ne(He(He({},Jt),{},{displayedData:Ue,props:D,dataKey:Qe,item:_e,bandSize:kt,barPosition:$t,offset:q,stackedData:At,layout:Pe,dataStartIndex:ee,dataEndIndex:le}))),{},Vt(Vt(Vt({key:_e.key||"item-".concat(ke)},Be,Jt[Be]),qe,Jt[qe]),"animationId",W)),childIndex:lF(_e,D.children),item:_e})}),ce},z=function(D,R){var F=D.props,X=D.dataStartIndex,q=D.dataEndIndex,W=D.updateId;if(!GP({props:F}))return null;var ee=F.children,le=F.layout,ve=F.stackOffset,Pe=F.data,Ce=F.reverseStackOrder,Te=_k(le),Fe=Te.numericAxisName,Re=Te.cateAxisName,Be=oo(ee,n),qe=SJ(Pe,Be,"".concat(Fe,"Id"),"".concat(Re,"Id"),ve,Ce),Ke=v.reduce(function(je,Qe){var pt="".concat(Qe.axisType,"Map");return He(He({},je),{},Vt({},pt,Noe(F,He(He({},Qe),{},{graphicalItems:Be,stackGroups:Qe.axisType===Fe&&qe,dataStartIndex:X,dataEndIndex:q}))))},{}),ce=Uoe(He(He({},Ke),{},{props:F,graphicalItems:Be}),R==null?void 0:R.legendBBox);Object.keys(Ke).forEach(function(je){Ke[je]=S(F,Ke[je],ce,je.replace("Map",""),r)});var _e=Ke["".concat(Re,"Map")],ke=Boe(_e),Ue=k(F,He(He({},Ke),{},{dataStartIndex:X,dataEndIndex:q,updateId:W,graphicalItems:Be,stackGroups:qe,offset:ce}));return He(He({formattedGraphicalItems:Ue,graphicalItems:Be,offset:ce,stackGroups:qe},ke),Ke)},B=function(V){function D(R){var F,X,q;return woe(this,D),q=Poe(this,D,[R]),Vt(q,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Vt(q,"accessibilityManager",new loe),Vt(q,"handleLegendBBoxUpdate",function(W){if(W){var ee=q.state,le=ee.dataStartIndex,ve=ee.dataEndIndex,Pe=ee.updateId;q.setState(He({legendBBox:W},z({props:q.props,dataStartIndex:le,dataEndIndex:ve,updateId:Pe},He(He({},q.state),{},{legendBBox:W}))))}}),Vt(q,"handleReceiveSyncEvent",function(W,ee,le){if(q.props.syncId===W){if(le===q.eventEmitterSymbol&&typeof q.props.syncMethod!="function")return;q.applySyncEvent(ee)}}),Vt(q,"handleBrushChange",function(W){var ee=W.startIndex,le=W.endIndex;if(ee!==q.state.dataStartIndex||le!==q.state.dataEndIndex){var ve=q.state.updateId;q.setState(function(){return He({dataStartIndex:ee,dataEndIndex:le},z({props:q.props,dataStartIndex:ee,dataEndIndex:le,updateId:ve},q.state))}),q.triggerSyncEvent({dataStartIndex:ee,dataEndIndex:le})}}),Vt(q,"handleMouseEnter",function(W){var ee=q.getMouseInfo(W);if(ee){var le=He(He({},ee),{},{isTooltipActive:!0});q.setState(le),q.triggerSyncEvent(le);var ve=q.props.onMouseEnter;or(ve)&&ve(le,W)}}),Vt(q,"triggeredAfterMouseMove",function(W){var ee=q.getMouseInfo(W),le=ee?He(He({},ee),{},{isTooltipActive:!0}):{isTooltipActive:!1};q.setState(le),q.triggerSyncEvent(le);var ve=q.props.onMouseMove;or(ve)&&ve(le,W)}),Vt(q,"handleItemMouseEnter",function(W){q.setState(function(){return{isTooltipActive:!0,activeItem:W,activePayload:W.tooltipPayload,activeCoordinate:W.tooltipPosition||{x:W.cx,y:W.cy}}})}),Vt(q,"handleItemMouseLeave",function(){q.setState(function(){return{isTooltipActive:!1}})}),Vt(q,"handleMouseMove",function(W){W.persist(),q.throttleTriggeredAfterMouseMove(W)}),Vt(q,"handleMouseLeave",function(W){q.throttleTriggeredAfterMouseMove.cancel();var ee={isTooltipActive:!1};q.setState(ee),q.triggerSyncEvent(ee);var le=q.props.onMouseLeave;or(le)&&le(ee,W)}),Vt(q,"handleOuterEvent",function(W){var ee=sF(W),le=Oa(q.props,"".concat(ee));if(ee&&or(le)){var ve,Pe;/.*touch.*/i.test(ee)?Pe=q.getMouseInfo(W.changedTouches[0]):Pe=q.getMouseInfo(W),le((ve=Pe)!==null&&ve!==void 0?ve:{},W)}}),Vt(q,"handleClick",function(W){var ee=q.getMouseInfo(W);if(ee){var le=He(He({},ee),{},{isTooltipActive:!0});q.setState(le),q.triggerSyncEvent(le);var ve=q.props.onClick;or(ve)&&ve(le,W)}}),Vt(q,"handleMouseDown",function(W){var ee=q.props.onMouseDown;if(or(ee)){var le=q.getMouseInfo(W);ee(le,W)}}),Vt(q,"handleMouseUp",function(W){var ee=q.props.onMouseUp;if(or(ee)){var le=q.getMouseInfo(W);ee(le,W)}}),Vt(q,"handleTouchMove",function(W){W.changedTouches!=null&&W.changedTouches.length>0&&q.throttleTriggeredAfterMouseMove(W.changedTouches[0])}),Vt(q,"handleTouchStart",function(W){W.changedTouches!=null&&W.changedTouches.length>0&&q.handleMouseDown(W.changedTouches[0])}),Vt(q,"handleTouchEnd",function(W){W.changedTouches!=null&&W.changedTouches.length>0&&q.handleMouseUp(W.changedTouches[0])}),Vt(q,"handleDoubleClick",function(W){var ee=q.props.onDoubleClick;if(or(ee)){var le=q.getMouseInfo(W);ee(le,W)}}),Vt(q,"handleContextMenu",function(W){var ee=q.props.onContextMenu;if(or(ee)){var le=q.getMouseInfo(W);ee(le,W)}}),Vt(q,"triggerSyncEvent",function(W){q.props.syncId!==void 0&&v0.emit(_0,q.props.syncId,W,q.eventEmitterSymbol)}),Vt(q,"applySyncEvent",function(W){var ee=q.props,le=ee.layout,ve=ee.syncMethod,Pe=q.state.updateId,Ce=W.dataStartIndex,Te=W.dataEndIndex;if(W.dataStartIndex!==void 0||W.dataEndIndex!==void 0)q.setState(He({dataStartIndex:Ce,dataEndIndex:Te},z({props:q.props,dataStartIndex:Ce,dataEndIndex:Te,updateId:Pe},q.state)));else if(W.activeTooltipIndex!==void 0){var Fe=W.chartX,Re=W.chartY,Be=W.activeTooltipIndex,qe=q.state,Ke=qe.offset,ce=qe.tooltipTicks;if(!Ke)return;if(typeof ve=="function")Be=ve(ce,W);else if(ve==="value"){Be=-1;for(var _e=0;_e<ce.length;_e++)if(ce[_e].value===W.activeLabel){Be=_e;break}}var ke=He(He({},Ke),{},{x:Ke.left,y:Ke.top}),Ue=Math.min(Fe,ke.x+ke.width),je=Math.min(Re,ke.y+ke.height),Qe=ce[Be]&&ce[Be].value,pt=$w(q.state,q.props.data,Be),Dt=ce[Be]?{x:le==="horizontal"?ce[Be].coordinate:Ue,y:le==="horizontal"?je:ce[Be].coordinate}:uL;q.setState(He(He({},W),{},{activeLabel:Qe,activeCoordinate:Dt,activePayload:pt,activeTooltipIndex:Be}))}else q.setState(W)}),Vt(q,"renderCursor",function(W){var ee,le=q.state,ve=le.isTooltipActive,Pe=le.activeCoordinate,Ce=le.activePayload,Te=le.offset,Fe=le.activeTooltipIndex,Re=le.tooltipAxisBandSize,Be=q.getTooltipEventType(),qe=(ee=W.props.active)!==null&&ee!==void 0?ee:ve,Ke=q.props.layout,ce=W.key||"_recharts-cursor";return Me.createElement(moe,{key:ce,activeCoordinate:Pe,activePayload:Ce,activeTooltipIndex:Fe,chartName:r,element:W,isActive:qe,layout:Ke,offset:Te,tooltipAxisBandSize:Re,tooltipEventType:Be})}),Vt(q,"renderPolarAxis",function(W,ee,le){var ve=Oa(W,"type.axisType"),Pe=Oa(q.state,"".concat(ve,"Map")),Ce=W.type.defaultProps,Te=Ce!==void 0?He(He({},Ce),W.props):W.props,Fe=Pe&&Pe[Te["".concat(ve,"Id")]];return $e.cloneElement(W,He(He({},Fe),{},{className:gr(ve,Fe.className),key:W.key||"".concat(ee,"-").concat(le),ticks:ss(Fe,!0)}))}),Vt(q,"renderPolarGrid",function(W){var ee=W.props,le=ee.radialLines,ve=ee.polarAngles,Pe=ee.polarRadius,Ce=q.state,Te=Ce.radiusAxisMap,Fe=Ce.angleAxisMap,Re=nl(Te),Be=nl(Fe),qe=Be.cx,Ke=Be.cy,ce=Be.innerRadius,_e=Be.outerRadius;return $e.cloneElement(W,{polarAngles:Array.isArray(ve)?ve:ss(Be,!0).map(function(ke){return ke.coordinate}),polarRadius:Array.isArray(Pe)?Pe:ss(Re,!0).map(function(ke){return ke.coordinate}),cx:qe,cy:Ke,innerRadius:ce,outerRadius:_e,key:W.key||"polar-grid",radialLines:le})}),Vt(q,"renderLegend",function(){var W=q.state.formattedGraphicalItems,ee=q.props,le=ee.children,ve=ee.width,Pe=ee.height,Ce=q.props.margin||{},Te=ve-(Ce.left||0)-(Ce.right||0),Fe=eD({children:le,formattedGraphicalItems:W,legendWidth:Te,legendContent:b});if(!Fe)return null;var Re=Fe.item,Be=mk(Fe,goe);return $e.cloneElement(Re,He(He({},Be),{},{chartWidth:ve,chartHeight:Pe,margin:Ce,onBBoxUpdate:q.handleLegendBBoxUpdate}))}),Vt(q,"renderTooltip",function(){var W,ee=q.props,le=ee.children,ve=ee.accessibilityLayer,Pe=sa(le,So);if(!Pe)return null;var Ce=q.state,Te=Ce.isTooltipActive,Fe=Ce.activeCoordinate,Re=Ce.activePayload,Be=Ce.activeLabel,qe=Ce.offset,Ke=(W=Pe.props.active)!==null&&W!==void 0?W:Te;return $e.cloneElement(Pe,{viewBox:He(He({},qe),{},{x:qe.left,y:qe.top}),active:Ke,label:Be,payload:Ke?Re:[],coordinate:Fe,accessibilityLayer:ve})}),Vt(q,"renderBrush",function(W){var ee=q.props,le=ee.margin,ve=ee.data,Pe=q.state,Ce=Pe.offset,Te=Pe.dataStartIndex,Fe=Pe.dataEndIndex,Re=Pe.updateId;return $e.cloneElement(W,{key:W.key||"_recharts-brush",onChange:wg(q.handleBrushChange,W.props.onChange),data:ve,x:gt(W.props.x)?W.props.x:Ce.left,y:gt(W.props.y)?W.props.y:Ce.top+Ce.height+Ce.brushBottom-(le.bottom||0),width:gt(W.props.width)?W.props.width:Ce.width,startIndex:Te,endIndex:Fe,updateId:"brush-".concat(Re)})}),Vt(q,"renderReferenceElement",function(W,ee,le){if(!W)return null;var ve=q,Pe=ve.clipPathId,Ce=q.state,Te=Ce.xAxisMap,Fe=Ce.yAxisMap,Re=Ce.offset,Be=W.type.defaultProps||{},qe=W.props,Ke=qe.xAxisId,ce=Ke===void 0?Be.xAxisId:Ke,_e=qe.yAxisId,ke=_e===void 0?Be.yAxisId:_e;return $e.cloneElement(W,{key:W.key||"".concat(ee,"-").concat(le),xAxis:Te[ce],yAxis:Fe[ke],viewBox:{x:Re.left,y:Re.top,width:Re.width,height:Re.height},clipPathId:Pe})}),Vt(q,"renderActivePoints",function(W){var ee=W.item,le=W.activePoint,ve=W.basePoint,Pe=W.childIndex,Ce=W.isRange,Te=[],Fe=ee.props.key,Re=ee.item.type.defaultProps!==void 0?He(He({},ee.item.type.defaultProps),ee.item.props):ee.item.props,Be=Re.activeDot,qe=Re.dataKey,Ke=He(He({index:Pe,dataKey:qe,cx:le.x,cy:le.y,r:4,fill:kS(ee.item),strokeWidth:2,stroke:"#fff",payload:le.payload,value:le.value},xr(Be,!1)),hy(Be));return Te.push(D.renderActiveDot(Be,Ke,"".concat(Fe,"-activePoint-").concat(Pe))),ve?Te.push(D.renderActiveDot(Be,He(He({},Ke),{},{cx:ve.x,cy:ve.y}),"".concat(Fe,"-basePoint-").concat(Pe))):Ce&&Te.push(null),Te}),Vt(q,"renderGraphicChild",function(W,ee,le){var ve=q.filterFormatItem(W,ee,le);if(!ve)return null;var Pe=q.getTooltipEventType(),Ce=q.state,Te=Ce.isTooltipActive,Fe=Ce.tooltipAxis,Re=Ce.activeTooltipIndex,Be=Ce.activeLabel,qe=q.props.children,Ke=sa(qe,So),ce=ve.props,_e=ce.points,ke=ce.isRange,Ue=ce.baseLine,je=ve.item.type.defaultProps!==void 0?He(He({},ve.item.type.defaultProps),ve.item.props):ve.item.props,Qe=je.activeDot,pt=je.hide,Dt=je.activeBar,Rt=je.activeShape,Bt=!!(!pt&&Te&&Ke&&(Qe||Dt||Rt)),Jt={};Pe!=="axis"&&Ke&&Ke.props.trigger==="click"?Jt={onClick:wg(q.handleItemMouseEnter,W.props.onClick)}:Pe!=="axis"&&(Jt={onMouseLeave:wg(q.handleItemMouseLeave,W.props.onMouseLeave),onMouseEnter:wg(q.handleItemMouseEnter,W.props.onMouseEnter)});var Ye=$e.cloneElement(W,He(He({},ve.props),Jt));function nt(un){return typeof Fe.dataKey=="function"?Fe.dataKey(un.payload):null}if(Bt)if(Re>=0){var At,ze;if(Fe.dataKey&&!Fe.allowDuplicatedCategory){var kt=typeof Fe.dataKey=="function"?nt:"payload.".concat(Fe.dataKey.toString());At=gb(_e,kt,Be),ze=ke&&Ue&&gb(Ue,kt,Be)}else At=_e==null?void 0:_e[Re],ze=ke&&Ue&&Ue[Re];if(Rt||Dt){var $t=W.props.activeIndex!==void 0?W.props.activeIndex:Re;return[$e.cloneElement(W,He(He(He({},ve.props),Jt),{},{activeIndex:$t})),null,null]}if(!br(At))return[Ye].concat(bh(q.renderActivePoints({item:ve,activePoint:At,basePoint:ze,childIndex:Re,isRange:ke})))}else{var mt,yt=(mt=q.getItemByXY(q.state.activeCoordinate))!==null&&mt!==void 0?mt:{graphicalItem:Ye},Ot=yt.graphicalItem,Ht=Ot.item,mn=Ht===void 0?W:Ht,Ne=Ot.childIndex,Xr=He(He(He({},ve.props),Jt),{},{activeIndex:Ne});return[$e.cloneElement(mn,Xr),null,null]}return ke?[Ye,null,null]:[Ye,null]}),Vt(q,"renderCustomized",function(W,ee,le){return $e.cloneElement(W,He(He({key:"recharts-customized-".concat(le)},q.props),q.state))}),Vt(q,"renderMap",{CartesianGrid:{handler:Eg,once:!0},ReferenceArea:{handler:q.renderReferenceElement},ReferenceLine:{handler:Eg},ReferenceDot:{handler:q.renderReferenceElement},XAxis:{handler:Eg},YAxis:{handler:Eg},Brush:{handler:q.renderBrush,once:!0},Bar:{handler:q.renderGraphicChild},Line:{handler:q.renderGraphicChild},Area:{handler:q.renderGraphicChild},Radar:{handler:q.renderGraphicChild},RadialBar:{handler:q.renderGraphicChild},Scatter:{handler:q.renderGraphicChild},Pie:{handler:q.renderGraphicChild},Funnel:{handler:q.renderGraphicChild},Tooltip:{handler:q.renderCursor,once:!0},PolarGrid:{handler:q.renderPolarGrid,once:!0},PolarAngleAxis:{handler:q.renderPolarAxis},PolarRadiusAxis:{handler:q.renderPolarAxis},Customized:{handler:q.renderCustomized}}),q.clipPathId="".concat((F=R.id)!==null&&F!==void 0?F:Nv("recharts"),"-clip"),q.throttleTriggeredAfterMouseMove=QO(q.triggeredAfterMouseMove,(X=R.throttleDelay)!==null&&X!==void 0?X:1e3/60),q.state={},q}return Coe(D,V),Toe(D,[{key:"componentDidMount",value:function(){var F,X;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(F=this.props.margin.left)!==null&&F!==void 0?F:0,top:(X=this.props.margin.top)!==null&&X!==void 0?X:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var F=this.props,X=F.children,q=F.data,W=F.height,ee=F.layout,le=sa(X,So);if(le){var ve=le.props.defaultIndex;if(!(typeof ve!="number"||ve<0||ve>this.state.tooltipTicks.length-1)){var Pe=this.state.tooltipTicks[ve]&&this.state.tooltipTicks[ve].value,Ce=$w(this.state,q,ve,Pe),Te=this.state.tooltipTicks[ve].coordinate,Fe=(this.state.offset.top+W)/2,Re=ee==="horizontal",Be=Re?{x:Te,y:Fe}:{y:Te,x:Fe},qe=this.state.formattedGraphicalItems.find(function(ce){var _e=ce.item;return _e.type.name==="Scatter"});qe&&(Be=He(He({},Be),qe.props.points[ve].tooltipPosition),Ce=qe.props.points[ve].tooltipPayload);var Ke={activeTooltipIndex:ve,isTooltipActive:!0,activeLabel:Pe,activePayload:Ce,activeCoordinate:Be};this.setState(Ke),this.renderCursor(le),this.accessibilityManager.setIndex(ve)}}}},{key:"getSnapshotBeforeUpdate",value:function(F,X){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==X.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==F.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==F.margin){var q,W;this.accessibilityManager.setDetails({offset:{left:(q=this.props.margin.left)!==null&&q!==void 0?q:0,top:(W=this.props.margin.top)!==null&&W!==void 0?W:0}})}return null}},{key:"componentDidUpdate",value:function(F){vb([sa(F.children,So)],[sa(this.props.children,So)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var F=sa(this.props.children,So);if(F&&typeof F.props.shared=="boolean"){var X=F.props.shared?"axis":"item";return l.indexOf(X)>=0?X:c}return c}},{key:"getMouseInfo",value:function(F){if(!this.container)return null;var X=this.container,q=X.getBoundingClientRect(),W=LZ(q),ee={chartX:Math.round(F.pageX-W.left),chartY:Math.round(F.pageY-W.top)},le=q.width/X.offsetWidth||1,ve=this.inRange(ee.chartX,ee.chartY,le);if(!ve)return null;var Pe=this.state,Ce=Pe.xAxisMap,Te=Pe.yAxisMap,Fe=this.getTooltipEventType(),Re=yk(this.state,this.props.data,this.props.layout,ve);if(Fe!=="axis"&&Ce&&Te){var Be=nl(Ce).scale,qe=nl(Te).scale,Ke=Be&&Be.invert?Be.invert(ee.chartX):null,ce=qe&&qe.invert?qe.invert(ee.chartY):null;return He(He({},ee),{},{xValue:Ke,yValue:ce},Re)}return Re?He(He({},ee),Re):null}},{key:"inRange",value:function(F,X){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,W=this.props.layout,ee=F/q,le=X/q;if(W==="horizontal"||W==="vertical"){var ve=this.state.offset,Pe=ee>=ve.left&&ee<=ve.left+ve.width&&le>=ve.top&&le<=ve.top+ve.height;return Pe?{x:ee,y:le}:null}var Ce=this.state,Te=Ce.angleAxisMap,Fe=Ce.radiusAxisMap;if(Te&&Fe){var Re=nl(Te);return eC({x:ee,y:le},Re)}return null}},{key:"parseEventsOfWrapper",value:function(){var F=this.props.children,X=this.getTooltipEventType(),q=sa(F,So),W={};q&&X==="axis"&&(q.props.trigger==="click"?W={onClick:this.handleClick}:W={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var ee=hy(this.props,this.handleOuterEvent);return He(He({},ee),W)}},{key:"addListener",value:function(){v0.on(_0,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){v0.removeListener(_0,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(F,X,q){for(var W=this.state.formattedGraphicalItems,ee=0,le=W.length;ee<le;ee++){var ve=W[ee];if(ve.item===F||ve.props.key===F.key||X===us(ve.item.type)&&q===ve.childIndex)return ve}return null}},{key:"renderClipPath",value:function(){var F=this.clipPathId,X=this.state.offset,q=X.left,W=X.top,ee=X.height,le=X.width;return Me.createElement("defs",null,Me.createElement("clipPath",{id:F},Me.createElement("rect",{x:q,y:W,height:ee,width:le})))}},{key:"getXScales",value:function(){var F=this.state.xAxisMap;return F?Object.entries(F).reduce(function(X,q){var W=pk(q,2),ee=W[0],le=W[1];return He(He({},X),{},Vt({},ee,le.scale))},{}):null}},{key:"getYScales",value:function(){var F=this.state.yAxisMap;return F?Object.entries(F).reduce(function(X,q){var W=pk(q,2),ee=W[0],le=W[1];return He(He({},X),{},Vt({},ee,le.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(F){var X;return(X=this.state.xAxisMap)===null||X===void 0||(X=X[F])===null||X===void 0?void 0:X.scale}},{key:"getYScaleByAxisId",value:function(F){var X;return(X=this.state.yAxisMap)===null||X===void 0||(X=X[F])===null||X===void 0?void 0:X.scale}},{key:"getItemByXY",value:function(F){var X=this.state,q=X.formattedGraphicalItems,W=X.activeItem;if(q&&q.length)for(var ee=0,le=q.length;ee<le;ee++){var ve=q[ee],Pe=ve.props,Ce=ve.item,Te=Ce.type.defaultProps!==void 0?He(He({},Ce.type.defaultProps),Ce.props):Ce.props,Fe=us(Ce.type);if(Fe==="Bar"){var Re=(Pe.data||[]).find(function(ce){return vte(F,ce)});if(Re)return{graphicalItem:ve,payload:Re}}else if(Fe==="RadialBar"){var Be=(Pe.data||[]).find(function(ce){return eC(F,ce)});if(Be)return{graphicalItem:ve,payload:Be}}else if(i_(ve,W)||a_(ve,W)||Tp(ve,W)){var qe=bre({graphicalItem:ve,activeTooltipItem:W,itemData:Te.data}),Ke=Te.activeIndex===void 0?qe:Te.activeIndex;return{graphicalItem:He(He({},ve),{},{childIndex:Ke}),payload:Tp(ve,W)?Te.data[qe]:ve.props.data[qe]}}}return null}},{key:"render",value:function(){var F=this;if(!GP(this))return null;var X=this.props,q=X.children,W=X.className,ee=X.width,le=X.height,ve=X.style,Pe=X.compact,Ce=X.title,Te=X.desc,Fe=mk(X,yoe),Re=xr(Fe,!1);if(Pe)return Me.createElement(QC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Me.createElement(xb,jc({},Re,{width:ee,height:le,title:Ce,desc:Te}),this.renderClipPath(),ZP(q,this.renderMap)));if(this.props.accessibilityLayer){var Be,qe;Re.tabIndex=(Be=this.props.tabIndex)!==null&&Be!==void 0?Be:0,Re.role=(qe=this.props.role)!==null&&qe!==void 0?qe:"application",Re.onKeyDown=function(ce){F.accessibilityManager.keyboardEvent(ce)},Re.onFocus=function(){F.accessibilityManager.focus()}}var Ke=this.parseEventsOfWrapper();return Me.createElement(QC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Me.createElement("div",jc({className:gr("recharts-wrapper",W),style:He({position:"relative",cursor:"default",width:ee,height:le},ve)},Ke,{ref:function(_e){F.container=_e}}),Me.createElement(xb,jc({},Re,{width:ee,height:le,title:Ce,desc:Te,style:Doe}),this.renderClipPath(),ZP(q,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}($e.Component);Vt(B,"displayName",r),Vt(B,"defaultProps",He({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},P)),Vt(B,"getDerivedStateFromProps",function(V,D){var R=V.dataKey,F=V.data,X=V.children,q=V.width,W=V.height,ee=V.layout,le=V.stackOffset,ve=V.margin,Pe=D.dataStartIndex,Ce=D.dataEndIndex;if(D.updateId===void 0){var Te=vk(V);return He(He(He({},Te),{},{updateId:0},z(He(He({props:V},Te),{},{updateId:0}),D)),{},{prevDataKey:R,prevData:F,prevWidth:q,prevHeight:W,prevLayout:ee,prevStackOffset:le,prevMargin:ve,prevChildren:X})}if(R!==D.prevDataKey||F!==D.prevData||q!==D.prevWidth||W!==D.prevHeight||ee!==D.prevLayout||le!==D.prevStackOffset||!qc(ve,D.prevMargin)){var Fe=vk(V),Re={chartX:D.chartX,chartY:D.chartY,isTooltipActive:D.isTooltipActive},Be=He(He({},yk(D,F,ee)),{},{updateId:D.updateId+1}),qe=He(He(He({},Fe),Re),Be);return He(He(He({},qe),z(He({props:V},qe),D)),{},{prevDataKey:R,prevData:F,prevWidth:q,prevHeight:W,prevLayout:ee,prevStackOffset:le,prevMargin:ve,prevChildren:X})}if(!vb(X,D.prevChildren)){var Ke,ce,_e,ke,Ue=sa(X,fh),je=Ue&&(Ke=(ce=Ue.props)===null||ce===void 0?void 0:ce.startIndex)!==null&&Ke!==void 0?Ke:Pe,Qe=Ue&&(_e=(ke=Ue.props)===null||ke===void 0?void 0:ke.endIndex)!==null&&_e!==void 0?_e:Ce,pt=je!==Pe||Qe!==Ce,Dt=!br(F),Rt=Dt&&!pt?D.updateId:D.updateId+1;return He(He({updateId:Rt},z(He(He({props:V},D),{},{updateId:Rt,dataStartIndex:je,dataEndIndex:Qe}),D)),{},{prevChildren:X,dataStartIndex:je,dataEndIndex:Qe})}return null}),Vt(B,"renderActiveDot",function(V,D,R){var F;return $e.isValidElement(V)?F=$e.cloneElement(V,D):or(V)?F=V(D):F=Me.createElement(xD,D),Me.createElement(Zn,{className:"recharts-active-dot",key:R},F)});var j=$e.forwardRef(function(D,R){return Me.createElement(B,jc({},D,{ref:R}))});return j.displayName=B.displayName,j},Goe=qoe({chartName:"BarChart",GraphicalChild:Ao,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:h_},{axisType:"yAxis",AxisComp:Zc}],formatAxisMap:Wne});const Woe=({active:e,payload:t})=>e&&t&&t.length?J.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-md px-3 py-2 shadow-lg",children:t.map((r,n)=>{const s=r.name,c=r.value;let d;return s==="Damage Cost"?d=c.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}):s==="Exposure"||s==="Vulnerability"?d=`${c.toFixed(1)}%`:d=c.toLocaleString("en-US"),J.jsxs("p",{className:"text-white text-xs",children:[s,": ",d]},n)})}):null;function Zoe({data:e}){const t=[],r=e.summary.total_damage_cost!==void 0&&e.summary.total_damage_cost!==null;if(r){const n=Math.max(0,e.summary.total_damage_cost||0);let s=0;if(e.geometry_type==="Point"){const l=e.summary.affected_count||0,v=e.summary.total_features||0;s=v>0?l/v*100:0}else{const l=e.summary.affected_meters||0,v=e.summary.unaffected_meters||0,b=l+v;s=b>0?l/b*100:0}let c=0;const d=e.infrastructure_features;if(d&&d.features&&Array.isArray(d.features)){const l=d.features;if(e.geometry_type==="Point"){const v=l.filter(b=>b.properties&&b.properties.affected&&b.properties.vulnerability!==null&&b.properties.vulnerability!==void 0);v.length>0&&(c=v.reduce((S,P)=>S+Number(P.properties.vulnerability||0),0)/v.length*100)}else{let v=0,b=0;for(const S of l){const P=S.properties||{},k=!!P.affected,z=P.vulnerability,B=typeof P.length_m=="number"?P.length_m:0;k&&z!==null&&z!==void 0&&B>0&&(v+=Number(z)*B,b+=B)}b>0&&(c=v/b*100)}}t.push({name:"",damageCost:n,exposurePct:s,vulnerabilityPct:c})}else e.geometry_type==="Point"?t.push({name:"Affected",value:e.summary.affected_count||0,fill:"#ef4444",unit:""},{name:"Unaffected",value:e.summary.unaffected_count||0,fill:"#10b981",unit:""}):t.push({name:"Affected",value:(e.summary.affected_meters||0)/1e3,fill:"#ef4444",unit:"km"},{name:"Unaffected",value:(e.summary.unaffected_meters||0)/1e3,fill:"#10b981",unit:"km"});return J.jsx("div",{className:"w-full h-64",children:J.jsx(CZ,{width:"100%",height:"100%",children:J.jsxs(Goe,{data:t,children:[J.jsx(XD,{strokeDasharray:"3 3",stroke:"#9ca3af",vertical:!1}),J.jsx(h_,{dataKey:"name",stroke:"#9ca3af",tick:r?!1:{fill:"#9ca3af"},label:r?void 0:{fill:"#9ca3af"},tickLine:!1}),r?J.jsxs(J.Fragment,{children:[J.jsx(Zc,{yAxisId:"left",stroke:"#9ca3af",tick:{fill:"#9ca3af"},label:{fill:"#9ca3af"},tickFormatter:n=>n.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,notation:"compact"})}),J.jsx(Zc,{yAxisId:"right",orientation:"right",stroke:"#9ca3af",tick:{fill:"#9ca3af"},label:{fill:"#9ca3af"},tickFormatter:n=>`${n.toFixed(0)}%`,domain:[0,100]})]}):J.jsx(Zc,{stroke:"#9ca3af",tick:{fill:"#9ca3af"},label:{fill:"#9ca3af"},tickFormatter:n=>n.toLocaleString("en-US")}),J.jsx(So,{content:J.jsx(Woe,{})}),r?J.jsxs(J.Fragment,{children:[J.jsx(Ao,{yAxisId:"left",dataKey:"damageCost",name:"Damage Cost",fill:"#f59e0b"}),J.jsx(Ao,{yAxisId:"right",dataKey:"exposurePct",name:"Exposure",fill:"#3b82f6"}),J.jsx(Ao,{yAxisId:"right",dataKey:"vulnerabilityPct",name:"Vulnerability",fill:"#10b981"}),J.jsx(uu,{verticalAlign:"bottom",align:"center",wrapperStyle:{paddingLeft:0,paddingRight:0,whiteSpace:"nowrap"},formatter:n=>n==="Damage Cost"?"Damage":n})]}):J.jsx(Ao,{dataKey:"value"})]})})})}const Rh="api";async function Hoe(e){const t=new FormData;t.append("file",e);const r=await fetch(`${Rh}/upload`,{method:"POST",body:t});if(!r.ok){const n=await r.json().catch(()=>({detail:"Upload failed"}));throw new Error(n.detail||"Failed to upload file")}return r.json()}async function Koe(){const e=await fetch(`${Rh}/hazards`);if(!e.ok)throw new Error("Failed to fetch hazard layers");return(await e.json()).hazards||[]}async function Xoe(e,t,r,n,s,c){const d=s!=null;let l,v;if(d){const S=new FormData;S.append("file_id",e),S.append("hazard_id",t),S.append("hazard_url",r),n!==void 0&&S.append("intensity_threshold",n.toString()),S.append("vulnerability_curve_file",s),c!=null&&S.append("replacement_value",c.toString()),l=S,v={}}else l=JSON.stringify({file_id:e,hazard_id:t,hazard_url:r,intensity_threshold:n}),v={"Content-Type":"application/json"};const b=await fetch(`${Rh}/analyze`,{method:"POST",headers:v,body:l});if(!b.ok){const S=await b.json().catch(()=>({detail:"Analysis failed"}));throw new Error(S.detail||"Failed to perform analysis")}return b.json()}async function Yoe(e){const t=await fetch(`${Rh}/hazards/${e}/stats`);if(!t.ok)throw new Error("Failed to fetch hazard statistics");return t.json()}async function Joe(e,t,r){const n=await fetch(`${Rh}/export/barchart`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_id:e,hazard_id:t,intensity_threshold:r})});if(!n.ok){const b=await n.json().catch(()=>({detail:"Export failed"}));throw new Error(b.detail||"Failed to export barchart")}const s=n.headers.get("Content-Disposition");let c=`barchart_${e.slice(0,8)}_${t.slice(0,8)}.png`;if(s){const b=s.match(/filename="(.+)"/);b&&(c=b[1])}const d=await n.blob(),l=window.URL.createObjectURL(d),v=document.createElement("a");v.href=l,v.download=c,document.body.appendChild(v),v.click(),window.URL.revokeObjectURL(l),document.body.removeChild(v)}async function Qoe(e,t,r,n,s){const c=await fetch(`${Rh}/export/map`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_id:e,hazard_id:t,color_palette:r,hazard_opacity:n/100,intensity_threshold:s})});if(!c.ok){const P=await c.json().catch(()=>({detail:"Export failed"}));throw new Error(P.detail||"Failed to export map")}const d=c.headers.get("Content-Disposition");let l=`map_${e.slice(0,8)}_${t.slice(0,8)}.png`;if(d){const P=d.match(/filename="(.+)"/);P&&(l=P[1])}const v=await c.blob(),b=window.URL.createObjectURL(v),S=document.createElement("a");S.href=b,S.download=l,document.body.appendChild(S),S.click(),window.URL.revokeObjectURL(b),document.body.removeChild(S)}const ese=["viridis","magma","inferno","plasma","cividis","turbo"];function tse({isOpen:e,onToggle:t,uploadedFile:r,onFileUpload:n,onClearData:s,hazards:c,selectedHazard:d,onSelectHazard:l,colorPalette:v,onColorPaletteChange:b,hazardOpacity:S,onHazardOpacityChange:P,intensityThreshold:k,onIntensityThresholdChange:z,hazardStats:B,analysisResult:j,loadingUpload:V=!1,loadingAnalysis:D=!1,error:R=null,vulnerabilityAnalysisEnabled:F,onVulnerabilityAnalysisEnabledChange:X,vulnerabilityCurveFile:q,onVulnerabilityCurveFileChange:W,replacementValue:ee,onReplacementValueChange:le}){const[ve,Pe]=$e.useState(!1),[Ce,Te]=$e.useState(!1),[Fe,Re]=$e.useState(!1),[Be,qe]=$e.useState(!1),[Ke,ce]=$e.useState(!1),[_e,ke]=$e.useState(!1),[Ue,je]=$e.useState(!1),[Qe,pt]=$e.useState(!1),[Dt,Rt]=$e.useState(!1),[Bt,Jt]=$e.useState(!1),Ye=2,nt=(mt,yt,Ot)=>mt<yt?yt:mt>Ot?Ot:mt,At=(mt,yt,Ot)=>{if(Ot<=yt)return 0;const Ht=(nt(mt,yt,Ot)-yt)/(Ot-yt);return Math.pow(Ht,1/Ye)},ze=(mt,yt,Ot)=>{if(Ot<=yt)return yt;const Ht=Math.pow(nt(mt,0,1),Ye);return yt+Ht*(Ot-yt)},kt=async mt=>{var Ot;const yt=(Ot=mt.target.files)==null?void 0:Ot[0];yt&&(await n(yt),mt.target.value="")},$t=mt=>{const yt=mt.target.value,Ot=c.find(Ht=>Ht.id===yt)||null;l(Ot)};return J.jsxs(J.Fragment,{children:[J.jsx("div",{className:`bg-gray-900 transition-all duration-300 flex flex-col ${e?"w-80":"w-0 overflow-hidden"}`,children:e&&J.jsxs("div",{className:"flex flex-col h-full overflow-y-auto p-4",children:[J.jsxs("div",{className:"flex items-center justify-between mb-5",children:[J.jsx("h1",{className:"text-xl font-bold text-white",children:"Infrastructure Risk Analyzer"}),J.jsx(Di,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-300 hover:text-white hover:bg-gray-800",children:J.jsx(jR,{className:"h-4 w-4"})})]}),J.jsxs("div",{className:"flex flex-col flex-1",children:[J.jsxs("div",{className:"mb-5",children:[J.jsxs("div",{className:"flex items-center justify-between mb-1",children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Upload Infrastructure Data"}),J.jsx(Di,{variant:"ghost",size:"sm",onClick:()=>Te(!0),className:"h-6 w-6 p-0 text-gray-300 hover:text-white hover:bg-gray-800",children:J.jsx(Ws,{className:"h-3.5 w-3.5"})})]}),r?J.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-md px-3 py-2 shadow-sm",children:J.jsxs("div",{className:"flex items-center justify-between",children:[J.jsxs("div",{className:"flex-1 min-w-0",children:[J.jsxs("p",{className:"text-xs text-gray-300 truncate",children:[" ",r.filename]}),J.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[r.feature_count," features"]})]}),J.jsx(Di,{variant:"ghost",size:"sm",onClick:s,disabled:V||D,className:"ml-2 text-xs text-gray-300 bg-gray-700 hover:text-red-500 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear Data"})]})}):J.jsxs(J.Fragment,{children:[J.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-md px-3 py-2 shadow-sm",children:J.jsx(vd,{type:"file",accept:".shp,.gpkg,.csv,.zip",onChange:kt,disabled:V,className:"cursor-pointer border-0 bg-transparent px-0 py-0 h-auto text-gray-300 file:mr-4 file:py-1 file:px-3 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-600 file:text-white hover:file:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed [&::file-selector-button]:mr-4"})}),V&&J.jsx("p",{className:"text-xs text-blue-400 mt-1",children:"Uploading..."}),R&&J.jsx("p",{className:"text-xs text-red-400 mt-1",children:R})]})]}),J.jsxs("div",{className:"mb-5",children:[J.jsxs("div",{className:"flex items-center justify-between mb-1",children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Select Hazard Layer"}),d&&J.jsx(Di,{variant:"ghost",size:"sm",onClick:()=>Pe(!0),className:"h-6 w-6 p-0 text-gray-300 hover:text-white hover:bg-gray-800",children:J.jsx(Ws,{className:"h-3.5 w-3.5"})})]}),J.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-md px-3 py-2 shadow-sm",children:J.jsxs(cy,{value:(d==null?void 0:d.id)||"",onChange:$t,className:"border-0 bg-transparent px-0 py-0 h-auto text-gray-300",children:[J.jsx("option",{value:"",className:"bg-gray-800 text-gray-300",children:"Select a hazard..."}),c.map(mt=>J.jsx("option",{value:mt.id,className:"bg-gray-800 text-gray-300",children:mt.name},mt.id))]})})]}),J.jsxs("div",{className:"mb-5",children:[J.jsxs("div",{className:"flex items-center justify-between mb-1",children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Color Palette for Hazard Layer"}),J.jsx(Di,{variant:"ghost",size:"sm",onClick:()=>qe(!0),className:"h-6 w-6 p-0 text-gray-300 hover:text-white hover:bg-gray-800",children:J.jsx(Ws,{className:"h-3.5 w-3.5"})})]}),J.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-md px-3 py-2 shadow-sm flex items-center gap-3",children:[J.jsx(cy,{value:v,onChange:mt=>b(mt.target.value),className:"border-0 bg-transparent px-0 py-0 h-auto text-gray-300 flex-1",children:ese.map(mt=>J.jsx("option",{value:mt,className:"bg-gray-800 text-gray-300",children:mt.charAt(0).toUpperCase()+mt.slice(1)},mt))}),J.jsx("div",{className:"flex items-center border-l border-gray-700 pl-3",children:J.jsxs("div",{className:"relative flex items-center",children:[J.jsx(vd,{type:"number",min:"0",max:"100",value:S,onChange:mt=>{const yt=parseInt(mt.target.value)||0;yt>=0&&yt<=100&&P(yt)},className:"opacity-input w-16 border-0 bg-transparent px-2 py-0 h-auto text-gray-300 text-sm text-right"}),J.jsx("span",{className:"text-xs text-gray-400",children:"%"}),J.jsxs("div",{className:"flex flex-col ml-1 gap-0",children:[J.jsx("button",{type:"button",onClick:()=>{S<100&&P(S+1)},disabled:S>=100,className:"p-0 text-gray-400 hover:text-gray-300 disabled:opacity-30 disabled:cursor-not-allowed",children:J.jsx(RR,{className:"h-3 w-3"})}),J.jsx("button",{type:"button",onClick:()=>{S>0&&P(S-1)},disabled:S<=0,className:"p-0 text-gray-400 hover:text-gray-300 disabled:opacity-30 disabled:cursor-not-allowed",children:J.jsx(LR,{className:"h-3 w-3"})})]})]})})]})]}),d&&B&&J.jsxs("div",{className:"mb-3",children:[J.jsxs("div",{className:"flex items-center justify-between mb-1",children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Hazard Intensity Threshold"}),J.jsx(Di,{variant:"ghost",size:"sm",onClick:()=>Re(!0),className:"h-6 w-6 p-0 text-gray-300 hover:text-white hover:bg-gray-800",children:J.jsx(Ws,{className:"h-3.5 w-3.5"})})]}),J.jsxs("div",{className:"space-y-1",children:[J.jsx(RM,{value:At(k,B.min,B.max),onValueChange:mt=>{z(ze(mt,B.min,B.max))},min:0,max:1,step:.001}),J.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[J.jsx("span",{children:B.min.toFixed(2)}),J.jsxs("span",{children:["Current: ",k.toFixed(2)]}),J.jsx("span",{children:B.max.toFixed(2)})]})]})]}),J.jsx("hr",{className:"my-4 border-gray-700"}),J.jsxs("div",{className:F?"mb-2":"mb-1",children:[J.jsxs("div",{className:`flex items-center justify-between ${F?"mb-3":"mb-1"}`,children:[J.jsxs("div",{className:"flex items-center",children:[J.jsx("input",{type:"checkbox",id:"vulnerability-analysis",checked:F,onChange:mt=>X(mt.target.checked),disabled:V||D,className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500 focus:ring-2 disabled:opacity-50 disabled:cursor-not-allowed"}),J.jsx("label",{htmlFor:"vulnerability-analysis",className:"ml-2 text-sm font-medium text-gray-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:"Vulnerability Analysis"})]}),J.jsx(Di,{variant:"ghost",size:"sm",onClick:()=>je(!0),className:"h-6 w-6 p-0 text-gray-300 hover:text-white hover:bg-gray-800",children:J.jsx(Ws,{className:"h-3.5 w-3.5"})})]}),F&&J.jsxs("div",{className:"space-y-4",children:[J.jsxs("div",{children:[J.jsxs("div",{className:"flex items-center justify-between mb-1",children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Vulnerability Curve"}),J.jsx(Di,{variant:"ghost",size:"sm",onClick:()=>ce(!0),className:"h-6 w-6 p-0 text-gray-300 hover:text-white hover:bg-gray-800",children:J.jsx(Ws,{className:"h-3.5 w-3.5"})})]}),q?J.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-md px-3 py-2 shadow-sm",children:J.jsxs("div",{className:"flex items-center justify-between",children:[J.jsx("div",{className:"flex-1 min-w-0",children:J.jsxs("p",{className:"text-xs text-gray-300 truncate",children:[" ",q.name]})}),J.jsx(Di,{variant:"ghost",size:"sm",onClick:()=>W(null),disabled:V||D,className:"ml-2 text-xs text-gray-300 bg-gray-700 hover:text-red-500 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"})]})}):J.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-md px-3 py-2 shadow-sm",children:J.jsx(vd,{type:"file",accept:".csv",onChange:mt=>{var Ot;const yt=(Ot=mt.target.files)==null?void 0:Ot[0];yt&&W(yt)},disabled:V||D,className:"cursor-pointer border-0 bg-transparent px-0 py-0 h-auto text-gray-300 file:mr-4 file:py-1 file:px-3 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-600 file:text-white hover:file:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed [&::file-selector-button]:mr-4"})})]}),J.jsxs("div",{children:[J.jsxs("div",{className:"flex items-center justify-between mb-1",children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Replacement Value"}),J.jsx(Di,{variant:"ghost",size:"sm",onClick:()=>ke(!0),className:"h-6 w-6 p-0 text-gray-300 hover:text-white hover:bg-gray-800",children:J.jsx(Ws,{className:"h-3.5 w-3.5"})})]}),J.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-md px-3 py-2 shadow-sm",children:J.jsx(vd,{type:"number",min:"0",step:"0.01",value:ee??"",onChange:mt=>{const yt=mt.target.value===""?null:parseFloat(mt.target.value);le(yt)},disabled:V||D,placeholder:"Enter replacement value",className:"border-0 bg-transparent px-0 py-0 h-auto text-gray-300 placeholder:text-gray-500 disabled:opacity-50 disabled:cursor-not-allowed"})})]})]})]})]}),J.jsx("hr",{className:F?"my-4 border-gray-700":"my-2 border-gray-700"}),J.jsxs("div",{className:"flex-shrink-0",children:[J.jsxs("div",{className:"flex items-center justify-between mb-2",children:[J.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Analysis Results"}),J.jsx(Di,{variant:"ghost",size:"sm",onClick:()=>pt(!0),className:"h-6 w-6 p-0 text-gray-300 hover:text-white hover:bg-gray-800",children:J.jsx(Ws,{className:"h-3.5 w-3.5"})})]}),D&&!j&&J.jsx("div",{className:"w-full h-48 flex items-center justify-center text-sm text-gray-500 border border-gray-700 rounded bg-gray-800",children:J.jsxs("div",{className:"text-center",children:[J.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto mb-2"}),J.jsx("p",{children:"Analyzing..."})]})}),!D&&j?J.jsx(Zoe,{data:j}):!D&&!j?J.jsx("div",{className:"w-full h-48 flex items-center justify-center text-sm text-gray-500 border border-gray-700 rounded bg-gray-800",children:r&&d?"No analysis data yet":"Upload data and select a hazard to analyze"}):null,R&&J.jsx("p",{className:"text-xs text-red-400 mt-2",children:R}),!D&&j&&r&&d&&J.jsxs("div",{className:"mt-4 flex gap-2",children:[J.jsx(Di,{onClick:async()=>{if(!(!r||!d))try{Rt(!0);const mt=B&&k>B.min?k:void 0;await Joe(r.file_id,d.id,mt)}catch(mt){console.error("Failed to export barchart:",mt),alert(mt instanceof Error?mt.message:"Failed to export barchart")}finally{Rt(!1)}},disabled:Dt||Bt,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:Dt?J.jsxs(J.Fragment,{children:[J.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-300 mr-2"}),"Generating..."]}):J.jsxs(J.Fragment,{children:[J.jsx(kP,{className:"h-4 w-4 mr-2"}),"Barchart"]})}),J.jsx(Di,{onClick:async()=>{if(!(!r||!d))try{Jt(!0);const mt=B&&k>B.min?k:void 0;await Qoe(r.file_id,d.id,v,S,mt)}catch(mt){console.error("Failed to export map:",mt),alert(mt instanceof Error?mt.message:"Failed to export map")}finally{Jt(!1)}},disabled:Dt||Bt,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:Bt?J.jsxs(J.Fragment,{children:[J.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-300 mr-2"}),"Generating..."]}):J.jsxs(J.Fragment,{children:[J.jsx(kP,{className:"h-4 w-4 mr-2"}),"Map"]})})]})]})]})}),!e&&J.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-gray-900 rounded-r-lg p-2 shadow-lg hover:bg-gray-800 text-white",children:J.jsx($R,{className:"h-4 w-4"})}),J.jsx(Ks,{open:ve,onOpenChange:Pe,children:J.jsxs(es,{onClose:()=>Pe(!1),children:[J.jsx(Xs,{children:J.jsx(Ys,{children:d==null?void 0:d.name})}),J.jsxs("div",{className:"space-y-2",children:[(d==null?void 0:d.description)&&J.jsx("p",{className:"text-sm text-gray-700",children:d.description}),(d==null?void 0:d.metadata)&&J.jsxs("div",{style:{paddingTop:"0.7rem"},children:[J.jsx("p",{className:"text-sm font-bold text-gray-600 mb-1",children:"Background Paper"}),J.jsx("p",{className:"text-sm text-gray-700",children:(()=>{const mt=d.metadata,yt=/(https?:\/\/[^\s]+)/g;return mt.split(yt).map((Ht,mn)=>/^https?:\/\/[^\s]+$/.test(Ht)?J.jsx("a",{href:Ht,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:Ht},mn):J.jsx("span",{children:Ht},mn))})()})]})]})]})}),J.jsx(Ks,{open:Ce,onOpenChange:Te,children:J.jsxs(es,{onClose:()=>Te(!1),children:[J.jsx(Xs,{children:J.jsx(Ys,{children:"Accepted File Formats"})}),J.jsxs("div",{className:"space-y-3",children:[J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"Shapefile (.shp)"}),J.jsx("p",{className:"text-sm text-gray-600",children:"Upload as a ZIP file containing all required components (.shp, .shx, .dbf, and optionally .prj)."})]}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"GeoPackage (.gpkg)"}),J.jsx("p",{className:"text-sm text-gray-600",children:"Single-file geospatial database format. Supports both Point and LineString geometries."})]}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"CSV (.csv)"}),J.jsx("p",{className:"text-sm text-gray-600",children:"Comma or semicolon-delimited file with coordinate columns. Supported column names:"}),J.jsxs("ul",{className:"text-xs text-gray-500 mt-1 ml-4 list-disc",children:[J.jsx("li",{children:"lat/lon, lat/lng"}),J.jsx("li",{children:"latitude/longitude"}),J.jsx("li",{children:"y/x (case-insensitive)"})]}),J.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"CSV files will be interpreted as Point geometries."})]}),J.jsx("div",{className:"mt-4 pt-3 border-t border-gray-300",children:J.jsxs("p",{className:"text-xs text-gray-500",children:[J.jsx("strong",{children:"Note:"})," Maximum file size is 100 MB. Supported geometry types are Point and LineString."]})})]})]})}),J.jsx(Ks,{open:Fe,onOpenChange:Re,children:J.jsxs(es,{onClose:()=>Re(!1),children:[J.jsx(Xs,{children:J.jsx(Ys,{children:"Hazard Intensity Threshold"})}),J.jsxs("div",{className:"space-y-3",children:[J.jsx("div",{children:J.jsxs("p",{className:"text-sm text-gray-700",children:["The intensity threshold determines the minimum hazard value required for infrastructure to be considered ",J.jsx("strong",{children:'"affected"'}),"."]})}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"How it works:"}),J.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 ml-4 list-disc",children:[J.jsxs("li",{children:[J.jsx("strong",{children:"Point features:"})," A point is marked as affected (red) if the hazard raster value at that location is greater than or equal to the threshold."]}),J.jsxs("li",{children:[J.jsx("strong",{children:"Line features:"})," A line is marked as affected (red) if any point along the line has a hazard value greater than or equal to the threshold."]})]})]}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"Impact on results:"}),J.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 ml-4 list-disc",children:[J.jsxs("li",{children:[J.jsx("strong",{children:"Bar chart:"})," Shows the count (for points) or length in meters (for lines) of affected vs. unaffected infrastructure based on the threshold."]}),J.jsxs("li",{children:[J.jsx("strong",{children:"Map:"})," Infrastructure features are color-coded: ",J.jsx("span",{className:"text-red-600 font-semibold",children:"red"})," for affected and ",J.jsx("span",{className:"text-green-600 font-semibold",children:"green"})," for unaffected."]})]})]}),J.jsx("div",{className:"mt-4 pt-3 border-t border-gray-300",children:J.jsxs("p",{className:"text-xs text-gray-500",children:[J.jsx("strong",{children:"Tip:"})," Adjust the slider to explore different risk scenarios. A lower threshold means more infrastructure will be considered at risk."]})})]})]})}),J.jsx(Ks,{open:Be,onOpenChange:qe,children:J.jsxs(es,{onClose:()=>qe(!1),children:[J.jsx(Xs,{children:J.jsx(Ys,{children:"Color Palette & Opacity"})}),J.jsxs("div",{className:"space-y-3",children:[J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"Color Palette:"}),J.jsx("p",{className:"text-sm text-gray-600",children:"The color palette determines how hazard intensity values are visualized on the map. Different palettes are optimized for different types of data:"}),J.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 mt-2 ml-4 list-disc",children:[J.jsxs("li",{children:[J.jsx("strong",{children:"Viridis:"})," Perceptually uniform, colorblind-friendly (blue to yellow)"]}),J.jsxs("li",{children:[J.jsx("strong",{children:"Magma:"})," Black to purple to pink to yellow"]}),J.jsxs("li",{children:[J.jsx("strong",{children:"Inferno:"})," Black to red to yellow"]}),J.jsxs("li",{children:[J.jsx("strong",{children:"Plasma:"})," Purple to pink to yellow"]}),J.jsxs("li",{children:[J.jsx("strong",{children:"Cividis:"})," Dark to bright, with good contrast"]}),J.jsxs("li",{children:[J.jsx("strong",{children:"Turbo:"})," Rainbow-like spectrum (blue to yellow via red)"]})]})]}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"Opacity:"}),J.jsx("p",{className:"text-sm text-gray-600",children:"The opacity percentage controls the transparency of the hazard layer."}),J.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[J.jsx("strong",{children:"0%"})," = fully transparent (hazard layer invisible)",J.jsx("br",{}),J.jsx("strong",{children:"100%"})," = fully opaque (hazard layer completely covers basemap)"]})]}),J.jsx("div",{className:"mt-4 pt-3 border-t border-gray-300",children:J.jsxs("p",{className:"text-xs text-gray-500",children:[J.jsx("strong",{children:"Tip:"})," Experiment with different palettes and opacity levels to find the best visualization for your analysis. The hazard layer is displayed between the basemap and infrastructure layers."]})})]})]})}),J.jsx(Ks,{open:Ke,onOpenChange:ce,children:J.jsxs(es,{onClose:()=>ce(!1),children:[J.jsx(Xs,{children:J.jsx(Ys,{children:"Vulnerability Curve"})}),J.jsxs("div",{className:"space-y-3",children:[J.jsx("div",{children:J.jsx("p",{className:"text-sm text-gray-700",children:"Upload a CSV file containing a vulnerability curve that defines the relationship between hazard intensity and the proportion of infrastructure destroyed."})}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"CSV Format:"}),J.jsx("p",{className:"text-sm text-gray-600",children:"The CSV file must contain exactly two columns:"}),J.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 mt-2 ml-4 list-disc",children:[J.jsxs("li",{children:[J.jsx("strong",{children:"Column 1:"})," Hazard intensity (numeric values)"]}),J.jsxs("li",{children:[J.jsx("strong",{children:"Column 2:"})," Proportion destroyed (numeric values between 0 and 1)"]})]})]}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"How it works:"}),J.jsx("p",{className:"text-sm text-gray-600",children:"The vulnerability curve is interpolated to calculate the proportion of each infrastructure feature that would be destroyed based on the hazard intensity at that location. This proportion is then multiplied by the replacement value to calculate total damage costs."})]}),J.jsx("div",{className:"mt-4 pt-3 border-t border-gray-300",children:J.jsxs("p",{className:"text-xs text-gray-500",children:[J.jsx("strong",{children:"Note:"})," The curve is linearly interpolated. Values below the minimum intensity in the curve use the first proportion value, and values above the maximum use the last proportion value."]})})]})]})}),J.jsx(Ks,{open:_e,onOpenChange:ke,children:J.jsxs(es,{onClose:()=>ke(!1),children:[J.jsx(Xs,{children:J.jsx(Ys,{children:"Replacement Value"})}),J.jsxs("div",{className:"space-y-3",children:[J.jsx("div",{children:J.jsx("p",{className:"text-sm text-gray-700",children:"Enter the monetary cost of replacing the infrastructure asset. This value is unitless and can be in any currency."})}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"For Point features:"}),J.jsxs("p",{className:"text-sm text-gray-600",children:["The replacement value represents the total cost of the asset. Damage cost is calculated as: ",J.jsx("strong",{children:"replacement_value  vulnerability"})]})]}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"For LineString features:"}),J.jsxs("p",{className:"text-sm text-gray-600",children:["The replacement value represents the cost per meter of the line. Damage cost is calculated as: ",J.jsx("strong",{children:"replacement_value  vulnerability  length (in meters)"})]})]}),J.jsx("div",{className:"mt-4 pt-3 border-t border-gray-300",children:J.jsxs("p",{className:"text-xs text-gray-500",children:[J.jsx("strong",{children:"Tip:"})," The total damage cost shown in the barchart is the sum of all individual feature damage costs."]})})]})]})}),J.jsx(Ks,{open:Ue,onOpenChange:je,children:J.jsxs(es,{onClose:()=>je(!1),children:[J.jsx(Xs,{children:J.jsx(Ys,{children:"Vulnerability Analysis"})}),J.jsxs("div",{className:"space-y-3",children:[J.jsx("div",{children:J.jsx("p",{className:"text-sm text-gray-700",children:"Enable vulnerability analysis to calculate the proportion of infrastructure destroyed based on hazard intensity and estimate total damage costs."})}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"What it does:"}),J.jsx("p",{className:"text-sm text-gray-600",children:"When enabled, the analysis applies a vulnerability curve to determine how much of each infrastructure feature would be destroyed at different hazard intensities. Combined with a replacement value, this calculates monetary damage costs."})]}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"Display changes:"}),J.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 ml-4 list-disc",children:[J.jsxs("li",{children:[J.jsx("strong",{children:"Map viewer:"})," The map display remains unchanged - infrastructure is still shown as affected (red) or unaffected (green) based on the intensity threshold."]}),J.jsxs("li",{children:[J.jsx("strong",{children:"Barchart:"})," Shows damage cost, exposure percentage, and average vulnerability instead of just affected/unaffected counts."]}),J.jsxs("li",{children:[J.jsx("strong",{children:"Map popups:"})," When clicking on affected lines or points, popups will display vulnerability (proportion destroyed) and damage cost in addition to exposure information."]})]})]}),J.jsx("div",{className:"mt-4 pt-3 border-t border-gray-300",children:J.jsxs("p",{className:"text-xs text-gray-500",children:[J.jsx("strong",{children:"Note:"})," You must upload a vulnerability curve CSV and enter a replacement value for the analysis to run. The vulnerability curve defines the relationship between hazard intensity and proportion destroyed."]})})]})]})}),J.jsx(Ks,{open:Qe,onOpenChange:pt,children:J.jsxs(es,{onClose:()=>pt(!1),children:[J.jsx(Xs,{children:J.jsx(Ys,{children:"Analysis Results"})}),J.jsx("div",{className:"space-y-3",children:F&&(j==null?void 0:j.summary.total_damage_cost)!==void 0?J.jsxs(J.Fragment,{children:[J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"Vulnerability Analysis Mode"}),J.jsx("p",{className:"text-sm text-gray-700",children:"The barchart displays three metrics:"})]}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"Damage Cost (left axis):"}),J.jsx("p",{className:"text-sm text-gray-600",children:"The total monetary cost of damage to infrastructure, calculated by applying the vulnerability curve and replacement value to all affected features."})]}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"Exposure (right axis):"}),J.jsx("p",{className:"text-sm text-gray-600",children:"The percentage of infrastructure assets (for points) or meters (for lines) that are exposed to hazards above the intensity threshold."})]}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"Vulnerability (right axis):"}),J.jsxs("p",{className:"text-sm text-gray-600",children:["The average vulnerability (proportion destroyed) of exposed infrastructure. This is calculated ",J.jsx("strong",{children:"only across exposed assets"})," (those above the intensity threshold). For lines, this is a length-weighted average."]})]}),J.jsx("div",{className:"mt-4 pt-3 border-t border-gray-300",children:J.jsxs("p",{className:"text-xs text-gray-500",children:[J.jsx("strong",{children:"Important:"})," Both exposure and vulnerability calculations depend on the ",J.jsx("strong",{children:"hazard intensity threshold"}),". Only infrastructure exposed to hazards above the threshold is considered in these calculations."]})})]}):J.jsxs(J.Fragment,{children:[J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"Exposure Analysis Mode"}),J.jsx("p",{className:"text-sm text-gray-700",children:"The barchart displays the count (for points) or length in meters (for lines) of infrastructure that is affected vs. unaffected by the hazard."})]}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"Affected (red bar):"}),J.jsx("p",{className:"text-sm text-gray-600",children:"Infrastructure exposed to hazard intensities at or above the intensity threshold."})]}),J.jsxs("div",{children:[J.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"Unaffected (green bar):"}),J.jsx("p",{className:"text-sm text-gray-600",children:"Infrastructure exposed to hazard intensities below the intensity threshold."})]}),J.jsx("div",{className:"mt-4 pt-3 border-t border-gray-300",children:J.jsxs("p",{className:"text-xs text-gray-500",children:[J.jsx("strong",{children:"Important:"})," The classification of infrastructure as affected or unaffected depends entirely on the ",J.jsx("strong",{children:"hazard intensity threshold"}),". Adjusting the threshold will change which features are considered exposed."]})})]})})]})})]})}var hL={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(dd,function(){var r,n,s;function c(l,v){if(!r)r=v;else if(!n)n=v;else{var b="var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk);",S={};r(S),s=v(S),typeof window<"u"&&(s.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}}c(["exports"],function(l){function v(o,i,u,f){return new(u||(u=Promise))(function(m,x){function w(M){try{C(f.next(M))}catch(L){x(L)}}function T(M){try{C(f.throw(M))}catch(L){x(L)}}function C(M){var L;M.done?m(M.value):(L=M.value,L instanceof u?L:new u(function(U){U(L)})).then(w,T)}C((f=f.apply(o,i||[])).next())})}function b(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var S=P;function P(o,i){this.x=o,this.y=i}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,i){return this.clone()._rotateAround(o,i)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var i=o.x-this.x,u=o.y-this.y;return i*i+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,i){return Math.atan2(this.x*i-this.y*o,this.x*o+this.y*i)},_matMult:function(o){var i=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=i,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var i=Math.cos(o),u=Math.sin(o),f=u*this.x+i*this.y;return this.x=i*this.x-u*this.y,this.y=f,this},_rotateAround:function(o,i){var u=Math.cos(o),f=Math.sin(o),m=i.y+f*(this.x-i.x)+u*(this.y-i.y);return this.x=i.x+u*(this.x-i.x)-f*(this.y-i.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},P.convert=function(o){return o instanceof P?o:Array.isArray(o)?new P(o[0],o[1]):o};var k=b(S),z=B;function B(o,i,u,f){this.cx=3*o,this.bx=3*(u-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(f-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=i,this.p2x=u,this.p2y=f}B.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,i){if(i===void 0&&(i=1e-6),o<0)return 0;if(o>1)return 1;for(var u=o,f=0;f<8;f++){var m=this.sampleCurveX(u)-o;if(Math.abs(m)<i)return u;var x=this.sampleCurveDerivativeX(u);if(Math.abs(x)<1e-6)break;u-=m/x}var w=0,T=1;for(u=o,f=0;f<20&&(m=this.sampleCurveX(u),!(Math.abs(m-o)<i));f++)o>m?w=u:T=u,u=.5*(T-w)+w;return u},solve:function(o,i){return this.sampleCurveY(this.solveCurveX(o,i))}};var j=b(z);let V,D;function R(){return V==null&&(V=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),V}function F(){if(D==null&&(D=!1,R())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let f=0;f<5*5;f++){const m=4*f;i.fillStyle=`rgb(${m},${m+1},${m+2})`,i.fillRect(f%5,Math.floor(f/5),1,1)}const u=i.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&u[f]!==f){D=!0;break}}}return D||!1}function X(o,i,u,f){const m=new j(o,i,u,f);return function(x){return m.solve(x)}}const q=X(.25,.1,.25,1);function W(o,i,u){return Math.min(u,Math.max(i,o))}function ee(o,i,u){const f=u-i,m=((o-i)%f+f)%f+i;return m===i?u:m}function le(o,...i){for(const u of i)for(const f in u)o[f]=u[f];return o}let ve=1;function Pe(o,i,u){const f={};for(const m in o)f[m]=i.call(u||this,o[m],m,o);return f}function Ce(o,i,u){const f={};for(const m in o)i.call(u||this,o[m],m,o)&&(f[m]=o[m]);return f}function Te(o){return Array.isArray(o)?o.map(Te):typeof o=="object"&&o?Pe(o,Te):o}const Fe={};function Re(o){Fe[o]||(typeof console<"u"&&console.warn(o),Fe[o]=!0)}function Be(o,i,u){return(u.y-o.y)*(i.x-o.x)>(i.y-o.y)*(u.x-o.x)}function qe(o){let i=0;for(let u,f,m=0,x=o.length,w=x-1;m<x;w=m++)u=o[m],f=o[w],i+=(f.x-u.x)*(u.y+f.y);return i}function Ke(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let ce=null;function _e(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ue(o,i,u,f,m){return v(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(o,{timestamp:0});try{const w=x==null?void 0:x.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const T=w.startsWith("BGR"),C=new Uint8ClampedArray(f*m*4);if(yield x.copyTo(C,function(M,L,U,Z,Y){const Q=4*Math.max(-L,0),ne=(Math.max(0,U)-U)*Z*4+Q,he=4*Z,pe=Math.max(0,L),Se=Math.max(0,U);return{rect:{x:pe,y:Se,width:Math.min(M.width,L+Z)-pe,height:Math.min(M.height,U+Y)-Se},layout:[{offset:ne,stride:he}]}}(o,i,u,f,m)),T)for(let M=0;M<C.length;M+=4){const L=C[M];C[M]=C[M+2],C[M+2]=L}return C}finally{x.close()}})}let je,Qe,pt,Dt;const Rt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const i=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(i)}},getImageData(o,i=0){return this.getImageCanvasContext(o).getImageData(-i,-i,o.width+2*i,o.height+2*i)},getImageCanvasContext(o){const i=window.document.createElement("canvas"),u=i.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return i.width=o.width,i.height=o.height,u.drawImage(o,0,0,o.width,o.height),u},resolveURL:o=>(pt||(pt=document.createElement("a")),pt.href=o,pt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Dt==null&&(Dt=matchMedia("(prefers-reduced-motion: reduce)")),Dt.matches)}},Bt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Jt extends Error{constructor(i,u,f,m){super(`AJAXError: ${u} (${i}): ${f}`),this.status=i,this.statusText=u,this.url=f,this.body=m}}const Ye=Ke()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,nt=o=>Bt.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function At(o,i){const u=new AbortController,f=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:Ye(),signal:u.signal});let m=!1,x=!1;return o.type==="json"&&f.headers.set("Accept","application/json"),x||fetch(f).then(w=>w.ok?(T=>{(o.type==="arrayBuffer"||o.type==="image"?T.arrayBuffer():o.type==="json"?T.json():T.text()).then(C=>{x||(m=!0,i(null,C,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(C=>{x||i(new Error(C.message))})})(w):w.blob().then(T=>i(new Jt(w.status,w.statusText,o.url,T)))).catch(w=>{w.code!==20&&i(new Error(w.message))}),{cancel:()=>{x=!0,m||u.abort()}}}const ze=function(o,i){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(Ke()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,i);if(!Ke())return(nt(o.url)||At)(o,i)}if(!(/^file:/.test(u=o.url)||/^file:/.test(Ye())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return At(o,i);if(Ke()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,i,void 0,!0)}var u;return function(f,m){const x=new XMLHttpRequest;x.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(x.responseType="arraybuffer");for(const w in f.headers)x.setRequestHeader(w,f.headers[w]);return f.type==="json"&&(x.responseType="text",x.setRequestHeader("Accept","application/json")),x.withCredentials=f.credentials==="include",x.onerror=()=>{m(new Error(x.statusText))},x.onload=()=>{if((x.status>=200&&x.status<300||x.status===0)&&x.response!==null){let w=x.response;if(f.type==="json")try{w=JSON.parse(x.response)}catch(T){return m(T)}m(null,w,x.getResponseHeader("Cache-Control"),x.getResponseHeader("Expires"))}else{const w=new Blob([x.response],{type:x.getResponseHeader("Content-Type")});m(new Jt(x.status,x.statusText,f.url,w))}},x.send(f.body),{cancel:()=>x.abort()}}(o,i)},kt=function(o,i){return ze(le(o,{type:"arrayBuffer"}),i)};function $t(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const i=new URL(o),u=window.location;return i.protocol===u.protocol&&i.host===u.host}function mt(o,i,u){u[o]&&u[o].indexOf(i)!==-1||(u[o]=u[o]||[],u[o].push(i))}function yt(o,i,u){if(u&&u[o]){const f=u[o].indexOf(i);f!==-1&&u[o].splice(f,1)}}class Ot{constructor(i,u={}){le(this,u),this.type=i}}class Ht extends Ot{constructor(i,u={}){super("error",le({error:i},u))}}class mn{on(i,u){return this._listeners=this._listeners||{},mt(i,u,this._listeners),this}off(i,u){return yt(i,u,this._listeners),yt(i,u,this._oneTimeListeners),this}once(i,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},mt(i,u,this._oneTimeListeners),this):new Promise(f=>this.once(i,f))}fire(i,u){typeof i=="string"&&(i=new Ot(i,u||{}));const f=i.type;if(this.listens(f)){i.target=this;const m=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const T of m)T.call(this,i);const x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const T of x)yt(f,T,this._oneTimeListeners),T.call(this,i);const w=this._eventedParent;w&&(le(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(i))}else i instanceof Ht&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,u){return this._eventedParent=i,this._eventedParentData=u,this}}var Ne={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Xr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function un(o,i){const u={};for(const f in o)f!=="ref"&&(u[f]=o[f]);return Xr.forEach(f=>{f in i&&(u[f]=i[f])}),u}function hr(o,i){if(Array.isArray(o)){if(!Array.isArray(i)||o.length!==i.length)return!1;for(let u=0;u<o.length;u++)if(!hr(o[u],i[u]))return!1;return!0}if(typeof o=="object"&&o!==null&&i!==null){if(typeof i!="object"||Object.keys(o).length!==Object.keys(i).length)return!1;for(const u in o)if(!hr(o[u],i[u]))return!1;return!0}return o===i}const nr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Si(o,i,u){u.push({command:nr.addSource,args:[o,i[o]]})}function Ss(o,i,u){i.push({command:nr.removeSource,args:[o]}),u[o]=!0}function Ra(o,i,u,f){Ss(o,u,f),Si(o,i,u)}function Mu(o,i,u){let f;for(f in o[u])if(Object.prototype.hasOwnProperty.call(o[u],f)&&f!=="data"&&!hr(o[u][f],i[u][f]))return!1;for(f in i[u])if(Object.prototype.hasOwnProperty.call(i[u],f)&&f!=="data"&&!hr(o[u][f],i[u][f]))return!1;return!0}function Ts(o,i,u,f,m,x){let w;for(w in i=i||{},o=o||{})Object.prototype.hasOwnProperty.call(o,w)&&(hr(o[w],i[w])||u.push({command:x,args:[f,w,i[w],m]}));for(w in i)Object.prototype.hasOwnProperty.call(i,w)&&!Object.prototype.hasOwnProperty.call(o,w)&&(hr(o[w],i[w])||u.push({command:x,args:[f,w,i[w],m]}))}function uo(o){return o.id}function Do(o,i){return o[i.id]=i,o}class at{constructor(i,u,f,m){this.message=(i?`${i}: `:"")+f,m&&(this.identifier=m),u!=null&&u.__line__&&(this.line=u.__line__)}}function pa(o,...i){for(const u of i)for(const f in u)o[f]=u[f];return o}class Fr extends Error{constructor(i,u){super(u),this.message=u,this.key=i}}class Lo{constructor(i,u=[]){this.parent=i,this.bindings={};for(const[f,m]of u)this.bindings[f]=m}concat(i){return new Lo(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Na={kind:"null"},lt={kind:"number"},Wt={kind:"string"},Ft={kind:"boolean"},Xn={kind:"color"},ma={kind:"object"},qt={kind:"value"},Ba={kind:"collator"},oe={kind:"formatted"},G={kind:"padding"},H={kind:"resolvedImage"},te={kind:"variableAnchorOffsetCollection"};function ue(o,i){return{kind:"array",itemType:o,N:i}}function fe(o){if(o.kind==="array"){const i=fe(o.itemType);return typeof o.N=="number"?`array<${i}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${i}>`}return o.kind}const Ae=[Na,lt,Wt,Ft,Xn,oe,ma,ue(qt),G,H,te];function ye(o,i){if(i.kind==="error")return null;if(o.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!ye(o.itemType,i.itemType))&&(typeof o.N!="number"||o.N===i.N))return null}else{if(o.kind===i.kind)return null;if(o.kind==="value"){for(const u of Ae)if(!ye(u,i))return null}}return`Expected ${fe(o)} but found ${fe(i)} instead.`}function me(o,i){return i.some(u=>u.kind===o.kind)}function we(o,i){return i.some(u=>u==="null"?o===null:u==="array"?Array.isArray(o):u==="object"?o&&!Array.isArray(o)&&typeof o=="object":u===typeof o)}function Ve(o,i){return o.kind==="array"&&i.kind==="array"?o.itemType.kind===i.itemType.kind&&typeof o.N=="number":o.kind===i.kind}const Ge=.96422,Xe=.82521,It=4/29,Nt=6/29,xt=3*Nt*Nt,zt=Nt*Nt*Nt,Ut=Math.PI/180,fr=180/Math.PI;function vr(o){return(o%=360)<0&&(o+=360),o}function ar([o,i,u,f]){let m,x;const w=Nn((.2225045*(o=ir(o))+.7168786*(i=ir(i))+.0606169*(u=ir(u)))/1);o===i&&i===u?m=x=w:(m=Nn((.4360747*o+.3850649*i+.1430804*u)/Ge),x=Nn((.0139322*o+.0971045*i+.7141733*u)/Xe));const T=116*w-16;return[T<0?0:T,500*(m-w),200*(w-x),f]}function ir(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Nn(o){return o>zt?Math.pow(o,1/3):o/xt+It}function Sr([o,i,u,f]){let m=(o+16)/116,x=isNaN(i)?m:m+i/500,w=isNaN(u)?m:m-u/200;return m=1*Cn(m),x=Ge*Cn(x),w=Xe*Cn(w),[cn(3.1338561*x-1.6168667*m-.4906146*w),cn(-.9787684*x+1.9161415*m+.033454*w),cn(.0719453*x-.2289914*m+1.4052427*w),f]}function cn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Cn(o){return o>Nt?o*o*o:xt*(o-It)}function Bi(o){return parseInt(o.padEnd(2,o),16)/255}function qp(o,i){return Ps(i?o/100:o,0,1)}function Ps(o,i,u){return Math.min(Math.max(i,o),u)}function As(o){return!o.some(Number.isNaN)}const d_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class pr{constructor(i,u,f,m=1,x=!0){this.r=i,this.g=u,this.b=f,this.a=m,x||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[i,u,f,m]))}static parse(i){if(i instanceof pr)return i;if(typeof i!="string")return;const u=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=d_[f];if(m){const[w,T,C]=m;return[w/255,T/255,C/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const w=f.length<6?1:2;let T=1;return[Bi(f.slice(T,T+=w)),Bi(f.slice(T,T+=w)),Bi(f.slice(T,T+=w)),Bi(f.slice(T,T+w)||"ff")]}if(f.startsWith("rgb")){const w=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[T,C,M,L,U,Z,Y,Q,ne,he,pe,Se]=w,ge=[L||" ",Y||" ",he].join("");if(ge==="  "||ge==="  /"||ge===",,"||ge===",,,"){const Ee=[M,Z,ne].join(""),Oe=Ee==="%%%"?100:Ee===""?255:0;if(Oe){const Ze=[Ps(+C/Oe,0,1),Ps(+U/Oe,0,1),Ps(+Q/Oe,0,1),pe?qp(+pe,Se):1];if(As(Ze))return Ze}}return}}const x=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,T,C,M,L,U,Z,Y,Q]=x,ne=[C||" ",L||" ",Z].join("");if(ne==="  "||ne==="  /"||ne===",,"||ne===",,,"){const he=[+T,Ps(+M,0,100),Ps(+U,0,100),Y?qp(+Y,Q):1];if(As(he))return function([pe,Se,ge,Ee]){function Oe(Ze){const dt=(Ze+pe/30)%12,wt=Se*Math.min(ge,1-ge);return ge-wt*Math.max(-1,Math.min(dt-3,9-dt,1))}return pe=vr(pe),Se/=100,ge/=100,[Oe(0),Oe(8),Oe(4),Ee]}(he)}}}(i);return u?new pr(...u,!1):void 0}get rgb(){const{r:i,g:u,b:f,a:m}=this,x=m||1/0;return this.overwriteGetter("rgb",[i/x,u/x,f/x,m])}get hcl(){return this.overwriteGetter("hcl",function(i){const[u,f,m,x]=ar(i),w=Math.sqrt(f*f+m*m);return[Math.round(1e4*w)?vr(Math.atan2(m,f)*fr):NaN,w,u,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ar(this.rgb))}overwriteGetter(i,u){return Object.defineProperty(this,i,{value:u}),u}toString(){const[i,u,f,m]=this.rgb;return`rgba(${[i,u,f].map(x=>Math.round(255*x)).join(",")},${m})`}}pr.black=new pr(0,0,0,1),pr.white=new pr(1,1,1,1),pr.transparent=new pr(0,0,0,0),pr.red=new pr(1,0,0,1);class Nh{constructor(i,u,f){this.sensitivity=i?u?"variant":"case":u?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,u){return this.collator.compare(i,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ou{constructor(i,u,f,m,x){this.text=i,this.image=u,this.scale=f,this.fontStack=m,this.textColor=x}}class Bn{constructor(i){this.sections=i}static fromString(i){return new Bn([new Ou(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Bn?i:Bn.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class Ti{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Ti)return i;if(typeof i=="number")return new Ti([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const u of i)if(typeof u!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new Ti(i)}}toString(){return JSON.stringify(this.values)}}const p_=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Fi{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Fi)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let u=0;u<i.length;u+=2){const f=i[u],m=i[u+1];if(typeof f!="string"||!p_.has(f)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Fi(i)}}toString(){return JSON.stringify(this.values)}}class kn{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new kn({name:i,available:!1}):null}}function zu(o,i,u,f){return typeof o=="number"&&o>=0&&o<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof u=="number"&&u>=0&&u<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[o,i,u,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[o,i,u,f]:[o,i,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Es(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof pr||o instanceof Nh||o instanceof Bn||o instanceof Ti||o instanceof Fi||o instanceof kn)return!0;if(Array.isArray(o)){for(const i of o)if(!Es(i))return!1;return!0}if(typeof o=="object"){for(const i in o)if(!Es(o[i]))return!1;return!0}return!1}function Lr(o){if(o===null)return Na;if(typeof o=="string")return Wt;if(typeof o=="boolean")return Ft;if(typeof o=="number")return lt;if(o instanceof pr)return Xn;if(o instanceof Nh)return Ba;if(o instanceof Bn)return oe;if(o instanceof Ti)return G;if(o instanceof Fi)return te;if(o instanceof kn)return H;if(Array.isArray(o)){const i=o.length;let u;for(const f of o){const m=Lr(f);if(u){if(u===m)continue;u=qt;break}u=m}return ue(u||qt,i)}return ma}function lr(o){const i=typeof o;return o===null?"":i==="string"||i==="number"||i==="boolean"?String(o):o instanceof pr||o instanceof Bn||o instanceof Ti||o instanceof Fi||o instanceof kn?o.toString():JSON.stringify(o)}class jo{constructor(i,u){this.type=i,this.value=u}static parse(i,u){if(i.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Es(i[1]))return u.error("invalid value");const f=i[1];let m=Lr(f);const x=u.expectedType;return m.kind!=="array"||m.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(m=x),new jo(m,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Ur{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const Du={string:Wt,number:lt,boolean:Ft,object:ma};class Ui{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");let f,m=1;const x=i[0];if(x==="array"){let T,C;if(i.length>2){const M=i[1];if(typeof M!="string"||!(M in Du)||M==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);T=Du[M],m++}else T=qt;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return u.error('The length argument to "array" must be a positive integer literal',2);C=i[2],m++}f=ue(T,C)}else{if(!Du[x])throw new Error(`Types doesn't contain name = ${x}`);f=Du[x]}const w=[];for(;m<i.length;m++){const T=u.parse(i[m],m,qt);if(!T)return null;w.push(T)}return new Ui(f,w)}evaluate(i){for(let u=0;u<this.args.length;u++){const f=this.args[u].evaluate(i);if(!ye(this.type,Lr(f)))return f;if(u===this.args.length-1)throw new Ur(`Expected value to be of type ${fe(this.type)}, but found ${fe(Lr(f))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Bh={"to-boolean":Ft,"to-color":Xn,"to-number":lt,"to-string":Wt};class co{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const f=i[0];if(!Bh[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&i.length!==2)return u.error("Expected one argument.");const m=Bh[f],x=[];for(let w=1;w<i.length;w++){const T=u.parse(i[w],w,qt);if(!T)return null;x.push(T)}return new co(m,x)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let u,f;for(const m of this.args){if(u=m.evaluate(i),f=null,u instanceof pr)return u;if(typeof u=="string"){const x=i.parseColor(u);if(x)return x}else if(Array.isArray(u)&&(f=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:zu(u[0],u[1],u[2],u[3]),!f))return new pr(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Ur(f||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const f of this.args){u=f.evaluate(i);const m=Ti.parse(u);if(m)return m}throw new Ur(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const f of this.args){u=f.evaluate(i);const m=Fi.parse(u);if(m)return m}throw new Ur(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const f of this.args){if(u=f.evaluate(i),u===null)return 0;const m=Number(u);if(!isNaN(m))return m}throw new Ur(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return Bn.fromString(lr(this.args[0].evaluate(i)));case"resolvedImage":return kn.fromString(lr(this.args[0].evaluate(i)));default:return lr(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Gp=["Unknown","Point","LineString","Polygon"];class Fh{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Gp[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let u=this._parseColorCache[i];return u||(u=this._parseColorCache[i]=pr.parse(i)),u}}class Lu{constructor(i,u,f=[],m,x=new Lo,w=[]){this.registry=i,this.path=f,this.key=f.map(T=>`[${T}]`).join(""),this.scope=x,this.errors=w,this.expectedType=m,this._isConstant=u}parse(i,u,f,m,x={}){return u?this.concat(u,f,m)._parse(i,x):this._parse(i,x)}_parse(i,u){function f(m,x,w){return w==="assert"?new Ui(x,[m]):w==="coerce"?new co(x,[m]):m}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=i[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[m];if(x){let w=x.parse(i,this);if(!w)return null;if(this.expectedType){const T=this.expectedType,C=w.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||C.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string")if(T.kind!=="padding"||C.kind!=="value"&&C.kind!=="number"&&C.kind!=="array")if(T.kind!=="variableAnchorOffsetCollection"||C.kind!=="value"&&C.kind!=="array"){if(this.checkSubtype(T,C))return null}else w=f(w,T,u.typeAnnotation||"coerce");else w=f(w,T,u.typeAnnotation||"coerce");else w=f(w,T,u.typeAnnotation||"coerce");else w=f(w,T,u.typeAnnotation||"assert")}if(!(w instanceof jo)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){const T=new Fh;try{w=new jo(w.type,w.evaluate(T))}catch(C){return this.error(C.message),null}}return w}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,u,f){const m=typeof i=="number"?this.path.concat(i):this.path,x=f?this.scope.concat(f):this.scope;return new Lu(this.registry,this._isConstant,m,u||null,x,this.errors)}error(i,...u){const f=`${this.key}${u.map(m=>`[${m}]`).join("")}`;this.errors.push(new Fr(f,i))}checkSubtype(i,u){const f=ye(i,u);return f&&this.error(f),f}}class ju{constructor(i,u,f){this.type=Ba,this.locale=f,this.caseSensitive=i,this.diacriticSensitive=u}static parse(i,u){if(i.length!==2)return u.error("Expected one argument.");const f=i[1];if(typeof f!="object"||Array.isArray(f))return u.error("Collator options argument must be an object.");const m=u.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Ft);if(!m)return null;const x=u.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Ft);if(!x)return null;let w=null;return f.locale&&(w=u.parse(f.locale,1,Wt),!w)?null:new ju(m,x,w)}evaluate(i){return new Nh(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}const ho=8192;function Uh(o,i){o[0]=Math.min(o[0],i[0]),o[1]=Math.min(o[1],i[1]),o[2]=Math.max(o[2],i[0]),o[3]=Math.max(o[3],i[1])}function El(o,i){return!(o[0]<=i[0]||o[2]>=i[2]||o[1]<=i[1]||o[3]>=i[3])}function Wp(o,i){const u=(180+o[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,i.z);return[Math.round(u*m*ho),Math.round(f*m*ho)]}function m_(o,i,u){const f=o[0]-i[0],m=o[1]-i[1],x=o[0]-u[0],w=o[1]-u[1];return f*w-x*m==0&&f*x<=0&&m*w<=0}function Vh(o,i){let u=!1;for(let w=0,T=i.length;w<T;w++){const C=i[w];for(let M=0,L=C.length;M<L-1;M++){if(m_(o,C[M],C[M+1]))return!1;(m=C[M])[1]>(f=o)[1]!=(x=C[M+1])[1]>f[1]&&f[0]<(x[0]-m[0])*(f[1]-m[1])/(x[1]-m[1])+m[0]&&(u=!u)}}var f,m,x;return u}function qh(o,i){for(let u=0;u<i.length;u++)if(Vh(o,i[u]))return!0;return!1}function Zp(o,i,u,f){const m=f[0]-u[0],x=f[1]-u[1],w=(o[0]-u[0])*x-m*(o[1]-u[1]),T=(i[0]-u[0])*x-m*(i[1]-u[1]);return w>0&&T<0||w<0&&T>0}function g_(o,i,u){for(const M of u)for(let L=0;L<M.length-1;++L)if((T=[(w=M[L+1])[0]-(x=M[L])[0],w[1]-x[1]])[0]*(C=[(m=i)[0]-(f=o)[0],m[1]-f[1]])[1]-T[1]*C[0]!=0&&Zp(f,m,x,w)&&Zp(x,w,f,m))return!0;var f,m,x,w,T,C;return!1}function Hp(o,i){for(let u=0;u<o.length;++u)if(!Vh(o[u],i))return!1;for(let u=0;u<o.length-1;++u)if(g_(o[u],o[u+1],i))return!1;return!0}function Kp(o,i){for(let u=0;u<i.length;u++)if(Hp(o,i[u]))return!0;return!1}function $u(o,i,u){const f=[];for(let m=0;m<o.length;m++){const x=[];for(let w=0;w<o[m].length;w++){const T=Wp(o[m][w],u);Uh(i,T),x.push(T)}f.push(x)}return f}function Xp(o,i,u){const f=[];for(let m=0;m<o.length;m++){const x=$u(o[m],i,u);f.push(x)}return f}function Yp(o,i,u,f){if(o[0]<u[0]||o[0]>u[2]){const m=.5*f;let x=o[0]-u[0]>m?-f:u[0]-o[0]>m?f:0;x===0&&(x=o[0]-u[2]>m?-f:u[2]-o[0]>m?f:0),o[0]+=x}Uh(i,o)}function Gh(o,i,u,f){const m=Math.pow(2,f.z)*ho,x=[f.x*ho,f.y*ho],w=[];for(const T of o)for(const C of T){const M=[C.x+x[0],C.y+x[1]];Yp(M,i,u,m),w.push(M)}return w}function Wh(o,i,u,f){const m=Math.pow(2,f.z)*ho,x=[f.x*ho,f.y*ho],w=[];for(const C of o){const M=[];for(const L of C){const U=[L.x+x[0],L.y+x[1]];Uh(i,U),M.push(U)}w.push(M)}if(i[2]-i[0]<=m/2){(T=i)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const C of w)for(const M of C)Yp(M,i,u,m)}var T;return w}class $o{constructor(i,u){this.type=Ft,this.geojson=i,this.geometries=u}static parse(i,u){if(i.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Es(i[1])){const f=i[1];if(f.type==="FeatureCollection")for(let m=0;m<f.features.length;++m){const x=f.features[m].geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new $o(f,f.features[m].geometry)}else if(f.type==="Feature"){const m=f.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new $o(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new $o(f,f)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(u,f){const m=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(f.type==="Polygon"){const T=$u(f.coordinates,x,w),C=Gh(u.geometry(),m,x,w);if(!El(m,x))return!1;for(const M of C)if(!Vh(M,T))return!1}if(f.type==="MultiPolygon"){const T=Xp(f.coordinates,x,w),C=Gh(u.geometry(),m,x,w);if(!El(m,x))return!1;for(const M of C)if(!qh(M,T))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(u,f){const m=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(f.type==="Polygon"){const T=$u(f.coordinates,x,w),C=Wh(u.geometry(),m,x,w);if(!El(m,x))return!1;for(const M of C)if(!Hp(M,T))return!1}if(f.type==="MultiPolygon"){const T=Xp(f.coordinates,x,w),C=Wh(u.geometry(),m,x,w);if(!El(m,x))return!1;for(const M of C)if(!Kp(M,T))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Ru{constructor(i,u){this.type=u.type,this.name=i,this.boundExpression=u}static parse(i,u){if(i.length!==2||typeof i[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const f=i[1];return u.scope.has(f)?new Ru(f,u.scope.get(f)):u.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Vi{constructor(i,u,f,m){this.name=i,this.type=u,this._evaluate=f,this.args=m}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,u){const f=i[0],m=Vi.definitions[f];if(!m)return u.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(m)?m[0]:m.type,w=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,T=w.filter(([M])=>!Array.isArray(M)||M.length===i.length-1);let C=null;for(const[M,L]of T){C=new Lu(u.registry,Nu,u.path,null,u.scope);const U=[];let Z=!1;for(let Y=1;Y<i.length;Y++){const Q=i[Y],ne=Array.isArray(M)?M[Y-1]:M.type,he=C.parse(Q,1+U.length,ne);if(!he){Z=!0;break}U.push(he)}if(!Z)if(Array.isArray(M)&&M.length!==U.length)C.error(`Expected ${M.length} arguments, but found ${U.length} instead.`);else{for(let Y=0;Y<U.length;Y++){const Q=Array.isArray(M)?M[Y]:M.type,ne=U[Y];C.concat(Y+1).checkSubtype(Q,ne.type)}if(C.errors.length===0)return new Vi(f,x,L,U)}}if(T.length===1)u.errors.push(...C.errors);else{const M=(T.length?T:w).map(([U])=>{return Z=U,Array.isArray(Z)?`(${Z.map(fe).join(", ")})`:`(${fe(Z.type)}...)`;var Z}).join(" | "),L=[];for(let U=1;U<i.length;U++){const Z=u.parse(i[U],1+L.length);if(!Z)return null;L.push(fe(Z.type))}u.error(`Expected arguments of type ${M}, but found (${L.join(", ")}) instead.`)}return null}static register(i,u){Vi.definitions=u;for(const f in u)i[f]=Vi}}function Nu(o){if(o instanceof Ru)return Nu(o.boundExpression);if(o instanceof Vi&&o.name==="error"||o instanceof ju||o instanceof $o)return!1;const i=o instanceof co||o instanceof Ui;let u=!0;return o.eachChild(f=>{u=i?u&&Nu(f):u&&f instanceof jo}),!!u&&Bu(o)&&Fu(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Bu(o){if(o instanceof Vi&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof $o)return!1;let i=!0;return o.eachChild(u=>{i&&!Bu(u)&&(i=!1)}),i}function Cl(o){if(o instanceof Vi&&o.name==="feature-state")return!1;let i=!0;return o.eachChild(u=>{i&&!Cl(u)&&(i=!1)}),i}function Fu(o,i){if(o instanceof Vi&&i.indexOf(o.name)>=0)return!1;let u=!0;return o.eachChild(f=>{u&&!Fu(f,i)&&(u=!1)}),u}function Cs(o,i){const u=o.length-1;let f,m,x=0,w=u,T=0;for(;x<=w;)if(T=Math.floor((x+w)/2),f=o[T],m=o[T+1],f<=i){if(T===u||i<m)return T;x=T+1}else{if(!(f>i))throw new Ur("Input is not a number.");w=T-1}return 0}class fo{constructor(i,u,f){this.type=i,this.input=u,this.labels=[],this.outputs=[];for(const[m,x]of f)this.labels.push(m),this.outputs.push(x)}static parse(i,u){if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");const f=u.parse(i[1],1,lt);if(!f)return null;const m=[];let x=null;u.expectedType&&u.expectedType.kind!=="value"&&(x=u.expectedType);for(let w=1;w<i.length;w+=2){const T=w===1?-1/0:i[w],C=i[w+1],M=w,L=w+1;if(typeof T!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(m.length&&m[m.length-1][0]>=T)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);const U=u.parse(C,L,x);if(!U)return null;x=x||U.type,m.push([T,U])}return new fo(x,f,m)}evaluate(i){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(i);const m=this.input.evaluate(i);if(m<=u[0])return f[0].evaluate(i);const x=u.length;return m>=u[x-1]?f[x-1].evaluate(i):f[Cs(u,m)].evaluate(i)}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function tr(o,i,u){return o+u*(i-o)}function Uu(o,i,u){return o.map((f,m)=>tr(f,i[m],u))}const Pi={number:tr,color:function(o,i,u,f="rgb"){switch(f){case"rgb":{const[m,x,w,T]=Uu(o.rgb,i.rgb,u);return new pr(m,x,w,T,!1)}case"hcl":{const[m,x,w,T]=o.hcl,[C,M,L,U]=i.hcl;let Z,Y;if(isNaN(m)||isNaN(C))isNaN(m)?isNaN(C)?Z=NaN:(Z=C,w!==1&&w!==0||(Y=M)):(Z=m,L!==1&&L!==0||(Y=x));else{let Se=C-m;C>m&&Se>180?Se-=360:C<m&&m-C>180&&(Se+=360),Z=m+u*Se}const[Q,ne,he,pe]=function([Se,ge,Ee,Oe]){return Se=isNaN(Se)?0:Se*Ut,Sr([Ee,Math.cos(Se)*ge,Math.sin(Se)*ge,Oe])}([Z,Y??tr(x,M,u),tr(w,L,u),tr(T,U,u)]);return new pr(Q,ne,he,pe,!1)}case"lab":{const[m,x,w,T]=Sr(Uu(o.lab,i.lab,u));return new pr(m,x,w,T,!1)}}},array:Uu,padding:function(o,i,u){return new Ti(Uu(o.values,i.values,u))},variableAnchorOffsetCollection:function(o,i,u){const f=o.values,m=i.values;if(f.length!==m.length)throw new Ur(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${i.toString()}`);const x=[];for(let w=0;w<f.length;w+=2){if(f[w]!==m[w])throw new Ur(`Cannot interpolate values containing mismatched anchors. from[${w}]: ${f[w]}, to[${w}]: ${m[w]}`);x.push(f[w]);const[T,C]=f[w+1],[M,L]=m[w+1];x.push([tr(T,M,u),tr(C,L,u)])}return new Fi(x)}};class Ai{constructor(i,u,f,m,x){this.type=i,this.operator=u,this.interpolation=f,this.input=m,this.labels=[],this.outputs=[];for(const[w,T]of x)this.labels.push(w),this.outputs.push(T)}static interpolationFactor(i,u,f,m){let x=0;if(i.name==="exponential")x=Zh(u,i.base,f,m);else if(i.name==="linear")x=Zh(u,1,f,m);else if(i.name==="cubic-bezier"){const w=i.controlPoints;x=new j(w[0],w[1],w[2],w[3]).solve(Zh(u,1,f,m))}return x}static parse(i,u){let[f,m,x,...w]=i;if(!Array.isArray(m)||m.length===0)return u.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const M=m[1];if(typeof M!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:M}}else{if(m[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const M=m.slice(1);if(M.length!==4||M.some(L=>typeof L!="number"||L<0||L>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:M}}}if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(x=u.parse(x,2,lt),!x)return null;const T=[];let C=null;f==="interpolate-hcl"||f==="interpolate-lab"?C=Xn:u.expectedType&&u.expectedType.kind!=="value"&&(C=u.expectedType);for(let M=0;M<w.length;M+=2){const L=w[M],U=w[M+1],Z=M+3,Y=M+4;if(typeof L!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(T.length&&T[T.length-1][0]>=L)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const Q=u.parse(U,Y,C);if(!Q)return null;C=C||Q.type,T.push([L,Q])}return Ve(C,lt)||Ve(C,Xn)||Ve(C,G)||Ve(C,te)||Ve(C,ue(lt))?new Ai(C,f,m,x,T):u.error(`Type ${fe(C)} is not interpolatable.`)}evaluate(i){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(i);const m=this.input.evaluate(i);if(m<=u[0])return f[0].evaluate(i);const x=u.length;if(m>=u[x-1])return f[x-1].evaluate(i);const w=Cs(u,m),T=Ai.interpolationFactor(this.interpolation,m,u[w],u[w+1]),C=f[w].evaluate(i),M=f[w+1].evaluate(i);switch(this.operator){case"interpolate":return Pi[this.type.kind](C,M,T);case"interpolate-hcl":return Pi.color(C,M,T,"hcl");case"interpolate-lab":return Pi.color(C,M,T,"lab")}}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function Zh(o,i,u,f){const m=f-u,x=o-u;return m===0?0:i===1?x/m:(Math.pow(i,x)-1)/(Math.pow(i,m)-1)}class Vu{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expectected at least one argument.");let f=null;const m=u.expectedType;m&&m.kind!=="value"&&(f=m);const x=[];for(const T of i.slice(1)){const C=u.parse(T,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!C)return null;f=f||C.type,x.push(C)}if(!f)throw new Error("No output type");const w=m&&x.some(T=>ye(m,T.type));return new Vu(w?qt:f,x)}evaluate(i){let u,f=null,m=0;for(const x of this.args)if(m++,f=x.evaluate(i),f&&f instanceof kn&&!f.available&&(u||(u=f.name),f=null,m===this.args.length&&(f=u)),f!==null)break;return f}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}class qu{constructor(i,u){this.type=u.type,this.bindings=[].concat(i),this.result=u}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const u of this.bindings)i(u[1]);i(this.result)}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const f=[];for(let x=1;x<i.length-1;x+=2){const w=i[x];if(typeof w!="string")return u.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return u.error("Variable names must contain only alphanumeric characters or '_'.",x);const T=u.parse(i[x+1],x+1);if(!T)return null;f.push([w,T])}const m=u.parse(i[i.length-1],i.length-1,u.expectedType,f);return m?new qu(f,m):null}outputDefined(){return this.result.outputDefined()}}class Hh{constructor(i,u,f){this.type=i,this.index=u,this.input=f}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,lt),m=u.parse(i[2],2,ue(u.expectedType||qt));return f&&m?new Hh(m.type.itemType,f,m):null}evaluate(i){const u=this.index.evaluate(i),f=this.input.evaluate(i);if(u<0)throw new Ur(`Array index out of bounds: ${u} < 0.`);if(u>=f.length)throw new Ur(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u!==Math.floor(u))throw new Ur(`Array index must be an integer, but found ${u} instead.`);return f[u]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Kh{constructor(i,u){this.type=Ft,this.needle=i,this.haystack=u}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,qt),m=u.parse(i[2],2,qt);return f&&m?me(f.type,[Ft,Wt,lt,Na,qt])?new Kh(f,m):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${fe(f.type)} instead`):null}evaluate(i){const u=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!f)return!1;if(!we(u,["boolean","string","number","null"]))throw new Ur(`Expected first argument to be of type boolean, string, number or null, but found ${fe(Lr(u))} instead.`);if(!we(f,["string","array"]))throw new Ur(`Expected second argument to be of type array or string, but found ${fe(Lr(f))} instead.`);return f.indexOf(u)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class Gu{constructor(i,u,f){this.type=lt,this.needle=i,this.haystack=u,this.fromIndex=f}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,qt),m=u.parse(i[2],2,qt);if(!f||!m)return null;if(!me(f.type,[Ft,Wt,lt,Na,qt]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${fe(f.type)} instead`);if(i.length===4){const x=u.parse(i[3],3,lt);return x?new Gu(f,m,x):null}return new Gu(f,m)}evaluate(i){const u=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!we(u,["boolean","string","number","null"]))throw new Ur(`Expected first argument to be of type boolean, string, number or null, but found ${fe(Lr(u))} instead.`);if(!we(f,["string","array"]))throw new Ur(`Expected second argument to be of type array or string, but found ${fe(Lr(f))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(i);return f.indexOf(u,m)}return f.indexOf(u)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Xh{constructor(i,u,f,m,x,w){this.inputType=i,this.type=u,this.input=f,this.cases=m,this.outputs=x,this.otherwise=w}static parse(i,u){if(i.length<5)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return u.error("Expected an even number of arguments.");let f,m;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);const x={},w=[];for(let M=2;M<i.length-1;M+=2){let L=i[M];const U=i[M+1];Array.isArray(L)||(L=[L]);const Z=u.concat(M);if(L.length===0)return Z.error("Expected at least one branch label.");for(const Q of L){if(typeof Q!="number"&&typeof Q!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return Z.error("Numeric branch labels must be integer values.");if(f){if(Z.checkSubtype(f,Lr(Q)))return null}else f=Lr(Q);if(x[String(Q)]!==void 0)return Z.error("Branch labels must be unique.");x[String(Q)]=w.length}const Y=u.parse(U,M,m);if(!Y)return null;m=m||Y.type,w.push(Y)}const T=u.parse(i[1],1,qt);if(!T)return null;const C=u.parse(i[i.length-1],i.length-1,m);return C?T.type.kind!=="value"&&u.concat(1).checkSubtype(f,T.type)?null:new Xh(f,m,T,x,w,C):null}evaluate(i){const u=this.input.evaluate(i);return(Lr(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class Yh{constructor(i,u,f){this.type=i,this.branches=u,this.otherwise=f}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return u.error("Expected an odd number of arguments.");let f;u.expectedType&&u.expectedType.kind!=="value"&&(f=u.expectedType);const m=[];for(let w=1;w<i.length-1;w+=2){const T=u.parse(i[w],w,Ft);if(!T)return null;const C=u.parse(i[w+1],w+1,f);if(!C)return null;m.push([T,C]),f=f||C.type}const x=u.parse(i[i.length-1],i.length-1,f);if(!x)return null;if(!f)throw new Error("Can't infer output type");return new Yh(f,m,x)}evaluate(i){for(const[u,f]of this.branches)if(u.evaluate(i))return f.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[u,f]of this.branches)i(u),i(f);i(this.otherwise)}outputDefined(){return this.branches.every(([i,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class Wu{constructor(i,u,f,m){this.type=i,this.input=u,this.beginIndex=f,this.endIndex=m}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,qt),m=u.parse(i[2],2,lt);if(!f||!m)return null;if(!me(f.type,[ue(qt),Wt,qt]))return u.error(`Expected first argument to be of type array or string, but found ${fe(f.type)} instead`);if(i.length===4){const x=u.parse(i[3],3,lt);return x?new Wu(f.type,f,m,x):null}return new Wu(f.type,f,m)}evaluate(i){const u=this.input.evaluate(i),f=this.beginIndex.evaluate(i);if(!we(u,["string","array"]))throw new Ur(`Expected first argument to be of type array or string, but found ${fe(Lr(u))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(i);return u.slice(f,m)}return u.slice(f)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function Jp(o,i){return o==="=="||o==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Qp(o,i,u,f){return f.compare(i,u)===0}function ks(o,i,u){const f=o!=="=="&&o!=="!=";return class fL{constructor(x,w,T){this.type=Ft,this.lhs=x,this.rhs=w,this.collator=T,this.hasUntypedArgument=x.type.kind==="value"||w.type.kind==="value"}static parse(x,w){if(x.length!==3&&x.length!==4)return w.error("Expected two or three arguments.");const T=x[0];let C=w.parse(x[1],1,qt);if(!C)return null;if(!Jp(T,C.type))return w.concat(1).error(`"${T}" comparisons are not supported for type '${fe(C.type)}'.`);let M=w.parse(x[2],2,qt);if(!M)return null;if(!Jp(T,M.type))return w.concat(2).error(`"${T}" comparisons are not supported for type '${fe(M.type)}'.`);if(C.type.kind!==M.type.kind&&C.type.kind!=="value"&&M.type.kind!=="value")return w.error(`Cannot compare types '${fe(C.type)}' and '${fe(M.type)}'.`);f&&(C.type.kind==="value"&&M.type.kind!=="value"?C=new Ui(M.type,[C]):C.type.kind!=="value"&&M.type.kind==="value"&&(M=new Ui(C.type,[M])));let L=null;if(x.length===4){if(C.type.kind!=="string"&&M.type.kind!=="string"&&C.type.kind!=="value"&&M.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(L=w.parse(x[3],3,Ba),!L)return null}return new fL(C,M,L)}evaluate(x){const w=this.lhs.evaluate(x),T=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){const C=Lr(w),M=Lr(T);if(C.kind!==M.kind||C.kind!=="string"&&C.kind!=="number")throw new Ur(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${C.kind}, ${M.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const C=Lr(w),M=Lr(T);if(C.kind!=="string"||M.kind!=="string")return i(x,w,T)}return this.collator?u(x,w,T,this.collator.evaluate(x)):i(x,w,T)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const y_=ks("==",function(o,i,u){return i===u},Qp),v_=ks("!=",function(o,i,u){return i!==u},function(o,i,u,f){return!Qp(0,i,u,f)}),__=ks("<",function(o,i,u){return i<u},function(o,i,u,f){return f.compare(i,u)<0}),x_=ks(">",function(o,i,u){return i>u},function(o,i,u,f){return f.compare(i,u)>0}),b_=ks("<=",function(o,i,u){return i<=u},function(o,i,u,f){return f.compare(i,u)<=0}),w_=ks(">=",function(o,i,u){return i>=u},function(o,i,u,f){return f.compare(i,u)>=0});class Jh{constructor(i,u,f,m,x){this.type=Wt,this.number=i,this.locale=u,this.currency=f,this.minFractionDigits=m,this.maxFractionDigits=x}static parse(i,u){if(i.length!==3)return u.error("Expected two arguments.");const f=u.parse(i[1],1,lt);if(!f)return null;const m=i[2];if(typeof m!="object"||Array.isArray(m))return u.error("NumberFormat options argument must be an object.");let x=null;if(m.locale&&(x=u.parse(m.locale,1,Wt),!x))return null;let w=null;if(m.currency&&(w=u.parse(m.currency,1,Wt),!w))return null;let T=null;if(m["min-fraction-digits"]&&(T=u.parse(m["min-fraction-digits"],1,lt),!T))return null;let C=null;return m["max-fraction-digits"]&&(C=u.parse(m["max-fraction-digits"],1,lt),!C)?null:new Jh(f,x,w,T,C)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class Zu{constructor(i){this.type=oe,this.sections=i}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const f=i[1];if(!Array.isArray(f)&&typeof f=="object")return u.error("First argument must be an image or text section.");const m=[];let x=!1;for(let w=1;w<=i.length-1;++w){const T=i[w];if(x&&typeof T=="object"&&!Array.isArray(T)){x=!1;let C=null;if(T["font-scale"]&&(C=u.parse(T["font-scale"],1,lt),!C))return null;let M=null;if(T["text-font"]&&(M=u.parse(T["text-font"],1,ue(Wt)),!M))return null;let L=null;if(T["text-color"]&&(L=u.parse(T["text-color"],1,Xn),!L))return null;const U=m[m.length-1];U.scale=C,U.font=M,U.textColor=L}else{const C=u.parse(i[w],1,qt);if(!C)return null;const M=C.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,m.push({content:C,scale:null,font:null,textColor:null})}}return new Zu(m)}evaluate(i){return new Bn(this.sections.map(u=>{const f=u.content.evaluate(i);return Lr(f)===H?new Ou("",f,null,null,null):new Ou(lr(f),null,u.scale?u.scale.evaluate(i):null,u.font?u.font.evaluate(i).join(","):null,u.textColor?u.textColor.evaluate(i):null)}))}eachChild(i){for(const u of this.sections)i(u.content),u.scale&&i(u.scale),u.font&&i(u.font),u.textColor&&i(u.textColor)}outputDefined(){return!1}}class Qh{constructor(i){this.type=H,this.input=i}static parse(i,u){if(i.length!==2)return u.error("Expected two arguments.");const f=u.parse(i[1],1,Wt);return f?new Qh(f):u.error("No image name provided.")}evaluate(i){const u=this.input.evaluate(i),f=kn.fromString(u);return f&&i.availableImages&&(f.available=i.availableImages.indexOf(u)>-1),f}eachChild(i){i(this.input)}outputDefined(){return!1}}class ef{constructor(i){this.type=lt,this.input=i}static parse(i,u){if(i.length!==2)return u.error(`Expected 1 argument, but found ${i.length-1} instead.`);const f=u.parse(i[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${fe(f.type)} instead.`):new ef(f):null}evaluate(i){const u=this.input.evaluate(i);if(typeof u=="string"||Array.isArray(u))return u.length;throw new Ur(`Expected value to be of type string or array, but found ${fe(Lr(u))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const Is={"==":y_,"!=":v_,">":x_,"<":__,">=":w_,"<=":b_,array:Ui,at:Hh,boolean:Ui,case:Yh,coalesce:Vu,collator:ju,format:Zu,image:Qh,in:Kh,"index-of":Gu,interpolate:Ai,"interpolate-hcl":Ai,"interpolate-lab":Ai,length:ef,let:qu,literal:jo,match:Xh,number:Ui,"number-format":Jh,object:Ui,slice:Wu,step:fo,string:Ui,"to-boolean":co,"to-color":co,"to-number":co,"to-string":co,var:Ru,within:$o};function em(o,[i,u,f,m]){i=i.evaluate(o),u=u.evaluate(o),f=f.evaluate(o);const x=m?m.evaluate(o):1,w=zu(i,u,f,x);if(w)throw new Ur(w);return new pr(i/255,u/255,f/255,x,!1)}function tm(o,i){return o in i}function tf(o,i){const u=i[o];return u===void 0?null:u}function Ro(o){return{type:o}}function rm(o){return{result:"success",value:o}}function po(o){return{result:"error",value:o}}function Ms(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function nm(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function rf(o){return!!o.expression&&o.expression.interpolated}function ur(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function jr(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function S_(o){return o}function rr(o,i){const u=i.type==="color",f=o.stops&&typeof o.stops[0][0]=="object",m=f||!(f||o.property!==void 0),x=o.type||(rf(i)?"exponential":"interval");if(u||i.type==="padding"){const L=u?pr.parse:Ti.parse;(o=pa({},o)).stops&&(o.stops=o.stops.map(U=>[U[0],L(U[1])])),o.default=L(o.default?o.default:i.default)}if(o.colorSpace&&(w=o.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var w;let T,C,M;if(x==="exponential")T=kl;else if(x==="interval")T=Or;else if(x==="categorical"){T=$r,C=Object.create(null);for(const L of o.stops)C[L[0]]=L[1];M=typeof o.stops[0][0]}else{if(x!=="identity")throw new Error(`Unknown function type "${x}"`);T=im}if(f){const L={},U=[];for(let Q=0;Q<o.stops.length;Q++){const ne=o.stops[Q],he=ne[0].zoom;L[he]===void 0&&(L[he]={zoom:he,type:o.type,property:o.property,default:o.default,stops:[]},U.push(he)),L[he].stops.push([ne[0].value,ne[1]])}const Z=[];for(const Q of U)Z.push([L[Q].zoom,rr(L[Q],i)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:Ai.interpolationFactor.bind(void 0,Y),zoomStops:Z.map(Q=>Q[0]),evaluate:({zoom:Q},ne)=>kl({stops:Z,base:o.base},i,Q).evaluate(Q,ne)}}if(m){const L=x==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:Ai.interpolationFactor.bind(void 0,L),zoomStops:o.stops.map(U=>U[0]),evaluate:({zoom:U})=>T(o,i,U,C,M)}}return{kind:"source",evaluate(L,U){const Z=U&&U.properties?U.properties[o.property]:void 0;return Z===void 0?No(o.default,i.default):T(o,i,Z,C,M)}}}function No(o,i,u){return o!==void 0?o:i!==void 0?i:u!==void 0?u:void 0}function $r(o,i,u,f,m){return No(typeof u===m?f[u]:void 0,o.default,i.default)}function Or(o,i,u){if(ur(u)!=="number")return No(o.default,i.default);const f=o.stops.length;if(f===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[f-1][0])return o.stops[f-1][1];const m=Cs(o.stops.map(x=>x[0]),u);return o.stops[m][1]}function kl(o,i,u){const f=o.base!==void 0?o.base:1;if(ur(u)!=="number")return No(o.default,i.default);const m=o.stops.length;if(m===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[m-1][0])return o.stops[m-1][1];const x=Cs(o.stops.map(L=>L[0]),u),w=function(L,U,Z,Y){const Q=Y-Z,ne=L-Z;return Q===0?0:U===1?ne/Q:(Math.pow(U,ne)-1)/(Math.pow(U,Q)-1)}(u,f,o.stops[x][0],o.stops[x+1][0]),T=o.stops[x][1],C=o.stops[x+1][1],M=Pi[i.type]||S_;return typeof T.evaluate=="function"?{evaluate(...L){const U=T.evaluate.apply(void 0,L),Z=C.evaluate.apply(void 0,L);if(U!==void 0&&Z!==void 0)return M(U,Z,w,o.colorSpace)}}:M(T,C,w,o.colorSpace)}function im(o,i,u){switch(i.type){case"color":u=pr.parse(u);break;case"formatted":u=Bn.fromString(u.toString());break;case"resolvedImage":u=kn.fromString(u.toString());break;case"padding":u=Ti.parse(u);break;default:ur(u)===i.type||i.type==="enum"&&i.values[u]||(u=void 0)}return No(u,o.default,i.default)}Vi.register(Is,{error:[{kind:"error"},[Wt],(o,[i])=>{throw new Ur(i.evaluate(o))}],typeof:[Wt,[qt],(o,[i])=>fe(Lr(i.evaluate(o)))],"to-rgba":[ue(lt,4),[Xn],(o,[i])=>{const[u,f,m,x]=i.evaluate(o).rgb;return[255*u,255*f,255*m,x]}],rgb:[Xn,[lt,lt,lt],em],rgba:[Xn,[lt,lt,lt,lt],em],has:{type:Ft,overloads:[[[Wt],(o,[i])=>tm(i.evaluate(o),o.properties())],[[Wt,ma],(o,[i,u])=>tm(i.evaluate(o),u.evaluate(o))]]},get:{type:qt,overloads:[[[Wt],(o,[i])=>tf(i.evaluate(o),o.properties())],[[Wt,ma],(o,[i,u])=>tf(i.evaluate(o),u.evaluate(o))]]},"feature-state":[qt,[Wt],(o,[i])=>tf(i.evaluate(o),o.featureState||{})],properties:[ma,[],o=>o.properties()],"geometry-type":[Wt,[],o=>o.geometryType()],id:[qt,[],o=>o.id()],zoom:[lt,[],o=>o.globals.zoom],"heatmap-density":[lt,[],o=>o.globals.heatmapDensity||0],"line-progress":[lt,[],o=>o.globals.lineProgress||0],accumulated:[qt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[lt,Ro(lt),(o,i)=>{let u=0;for(const f of i)u+=f.evaluate(o);return u}],"*":[lt,Ro(lt),(o,i)=>{let u=1;for(const f of i)u*=f.evaluate(o);return u}],"-":{type:lt,overloads:[[[lt,lt],(o,[i,u])=>i.evaluate(o)-u.evaluate(o)],[[lt],(o,[i])=>-i.evaluate(o)]]},"/":[lt,[lt,lt],(o,[i,u])=>i.evaluate(o)/u.evaluate(o)],"%":[lt,[lt,lt],(o,[i,u])=>i.evaluate(o)%u.evaluate(o)],ln2:[lt,[],()=>Math.LN2],pi:[lt,[],()=>Math.PI],e:[lt,[],()=>Math.E],"^":[lt,[lt,lt],(o,[i,u])=>Math.pow(i.evaluate(o),u.evaluate(o))],sqrt:[lt,[lt],(o,[i])=>Math.sqrt(i.evaluate(o))],log10:[lt,[lt],(o,[i])=>Math.log(i.evaluate(o))/Math.LN10],ln:[lt,[lt],(o,[i])=>Math.log(i.evaluate(o))],log2:[lt,[lt],(o,[i])=>Math.log(i.evaluate(o))/Math.LN2],sin:[lt,[lt],(o,[i])=>Math.sin(i.evaluate(o))],cos:[lt,[lt],(o,[i])=>Math.cos(i.evaluate(o))],tan:[lt,[lt],(o,[i])=>Math.tan(i.evaluate(o))],asin:[lt,[lt],(o,[i])=>Math.asin(i.evaluate(o))],acos:[lt,[lt],(o,[i])=>Math.acos(i.evaluate(o))],atan:[lt,[lt],(o,[i])=>Math.atan(i.evaluate(o))],min:[lt,Ro(lt),(o,i)=>Math.min(...i.map(u=>u.evaluate(o)))],max:[lt,Ro(lt),(o,i)=>Math.max(...i.map(u=>u.evaluate(o)))],abs:[lt,[lt],(o,[i])=>Math.abs(i.evaluate(o))],round:[lt,[lt],(o,[i])=>{const u=i.evaluate(o);return u<0?-Math.round(-u):Math.round(u)}],floor:[lt,[lt],(o,[i])=>Math.floor(i.evaluate(o))],ceil:[lt,[lt],(o,[i])=>Math.ceil(i.evaluate(o))],"filter-==":[Ft,[Wt,qt],(o,[i,u])=>o.properties()[i.value]===u.value],"filter-id-==":[Ft,[qt],(o,[i])=>o.id()===i.value],"filter-type-==":[Ft,[Wt],(o,[i])=>o.geometryType()===i.value],"filter-<":[Ft,[Wt,qt],(o,[i,u])=>{const f=o.properties()[i.value],m=u.value;return typeof f==typeof m&&f<m}],"filter-id-<":[Ft,[qt],(o,[i])=>{const u=o.id(),f=i.value;return typeof u==typeof f&&u<f}],"filter->":[Ft,[Wt,qt],(o,[i,u])=>{const f=o.properties()[i.value],m=u.value;return typeof f==typeof m&&f>m}],"filter-id->":[Ft,[qt],(o,[i])=>{const u=o.id(),f=i.value;return typeof u==typeof f&&u>f}],"filter-<=":[Ft,[Wt,qt],(o,[i,u])=>{const f=o.properties()[i.value],m=u.value;return typeof f==typeof m&&f<=m}],"filter-id-<=":[Ft,[qt],(o,[i])=>{const u=o.id(),f=i.value;return typeof u==typeof f&&u<=f}],"filter->=":[Ft,[Wt,qt],(o,[i,u])=>{const f=o.properties()[i.value],m=u.value;return typeof f==typeof m&&f>=m}],"filter-id->=":[Ft,[qt],(o,[i])=>{const u=o.id(),f=i.value;return typeof u==typeof f&&u>=f}],"filter-has":[Ft,[qt],(o,[i])=>i.value in o.properties()],"filter-has-id":[Ft,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Ft,[ue(Wt)],(o,[i])=>i.value.indexOf(o.geometryType())>=0],"filter-id-in":[Ft,[ue(qt)],(o,[i])=>i.value.indexOf(o.id())>=0],"filter-in-small":[Ft,[Wt,ue(qt)],(o,[i,u])=>u.value.indexOf(o.properties()[i.value])>=0],"filter-in-large":[Ft,[Wt,ue(qt)],(o,[i,u])=>function(f,m,x,w){for(;x<=w;){const T=x+w>>1;if(m[T]===f)return!0;m[T]>f?w=T-1:x=T+1}return!1}(o.properties()[i.value],u.value,0,u.value.length-1)],all:{type:Ft,overloads:[[[Ft,Ft],(o,[i,u])=>i.evaluate(o)&&u.evaluate(o)],[Ro(Ft),(o,i)=>{for(const u of i)if(!u.evaluate(o))return!1;return!0}]]},any:{type:Ft,overloads:[[[Ft,Ft],(o,[i,u])=>i.evaluate(o)||u.evaluate(o)],[Ro(Ft),(o,i)=>{for(const u of i)if(u.evaluate(o))return!0;return!1}]]},"!":[Ft,[Ft],(o,[i])=>!i.evaluate(o)],"is-supported-script":[Ft,[Wt],(o,[i])=>{const u=o.globals&&o.globals.isSupportedScript;return!u||u(i.evaluate(o))}],upcase:[Wt,[Wt],(o,[i])=>i.evaluate(o).toUpperCase()],downcase:[Wt,[Wt],(o,[i])=>i.evaluate(o).toLowerCase()],concat:[Wt,Ro(qt),(o,i)=>i.map(u=>lr(u.evaluate(o))).join("")],"resolved-locale":[Wt,[Ba],(o,[i])=>i.evaluate(o).resolvedLocale()]});class nf{constructor(i,u){var f;this.expression=i,this._warningHistory={},this._evaluator=new Fh,this._defaultValue=u?(f=u).type==="color"&&jr(f.default)?new pr(0,0,0,0):f.type==="color"?pr.parse(f.default)||null:f.type==="padding"?Ti.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?Fi.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(i,u,f,m,x,w){return this._evaluator.globals=i,this._evaluator.feature=u,this._evaluator.featureState=f,this._evaluator.canonical=m,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(i,u,f,m,x,w){this._evaluator.globals=i,this._evaluator.feature=u||null,this._evaluator.featureState=f||null,this._evaluator.canonical=m,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new Ur(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function Hu(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Is}function Ku(o,i){const u=new Lu(Is,Nu,[],i?function(m){const x={color:Xn,string:Wt,number:lt,enum:Wt,boolean:Ft,formatted:oe,padding:G,resolvedImage:H,variableAnchorOffsetCollection:te};return m.type==="array"?ue(x[m.value]||qt,m.length):x[m.type]}(i):void 0),f=u.parse(o,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?rm(new nf(f,i)):po(u.errors)}class af{constructor(i,u){this.kind=i,this._styleExpression=u,this.isStateDependent=i!=="constant"&&!Cl(u.expression)}evaluateWithoutErrorHandling(i,u,f,m,x,w){return this._styleExpression.evaluateWithoutErrorHandling(i,u,f,m,x,w)}evaluate(i,u,f,m,x,w){return this._styleExpression.evaluate(i,u,f,m,x,w)}}class Xu{constructor(i,u,f,m){this.kind=i,this.zoomStops=f,this._styleExpression=u,this.isStateDependent=i!=="camera"&&!Cl(u.expression),this.interpolationType=m}evaluateWithoutErrorHandling(i,u,f,m,x,w){return this._styleExpression.evaluateWithoutErrorHandling(i,u,f,m,x,w)}evaluate(i,u,f,m,x,w){return this._styleExpression.evaluate(i,u,f,m,x,w)}interpolationFactor(i,u,f){return this.interpolationType?Ai.interpolationFactor(this.interpolationType,i,u,f):0}}function of(o,i){const u=Ku(o,i);if(u.result==="error")return u;const f=u.value.expression,m=Bu(f);if(!m&&!Ms(i))return po([new Fr("","data expressions not supported")]);const x=Fu(f,["zoom"]);if(!x&&!nm(i))return po([new Fr("","zoom expressions not supported")]);const w=Ml(f);return w||x?w instanceof Fr?po([w]):w instanceof Ai&&!rf(i)?po([new Fr("",'"interpolate" expressions cannot be used with this property')]):rm(w?new Xu(m?"camera":"composite",u.value,w.labels,w instanceof Ai?w.interpolation:void 0):new af(m?"constant":"source",u.value)):po([new Fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Il{constructor(i,u){this._parameters=i,this._specification=u,pa(this,rr(this._parameters,this._specification))}static deserialize(i){return new Il(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Ml(o){let i=null;if(o instanceof qu)i=Ml(o.result);else if(o instanceof Vu){for(const u of o.args)if(i=Ml(u),i)break}else(o instanceof fo||o instanceof Ai)&&o.input instanceof Vi&&o.input.name==="zoom"&&(i=o);return i instanceof Fr||o.eachChild(u=>{const f=Ml(u);f instanceof Fr?i=f:!i&&f?i=new Fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&f&&i!==f&&(i=new Fr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function Ol(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const i of o.slice(1))if(!Ol(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const T_={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function sf(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Ol(o)||(o=Yu(o));const i=Ku(o,T_);if(i.result==="error")throw new Error(i.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,f,m)=>i.value.evaluate(u,f,{},m),needGeometry:am(o)}}function P_(o,i){return o<i?-1:o>i?1:0}function am(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let i=1;i<o.length;i++)if(am(o[i]))return!0;return!1}function Yu(o){if(!o)return!0;const i=o[0];return o.length<=1?i!=="any":i==="=="?lf(o[1],o[2],"=="):i==="!="?zl(lf(o[1],o[2],"==")):i==="<"||i===">"||i==="<="||i===">="?lf(o[1],o[2],i):i==="any"?(u=o.slice(1),["any"].concat(u.map(Yu))):i==="all"?["all"].concat(o.slice(1).map(Yu)):i==="none"?["all"].concat(o.slice(1).map(Yu).map(zl)):i==="in"?om(o[1],o.slice(2)):i==="!in"?zl(om(o[1],o.slice(2))):i==="has"?sm(o[1]):i==="!has"?zl(sm(o[1])):i!=="within"||o;var u}function lf(o,i,u){switch(o){case"$type":return[`filter-type-${u}`,i];case"$id":return[`filter-id-${u}`,i];default:return[`filter-${u}`,o,i]}}function om(o,i){if(i.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(u=>typeof u!=typeof i[0])?["filter-in-large",o,["literal",i.sort(P_)]]:["filter-in-small",o,["literal",i]]}}function sm(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function zl(o){return["!",o]}function Ju(o){const i=typeof o;if(i==="number"||i==="boolean"||i==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let m="[";for(const x of o)m+=`${Ju(x)},`;return`${m}]`}const u=Object.keys(o).sort();let f="{";for(let m=0;m<u.length;m++)f+=`${JSON.stringify(u[m])}:${Ju(o[u[m]])},`;return`${f}}`}function Qu(o){let i="";for(const u of Xr)i+=`/${Ju(o[u])}`;return i}function lm(o){const i=o.value;return i?[new at(o.key,i,"constants have been deprecated as of v8")]:[]}function Vr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Bo(o){if(Array.isArray(o))return o.map(Bo);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const i={};for(const u in o)i[u]=Bo(o[u]);return i}return Vr(o)}function li(o){const i=o.key,u=o.value,f=o.valueSpec||{},m=o.objectElementValidators||{},x=o.style,w=o.styleSpec,T=o.validateSpec;let C=[];const M=ur(u);if(M!=="object")return[new at(i,u,`object expected, ${M} found`)];for(const L in u){const U=L.split(".")[0],Z=f[U]||f["*"];let Y;if(m[U])Y=m[U];else if(f[U])Y=T;else if(m["*"])Y=m["*"];else{if(!f["*"]){C.push(new at(i,u[L],`unknown property "${L}"`));continue}Y=T}C=C.concat(Y({key:(i&&`${i}.`)+L,value:u[L],valueSpec:Z,style:x,styleSpec:w,object:u,objectKey:L,validateSpec:T},u))}for(const L in f)m[L]||f[L].required&&f[L].default===void 0&&u[L]===void 0&&C.push(new at(i,u,`missing required property "${L}"`));return C}function Os(o){const i=o.value,u=o.valueSpec,f=o.style,m=o.styleSpec,x=o.key,w=o.arrayElementValidator||o.validateSpec;if(ur(i)!=="array")return[new at(x,i,`array expected, ${ur(i)} found`)];if(u.length&&i.length!==u.length)return[new at(x,i,`array length ${u.length} expected, length ${i.length} found`)];if(u["min-length"]&&i.length<u["min-length"])return[new at(x,i,`array length at least ${u["min-length"]} expected, length ${i.length} found`)];let T={type:u.value,values:u.values};m.$version<7&&(T.function=u.function),ur(u.value)==="object"&&(T=u.value);let C=[];for(let M=0;M<i.length;M++)C=C.concat(w({array:i,arrayIndex:M,value:i[M],valueSpec:T,validateSpec:o.validateSpec,style:f,styleSpec:m,key:`${x}[${M}]`}));return C}function Dl(o){const i=o.key,u=o.value,f=o.valueSpec;let m=ur(u);return m==="number"&&u!=u&&(m="NaN"),m!=="number"?[new at(i,u,`number expected, ${m} found`)]:"minimum"in f&&u<f.minimum?[new at(i,u,`${u} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&u>f.maximum?[new at(i,u,`${u} is greater than the maximum value ${f.maximum}`)]:[]}function ec(o){const i=o.valueSpec,u=Vr(o.value.type);let f,m,x,w={};const T=u!=="categorical"&&o.value.property===void 0,C=!T,M=ur(o.value.stops)==="array"&&ur(o.value.stops[0])==="array"&&ur(o.value.stops[0][0])==="object",L=li({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(Y){if(u==="identity")return[new at(Y.key,Y.value,'identity function may not have a "stops" property')];let Q=[];const ne=Y.value;return Q=Q.concat(Os({key:Y.key,value:ne,valueSpec:Y.valueSpec,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:U})),ur(ne)==="array"&&ne.length===0&&Q.push(new at(Y.key,ne,"array must have at least one stop")),Q},default:function(Y){return Y.validateSpec({key:Y.key,value:Y.value,valueSpec:i,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec})}}});return u==="identity"&&T&&L.push(new at(o.key,o.value,'missing required property "property"')),u==="identity"||o.value.stops||L.push(new at(o.key,o.value,'missing required property "stops"')),u==="exponential"&&o.valueSpec.expression&&!rf(o.valueSpec)&&L.push(new at(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(C&&!Ms(o.valueSpec)?L.push(new at(o.key,o.value,"property functions not supported")):T&&!nm(o.valueSpec)&&L.push(new at(o.key,o.value,"zoom functions not supported"))),u!=="categorical"&&!M||o.value.property!==void 0||L.push(new at(o.key,o.value,'"property" property is required')),L;function U(Y){let Q=[];const ne=Y.value,he=Y.key;if(ur(ne)!=="array")return[new at(he,ne,`array expected, ${ur(ne)} found`)];if(ne.length!==2)return[new at(he,ne,`array length 2 expected, length ${ne.length} found`)];if(M){if(ur(ne[0])!=="object")return[new at(he,ne,`object expected, ${ur(ne[0])} found`)];if(ne[0].zoom===void 0)return[new at(he,ne,"object stop key must have zoom")];if(ne[0].value===void 0)return[new at(he,ne,"object stop key must have value")];if(x&&x>Vr(ne[0].zoom))return[new at(he,ne[0].zoom,"stop zoom values must appear in ascending order")];Vr(ne[0].zoom)!==x&&(x=Vr(ne[0].zoom),m=void 0,w={}),Q=Q.concat(li({key:`${he}[0]`,value:ne[0],valueSpec:{zoom:{}},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:Dl,value:Z}}))}else Q=Q.concat(Z({key:`${he}[0]`,value:ne[0],validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec},ne));return Hu(Bo(ne[1]))?Q.concat([new at(`${he}[1]`,ne[1],"expressions are not allowed in function stops.")]):Q.concat(Y.validateSpec({key:`${he}[1]`,value:ne[1],valueSpec:i,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec}))}function Z(Y,Q){const ne=ur(Y.value),he=Vr(Y.value),pe=Y.value!==null?Y.value:Q;if(f){if(ne!==f)return[new at(Y.key,pe,`${ne} stop domain type must match previous stop domain type ${f}`)]}else f=ne;if(ne!=="number"&&ne!=="string"&&ne!=="boolean")return[new at(Y.key,pe,"stop domain value must be a number, string, or boolean")];if(ne!=="number"&&u!=="categorical"){let Se=`number expected, ${ne} found`;return Ms(i)&&u===void 0&&(Se+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new at(Y.key,pe,Se)]}return u!=="categorical"||ne!=="number"||isFinite(he)&&Math.floor(he)===he?u!=="categorical"&&ne==="number"&&m!==void 0&&he<m?[new at(Y.key,pe,"stop domain values must appear in ascending order")]:(m=he,u==="categorical"&&he in w?[new at(Y.key,pe,"stop domain values must be unique")]:(w[he]=!0,[])):[new at(Y.key,pe,`integer expected, found ${he}`)]}}function Fo(o){const i=(o.expressionContext==="property"?of:Ku)(Bo(o.value),o.valueSpec);if(i.result==="error")return i.value.map(f=>new at(`${o.key}${f.key}`,o.value,f.message));const u=i.value.expression||i.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!u.outputDefined())return[new at(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Cl(u))return[new at(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Cl(u))return[new at(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Fu(u,["zoom","feature-state"]))return[new at(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Bu(u))return[new at(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ll(o){const i=o.key,u=o.value,f=o.valueSpec,m=[];return Array.isArray(f.values)?f.values.indexOf(Vr(u))===-1&&m.push(new at(i,u,`expected one of [${f.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(f.values).indexOf(Vr(u))===-1&&m.push(new at(i,u,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(u)} found`)),m}function zs(o){return Ol(Bo(o.value))?Fo(pa({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):um(o)}function um(o){const i=o.value,u=o.key;if(ur(i)!=="array")return[new at(u,i,`array expected, ${ur(i)} found`)];const f=o.styleSpec;let m,x=[];if(i.length<1)return[new at(u,i,"filter array must have at least 1 element")];switch(x=x.concat(Ll({key:`${u}[0]`,value:i[0],valueSpec:f.filter_operator,style:o.style,styleSpec:o.styleSpec})),Vr(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Vr(i[1])==="$type"&&x.push(new at(u,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&x.push(new at(u,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(m=ur(i[1]),m!=="string"&&x.push(new at(`${u}[1]`,i[1],`string expected, ${m} found`)));for(let w=2;w<i.length;w++)m=ur(i[w]),Vr(i[1])==="$type"?x=x.concat(Ll({key:`${u}[${w}]`,value:i[w],valueSpec:f.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&x.push(new at(`${u}[${w}]`,i[w],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let w=1;w<i.length;w++)x=x.concat(um({key:`${u}[${w}]`,value:i[w],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=ur(i[1]),i.length!==2?x.push(new at(u,i,`filter array for "${i[0]}" operator must have 2 elements`)):m!=="string"&&x.push(new at(`${u}[1]`,i[1],`string expected, ${m} found`));break;case"within":m=ur(i[1]),i.length!==2?x.push(new at(u,i,`filter array for "${i[0]}" operator must have 2 elements`)):m!=="object"&&x.push(new at(`${u}[1]`,i[1],`object expected, ${m} found`))}return x}function cm(o,i){const u=o.key,f=o.validateSpec,m=o.style,x=o.styleSpec,w=o.value,T=o.objectKey,C=x[`${i}_${o.layerType}`];if(!C)return[];const M=T.match(/^(.*)-transition$/);if(i==="paint"&&M&&C[M[1]]&&C[M[1]].transition)return f({key:u,value:w,valueSpec:x.transition,style:m,styleSpec:x});const L=o.valueSpec||C[T];if(!L)return[new at(u,w,`unknown property "${T}"`)];let U;if(ur(w)==="string"&&Ms(L)&&!L.tokens&&(U=/^{([^}]+)}$/.exec(w)))return[new at(u,w,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(U[1])} }\`.`)];const Z=[];return o.layerType==="symbol"&&(T==="text-field"&&m&&!m.glyphs&&Z.push(new at(u,w,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&jr(Bo(w))&&Vr(w.type)==="identity"&&Z.push(new at(u,w,'"text-font" does not support identity functions'))),Z.concat(f({key:o.key,value:w,valueSpec:L,style:m,styleSpec:x,expressionContext:"property",propertyType:i,propertyKey:T}))}function hm(o){return cm(o,"paint")}function fm(o){return cm(o,"layout")}function dm(o){let i=[];const u=o.value,f=o.key,m=o.style,x=o.styleSpec;u.type||u.ref||i.push(new at(f,u,'either "type" or "ref" is required'));let w=Vr(u.type);const T=Vr(u.ref);if(u.id){const C=Vr(u.id);for(let M=0;M<o.arrayIndex;M++){const L=m.layers[M];Vr(L.id)===C&&i.push(new at(f,u.id,`duplicate layer id "${u.id}", previously used at line ${L.id.__line__}`))}}if("ref"in u){let C;["type","source","source-layer","filter","layout"].forEach(M=>{M in u&&i.push(new at(f,u[M],`"${M}" is prohibited for ref layers`))}),m.layers.forEach(M=>{Vr(M.id)===T&&(C=M)}),C?C.ref?i.push(new at(f,u.ref,"ref cannot reference another ref layer")):w=Vr(C.type):i.push(new at(f,u.ref,`ref layer "${T}" not found`))}else if(w!=="background")if(u.source){const C=m.sources&&m.sources[u.source],M=C&&Vr(C.type);C?M==="vector"&&w==="raster"?i.push(new at(f,u.source,`layer "${u.id}" requires a raster source`)):M!=="raster-dem"&&w==="hillshade"?i.push(new at(f,u.source,`layer "${u.id}" requires a raster-dem source`)):M==="raster"&&w!=="raster"?i.push(new at(f,u.source,`layer "${u.id}" requires a vector source`)):M!=="vector"||u["source-layer"]?M==="raster-dem"&&w!=="hillshade"?i.push(new at(f,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!u.paint||!u.paint["line-gradient"]||M==="geojson"&&C.lineMetrics||i.push(new at(f,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new at(f,u,`layer "${u.id}" must specify a "source-layer"`)):i.push(new at(f,u.source,`source "${u.source}" not found`))}else i.push(new at(f,u,'missing required property "source"'));return i=i.concat(li({key:f,value:u,valueSpec:x.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${f}.type`,value:u.type,valueSpec:x.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:u,objectKey:"type"}),filter:zs,layout:C=>li({layer:u,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":M=>fm(pa({layerType:w},M))}}),paint:C=>li({layer:u,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":M=>hm(pa({layerType:w},M))}})}})),i}function ga(o){const i=o.value,u=o.key,f=ur(i);return f!=="string"?[new at(u,i,`string expected, ${f} found`)]:[]}const jl={promoteId:function({key:o,value:i}){if(ur(i)==="string")return ga({key:o,value:i});{const u=[];for(const f in i)u.push(...ga({key:`${o}.${f}`,value:i[f]}));return u}}};function Ei(o){const i=o.value,u=o.key,f=o.styleSpec,m=o.style,x=o.validateSpec;if(!i.type)return[new at(u,i,'"type" is required')];const w=Vr(i.type);let T;switch(w){case"vector":case"raster":return T=li({key:u,value:i,valueSpec:f[`source_${w.replace("-","_")}`],style:o.style,styleSpec:f,objectElementValidators:jl,validateSpec:x}),T;case"raster-dem":return T=function(C){var M;const L=(M=C.sourceName)!==null&&M!==void 0?M:"",U=C.value,Z=C.styleSpec,Y=Z.source_raster_dem,Q=C.style;let ne=[];const he=ur(U);if(U===void 0)return ne;if(he!=="object")return ne.push(new at("source_raster_dem",U,`object expected, ${he} found`)),ne;const pe=Vr(U.encoding)==="custom",Se=["redFactor","greenFactor","blueFactor","baseShift"],ge=C.value.encoding?`"${C.value.encoding}"`:"Default";for(const Ee in U)!pe&&Se.includes(Ee)?ne.push(new at(Ee,U[Ee],`In "${L}": "${Ee}" is only valid when "encoding" is set to "custom". ${ge} encoding found`)):Y[Ee]?ne=ne.concat(C.validateSpec({key:Ee,value:U[Ee],valueSpec:Y[Ee],validateSpec:C.validateSpec,style:Q,styleSpec:Z})):ne.push(new at(Ee,U[Ee],`unknown property "${Ee}"`));return ne}({sourceName:u,value:i,style:o.style,styleSpec:f,validateSpec:x}),T;case"geojson":if(T=li({key:u,value:i,valueSpec:f.source_geojson,style:m,styleSpec:f,validateSpec:x,objectElementValidators:jl}),i.cluster)for(const C in i.clusterProperties){const[M,L]=i.clusterProperties[C],U=typeof M=="string"?[M,["accumulated"],["get",C]]:M;T.push(...Fo({key:`${u}.${C}.map`,value:L,expressionContext:"cluster-map"})),T.push(...Fo({key:`${u}.${C}.reduce`,value:U,expressionContext:"cluster-reduce"}))}return T;case"video":return li({key:u,value:i,valueSpec:f.source_video,style:m,validateSpec:x,styleSpec:f});case"image":return li({key:u,value:i,valueSpec:f.source_image,style:m,validateSpec:x,styleSpec:f});case"canvas":return[new at(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ll({key:`${u}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function $l(o){const i=o.value,u=o.styleSpec,f=u.light,m=o.style;let x=[];const w=ur(i);if(i===void 0)return x;if(w!=="object")return x=x.concat([new at("light",i,`object expected, ${w} found`)]),x;for(const T in i){const C=T.match(/^(.*)-transition$/);x=x.concat(C&&f[C[1]]&&f[C[1]].transition?o.validateSpec({key:T,value:i[T],valueSpec:u.transition,validateSpec:o.validateSpec,style:m,styleSpec:u}):f[T]?o.validateSpec({key:T,value:i[T],valueSpec:f[T],validateSpec:o.validateSpec,style:m,styleSpec:u}):[new at(T,i[T],`unknown property "${T}"`)])}return x}function pm(o){const i=o.value,u=o.styleSpec,f=u.terrain,m=o.style;let x=[];const w=ur(i);if(i===void 0)return x;if(w!=="object")return x=x.concat([new at("terrain",i,`object expected, ${w} found`)]),x;for(const T in i)x=x.concat(f[T]?o.validateSpec({key:T,value:i[T],valueSpec:f[T],validateSpec:o.validateSpec,style:m,styleSpec:u}):[new at(T,i[T],`unknown property "${T}"`)]);return x}function mm(o){let i=[];const u=o.value,f=o.key;if(Array.isArray(u)){const m=[],x=[];for(const w in u)u[w].id&&m.includes(u[w].id)&&i.push(new at(f,u,`all the sprites' ids must be unique, but ${u[w].id} is duplicated`)),m.push(u[w].id),u[w].url&&x.includes(u[w].url)&&i.push(new at(f,u,`all the sprites' URLs must be unique, but ${u[w].url} is duplicated`)),x.push(u[w].url),i=i.concat(li({key:`${f}[${w}]`,value:u[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return i}return ga({key:f,value:u})}const gm={"*":()=>[],array:Os,boolean:function(o){const i=o.value,u=o.key,f=ur(i);return f!=="boolean"?[new at(u,i,`boolean expected, ${f} found`)]:[]},number:Dl,color:function(o){const i=o.key,u=o.value,f=ur(u);return f!=="string"?[new at(i,u,`color expected, ${f} found`)]:pr.parse(String(u))?[]:[new at(i,u,`color expected, "${u}" found`)]},constants:lm,enum:Ll,filter:zs,function:ec,layer:dm,object:li,source:Ei,light:$l,terrain:pm,string:ga,formatted:function(o){return ga(o).length===0?[]:Fo(o)},resolvedImage:function(o){return ga(o).length===0?[]:Fo(o)},padding:function(o){const i=o.key,u=o.value;if(ur(u)==="array"){if(u.length<1||u.length>4)return[new at(i,u,`padding requires 1 to 4 values; ${u.length} values found`)];const f={type:"number"};let m=[];for(let x=0;x<u.length;x++)m=m.concat(o.validateSpec({key:`${i}[${x}]`,value:u[x],validateSpec:o.validateSpec,valueSpec:f}));return m}return Dl({key:i,value:u,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const i=o.key,u=o.value,f=ur(u),m=o.styleSpec;if(f!=="array"||u.length<1||u.length%2!=0)return[new at(i,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let w=0;w<u.length;w+=2)x=x.concat(Ll({key:`${i}[${w}]`,value:u[w],valueSpec:m.layout_symbol["text-anchor"]})),x=x.concat(Os({key:`${i}[${w+1}]`,value:u[w+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:m}));return x},sprite:mm};function mo(o){const i=o.value,u=o.valueSpec,f=o.styleSpec;return o.validateSpec=mo,u.expression&&jr(Vr(i))?ec(o):u.expression&&Hu(Bo(i))?Fo(o):u.type&&gm[u.type]?gm[u.type](o):li(pa({},o,{valueSpec:u.type?f[u.type]:u}))}function ym(o){const i=o.value,u=o.key,f=ga(o);return f.length||(i.indexOf("{fontstack}")===-1&&f.push(new at(u,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&f.push(new at(u,i,'"glyphs" url must include a "{range}" token'))),f}function qi(o,i=Ne){let u=[];return u=u.concat(mo({key:"",value:o,valueSpec:i.$root,styleSpec:i,style:o,validateSpec:mo,objectElementValidators:{glyphs:ym,"*":()=>[]}})),o.constants&&(u=u.concat(lm({key:"constants",value:o.constants}))),tc(u)}function Fa(o){return function(i){return o({...i,validateSpec:mo})}}function tc(o){return[].concat(o).sort((i,u)=>i.line-u.line)}function Ua(o){return function(...i){return tc(o.apply(this,i))}}qi.source=Ua(Fa(Ei)),qi.sprite=Ua(Fa(mm)),qi.glyphs=Ua(Fa(ym)),qi.light=Ua(Fa($l)),qi.terrain=Ua(Fa(pm)),qi.layer=Ua(Fa(dm)),qi.filter=Ua(Fa(zs)),qi.paintProperty=Ua(Fa(hm)),qi.layoutProperty=Ua(Fa(fm));const Va=qi,A_=Va.light,uf=Va.paintProperty,vm=Va.layoutProperty;function rc(o,i){let u=!1;if(i&&i.length)for(const f of i)o.fire(new Ht(new Error(f.message))),u=!0;return u}class Ds{constructor(i,u,f){const m=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const w=new Int32Array(this.arrayBuffer);i=w[0],this.d=(u=w[1])+2*(f=w[2]);for(let C=0;C<this.d*this.d;C++){const M=w[3+C],L=w[3+C+1];m.push(M===L?null:w.subarray(M,L))}const T=w[3+m.length+1];this.keys=w.subarray(w[3+m.length],T),this.bboxes=w.subarray(T),this.insert=this._insertReadonly}else{this.d=u+2*f;for(let w=0;w<this.d*this.d;w++)m.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=i,this.padding=f,this.scale=u/i,this.uid=0;const x=f/u*i;this.min=-x,this.max=i+x}insert(i,u,f,m,x){this._forEachCell(u,f,m,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,u,f,m,x,w){this.cells[x].push(w)}query(i,u,f,m,x){const w=this.min,T=this.max;if(i<=w&&u<=w&&T<=f&&T<=m&&!x)return Array.prototype.slice.call(this.keys);{const C=[];return this._forEachCell(i,u,f,m,this._queryCell,C,{},x),C}}_queryCell(i,u,f,m,x,w,T,C){const M=this.cells[x];if(M!==null){const L=this.keys,U=this.bboxes;for(let Z=0;Z<M.length;Z++){const Y=M[Z];if(T[Y]===void 0){const Q=4*Y;(C?C(U[Q+0],U[Q+1],U[Q+2],U[Q+3]):i<=U[Q+2]&&u<=U[Q+3]&&f>=U[Q+0]&&m>=U[Q+1])?(T[Y]=!0,w.push(L[Y])):T[Y]=!1}}}}_forEachCell(i,u,f,m,x,w,T,C){const M=this._convertToCellCoord(i),L=this._convertToCellCoord(u),U=this._convertToCellCoord(f),Z=this._convertToCellCoord(m);for(let Y=M;Y<=U;Y++)for(let Q=L;Q<=Z;Q++){const ne=this.d*Q+Y;if((!C||C(this._convertFromCellCoord(Y),this._convertFromCellCoord(Q),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(Q+1)))&&x.call(this,i,u,f,m,ne,w,T,C))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,u=3+this.cells.length+1+1;let f=0;for(let w=0;w<this.cells.length;w++)f+=this.cells[w].length;const m=new Int32Array(u+f+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let x=u;for(let w=0;w<i.length;w++){const T=i[w];m[3+w]=x,m.set(T,x),x+=T.length}return m[3+i.length]=x,m.set(this.keys,x),x+=this.keys.length,m[3+i.length+1]=x,m.set(this.bboxes,x),x+=this.bboxes.length,m.buffer}static serialize(i,u){const f=i.toArrayBuffer();return u&&u.push(f),{buffer:f}}static deserialize(i){return new Ds(i.buffer)}}const qa={};function vt(o,i,u={}){if(qa[o])throw new Error(`${o} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:o,writeable:!1}),qa[o]={klass:i,omit:u.omit||[],shallow:u.shallow||[]}}vt("Object",Object),vt("TransferableGridIndex",Ds),vt("Color",pr),vt("Error",Error),vt("AJAXError",Jt),vt("ResolvedImage",kn),vt("StylePropertyFunction",Il),vt("StyleExpression",nf,{omit:["_evaluator"]}),vt("ZoomDependentExpression",Xu),vt("ZoomConstantExpression",af),vt("CompoundExpression",Vi,{omit:["_evaluate"]});for(const o in Is)Is[o]._classRegistryKey||vt(`Expression_${o}`,Is[o]);function nc(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function go(o,i){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(nc(o)||_e(o))return i&&i.push(o),o;if(ArrayBuffer.isView(o)){const u=o;return i&&i.push(u.buffer),u}if(o instanceof ImageData)return i&&i.push(o.data.buffer),o;if(Array.isArray(o)){const u=[];for(const f of o)u.push(go(f,i));return u}if(typeof o=="object"){const u=o.constructor,f=u._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!qa[f])throw new Error(`${f} is not registered.`);const m=u.serialize?u.serialize(o,i):{};if(u.serialize){if(i&&m===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in o){if(!o.hasOwnProperty(x)||qa[f].omit.indexOf(x)>=0)continue;const w=o[x];m[x]=qa[f].shallow.indexOf(x)>=0?w:go(w,i)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(m.$name=f),m}throw new Error("can't serialize object of type "+typeof o)}function Ls(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||nc(o)||_e(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Ls);if(typeof o=="object"){const i=o.$name||"Object";if(!qa[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:u}=qa[i];if(!u)throw new Error(`can't deserialize unregistered class ${i}`);if(u.deserialize)return u.deserialize(o);const f=Object.create(u.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const x=o[m];f[m]=qa[i].shallow.indexOf(m)>=0?x:Ls(x)}return f}throw new Error("can't deserialize object of type "+typeof o)}class _m{constructor(){this.first=!0}update(i,u){const f=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=u),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=f,!0))}}const ft={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function cf(o){for(const i of o)if(ff(i.charCodeAt(0)))return!0;return!1}function hf(o){for(const i of o)if(!E_(i.charCodeAt(0)))return!1;return!0}function E_(o){return!(ft.Arabic(o)||ft["Arabic Supplement"](o)||ft["Arabic Extended-A"](o)||ft["Arabic Presentation Forms-A"](o)||ft["Arabic Presentation Forms-B"](o))}function ff(o){return!(o!==746&&o!==747&&(o<4352||!(ft["Bopomofo Extended"](o)||ft.Bopomofo(o)||ft["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||ft["CJK Compatibility Ideographs"](o)||ft["CJK Compatibility"](o)||ft["CJK Radicals Supplement"](o)||ft["CJK Strokes"](o)||!(!ft["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||ft["CJK Unified Ideographs Extension A"](o)||ft["CJK Unified Ideographs"](o)||ft["Enclosed CJK Letters and Months"](o)||ft["Hangul Compatibility Jamo"](o)||ft["Hangul Jamo Extended-A"](o)||ft["Hangul Jamo Extended-B"](o)||ft["Hangul Jamo"](o)||ft["Hangul Syllables"](o)||ft.Hiragana(o)||ft["Ideographic Description Characters"](o)||ft.Kanbun(o)||ft["Kangxi Radicals"](o)||ft["Katakana Phonetic Extensions"](o)||ft.Katakana(o)&&o!==12540||!(!ft["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!ft["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||ft["Unified Canadian Aboriginal Syllabics"](o)||ft["Unified Canadian Aboriginal Syllabics Extended"](o)||ft["Vertical Forms"](o)||ft["Yijing Hexagram Symbols"](o)||ft["Yi Syllables"](o)||ft["Yi Radicals"](o))))}function xm(o){return!(ff(o)||function(i){return!!(ft["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||ft["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||ft["Letterlike Symbols"](i)||ft["Number Forms"](i)||ft["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||ft["Control Pictures"](i)&&i!==9251||ft["Optical Character Recognition"](i)||ft["Enclosed Alphanumerics"](i)||ft["Geometric Shapes"](i)||ft["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||ft["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||ft["CJK Symbols and Punctuation"](i)||ft.Katakana(i)||ft["Private Use Area"](i)||ft["CJK Compatibility Forms"](i)||ft["Small Form Variants"](i)||ft["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(o))}function bm(o){return o>=1424&&o<=2303||ft["Arabic Presentation Forms-A"](o)||ft["Arabic Presentation Forms-B"](o)}function wm(o,i){return!(!i&&bm(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||ft.Khmer(o))}function C_(o){for(const i of o)if(bm(i.charCodeAt(0)))return!0;return!1}const df="deferred",pf="loading",mf="loaded";let gf=null,ui="unavailable",yo=null;const Rl=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(ui="error"),gf&&gf(o)};function yf(){Nl.fire(new Ot("pluginStateChange",{pluginStatus:ui,pluginURL:yo}))}const Nl=new mn,vf=function(){return ui},Sm=function(){if(ui!==df||!yo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ui=pf,yf(),yo&&kt({url:yo},o=>{o?Rl(o):(ui=mf,yf())})},Ci={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ui===mf||Ci.applyArabicShaping!=null,isLoading:()=>ui===pf,setState(o){if(!Ke())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");ui=o.pluginStatus,yo=o.pluginURL},isParsed(){if(!Ke())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ci.applyArabicShaping!=null&&Ci.processBidirectionalText!=null&&Ci.processStyledBidirectionalText!=null},getPluginURL(){if(!Ke())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return yo}};class Er{constructor(i,u){this.zoom=i,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _m,this.transition={})}isSupportedScript(i){return function(u,f){for(const m of u)if(!wm(m.charCodeAt(0),f))return!1;return!0}(i,Ci.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,u=i-Math.floor(i),f=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*u}}}class ic{constructor(i,u){this.property=i,this.value=u,this.expression=function(f,m){if(jr(f))return new Il(f,m);if(Hu(f)){const x=of(f,m);if(x.result==="error")throw new Error(x.value.map(w=>`${w.key}: ${w.message}`).join(", "));return x.value}{let x=f;return m.type==="color"&&typeof f=="string"?x=pr.parse(f):m.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(f)&&(x=Fi.parse(f)):x=Ti.parse(f),{kind:"constant",evaluate:()=>x}}}(u===void 0?i.specification.default:u,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,u,f){return this.property.possiblyEvaluate(this,i,u,f)}}class _f{constructor(i){this.property=i,this.value=new ic(i,void 0)}transitioned(i,u){return new Pm(this.property,this.value,u,le({},i.transition,this.transition),i.now)}untransitioned(){return new Pm(this.property,this.value,null,{},0)}}class Tm{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Te(this._values[i].value.value)}setValue(i,u){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new _f(this._values[i].property)),this._values[i].value=new ic(this._values[i].property,u===null?void 0:Te(u))}getTransition(i){return Te(this._values[i].transition)}setTransition(i,u){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new _f(this._values[i].property)),this._values[i].transition=Te(u)||void 0}serialize(){const i={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(i[u]=f);const m=this.getTransition(u);m!==void 0&&(i[`${u}-transition`]=m)}return i}transitioned(i,u){const f=new Am(this._properties);for(const m of Object.keys(this._values))f._values[m]=this._values[m].transitioned(i,u._values[m]);return f}untransitioned(){const i=new Am(this._properties);for(const u of Object.keys(this._values))i._values[u]=this._values[u].untransitioned();return i}}class Pm{constructor(i,u,f,m,x){this.property=i,this.value=u,this.begin=x+m.delay||0,this.end=this.begin+m.duration||0,i.specification.transition&&(m.delay||m.duration)&&(this.prior=f)}possiblyEvaluate(i,u,f){const m=i.now||0,x=this.value.possiblyEvaluate(i,u,f),w=this.prior;if(w){if(m>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(m<this.begin)return w.possiblyEvaluate(i,u,f);{const T=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(i,u,f),x,function(C){if(C<=0)return 0;if(C>=1)return 1;const M=C*C,L=M*C;return 4*(C<.5?L:3*(C-M)+L-.75)}(T))}}return x}}class Am{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,u,f){const m=new ac(this._properties);for(const x of Object.keys(this._values))m._values[x]=this._values[x].possiblyEvaluate(i,u,f);return m}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class k_{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return Te(this._values[i].value)}setValue(i,u){this._values[i]=new ic(this._values[i].property,u===null?void 0:Te(u))}serialize(){const i={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(i[u]=f)}return i}possiblyEvaluate(i,u,f){const m=new ac(this._properties);for(const x of Object.keys(this._values))m._values[x]=this._values[x].possiblyEvaluate(i,u,f);return m}}class Yn{constructor(i,u,f){this.property=i,this.value=u,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,u,f,m){return this.property.evaluate(this.value,this.parameters,i,u,f,m)}}class ac{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Pt{constructor(i){this.specification=i}possiblyEvaluate(i,u){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(u)}interpolate(i,u,f){const m=Pi[this.specification.type];return m?m(i,u,f):i}}class Lt{constructor(i,u){this.specification=i,this.overrides=u}possiblyEvaluate(i,u,f,m){return new Yn(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(u,null,{},f,m)}:i.expression,u)}interpolate(i,u,f){if(i.value.kind!=="constant"||u.value.kind!=="constant")return i;if(i.value.value===void 0||u.value.value===void 0)return new Yn(this,{kind:"constant",value:void 0},i.parameters);const m=Pi[this.specification.type];if(m){const x=m(i.value.value,u.value.value,f);return new Yn(this,{kind:"constant",value:x},i.parameters)}return i}evaluate(i,u,f,m,x,w){return i.kind==="constant"?i.value:i.evaluate(u,f,m,x,w)}}class Bl extends Lt{possiblyEvaluate(i,u,f,m){if(i.value===void 0)return new Yn(this,{kind:"constant",value:void 0},u);if(i.expression.kind==="constant"){const x=i.expression.evaluate(u,null,{},f,m),w=i.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,T=this._calculate(w,w,w,u);return new Yn(this,{kind:"constant",value:T},u)}if(i.expression.kind==="camera"){const x=this._calculate(i.expression.evaluate({zoom:u.zoom-1}),i.expression.evaluate({zoom:u.zoom}),i.expression.evaluate({zoom:u.zoom+1}),u);return new Yn(this,{kind:"constant",value:x},u)}return new Yn(this,i.expression,u)}evaluate(i,u,f,m,x,w){if(i.kind==="source"){const T=i.evaluate(u,f,m,x,w);return this._calculate(T,T,T,u)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(u.zoom)-1},f,m),i.evaluate({zoom:Math.floor(u.zoom)},f,m),i.evaluate({zoom:Math.floor(u.zoom)+1},f,m),u):i.value}_calculate(i,u,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:f,to:u}}interpolate(i){return i}}class xf{constructor(i){this.specification=i}possiblyEvaluate(i,u,f,m){if(i.value!==void 0){if(i.expression.kind==="constant"){const x=i.expression.evaluate(u,null,{},f,m);return this._calculate(x,x,x,u)}return this._calculate(i.expression.evaluate(new Er(Math.floor(u.zoom-1),u)),i.expression.evaluate(new Er(Math.floor(u.zoom),u)),i.expression.evaluate(new Er(Math.floor(u.zoom+1),u)),u)}}_calculate(i,u,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:f,to:u}}interpolate(i){return i}}class bf{constructor(i){this.specification=i}possiblyEvaluate(i,u,f,m){return!!i.expression.evaluate(u,null,{},f,m)}interpolate(){return!1}}class rn{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in i){const f=i[u];f.specification.overridable&&this.overridableProperties.push(u);const m=this.defaultPropertyValues[u]=new ic(f,void 0),x=this.defaultTransitionablePropertyValues[u]=new _f(f);this.defaultTransitioningPropertyValues[u]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=m.possiblyEvaluate({})}}}vt("DataDrivenProperty",Lt),vt("DataConstantProperty",Pt),vt("CrossFadedDataDrivenProperty",Bl),vt("CrossFadedProperty",xf),vt("ColorRampProperty",bf);const wf="-transition";class Gi extends mn{constructor(i,u){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),u.layout&&(this._unevaluatedLayout=new k_(u.layout)),u.paint)){this._transitionablePaint=new Tm(u.paint);for(const f in i.paint)this.setPaintProperty(f,i.paint[f],{validate:!1});for(const f in i.layout)this.setLayoutProperty(f,i.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ac(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,u,f={}){u!=null&&this._validate(vm,`layers.${this.id}.layout.${i}`,i,u,f)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,u):this.visibility=u)}getPaintProperty(i){return i.endsWith(wf)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,u,f={}){if(u!=null&&this._validate(uf,`layers.${this.id}.paint.${i}`,i,u,f))return!1;if(i.endsWith(wf))return this._transitionablePaint.setTransition(i.slice(0,-11),u||void 0),!1;{const m=this._transitionablePaint._values[i],x=m.property.specification["property-type"]==="cross-faded-data-driven",w=m.value.isDataDriven(),T=m.value;this._transitionablePaint.setValue(i,u),this._handleSpecialPaintPropertyUpdate(i);const C=this._transitionablePaint._values[i].value;return C.isDataDriven()||w||x||this._handleOverridablePaintPropertyUpdate(i,T,C)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,u,f){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,u){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Ce(i,(u,f)=>!(u===void 0||f==="layout"&&!Object.keys(u).length||f==="paint"&&!Object.keys(u).length))}_validate(i,u,f,m,x={}){return(!x||x.validate!==!1)&&rc(this,i.call(Va,{key:u,layerType:this.type,objectKey:f,value:m,styleSpec:Ne,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const u=this.paint.get(i);if(u instanceof Yn&&Ms(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const Em={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Uo{constructor(i,u){this._structArray=i,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class qr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,u){return i._trim(),u&&(i.isTransferred=!0,u.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const u=Object.create(this.prototype);return u.arrayBuffer=i.arrayBuffer,u.length=i.length,u.capacity=i.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Rr(o,i=1){let u=0,f=0;return{members:o.map(m=>{const x=Em[m.type].BYTES_PER_ELEMENT,w=u=js(u,Math.max(i,x)),T=m.components||1;return f=Math.max(f,x),u+=x*T,{name:m.name,type:m.type,components:T,offset:w}}),size:js(u,Math.max(f,i)),alignment:i}}function js(o,i){return Math.ceil(o/i)*i}class Fl extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u){const f=this.length;return this.resize(f+1),this.emplace(f,i,u)}emplace(i,u,f){const m=2*i;return this.int16[m+0]=u,this.int16[m+1]=f,i}}Fl.prototype.bytesPerElement=4,vt("StructArrayLayout2i4",Fl);class Ul extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)}emplace(i,u,f,m){const x=3*i;return this.int16[x+0]=u,this.int16[x+1]=f,this.int16[x+2]=m,i}}Ul.prototype.bytesPerElement=6,vt("StructArrayLayout3i6",Ul);class Vo extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,i,u,f,m)}emplace(i,u,f,m,x){const w=4*i;return this.int16[w+0]=u,this.int16[w+1]=f,this.int16[w+2]=m,this.int16[w+3]=x,i}}Vo.prototype.bytesPerElement=8,vt("StructArrayLayout4i8",Vo);class Sf extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,m,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,i,u,f,m,x,w)}emplace(i,u,f,m,x,w,T){const C=6*i;return this.int16[C+0]=u,this.int16[C+1]=f,this.int16[C+2]=m,this.int16[C+3]=x,this.int16[C+4]=w,this.int16[C+5]=T,i}}Sf.prototype.bytesPerElement=12,vt("StructArrayLayout2i4i12",Sf);class Tf extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,m,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,i,u,f,m,x,w)}emplace(i,u,f,m,x,w,T){const C=4*i,M=8*i;return this.int16[C+0]=u,this.int16[C+1]=f,this.uint8[M+4]=m,this.uint8[M+5]=x,this.uint8[M+6]=w,this.uint8[M+7]=T,i}}Tf.prototype.bytesPerElement=8,vt("StructArrayLayout2i4ub8",Tf);class $s extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u){const f=this.length;return this.resize(f+1),this.emplace(f,i,u)}emplace(i,u,f){const m=2*i;return this.float32[m+0]=u,this.float32[m+1]=f,i}}$s.prototype.bytesPerElement=8,vt("StructArrayLayout2f8",$s);class Pf extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,m,x,w,T,C,M,L){const U=this.length;return this.resize(U+1),this.emplace(U,i,u,f,m,x,w,T,C,M,L)}emplace(i,u,f,m,x,w,T,C,M,L,U){const Z=10*i;return this.uint16[Z+0]=u,this.uint16[Z+1]=f,this.uint16[Z+2]=m,this.uint16[Z+3]=x,this.uint16[Z+4]=w,this.uint16[Z+5]=T,this.uint16[Z+6]=C,this.uint16[Z+7]=M,this.uint16[Z+8]=L,this.uint16[Z+9]=U,i}}Pf.prototype.bytesPerElement=20,vt("StructArrayLayout10ui20",Pf);class Af extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,m,x,w,T,C,M,L,U,Z){const Y=this.length;return this.resize(Y+1),this.emplace(Y,i,u,f,m,x,w,T,C,M,L,U,Z)}emplace(i,u,f,m,x,w,T,C,M,L,U,Z,Y){const Q=12*i;return this.int16[Q+0]=u,this.int16[Q+1]=f,this.int16[Q+2]=m,this.int16[Q+3]=x,this.uint16[Q+4]=w,this.uint16[Q+5]=T,this.uint16[Q+6]=C,this.uint16[Q+7]=M,this.int16[Q+8]=L,this.int16[Q+9]=U,this.int16[Q+10]=Z,this.int16[Q+11]=Y,i}}Af.prototype.bytesPerElement=24,vt("StructArrayLayout4i4ui4i24",Af);class cr extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)}emplace(i,u,f,m){const x=3*i;return this.float32[x+0]=u,this.float32[x+1]=f,this.float32[x+2]=m,i}}cr.prototype.bytesPerElement=12,vt("StructArrayLayout3f12",cr);class y extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint32[1*i+0]=u,i}}y.prototype.bytesPerElement=4,vt("StructArrayLayout1ul4",y);class a extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,m,x,w,T,C,M){const L=this.length;return this.resize(L+1),this.emplace(L,i,u,f,m,x,w,T,C,M)}emplace(i,u,f,m,x,w,T,C,M,L){const U=10*i,Z=5*i;return this.int16[U+0]=u,this.int16[U+1]=f,this.int16[U+2]=m,this.int16[U+3]=x,this.int16[U+4]=w,this.int16[U+5]=T,this.uint32[Z+3]=C,this.uint16[U+8]=M,this.uint16[U+9]=L,i}}a.prototype.bytesPerElement=20,vt("StructArrayLayout6i1ul2ui20",a);class h extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,m,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,i,u,f,m,x,w)}emplace(i,u,f,m,x,w,T){const C=6*i;return this.int16[C+0]=u,this.int16[C+1]=f,this.int16[C+2]=m,this.int16[C+3]=x,this.int16[C+4]=w,this.int16[C+5]=T,i}}h.prototype.bytesPerElement=12,vt("StructArrayLayout2i2i2i12",h);class p extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,m,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,u,f,m,x)}emplace(i,u,f,m,x,w){const T=4*i,C=8*i;return this.float32[T+0]=u,this.float32[T+1]=f,this.float32[T+2]=m,this.int16[C+6]=x,this.int16[C+7]=w,i}}p.prototype.bytesPerElement=16,vt("StructArrayLayout2f1f2i16",p);class g extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,i,u,f,m)}emplace(i,u,f,m,x){const w=12*i,T=3*i;return this.uint8[w+0]=u,this.uint8[w+1]=f,this.float32[T+1]=m,this.float32[T+2]=x,i}}g.prototype.bytesPerElement=12,vt("StructArrayLayout2ub2f12",g);class _ extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)}emplace(i,u,f,m){const x=3*i;return this.uint16[x+0]=u,this.uint16[x+1]=f,this.uint16[x+2]=m,i}}_.prototype.bytesPerElement=6,vt("StructArrayLayout3ui6",_);class A extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,m,x,w,T,C,M,L,U,Z,Y,Q,ne,he,pe){const Se=this.length;return this.resize(Se+1),this.emplace(Se,i,u,f,m,x,w,T,C,M,L,U,Z,Y,Q,ne,he,pe)}emplace(i,u,f,m,x,w,T,C,M,L,U,Z,Y,Q,ne,he,pe,Se){const ge=24*i,Ee=12*i,Oe=48*i;return this.int16[ge+0]=u,this.int16[ge+1]=f,this.uint16[ge+2]=m,this.uint16[ge+3]=x,this.uint32[Ee+2]=w,this.uint32[Ee+3]=T,this.uint32[Ee+4]=C,this.uint16[ge+10]=M,this.uint16[ge+11]=L,this.uint16[ge+12]=U,this.float32[Ee+7]=Z,this.float32[Ee+8]=Y,this.uint8[Oe+36]=Q,this.uint8[Oe+37]=ne,this.uint8[Oe+38]=he,this.uint32[Ee+10]=pe,this.int16[ge+22]=Se,i}}A.prototype.bytesPerElement=48,vt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",A);class E extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,m,x,w,T,C,M,L,U,Z,Y,Q,ne,he,pe,Se,ge,Ee,Oe,Ze,dt,wt,ht,ct,it,_t){const st=this.length;return this.resize(st+1),this.emplace(st,i,u,f,m,x,w,T,C,M,L,U,Z,Y,Q,ne,he,pe,Se,ge,Ee,Oe,Ze,dt,wt,ht,ct,it,_t)}emplace(i,u,f,m,x,w,T,C,M,L,U,Z,Y,Q,ne,he,pe,Se,ge,Ee,Oe,Ze,dt,wt,ht,ct,it,_t,st){const tt=32*i,Mt=16*i;return this.int16[tt+0]=u,this.int16[tt+1]=f,this.int16[tt+2]=m,this.int16[tt+3]=x,this.int16[tt+4]=w,this.int16[tt+5]=T,this.int16[tt+6]=C,this.int16[tt+7]=M,this.uint16[tt+8]=L,this.uint16[tt+9]=U,this.uint16[tt+10]=Z,this.uint16[tt+11]=Y,this.uint16[tt+12]=Q,this.uint16[tt+13]=ne,this.uint16[tt+14]=he,this.uint16[tt+15]=pe,this.uint16[tt+16]=Se,this.uint16[tt+17]=ge,this.uint16[tt+18]=Ee,this.uint16[tt+19]=Oe,this.uint16[tt+20]=Ze,this.uint16[tt+21]=dt,this.uint16[tt+22]=wt,this.uint32[Mt+12]=ht,this.float32[Mt+13]=ct,this.float32[Mt+14]=it,this.uint16[tt+30]=_t,this.uint16[tt+31]=st,i}}E.prototype.bytesPerElement=64,vt("StructArrayLayout8i15ui1ul2f2ui64",E);class I extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.float32[1*i+0]=u,i}}I.prototype.bytesPerElement=4,vt("StructArrayLayout1f4",I);class O extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)}emplace(i,u,f,m){const x=3*i;return this.uint16[6*i+0]=u,this.float32[x+1]=f,this.float32[x+2]=m,i}}O.prototype.bytesPerElement=12,vt("StructArrayLayout1ui2f12",O);class $ extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)}emplace(i,u,f,m){const x=4*i;return this.uint32[2*i+0]=u,this.uint16[x+2]=f,this.uint16[x+3]=m,i}}$.prototype.bytesPerElement=8,vt("StructArrayLayout1ul2ui8",$);class N extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u){const f=this.length;return this.resize(f+1),this.emplace(f,i,u)}emplace(i,u,f){const m=2*i;return this.uint16[m+0]=u,this.uint16[m+1]=f,i}}N.prototype.bytesPerElement=4,vt("StructArrayLayout2ui4",N);class K extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint16[1*i+0]=u,i}}K.prototype.bytesPerElement=2,vt("StructArrayLayout1ui2",K);class ae extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,i,u,f,m)}emplace(i,u,f,m,x){const w=4*i;return this.float32[w+0]=u,this.float32[w+1]=f,this.float32[w+2]=m,this.float32[w+3]=x,i}}ae.prototype.bytesPerElement=16,vt("StructArrayLayout4f16",ae);class ie extends Uo{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}ie.prototype.size=20;class se extends a{get(i){return new ie(this,i)}}vt("CollisionBoxArray",se);class re extends Uo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}re.prototype.size=48;class xe extends A{get(i){return new re(this,i)}}vt("PlacedSymbolArray",xe);class Ie extends Uo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ie.prototype.size=64;class de extends E{get(i){return new Ie(this,i)}}vt("SymbolInstanceArray",de);class be extends I{getoffsetX(i){return this.float32[1*i+0]}}vt("GlyphOffsetArray",be);class De extends Ul{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}vt("SymbolLineVertexArray",De);class Le extends Uo{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Le.prototype.size=12;class We extends O{get(i){return new Le(this,i)}}vt("TextAnchorOffsetArray",We);class et extends Uo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}et.prototype.size=8;class Je extends ${get(i){return new et(this,i)}}vt("FeatureIndexArray",Je);class rt extends Fl{}class bt extends Fl{}class Xt extends Fl{}class ut extends Sf{}class jt extends Tf{}class St extends $s{}class mr extends Pf{}class Kt extends Af{}class Gt extends cr{}class Yt extends y{}class Yr extends h{}class Tr extends g{}class In extends _{}class gn extends N{}const nn=Rr([{name:"a_pos",components:2,type:"Int16"}],4),{members:ki}=nn;class Cr{constructor(i=[]){this.segments=i}prepareSegment(i,u,f,m){let x=this.segments[this.segments.length-1];return i>Cr.MAX_VERTEX_ARRAY_LENGTH&&Re(`Max vertices per segment is ${Cr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!x||x.vertexLength+i>Cr.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==m)&&(x={vertexOffset:u.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},m!==void 0&&(x.sortKey=m),this.segments.push(x)),x}get(){return this.segments}destroy(){for(const i of this.segments)for(const u in i.vaos)i.vaos[u].destroy()}static simpleSegment(i,u,f,m){return new Cr([{vertexOffset:i,primitiveOffset:u,vertexLength:f,primitiveLength:m,vaos:{},sortKey:0}])}}function ya(o,i){return 256*(o=W(Math.floor(o),0,255))+W(Math.floor(i),0,255)}Cr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,vt("SegmentVector",Cr);const va=Rr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var vo={exports:{}},qo={exports:{}};qo.exports=function(o,i){var u,f,m,x,w,T,C,M;for(f=o.length-(u=3&o.length),m=i,w=3432918353,T=461845907,M=0;M<f;)C=255&o.charCodeAt(M)|(255&o.charCodeAt(++M))<<8|(255&o.charCodeAt(++M))<<16|(255&o.charCodeAt(++M))<<24,++M,m=27492+(65535&(x=5*(65535&(m=(m^=C=(65535&(C=(C=(65535&C)*w+(((C>>>16)*w&65535)<<16)&4294967295)<<15|C>>>17))*T+(((C>>>16)*T&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(C=0,u){case 3:C^=(255&o.charCodeAt(M+2))<<16;case 2:C^=(255&o.charCodeAt(M+1))<<8;case 1:m^=C=(65535&(C=(C=(65535&(C^=255&o.charCodeAt(M)))*w+(((C>>>16)*w&65535)<<16)&4294967295)<<15|C>>>17))*T+(((C>>>16)*T&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Rs=qo.exports,Fn={exports:{}};Fn.exports=function(o,i){for(var u,f=o.length,m=i^f,x=0;f>=4;)u=1540483477*(65535&(u=255&o.charCodeAt(x)|(255&o.charCodeAt(++x))<<8|(255&o.charCodeAt(++x))<<16|(255&o.charCodeAt(++x))<<24))+((1540483477*(u>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),f-=4,++x;switch(f){case 3:m^=(255&o.charCodeAt(x+2))<<16;case 2:m^=(255&o.charCodeAt(x+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(x)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var Mn=Rs,Jn=Fn.exports;vo.exports=Mn,vo.exports.murmur3=Mn,vo.exports.murmur2=Jn;var Go=b(vo.exports);class Jr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,u,f,m){this.ids.push(yn(i)),this.positions.push(u,f,m)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=yn(i);let f=0,m=this.ids.length-1;for(;f<m;){const w=f+m>>1;this.ids[w]>=u?m=w:f=w+1}const x=[];for(;this.ids[f]===u;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(i,u){const f=new Float64Array(i.ids),m=new Uint32Array(i.positions);return ci(f,m,0,f.length-1),u&&u.push(f.buffer,m.buffer),{ids:f,positions:m}}static deserialize(i){const u=new Jr;return u.ids=i.ids,u.positions=i.positions,u.indexed=!0,u}}function yn(o){const i=+o;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Go(String(o))}function ci(o,i,u,f){for(;u<f;){const m=o[u+f>>1];let x=u-1,w=f+1;for(;;){do x++;while(o[x]<m);do w--;while(o[w]>m);if(x>=w)break;Qr(o,x,w),Qr(i,3*x,3*w),Qr(i,3*x+1,3*w+1),Qr(i,3*x+2,3*w+2)}w-u<f-w?(ci(o,i,u,w),u=w+1):(ci(o,i,w+1,f),f=w)}}function Qr(o,i,u){const f=o[i];o[i]=o[u],o[u]=f}vt("FeaturePositionMap",Jr);class Wo{constructor(i,u){this.gl=i.gl,this.location=u}}class oc extends Wo{constructor(i,u){super(i,u),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class Cm extends Wo{constructor(i,u){super(i,u),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class km extends Wo{constructor(i,u){super(i,u),this.current=pr.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const I_=new Float32Array(16);function Ef(o){return[ya(255*o.r,255*o.g),ya(255*o.b,255*o.a)]}class _a{constructor(i,u,f){this.value=i,this.uniformNames=u.map(m=>`u_${m}`),this.type=f}setUniform(i,u,f){i.set(f.constantOr(this.value))}getBinding(i,u,f){return this.type==="color"?new km(i,u):new oc(i,u)}}class Zo{constructor(i,u){this.uniformNames=u.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=i.tlbr}setUniform(i,u,f,m){const x=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&i.set(x)}getBinding(i,u,f){return f.substr(0,9)==="u_pattern"?new Cm(i,u):new oc(i,u)}}class xa{constructor(i,u,f,m){this.expression=i,this.type=f,this.maxValue=0,this.paintVertexAttributes=u.map(x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(i,u,f,m,x){const w=this.paintVertexArray.length,T=this.expression.evaluate(new Er(0),u,{},m,[],x);this.paintVertexArray.resize(i),this._setPaintValue(w,i,T)}updatePaintArray(i,u,f,m){const x=this.expression.evaluate({zoom:0},f,m);this._setPaintValue(i,u,x)}_setPaintValue(i,u,f){if(this.type==="color"){const m=Ef(f);for(let x=i;x<u;x++)this.paintVertexArray.emplace(x,m[0],m[1])}else{for(let m=i;m<u;m++)this.paintVertexArray.emplace(m,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Wi{constructor(i,u,f,m,x,w){this.expression=i,this.uniformNames=u.map(T=>`u_${T}_t`),this.type=f,this.useIntegerZoom=m,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=u.map(T=>({name:`a_${T}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(i,u,f,m,x){const w=this.expression.evaluate(new Er(this.zoom),u,{},m,[],x),T=this.expression.evaluate(new Er(this.zoom+1),u,{},m,[],x),C=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(C,i,w,T)}updatePaintArray(i,u,f,m){const x=this.expression.evaluate({zoom:this.zoom},f,m),w=this.expression.evaluate({zoom:this.zoom+1},f,m);this._setPaintValue(i,u,x,w)}_setPaintValue(i,u,f,m){if(this.type==="color"){const x=Ef(f),w=Ef(m);for(let T=i;T<u;T++)this.paintVertexArray.emplace(T,x[0],x[1],w[0],w[1])}else{for(let x=i;x<u;x++)this.paintVertexArray.emplace(x,f,m);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(m))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,u){const f=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,m=W(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);i.set(m)}getBinding(i,u,f){return new oc(i,u)}}class ba{constructor(i,u,f,m,x,w){this.expression=i,this.type=u,this.useIntegerZoom=f,this.zoom=m,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(i,u,f){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(m,i,u.patterns&&u.patterns[this.layerId],f)}updatePaintArray(i,u,f,m,x){this._setPaintValues(i,u,f.patterns&&f.patterns[this.layerId],x)}_setPaintValues(i,u,f,m){if(!m||!f)return;const{min:x,mid:w,max:T}=f,C=m[x],M=m[w],L=m[T];if(C&&M&&L)for(let U=i;U<u;U++)this.zoomInPaintVertexArray.emplace(U,M.tl[0],M.tl[1],M.br[0],M.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],M.pixelRatio,C.pixelRatio),this.zoomOutPaintVertexArray.emplace(U,M.tl[0],M.tl[1],M.br[0],M.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],M.pixelRatio,L.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,va.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,va.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Cf{constructor(i,u,f){this.binders={},this._buffers=[];const m=[];for(const x in i.paint._values){if(!f(x))continue;const w=i.paint.get(x);if(!(w instanceof Yn&&Ms(w.property.specification)))continue;const T=dL(x,i.type),C=w.value,M=w.property.specification.type,L=w.property.useIntegerZoom,U=w.property.specification["property-type"],Z=U==="cross-faded"||U==="cross-faded-data-driven";if(C.kind==="constant")this.binders[x]=Z?new Zo(C.value,T):new _a(C.value,T,M),m.push(`/u_${x}`);else if(C.kind==="source"||Z){const Y=BS(x,M,"source");this.binders[x]=Z?new ba(C,M,L,u,Y,i.id):new xa(C,T,M,Y),m.push(`/a_${x}`)}else{const Y=BS(x,M,"composite");this.binders[x]=new Wi(C,T,M,L,u,Y),m.push(`/z_${x}`)}}this.cacheKey=m.sort().join("")}getMaxValue(i){const u=this.binders[i];return u instanceof xa||u instanceof Wi?u.maxValue:0}populatePaintArrays(i,u,f,m,x){for(const w in this.binders){const T=this.binders[w];(T instanceof xa||T instanceof Wi||T instanceof ba)&&T.populatePaintArray(i,u,f,m,x)}}setConstantPatternPositions(i,u){for(const f in this.binders){const m=this.binders[f];m instanceof Zo&&m.setConstantPatternPositions(i,u)}}updatePaintArrays(i,u,f,m,x){let w=!1;for(const T in i){const C=u.getPositions(T);for(const M of C){const L=f.feature(M.index);for(const U in this.binders){const Z=this.binders[U];if((Z instanceof xa||Z instanceof Wi||Z instanceof ba)&&Z.expression.isStateDependent===!0){const Y=m.paint.get(U);Z.expression=Y.value,Z.updatePaintArray(M.start,M.end,L,i[T],x),w=!0}}}}return w}defines(){const i=[];for(const u in this.binders){const f=this.binders[u];(f instanceof _a||f instanceof Zo)&&i.push(...f.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return i}getBinderAttributes(){const i=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof xa||f instanceof Wi)for(let m=0;m<f.paintVertexAttributes.length;m++)i.push(f.paintVertexAttributes[m].name);else if(f instanceof ba)for(let m=0;m<va.members.length;m++)i.push(va.members[m].name)}return i}getBinderUniforms(){const i=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof _a||f instanceof Zo||f instanceof Wi)for(const m of f.uniformNames)i.push(m)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,u){const f=[];for(const m in this.binders){const x=this.binders[m];if(x instanceof _a||x instanceof Zo||x instanceof Wi){for(const w of x.uniformNames)if(u[w]){const T=x.getBinding(i,u[w],w);f.push({name:w,property:m,binding:T})}}}return f}setUniforms(i,u,f,m){for(const{name:x,property:w,binding:T}of u)this.binders[w].setUniform(T,m,f.get(w),x)}updatePaintBuffers(i){this._buffers=[];for(const u in this.binders){const f=this.binders[u];if(i&&f instanceof ba){const m=i.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(f instanceof xa||f instanceof Wi)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(i){for(const u in this.binders){const f=this.binders[u];(f instanceof xa||f instanceof Wi||f instanceof ba)&&f.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const u=this.binders[i];(u instanceof xa||u instanceof Wi||u instanceof ba)&&u.destroy()}}}class Ga{constructor(i,u,f=()=>!0){this.programConfigurations={};for(const m of i)this.programConfigurations[m.id]=new Cf(m,u,f);this.needsUpload=!1,this._featureMap=new Jr,this._bufferOffset=0}populatePaintArrays(i,u,f,m,x,w){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(i,u,m,x,w);u.id!==void 0&&this._featureMap.add(u.id,f,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,u,f,m){for(const x of f)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(i,this._featureMap,u,x,m)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function dL(o,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${i}-`,"").replace(/-/g,"_")]}function BS(o,i,u){const f={color:{source:$s,composite:ae},number:{source:I,composite:$s}},m=function(x){return{"line-pattern":{source:mr,composite:mr},"fill-pattern":{source:mr,composite:mr},"fill-extrusion-pattern":{source:mr,composite:mr}}[x]}(o);return m&&m[u]||f[i][u]}vt("ConstantBinder",_a),vt("CrossFadedConstantBinder",Zo),vt("SourceExpressionBinder",xa),vt("CrossFadedCompositeBinder",ba),vt("CompositeExpressionBinder",Wi),vt("ProgramConfiguration",Cf,{omit:["_buffers"]}),vt("ProgramConfigurationSet",Ga);const hn=8192,M_=Math.pow(2,14)-1,FS=-M_-1;function Vl(o){const i=hn/o.extent,u=o.loadGeometry();for(let f=0;f<u.length;f++){const m=u[f];for(let x=0;x<m.length;x++){const w=m[x],T=Math.round(w.x*i),C=Math.round(w.y*i);w.x=W(T,FS,M_),w.y=W(C,FS,M_),(T<w.x||T>w.x+1||C<w.y||C>w.y+1)&&Re("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function ql(o,i){return{type:o.type,id:o.id,properties:o.properties,geometry:i?Vl(o):[]}}function Im(o,i,u,f,m){o.emplaceBack(2*i+(f+1)/2,2*u+(m+1)/2)}class O_{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new bt,this.indexArray=new In,this.segments=new Cr,this.programConfigurations=new Ga(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,f){const m=this.layers[0],x=[];let w=null,T=!1;m.type==="circle"&&(w=m.layout.get("circle-sort-key"),T=!w.isConstant());for(const{feature:C,id:M,index:L,sourceLayerIndex:U}of i){const Z=this.layers[0]._featureFilter.needGeometry,Y=ql(C,Z);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),Y,f))continue;const Q=T?w.evaluate(Y,{},f):void 0,ne={id:M,properties:C.properties,type:C.type,sourceLayerIndex:U,index:L,geometry:Z?Y.geometry:Vl(C),patterns:{},sortKey:Q};x.push(ne)}T&&x.sort((C,M)=>C.sortKey-M.sortKey);for(const C of x){const{geometry:M,index:L,sourceLayerIndex:U}=C,Z=i[L].feature;this.addFeature(C,M,L,f),u.featureIndex.insert(Z,M,L,U,this.index)}}update(i,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,ki),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,u,f,m){for(const x of u)for(const w of x){const T=w.x,C=w.y;if(T<0||T>=hn||C<0||C>=hn)continue;const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),L=M.vertexLength;Im(this.layoutVertexArray,T,C,-1,-1),Im(this.layoutVertexArray,T,C,1,-1),Im(this.layoutVertexArray,T,C,1,1),Im(this.layoutVertexArray,T,C,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+3,L+2),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,{},m)}}function US(o,i){for(let u=0;u<o.length;u++)if(sc(i,o[u]))return!0;for(let u=0;u<i.length;u++)if(sc(o,i[u]))return!0;return!!z_(o,i)}function pL(o,i,u){return!!sc(o,i)||!!D_(i,o,u)}function VS(o,i){if(o.length===1)return GS(i,o[0]);for(let u=0;u<i.length;u++){const f=i[u];for(let m=0;m<f.length;m++)if(sc(o,f[m]))return!0}for(let u=0;u<o.length;u++)if(GS(i,o[u]))return!0;for(let u=0;u<i.length;u++)if(z_(o,i[u]))return!0;return!1}function mL(o,i,u){if(o.length>1){if(z_(o,i))return!0;for(let f=0;f<i.length;f++)if(D_(i[f],o,u))return!0}for(let f=0;f<o.length;f++)if(D_(o[f],i,u))return!0;return!1}function z_(o,i){if(o.length===0||i.length===0)return!1;for(let u=0;u<o.length-1;u++){const f=o[u],m=o[u+1];for(let x=0;x<i.length-1;x++)if(gL(f,m,i[x],i[x+1]))return!0}return!1}function gL(o,i,u,f){return Be(o,u,f)!==Be(i,u,f)&&Be(o,i,u)!==Be(o,i,f)}function D_(o,i,u){const f=u*u;if(i.length===1)return o.distSqr(i[0])<f;for(let m=1;m<i.length;m++)if(qS(o,i[m-1],i[m])<f)return!0;return!1}function qS(o,i,u){const f=i.distSqr(u);if(f===0)return o.distSqr(i);const m=((o.x-i.x)*(u.x-i.x)+(o.y-i.y)*(u.y-i.y))/f;return o.distSqr(m<0?i:m>1?u:u.sub(i)._mult(m)._add(i))}function GS(o,i){let u,f,m,x=!1;for(let w=0;w<o.length;w++){u=o[w];for(let T=0,C=u.length-1;T<u.length;C=T++)f=u[T],m=u[C],f.y>i.y!=m.y>i.y&&i.x<(m.x-f.x)*(i.y-f.y)/(m.y-f.y)+f.x&&(x=!x)}return x}function sc(o,i){let u=!1;for(let f=0,m=o.length-1;f<o.length;m=f++){const x=o[f],w=o[m];x.y>i.y!=w.y>i.y&&i.x<(w.x-x.x)*(i.y-x.y)/(w.y-x.y)+x.x&&(u=!u)}return u}function yL(o,i,u){const f=u[0],m=u[2];if(o.x<f.x&&i.x<f.x||o.x>m.x&&i.x>m.x||o.y<f.y&&i.y<f.y||o.y>m.y&&i.y>m.y)return!1;const x=Be(o,i,u[0]);return x!==Be(o,i,u[1])||x!==Be(o,i,u[2])||x!==Be(o,i,u[3])}function kf(o,i,u){const f=i.paint.get(o).value;return f.kind==="constant"?f.value:u.programConfigurations.get(i.id).getMaxValue(o)}function Mm(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Om(o,i,u,f,m){if(!i[0]&&!i[1])return o;const x=k.convert(i)._mult(m);u==="viewport"&&x._rotate(-f);const w=[];for(let T=0;T<o.length;T++)w.push(o[T].sub(x));return w}let WS,ZS;vt("CircleBucket",O_,{omit:["layers"]});var vL={get paint(){return ZS=ZS||new rn({"circle-radius":new Lt(Ne.paint_circle["circle-radius"]),"circle-color":new Lt(Ne.paint_circle["circle-color"]),"circle-blur":new Lt(Ne.paint_circle["circle-blur"]),"circle-opacity":new Lt(Ne.paint_circle["circle-opacity"]),"circle-translate":new Pt(Ne.paint_circle["circle-translate"]),"circle-translate-anchor":new Pt(Ne.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pt(Ne.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pt(Ne.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Lt(Ne.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Lt(Ne.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Lt(Ne.paint_circle["circle-stroke-opacity"])})},get layout(){return WS=WS||new rn({"circle-sort-key":new Lt(Ne.layout_circle["circle-sort-key"])})}},hi=1e-6,lc=typeof Float32Array<"u"?Float32Array:Array;function L_(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function HS(o,i,u){var f=i[0],m=i[1],x=i[2],w=i[3],T=i[4],C=i[5],M=i[6],L=i[7],U=i[8],Z=i[9],Y=i[10],Q=i[11],ne=i[12],he=i[13],pe=i[14],Se=i[15],ge=u[0],Ee=u[1],Oe=u[2],Ze=u[3];return o[0]=ge*f+Ee*T+Oe*U+Ze*ne,o[1]=ge*m+Ee*C+Oe*Z+Ze*he,o[2]=ge*x+Ee*M+Oe*Y+Ze*pe,o[3]=ge*w+Ee*L+Oe*Q+Ze*Se,o[4]=(ge=u[4])*f+(Ee=u[5])*T+(Oe=u[6])*U+(Ze=u[7])*ne,o[5]=ge*m+Ee*C+Oe*Z+Ze*he,o[6]=ge*x+Ee*M+Oe*Y+Ze*pe,o[7]=ge*w+Ee*L+Oe*Q+Ze*Se,o[8]=(ge=u[8])*f+(Ee=u[9])*T+(Oe=u[10])*U+(Ze=u[11])*ne,o[9]=ge*m+Ee*C+Oe*Z+Ze*he,o[10]=ge*x+Ee*M+Oe*Y+Ze*pe,o[11]=ge*w+Ee*L+Oe*Q+Ze*Se,o[12]=(ge=u[12])*f+(Ee=u[13])*T+(Oe=u[14])*U+(Ze=u[15])*ne,o[13]=ge*m+Ee*C+Oe*Z+Ze*he,o[14]=ge*x+Ee*M+Oe*Y+Ze*pe,o[15]=ge*w+Ee*L+Oe*Q+Ze*Se,o}Math.hypot||(Math.hypot=function(){for(var o=0,i=arguments.length;i--;)o+=arguments[i]*arguments[i];return Math.sqrt(o)});var If,_L=HS;function zm(o,i,u){var f=i[0],m=i[1],x=i[2],w=i[3];return o[0]=u[0]*f+u[4]*m+u[8]*x+u[12]*w,o[1]=u[1]*f+u[5]*m+u[9]*x+u[13]*w,o[2]=u[2]*f+u[6]*m+u[10]*x+u[14]*w,o[3]=u[3]*f+u[7]*m+u[11]*x+u[15]*w,o}If=new lc(4),lc!=Float32Array&&(If[0]=0,If[1]=0,If[2]=0,If[3]=0);class xL extends Gi{constructor(i){super(i,vL)}createBucket(i){return new O_(i)}queryRadius(i){const u=i;return kf("circle-radius",this,u)+kf("circle-stroke-width",this,u)+Mm(this.paint.get("circle-translate"))}queryIntersectsFeature(i,u,f,m,x,w,T,C){const M=Om(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,T),L=this.paint.get("circle-radius").evaluate(u,f)+this.paint.get("circle-stroke-width").evaluate(u,f),U=this.paint.get("circle-pitch-alignment")==="map",Z=U?M:function(Q,ne){return Q.map(he=>KS(he,ne))}(M,C),Y=U?L*T:L;for(const Q of m)for(const ne of Q){const he=U?ne:KS(ne,C);let pe=Y;const Se=zm([],[ne.x,ne.y,0,1],C);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?pe*=Se[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(pe*=w.cameraToCenterDistance/Se[3]),pL(Z,he,pe))return!0}return!1}}function KS(o,i){const u=zm([],[o.x,o.y,0,1],i);return new k(u[0]/u[3],u[1]/u[3])}class XS extends O_{}let YS;vt("HeatmapBucket",XS,{omit:["layers"]});var bL={get paint(){return YS=YS||new rn({"heatmap-radius":new Lt(Ne.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Lt(Ne.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pt(Ne.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bf(Ne.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pt(Ne.paint_heatmap["heatmap-opacity"])})}};function j_(o,{width:i,height:u},f,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==i*u*f)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${i*u*f}`)}else m=new Uint8Array(i*u*f);return o.width=i,o.height=u,o.data=m,o}function JS(o,{width:i,height:u},f){if(i===o.width&&u===o.height)return;const m=j_({},{width:i,height:u},f);$_(o,m,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,i),height:Math.min(o.height,u)},f),o.width=i,o.height=u,o.data=m.data}function $_(o,i,u,f,m,x){if(m.width===0||m.height===0)return i;if(m.width>o.width||m.height>o.height||u.x>o.width-m.width||u.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>i.width||m.height>i.height||f.x>i.width-m.width||f.y>i.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const w=o.data,T=i.data;if(w===T)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<m.height;C++){const M=((u.y+C)*o.width+u.x)*x,L=((f.y+C)*i.width+f.x)*x;for(let U=0;U<m.width*x;U++)T[L+U]=w[M+U]}return i}class Mf{constructor(i,u){j_(this,i,1,u)}resize(i){JS(this,i,1)}clone(){return new Mf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,f,m,x){$_(i,u,f,m,x,1)}}class ta{constructor(i,u){j_(this,i,4,u)}resize(i){JS(this,i,4)}replace(i,u){u?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new ta({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,f,m,x){$_(i,u,f,m,x,4)}}function QS(o){const i={},u=o.resolution||256,f=o.clips?o.clips.length:1,m=o.image||new ta({width:u,height:f});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const x=(w,T,C)=>{i[o.evaluationKey]=C;const M=o.expression.evaluate(i);m.data[w+T+0]=Math.floor(255*M.r/M.a),m.data[w+T+1]=Math.floor(255*M.g/M.a),m.data[w+T+2]=Math.floor(255*M.b/M.a),m.data[w+T+3]=Math.floor(255*M.a)};if(o.clips)for(let w=0,T=0;w<f;++w,T+=4*u)for(let C=0,M=0;C<u;C++,M+=4){const L=C/(u-1),{start:U,end:Z}=o.clips[w];x(T,M,U*(1-L)+Z*L)}else for(let w=0,T=0;w<u;w++,T+=4)x(0,T,w/(u-1));return m}vt("AlphaImage",Mf),vt("RGBAImage",ta);class wL extends Gi{createBucket(i){return new XS(i)}constructor(i){super(i,bL),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=QS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let e2;var SL={get paint(){return e2=e2||new rn({"hillshade-illumination-direction":new Pt(Ne.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pt(Ne.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pt(Ne.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pt(Ne.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pt(Ne.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pt(Ne.paint_hillshade["hillshade-accent-color"])})}};class TL extends Gi{constructor(i){super(i,SL)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const PL=Rr([{name:"a_pos",components:2,type:"Int16"}],4),{members:AL}=PL;var R_={exports:{}};function Dm(o,i,u){u=u||2;var f,m,x,w,T,C,M,L=i&&i.length,U=L?i[0]*u:o.length,Z=t2(o,0,U,u,!0),Y=[];if(!Z||Z.next===Z.prev)return Y;if(L&&(Z=function(ne,he,pe,Se){var ge,Ee,Oe,Ze=[];for(ge=0,Ee=he.length;ge<Ee;ge++)(Oe=t2(ne,he[ge]*Se,ge<Ee-1?he[ge+1]*Se:ne.length,Se,!1))===Oe.next&&(Oe.steiner=!0),Ze.push(DL(Oe));for(Ze.sort(ML),ge=0;ge<Ze.length;ge++)pe=OL(Ze[ge],pe);return pe}(o,i,Z,u)),o.length>80*u){f=x=o[0],m=w=o[1];for(var Q=u;Q<U;Q+=u)(T=o[Q])<f&&(f=T),(C=o[Q+1])<m&&(m=C),T>x&&(x=T),C>w&&(w=C);M=(M=Math.max(x-f,w-m))!==0?32767/M:0}return Of(Z,Y,u,f,m,M,0),Y}function t2(o,i,u,f,m){var x,w;if(m===F_(o,i,u,f)>0)for(x=i;x<u;x+=f)w=i2(x,o[x],o[x+1],w);else for(x=u-f;x>=i;x-=f)w=i2(x,o[x],o[x+1],w);return w&&Lm(w,w.next)&&(Df(w),w=w.next),w}function Gl(o,i){if(!o)return o;i||(i=o);var u,f=o;do if(u=!1,f.steiner||!Lm(f,f.next)&&an(f.prev,f,f.next)!==0)f=f.next;else{if(Df(f),(f=i=f.prev)===f.next)break;u=!0}while(u||f!==i);return i}function Of(o,i,u,f,m,x,w){if(o){!w&&x&&function(L,U,Z,Y){var Q=L;do Q.z===0&&(Q.z=N_(Q.x,Q.y,U,Z,Y)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==L);Q.prevZ.nextZ=null,Q.prevZ=null,function(ne){var he,pe,Se,ge,Ee,Oe,Ze,dt,wt=1;do{for(pe=ne,ne=null,Ee=null,Oe=0;pe;){for(Oe++,Se=pe,Ze=0,he=0;he<wt&&(Ze++,Se=Se.nextZ);he++);for(dt=wt;Ze>0||dt>0&&Se;)Ze!==0&&(dt===0||!Se||pe.z<=Se.z)?(ge=pe,pe=pe.nextZ,Ze--):(ge=Se,Se=Se.nextZ,dt--),Ee?Ee.nextZ=ge:ne=ge,ge.prevZ=Ee,Ee=ge;pe=Se}Ee.nextZ=null,wt*=2}while(Oe>1)}(Q)}(o,f,m,x);for(var T,C,M=o;o.prev!==o.next;)if(T=o.prev,C=o.next,x?CL(o,f,m,x):EL(o))i.push(T.i/u|0),i.push(o.i/u|0),i.push(C.i/u|0),Df(o),o=C.next,M=C.next;else if((o=C)===M){w?w===1?Of(o=kL(Gl(o),i,u),i,u,f,m,x,2):w===2&&IL(o,i,u,f,m,x):Of(Gl(o),i,u,f,m,x,1);break}}}function EL(o){var i=o.prev,u=o,f=o.next;if(an(i,u,f)>=0)return!1;for(var m=i.x,x=u.x,w=f.x,T=i.y,C=u.y,M=f.y,L=m<x?m<w?m:w:x<w?x:w,U=T<C?T<M?T:M:C<M?C:M,Z=m>x?m>w?m:w:x>w?x:w,Y=T>C?T>M?T:M:C>M?C:M,Q=f.next;Q!==i;){if(Q.x>=L&&Q.x<=Z&&Q.y>=U&&Q.y<=Y&&uc(m,T,x,C,w,M,Q.x,Q.y)&&an(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function CL(o,i,u,f){var m=o.prev,x=o,w=o.next;if(an(m,x,w)>=0)return!1;for(var T=m.x,C=x.x,M=w.x,L=m.y,U=x.y,Z=w.y,Y=T<C?T<M?T:M:C<M?C:M,Q=L<U?L<Z?L:Z:U<Z?U:Z,ne=T>C?T>M?T:M:C>M?C:M,he=L>U?L>Z?L:Z:U>Z?U:Z,pe=N_(Y,Q,i,u,f),Se=N_(ne,he,i,u,f),ge=o.prevZ,Ee=o.nextZ;ge&&ge.z>=pe&&Ee&&Ee.z<=Se;){if(ge.x>=Y&&ge.x<=ne&&ge.y>=Q&&ge.y<=he&&ge!==m&&ge!==w&&uc(T,L,C,U,M,Z,ge.x,ge.y)&&an(ge.prev,ge,ge.next)>=0||(ge=ge.prevZ,Ee.x>=Y&&Ee.x<=ne&&Ee.y>=Q&&Ee.y<=he&&Ee!==m&&Ee!==w&&uc(T,L,C,U,M,Z,Ee.x,Ee.y)&&an(Ee.prev,Ee,Ee.next)>=0))return!1;Ee=Ee.nextZ}for(;ge&&ge.z>=pe;){if(ge.x>=Y&&ge.x<=ne&&ge.y>=Q&&ge.y<=he&&ge!==m&&ge!==w&&uc(T,L,C,U,M,Z,ge.x,ge.y)&&an(ge.prev,ge,ge.next)>=0)return!1;ge=ge.prevZ}for(;Ee&&Ee.z<=Se;){if(Ee.x>=Y&&Ee.x<=ne&&Ee.y>=Q&&Ee.y<=he&&Ee!==m&&Ee!==w&&uc(T,L,C,U,M,Z,Ee.x,Ee.y)&&an(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.nextZ}return!0}function kL(o,i,u){var f=o;do{var m=f.prev,x=f.next.next;!Lm(m,x)&&r2(m,f,f.next,x)&&zf(m,x)&&zf(x,m)&&(i.push(m.i/u|0),i.push(f.i/u|0),i.push(x.i/u|0),Df(f),Df(f.next),f=o=x),f=f.next}while(f!==o);return Gl(f)}function IL(o,i,u,f,m,x){var w=o;do{for(var T=w.next.next;T!==w.prev;){if(w.i!==T.i&&LL(w,T)){var C=n2(w,T);return w=Gl(w,w.next),C=Gl(C,C.next),Of(w,i,u,f,m,x,0),void Of(C,i,u,f,m,x,0)}T=T.next}w=w.next}while(w!==o)}function ML(o,i){return o.x-i.x}function OL(o,i){var u=function(m,x){var w,T=x,C=m.x,M=m.y,L=-1/0;do{if(M<=T.y&&M>=T.next.y&&T.next.y!==T.y){var U=T.x+(M-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(U<=C&&U>L&&(L=U,w=T.x<T.next.x?T:T.next,U===C))return w}T=T.next}while(T!==x);if(!w)return null;var Z,Y=w,Q=w.x,ne=w.y,he=1/0;T=w;do C>=T.x&&T.x>=Q&&C!==T.x&&uc(M<ne?C:L,M,Q,ne,M<ne?L:C,M,T.x,T.y)&&(Z=Math.abs(M-T.y)/(C-T.x),zf(T,m)&&(Z<he||Z===he&&(T.x>w.x||T.x===w.x&&zL(w,T)))&&(w=T,he=Z)),T=T.next;while(T!==Y);return w}(o,i);if(!u)return i;var f=n2(u,o);return Gl(f,f.next),Gl(u,u.next)}function zL(o,i){return an(o.prev,o,i.prev)<0&&an(i.next,o,o.next)<0}function N_(o,i,u,f,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-u)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-f)*m|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function DL(o){var i=o,u=o;do(i.x<u.x||i.x===u.x&&i.y<u.y)&&(u=i),i=i.next;while(i!==o);return u}function uc(o,i,u,f,m,x,w,T){return(m-w)*(i-T)>=(o-w)*(x-T)&&(o-w)*(f-T)>=(u-w)*(i-T)&&(u-w)*(x-T)>=(m-w)*(f-T)}function LL(o,i){return o.next.i!==i.i&&o.prev.i!==i.i&&!function(u,f){var m=u;do{if(m.i!==u.i&&m.next.i!==u.i&&m.i!==f.i&&m.next.i!==f.i&&r2(m,m.next,u,f))return!0;m=m.next}while(m!==u);return!1}(o,i)&&(zf(o,i)&&zf(i,o)&&function(u,f){var m=u,x=!1,w=(u.x+f.x)/2,T=(u.y+f.y)/2;do m.y>T!=m.next.y>T&&m.next.y!==m.y&&w<(m.next.x-m.x)*(T-m.y)/(m.next.y-m.y)+m.x&&(x=!x),m=m.next;while(m!==u);return x}(o,i)&&(an(o.prev,o,i.prev)||an(o,i.prev,i))||Lm(o,i)&&an(o.prev,o,o.next)>0&&an(i.prev,i,i.next)>0)}function an(o,i,u){return(i.y-o.y)*(u.x-i.x)-(i.x-o.x)*(u.y-i.y)}function Lm(o,i){return o.x===i.x&&o.y===i.y}function r2(o,i,u,f){var m=$m(an(o,i,u)),x=$m(an(o,i,f)),w=$m(an(u,f,o)),T=$m(an(u,f,i));return m!==x&&w!==T||!(m!==0||!jm(o,u,i))||!(x!==0||!jm(o,f,i))||!(w!==0||!jm(u,o,f))||!(T!==0||!jm(u,i,f))}function jm(o,i,u){return i.x<=Math.max(o.x,u.x)&&i.x>=Math.min(o.x,u.x)&&i.y<=Math.max(o.y,u.y)&&i.y>=Math.min(o.y,u.y)}function $m(o){return o>0?1:o<0?-1:0}function zf(o,i){return an(o.prev,o,o.next)<0?an(o,i,o.next)>=0&&an(o,o.prev,i)>=0:an(o,i,o.prev)<0||an(o,o.next,i)<0}function n2(o,i){var u=new B_(o.i,o.x,o.y),f=new B_(i.i,i.x,i.y),m=o.next,x=i.prev;return o.next=i,i.prev=o,u.next=m,m.prev=u,f.next=u,u.prev=f,x.next=f,f.prev=x,f}function i2(o,i,u,f){var m=new B_(o,i,u);return f?(m.next=f.next,m.prev=f,f.next.prev=m,f.next=m):(m.prev=m,m.next=m),m}function Df(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function B_(o,i,u){this.i=o,this.x=i,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F_(o,i,u,f){for(var m=0,x=i,w=u-f;x<u;x+=f)m+=(o[w]-o[x])*(o[x+1]+o[w+1]),w=x;return m}R_.exports=Dm,R_.exports.default=Dm,Dm.deviation=function(o,i,u,f){var m=i&&i.length,x=Math.abs(F_(o,0,m?i[0]*u:o.length,u));if(m)for(var w=0,T=i.length;w<T;w++)x-=Math.abs(F_(o,i[w]*u,w<T-1?i[w+1]*u:o.length,u));var C=0;for(w=0;w<f.length;w+=3){var M=f[w]*u,L=f[w+1]*u,U=f[w+2]*u;C+=Math.abs((o[M]-o[U])*(o[L+1]-o[M+1])-(o[M]-o[L])*(o[U+1]-o[M+1]))}return x===0&&C===0?0:Math.abs((C-x)/x)},Dm.flatten=function(o){for(var i=o[0][0].length,u={vertices:[],holes:[],dimensions:i},f=0,m=0;m<o.length;m++){for(var x=0;x<o[m].length;x++)for(var w=0;w<i;w++)u.vertices.push(o[m][x][w]);m>0&&u.holes.push(f+=o[m-1].length)}return u};var a2=b(R_.exports);function jL(o,i,u,f,m){o2(o,i,u,f||o.length-1,m||$L)}function o2(o,i,u,f,m){for(;f>u;){if(f-u>600){var x=f-u+1,w=i-u+1,T=Math.log(x),C=.5*Math.exp(2*T/3),M=.5*Math.sqrt(T*C*(x-C)/x)*(w-x/2<0?-1:1);o2(o,i,Math.max(u,Math.floor(i-w*C/x+M)),Math.min(f,Math.floor(i+(x-w)*C/x+M)),m)}var L=o[i],U=u,Z=f;for(Lf(o,u,i),m(o[f],L)>0&&Lf(o,u,f);U<Z;){for(Lf(o,U,Z),U++,Z--;m(o[U],L)<0;)U++;for(;m(o[Z],L)>0;)Z--}m(o[u],L)===0?Lf(o,u,Z):Lf(o,++Z,f),Z<=i&&(u=Z+1),i<=Z&&(f=Z-1)}}function Lf(o,i,u){var f=o[i];o[i]=o[u],o[u]=f}function $L(o,i){return o<i?-1:o>i?1:0}function U_(o,i){const u=o.length;if(u<=1)return[o];const f=[];let m,x;for(let w=0;w<u;w++){const T=qe(o[w]);T!==0&&(o[w].area=Math.abs(T),x===void 0&&(x=T<0),x===T<0?(m&&f.push(m),m=[o[w]]):m.push(o[w]))}if(m&&f.push(m),i>1)for(let w=0;w<f.length;w++)f[w].length<=i||(jL(f[w],i,1,f[w].length-1,RL),f[w]=f[w].slice(0,i));return f}function RL(o,i){return i.area-o.area}function V_(o,i,u){const f=u.patternDependencies;let m=!1;for(const x of i){const w=x.paint.get(`${o}-pattern`);w.isConstant()||(m=!0);const T=w.constantOr(null);T&&(m=!0,f[T.to]=!0,f[T.from]=!0)}return m}function q_(o,i,u,f,m){const x=m.patternDependencies;for(const w of i){const T=w.paint.get(`${o}-pattern`).value;if(T.kind!=="constant"){let C=T.evaluate({zoom:f-1},u,{},m.availableImages),M=T.evaluate({zoom:f},u,{},m.availableImages),L=T.evaluate({zoom:f+1},u,{},m.availableImages);C=C&&C.name?C.name:C,M=M&&M.name?M.name:M,L=L&&L.name?L.name:L,x[C]=!0,x[M]=!0,x[L]=!0,u.patterns[w.id]={min:C,mid:M,max:L}}}return u}class G_{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Xt,this.indexArray=new In,this.indexArray2=new gn,this.programConfigurations=new Ga(i.layers,i.zoom),this.segments=new Cr,this.segments2=new Cr,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,f){this.hasPattern=V_("fill",this.layers,u);const m=this.layers[0].layout.get("fill-sort-key"),x=!m.isConstant(),w=[];for(const{feature:T,id:C,index:M,sourceLayerIndex:L}of i){const U=this.layers[0]._featureFilter.needGeometry,Z=ql(T,U);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),Z,f))continue;const Y=x?m.evaluate(Z,{},f,u.availableImages):void 0,Q={id:C,properties:T.properties,type:T.type,sourceLayerIndex:L,index:M,geometry:U?Z.geometry:Vl(T),patterns:{},sortKey:Y};w.push(Q)}x&&w.sort((T,C)=>T.sortKey-C.sortKey);for(const T of w){const{geometry:C,index:M,sourceLayerIndex:L}=T;if(this.hasPattern){const U=q_("fill",this.layers,T,this.zoom,u);this.patternFeatures.push(U)}else this.addFeature(T,C,M,f,{});u.featureIndex.insert(i[M].feature,C,M,L,this.index)}}update(i,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,f)}addFeatures(i,u,f){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,u,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,AL),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,u,f,m,x){for(const w of U_(u,500)){let T=0;for(const Y of w)T+=Y.length;const C=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),M=C.vertexLength,L=[],U=[];for(const Y of w){if(Y.length===0)continue;Y!==w[0]&&U.push(L.length/2);const Q=this.segments2.prepareSegment(Y.length,this.layoutVertexArray,this.indexArray2),ne=Q.vertexLength;this.layoutVertexArray.emplaceBack(Y[0].x,Y[0].y),this.indexArray2.emplaceBack(ne+Y.length-1,ne),L.push(Y[0].x),L.push(Y[0].y);for(let he=1;he<Y.length;he++)this.layoutVertexArray.emplaceBack(Y[he].x,Y[he].y),this.indexArray2.emplaceBack(ne+he-1,ne+he),L.push(Y[he].x),L.push(Y[he].y);Q.vertexLength+=Y.length,Q.primitiveLength+=Y.length}const Z=a2(L,U);for(let Y=0;Y<Z.length;Y+=3)this.indexArray.emplaceBack(M+Z[Y],M+Z[Y+1],M+Z[Y+2]);C.vertexLength+=T,C.primitiveLength+=Z.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,x,m)}}let s2,l2;vt("FillBucket",G_,{omit:["layers","patternFeatures"]});var NL={get paint(){return l2=l2||new rn({"fill-antialias":new Pt(Ne.paint_fill["fill-antialias"]),"fill-opacity":new Lt(Ne.paint_fill["fill-opacity"]),"fill-color":new Lt(Ne.paint_fill["fill-color"]),"fill-outline-color":new Lt(Ne.paint_fill["fill-outline-color"]),"fill-translate":new Pt(Ne.paint_fill["fill-translate"]),"fill-translate-anchor":new Pt(Ne.paint_fill["fill-translate-anchor"]),"fill-pattern":new Bl(Ne.paint_fill["fill-pattern"])})},get layout(){return s2=s2||new rn({"fill-sort-key":new Lt(Ne.layout_fill["fill-sort-key"])})}};class BL extends Gi{constructor(i){super(i,NL)}recalculate(i,u){super.recalculate(i,u);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new G_(i)}queryRadius(){return Mm(this.paint.get("fill-translate"))}queryIntersectsFeature(i,u,f,m,x,w,T){return VS(Om(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,T),m)}isTileClipped(){return!0}}const FL=Rr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),UL=Rr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:VL}=FL;var Ns={},qL=S,u2=cc;function cc(o,i,u,f,m){this.properties={},this.extent=u,this.type=0,this._pbf=o,this._geometry=-1,this._keys=f,this._values=m,o.readFields(GL,this,i)}function GL(o,i,u){o==1?i.id=u.readVarint():o==2?function(f,m){for(var x=f.readVarint()+f.pos;f.pos<x;){var w=m._keys[f.readVarint()],T=m._values[f.readVarint()];m.properties[w]=T}}(u,i):o==3?i.type=u.readVarint():o==4&&(i._geometry=u.pos)}function WL(o){for(var i,u,f=0,m=0,x=o.length,w=x-1;m<x;w=m++)f+=((u=o[w]).x-(i=o[m]).x)*(i.y+u.y);return f}cc.types=["Unknown","Point","LineString","Polygon"],cc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var i,u=o.readVarint()+o.pos,f=1,m=0,x=0,w=0,T=[];o.pos<u;){if(m<=0){var C=o.readVarint();f=7&C,m=C>>3}if(m--,f===1||f===2)x+=o.readSVarint(),w+=o.readSVarint(),f===1&&(i&&T.push(i),i=[]),i.push(new qL(x,w));else{if(f!==7)throw new Error("unknown command "+f);i&&i.push(i[0].clone())}}return i&&T.push(i),T},cc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var i=o.readVarint()+o.pos,u=1,f=0,m=0,x=0,w=1/0,T=-1/0,C=1/0,M=-1/0;o.pos<i;){if(f<=0){var L=o.readVarint();u=7&L,f=L>>3}if(f--,u===1||u===2)(m+=o.readSVarint())<w&&(w=m),m>T&&(T=m),(x+=o.readSVarint())<C&&(C=x),x>M&&(M=x);else if(u!==7)throw new Error("unknown command "+u)}return[w,C,T,M]},cc.prototype.toGeoJSON=function(o,i,u){var f,m,x=this.extent*Math.pow(2,u),w=this.extent*o,T=this.extent*i,C=this.loadGeometry(),M=cc.types[this.type];function L(Y){for(var Q=0;Q<Y.length;Q++){var ne=Y[Q];Y[Q]=[360*(ne.x+w)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(ne.y+T)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var U=[];for(f=0;f<C.length;f++)U[f]=C[f][0];L(C=U);break;case 2:for(f=0;f<C.length;f++)L(C[f]);break;case 3:for(C=function(Y){var Q=Y.length;if(Q<=1)return[Y];for(var ne,he,pe=[],Se=0;Se<Q;Se++){var ge=WL(Y[Se]);ge!==0&&(he===void 0&&(he=ge<0),he===ge<0?(ne&&pe.push(ne),ne=[Y[Se]]):ne.push(Y[Se]))}return ne&&pe.push(ne),pe}(C),f=0;f<C.length;f++)for(m=0;m<C[f].length;m++)L(C[f][m])}C.length===1?C=C[0]:M="Multi"+M;var Z={type:"Feature",geometry:{type:M,coordinates:C},properties:this.properties};return"id"in this&&(Z.id=this.id),Z};var ZL=u2,c2=h2;function h2(o,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(HL,this,i),this.length=this._features.length}function HL(o,i,u){o===15?i.version=u.readVarint():o===1?i.name=u.readString():o===5?i.extent=u.readVarint():o===2?i._features.push(u.pos):o===3?i._keys.push(u.readString()):o===4&&i._values.push(function(f){for(var m=null,x=f.readVarint()+f.pos;f.pos<x;){var w=f.readVarint()>>3;m=w===1?f.readString():w===2?f.readFloat():w===3?f.readDouble():w===4?f.readVarint64():w===5?f.readVarint():w===6?f.readSVarint():w===7?f.readBoolean():null}return m}(u))}h2.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var i=this._pbf.readVarint()+this._pbf.pos;return new ZL(this._pbf,i,this.extent,this._keys,this._values)};var KL=c2;function XL(o,i,u){if(o===3){var f=new KL(u,u.readVarint()+u.pos);f.length&&(i[f.name]=f)}}Ns.VectorTile=function(o,i){this.layers=o.readFields(XL,{},i)},Ns.VectorTileFeature=u2,Ns.VectorTileLayer=c2;const YL=Ns.VectorTileFeature.types,W_=Math.pow(2,13);function jf(o,i,u,f,m,x,w,T){o.emplaceBack(i,u,2*Math.floor(f*W_)+w,m*W_*2,x*W_*2,Math.round(T))}class Z_{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new ut,this.centroidVertexArray=new rt,this.indexArray=new In,this.programConfigurations=new Ga(i.layers,i.zoom),this.segments=new Cr,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,f){this.features=[],this.hasPattern=V_("fill-extrusion",this.layers,u);for(const{feature:m,id:x,index:w,sourceLayerIndex:T}of i){const C=this.layers[0]._featureFilter.needGeometry,M=ql(m,C);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),M,f))continue;const L={id:x,sourceLayerIndex:T,index:w,geometry:C?M.geometry:Vl(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(q_("fill-extrusion",this.layers,L,this.zoom,u)):this.addFeature(L,L.geometry,w,f,{}),u.featureIndex.insert(m,L.geometry,w,T,this.index,!0)}}addFeatures(i,u,f){for(const m of this.features){const{geometry:x}=m;this.addFeature(m,x,m.index,u,f)}}update(i,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,VL),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,UL.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,u,f,m,x){const w={x:0,y:0,vertexCount:0};for(const T of U_(u,500)){let C=0;for(const Q of T)C+=Q.length;let M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Q of T){if(Q.length===0||QL(Q))continue;let ne=0;for(let he=0;he<Q.length;he++){const pe=Q[he];if(he>=1){const Se=Q[he-1];if(!JL(pe,Se)){M.vertexLength+4>Cr.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ge=pe.sub(Se)._perp()._unit(),Ee=Se.dist(pe);ne+Ee>32768&&(ne=0),jf(this.layoutVertexArray,pe.x,pe.y,ge.x,ge.y,0,0,ne),jf(this.layoutVertexArray,pe.x,pe.y,ge.x,ge.y,0,1,ne),w.x+=2*pe.x,w.y+=2*pe.y,w.vertexCount+=2,ne+=Ee,jf(this.layoutVertexArray,Se.x,Se.y,ge.x,ge.y,0,0,ne),jf(this.layoutVertexArray,Se.x,Se.y,ge.x,ge.y,0,1,ne),w.x+=2*Se.x,w.y+=2*Se.y,w.vertexCount+=2;const Oe=M.vertexLength;this.indexArray.emplaceBack(Oe,Oe+2,Oe+1),this.indexArray.emplaceBack(Oe+1,Oe+2,Oe+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+C>Cr.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),YL[i.type]!=="Polygon")continue;const L=[],U=[],Z=M.vertexLength;for(const Q of T)if(Q.length!==0){Q!==T[0]&&U.push(L.length/2);for(let ne=0;ne<Q.length;ne++){const he=Q[ne];jf(this.layoutVertexArray,he.x,he.y,0,0,1,1,0),w.x+=he.x,w.y+=he.y,w.vertexCount+=1,L.push(he.x),L.push(he.y)}}const Y=a2(L,U);for(let Q=0;Q<Y.length;Q+=3)this.indexArray.emplaceBack(Z+Y[Q],Z+Y[Q+2],Z+Y[Q+1]);M.primitiveLength+=Y.length/3,M.vertexLength+=C}for(let T=0;T<w.vertexCount;T++)this.centroidVertexArray.emplaceBack(Math.floor(w.x/w.vertexCount),Math.floor(w.y/w.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,x,m)}}function JL(o,i){return o.x===i.x&&(o.x<0||o.x>hn)||o.y===i.y&&(o.y<0||o.y>hn)}function QL(o){return o.every(i=>i.x<0)||o.every(i=>i.x>hn)||o.every(i=>i.y<0)||o.every(i=>i.y>hn)}let f2;vt("FillExtrusionBucket",Z_,{omit:["layers","features"]});var ej={get paint(){return f2=f2||new rn({"fill-extrusion-opacity":new Pt(Ne["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Lt(Ne["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pt(Ne["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pt(Ne["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Bl(Ne["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Lt(Ne["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Lt(Ne["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pt(Ne["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class tj extends Gi{constructor(i){super(i,ej)}createBucket(i){return new Z_(i)}queryRadius(){return Mm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,u,f,m,x,w,T,C){const M=Om(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,T),L=this.paint.get("fill-extrusion-height").evaluate(u,f),U=this.paint.get("fill-extrusion-base").evaluate(u,f),Z=function(Q,ne,he,pe){const Se=[];for(const ge of Q){const Ee=[ge.x,ge.y,0,1];zm(Ee,Ee,ne),Se.push(new k(Ee[0]/Ee[3],Ee[1]/Ee[3]))}return Se}(M,C),Y=function(Q,ne,he,pe){const Se=[],ge=[],Ee=pe[8]*ne,Oe=pe[9]*ne,Ze=pe[10]*ne,dt=pe[11]*ne,wt=pe[8]*he,ht=pe[9]*he,ct=pe[10]*he,it=pe[11]*he;for(const _t of Q){const st=[],tt=[];for(const Mt of _t){const Tt=Mt.x,Zt=Mt.y,kr=pe[0]*Tt+pe[4]*Zt+pe[12],zr=pe[1]*Tt+pe[5]*Zt+pe[13],_n=pe[2]*Tt+pe[6]*Zt+pe[14],Zi=pe[3]*Tt+pe[7]*Zt+pe[15],fi=_n+Ze,fn=Zi+dt,On=kr+wt,Vn=zr+ht,di=_n+ct,pi=Zi+it,xn=new k((kr+Ee)/fn,(zr+Oe)/fn);xn.z=fi/fn,st.push(xn);const bn=new k(On/pi,Vn/pi);bn.z=di/pi,tt.push(bn)}Se.push(st),ge.push(tt)}return[Se,ge]}(m,U,L,C);return function(Q,ne,he){let pe=1/0;VS(he,ne)&&(pe=d2(he,ne[0]));for(let Se=0;Se<ne.length;Se++){const ge=ne[Se],Ee=Q[Se];for(let Oe=0;Oe<ge.length-1;Oe++){const Ze=ge[Oe],dt=[Ze,ge[Oe+1],Ee[Oe+1],Ee[Oe],Ze];US(he,dt)&&(pe=Math.min(pe,d2(he,dt)))}}return pe!==1/0&&pe}(Y[0],Y[1],Z)}}function $f(o,i){return o.x*i.x+o.y*i.y}function d2(o,i){if(o.length===1){let u=0;const f=i[u++];let m;for(;!m||f.equals(m);)if(m=i[u++],!m)return 1/0;for(;u<i.length;u++){const x=i[u],w=o[0],T=m.sub(f),C=x.sub(f),M=w.sub(f),L=$f(T,T),U=$f(T,C),Z=$f(C,C),Y=$f(M,T),Q=$f(M,C),ne=L*Z-U*U,he=(Z*Y-U*Q)/ne,pe=(L*Q-U*Y)/ne,Se=f.z*(1-he-pe)+m.z*he+x.z*pe;if(isFinite(Se))return Se}return 1/0}{let u=1/0;for(const f of i)u=Math.min(u,f.z);return u}}const rj=Rr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:nj}=rj,ij=Rr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:aj}=ij,oj=Ns.VectorTileFeature.types,sj=Math.cos(Math.PI/180*37.5),p2=Math.pow(2,14)/.5;class H_{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new jt,this.layoutVertexArray2=new St,this.indexArray=new In,this.programConfigurations=new Ga(i.layers,i.zoom),this.segments=new Cr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,f){this.hasPattern=V_("line",this.layers,u);const m=this.layers[0].layout.get("line-sort-key"),x=!m.isConstant(),w=[];for(const{feature:T,id:C,index:M,sourceLayerIndex:L}of i){const U=this.layers[0]._featureFilter.needGeometry,Z=ql(T,U);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),Z,f))continue;const Y=x?m.evaluate(Z,{},f):void 0,Q={id:C,properties:T.properties,type:T.type,sourceLayerIndex:L,index:M,geometry:U?Z.geometry:Vl(T),patterns:{},sortKey:Y};w.push(Q)}x&&w.sort((T,C)=>T.sortKey-C.sortKey);for(const T of w){const{geometry:C,index:M,sourceLayerIndex:L}=T;if(this.hasPattern){const U=q_("line",this.layers,T,this.zoom,u);this.patternFeatures.push(U)}else this.addFeature(T,C,M,f,{});u.featureIndex.insert(i[M].feature,C,M,L,this.index)}}update(i,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,f)}addFeatures(i,u,f){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,u,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,aj)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,nj),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,u,f,m,x){const w=this.layers[0].layout,T=w.get("line-join").evaluate(i,{}),C=w.get("line-cap"),M=w.get("line-miter-limit"),L=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const U of u)this.addLine(U,i,T,C,M,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,x,m)}addLine(i,u,f,m,x,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let pe=0;pe<i.length-1;pe++)this.totalDistance+=i[pe].dist(i[pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=oj[u.type]==="Polygon";let C=i.length;for(;C>=2&&i[C-1].equals(i[C-2]);)C--;let M=0;for(;M<C-1&&i[M].equals(i[M+1]);)M++;if(C<(T?3:2))return;f==="bevel"&&(x=1.05);const L=this.overscaling<=16?15*hn/(512*this.overscaling):0,U=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray);let Z,Y,Q,ne,he;this.e1=this.e2=-1,T&&(Z=i[C-2],he=i[M].sub(Z)._unit()._perp());for(let pe=M;pe<C;pe++){if(Q=pe===C-1?T?i[M+1]:void 0:i[pe+1],Q&&i[pe].equals(Q))continue;he&&(ne=he),Z&&(Y=Z),Z=i[pe],he=Q?Q.sub(Z)._unit()._perp():ne,ne=ne||he;let Se=ne.add(he);Se.x===0&&Se.y===0||Se._unit();const ge=ne.x*he.x+ne.y*he.y,Ee=Se.x*he.x+Se.y*he.y,Oe=Ee!==0?1/Ee:1/0,Ze=2*Math.sqrt(2-2*Ee),dt=Ee<sj&&Y&&Q,wt=ne.x*he.y-ne.y*he.x>0;if(dt&&pe>M){const it=Z.dist(Y);if(it>2*L){const _t=Z.sub(Z.sub(Y)._mult(L/it)._round());this.updateDistance(Y,_t),this.addCurrentVertex(_t,ne,0,0,U),Y=_t}}const ht=Y&&Q;let ct=ht?f:T?"butt":m;if(ht&&ct==="round"&&(Oe<w?ct="miter":Oe<=2&&(ct="fakeround")),ct==="miter"&&Oe>x&&(ct="bevel"),ct==="bevel"&&(Oe>2&&(ct="flipbevel"),Oe<x&&(ct="miter")),Y&&this.updateDistance(Y,Z),ct==="miter")Se._mult(Oe),this.addCurrentVertex(Z,Se,0,0,U);else if(ct==="flipbevel"){if(Oe>100)Se=he.mult(-1);else{const it=Oe*ne.add(he).mag()/ne.sub(he).mag();Se._perp()._mult(it*(wt?-1:1))}this.addCurrentVertex(Z,Se,0,0,U),this.addCurrentVertex(Z,Se.mult(-1),0,0,U)}else if(ct==="bevel"||ct==="fakeround"){const it=-Math.sqrt(Oe*Oe-1),_t=wt?it:0,st=wt?0:it;if(Y&&this.addCurrentVertex(Z,ne,_t,st,U),ct==="fakeround"){const tt=Math.round(180*Ze/Math.PI/20);for(let Mt=1;Mt<tt;Mt++){let Tt=Mt/tt;if(Tt!==.5){const kr=Tt-.5;Tt+=Tt*kr*(Tt-1)*((1.0904+ge*(ge*(3.55645-1.43519*ge)-3.2452))*kr*kr+(.848013+ge*(.215638*ge-1.06021)))}const Zt=he.sub(ne)._mult(Tt)._add(ne)._unit()._mult(wt?-1:1);this.addHalfVertex(Z,Zt.x,Zt.y,!1,wt,0,U)}}Q&&this.addCurrentVertex(Z,he,-_t,-st,U)}else if(ct==="butt")this.addCurrentVertex(Z,Se,0,0,U);else if(ct==="square"){const it=Y?1:-1;this.addCurrentVertex(Z,Se,it,it,U)}else ct==="round"&&(Y&&(this.addCurrentVertex(Z,ne,0,0,U),this.addCurrentVertex(Z,ne,1,1,U,!0)),Q&&(this.addCurrentVertex(Z,he,-1,-1,U,!0),this.addCurrentVertex(Z,he,0,0,U)));if(dt&&pe<C-1){const it=Z.dist(Q);if(it>2*L){const _t=Z.add(Q.sub(Z)._mult(L/it)._round());this.updateDistance(Z,_t),this.addCurrentVertex(_t,he,0,0,U),Z=_t}}}}addCurrentVertex(i,u,f,m,x,w=!1){const T=u.y*m-u.x,C=-u.y-u.x*m;this.addHalfVertex(i,u.x+u.y*f,u.y-u.x*f,w,!1,f,x),this.addHalfVertex(i,T,C,w,!0,-m,x),this.distance>p2/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,u,f,m,x,w))}addHalfVertex({x:i,y:u},f,m,x,w,T,C){const M=.5*(this.lineClips?this.scaledDistance*(p2-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(x?1:0),(u<<1)+(w?1:0),Math.round(63*f)+128,Math.round(63*m)+128,1+(T===0?0:T<0?-1:1)|(63&M)<<2,M>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const L=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,L),C.primitiveLength++),w?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,u){this.distance+=i.dist(u),this.updateScaledDistance()}}let m2,g2;vt("LineBucket",H_,{omit:["layers","patternFeatures"]});var y2={get paint(){return g2=g2||new rn({"line-opacity":new Lt(Ne.paint_line["line-opacity"]),"line-color":new Lt(Ne.paint_line["line-color"]),"line-translate":new Pt(Ne.paint_line["line-translate"]),"line-translate-anchor":new Pt(Ne.paint_line["line-translate-anchor"]),"line-width":new Lt(Ne.paint_line["line-width"]),"line-gap-width":new Lt(Ne.paint_line["line-gap-width"]),"line-offset":new Lt(Ne.paint_line["line-offset"]),"line-blur":new Lt(Ne.paint_line["line-blur"]),"line-dasharray":new xf(Ne.paint_line["line-dasharray"]),"line-pattern":new Bl(Ne.paint_line["line-pattern"]),"line-gradient":new bf(Ne.paint_line["line-gradient"])})},get layout(){return m2=m2||new rn({"line-cap":new Pt(Ne.layout_line["line-cap"]),"line-join":new Lt(Ne.layout_line["line-join"]),"line-miter-limit":new Pt(Ne.layout_line["line-miter-limit"]),"line-round-limit":new Pt(Ne.layout_line["line-round-limit"]),"line-sort-key":new Lt(Ne.layout_line["line-sort-key"])})}};class lj extends Lt{possiblyEvaluate(i,u){return u=new Er(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(i,u)}evaluate(i,u,f,m){return u=le({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(i,u,f,m)}}let Rm;class uj extends Gi{constructor(i){super(i,y2),this.gradientVersion=0,Rm||(Rm=new lj(y2.paint.properties["line-width"].specification),Rm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof fo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,u){super.recalculate(i,u),this.paint._values["line-floorwidth"]=Rm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new H_(i)}queryRadius(i){const u=i,f=v2(kf("line-width",this,u),kf("line-gap-width",this,u)),m=kf("line-offset",this,u);return f/2+Math.abs(m)+Mm(this.paint.get("line-translate"))}queryIntersectsFeature(i,u,f,m,x,w,T){const C=Om(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,T),M=T/2*v2(this.paint.get("line-width").evaluate(u,f),this.paint.get("line-gap-width").evaluate(u,f)),L=this.paint.get("line-offset").evaluate(u,f);return L&&(m=function(U,Z){const Y=[];for(let Q=0;Q<U.length;Q++){const ne=U[Q],he=[];for(let pe=0;pe<ne.length;pe++){const Se=ne[pe-1],ge=ne[pe],Ee=ne[pe+1],Oe=pe===0?new k(0,0):ge.sub(Se)._unit()._perp(),Ze=pe===ne.length-1?new k(0,0):Ee.sub(ge)._unit()._perp(),dt=Oe._add(Ze)._unit(),wt=dt.x*Ze.x+dt.y*Ze.y;wt!==0&&dt._mult(1/wt),he.push(dt._mult(Z)._add(ge))}Y.push(he)}return Y}(m,L*T)),function(U,Z,Y){for(let Q=0;Q<Z.length;Q++){const ne=Z[Q];if(U.length>=3){for(let he=0;he<ne.length;he++)if(sc(U,ne[he]))return!0}if(mL(U,ne,Y))return!0}return!1}(C,m,M)}isTileClipped(){return!0}}function v2(o,i){return i>0?i+2*o:o}const cj=Rr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),hj=Rr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Rr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const fj=Rr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Rr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const _2=Rr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),dj=Rr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function pj(o,i,u){return o.sections.forEach(f=>{f.text=function(m,x,w){const T=x.layout.get("text-transform").evaluate(w,{});return T==="uppercase"?m=m.toLocaleUpperCase():T==="lowercase"&&(m=m.toLocaleLowerCase()),Ci.applyArabicShaping&&(m=Ci.applyArabicShaping(m)),m}(f.text,i,u)}),o}Rr([{name:"triangle",components:3,type:"Uint16"}]),Rr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Rr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Rr([{type:"Float32",name:"offsetX"}]),Rr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Rr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Rf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var vn=24,x2=_r,b2=function(o,i,u,f,m){var x,w,T=8*m-f-1,C=(1<<T)-1,M=C>>1,L=-7,U=m-1,Z=-1,Y=o[i+U];for(U+=Z,x=Y&(1<<-L)-1,Y>>=-L,L+=T;L>0;x=256*x+o[i+U],U+=Z,L-=8);for(w=x&(1<<-L)-1,x>>=-L,L+=f;L>0;w=256*w+o[i+U],U+=Z,L-=8);if(x===0)x=1-M;else{if(x===C)return w?NaN:1/0*(Y?-1:1);w+=Math.pow(2,f),x-=M}return(Y?-1:1)*w*Math.pow(2,x-f)},w2=function(o,i,u,f,m,x){var w,T,C,M=8*x-m-1,L=(1<<M)-1,U=L>>1,Z=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,Y=0,Q=1,ne=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(T=isNaN(i)?1:0,w=L):(w=Math.floor(Math.log(i)/Math.LN2),i*(C=Math.pow(2,-w))<1&&(w--,C*=2),(i+=w+U>=1?Z/C:Z*Math.pow(2,1-U))*C>=2&&(w++,C/=2),w+U>=L?(T=0,w=L):w+U>=1?(T=(i*C-1)*Math.pow(2,m),w+=U):(T=i*Math.pow(2,U-1)*Math.pow(2,m),w=0));m>=8;o[u+Y]=255&T,Y+=Q,T/=256,m-=8);for(w=w<<m|T,M+=m;M>0;o[u+Y]=255&w,Y+=Q,w/=256,M-=8);o[u+Y-Q]|=128*ne};function _r(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}_r.Varint=0,_r.Fixed64=1,_r.Bytes=2,_r.Fixed32=5;var K_=4294967296,S2=1/K_,T2=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ho(o){return o.type===_r.Bytes?o.readVarint()+o.pos:o.pos+1}function hc(o,i,u){return u?4294967296*i+(o>>>0):4294967296*(i>>>0)+(o>>>0)}function P2(o,i,u){var f=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));u.realloc(f);for(var m=u.pos-1;m>=o;m--)u.buf[m+f]=u.buf[m]}function mj(o,i){for(var u=0;u<o.length;u++)i.writeVarint(o[u])}function gj(o,i){for(var u=0;u<o.length;u++)i.writeSVarint(o[u])}function yj(o,i){for(var u=0;u<o.length;u++)i.writeFloat(o[u])}function vj(o,i){for(var u=0;u<o.length;u++)i.writeDouble(o[u])}function _j(o,i){for(var u=0;u<o.length;u++)i.writeBoolean(o[u])}function xj(o,i){for(var u=0;u<o.length;u++)i.writeFixed32(o[u])}function bj(o,i){for(var u=0;u<o.length;u++)i.writeSFixed32(o[u])}function wj(o,i){for(var u=0;u<o.length;u++)i.writeFixed64(o[u])}function Sj(o,i){for(var u=0;u<o.length;u++)i.writeSFixed64(o[u])}function Nm(o,i){return(o[i]|o[i+1]<<8|o[i+2]<<16)+16777216*o[i+3]}function fc(o,i,u){o[u]=i,o[u+1]=i>>>8,o[u+2]=i>>>16,o[u+3]=i>>>24}function A2(o,i){return(o[i]|o[i+1]<<8|o[i+2]<<16)+(o[i+3]<<24)}_r.prototype={destroy:function(){this.buf=null},readFields:function(o,i,u){for(u=u||this.length;this.pos<u;){var f=this.readVarint(),m=f>>3,x=this.pos;this.type=7&f,o(m,i,this),this.pos===x&&this.skip(f)}return i},readMessage:function(o,i){return this.readFields(o,i,this.readVarint()+this.pos)},readFixed32:function(){var o=Nm(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=A2(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Nm(this.buf,this.pos)+Nm(this.buf,this.pos+4)*K_;return this.pos+=8,o},readSFixed64:function(){var o=Nm(this.buf,this.pos)+A2(this.buf,this.pos+4)*K_;return this.pos+=8,o},readFloat:function(){var o=b2(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=b2(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var i,u,f=this.buf;return i=127&(u=f[this.pos++]),u<128?i:(i|=(127&(u=f[this.pos++]))<<7,u<128?i:(i|=(127&(u=f[this.pos++]))<<14,u<128?i:(i|=(127&(u=f[this.pos++]))<<21,u<128?i:function(m,x,w){var T,C,M=w.buf;if(T=(112&(C=M[w.pos++]))>>4,C<128||(T|=(127&(C=M[w.pos++]))<<3,C<128)||(T|=(127&(C=M[w.pos++]))<<10,C<128)||(T|=(127&(C=M[w.pos++]))<<17,C<128)||(T|=(127&(C=M[w.pos++]))<<24,C<128)||(T|=(1&(C=M[w.pos++]))<<31,C<128))return hc(m,T,x);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(u=f[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,i=this.pos;return this.pos=o,o-i>=12&&T2?function(u,f,m){return T2.decode(u.subarray(f,m))}(this.buf,i,o):function(u,f,m){for(var x="",w=f;w<m;){var T,C,M,L=u[w],U=null,Z=L>239?4:L>223?3:L>191?2:1;if(w+Z>m)break;Z===1?L<128&&(U=L):Z===2?(192&(T=u[w+1]))==128&&(U=(31&L)<<6|63&T)<=127&&(U=null):Z===3?(C=u[w+2],(192&(T=u[w+1]))==128&&(192&C)==128&&((U=(15&L)<<12|(63&T)<<6|63&C)<=2047||U>=55296&&U<=57343)&&(U=null)):Z===4&&(C=u[w+2],M=u[w+3],(192&(T=u[w+1]))==128&&(192&C)==128&&(192&M)==128&&((U=(15&L)<<18|(63&T)<<12|(63&C)<<6|63&M)<=65535||U>=1114112)&&(U=null)),U===null?(U=65533,Z=1):U>65535&&(U-=65536,x+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),x+=String.fromCharCode(U),w+=Z}return x}(this.buf,i,o)},readBytes:function(){var o=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,o);return this.pos=o,i},readPackedVarint:function(o,i){if(this.type!==_r.Bytes)return o.push(this.readVarint(i));var u=Ho(this);for(o=o||[];this.pos<u;)o.push(this.readVarint(i));return o},readPackedSVarint:function(o){if(this.type!==_r.Bytes)return o.push(this.readSVarint());var i=Ho(this);for(o=o||[];this.pos<i;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==_r.Bytes)return o.push(this.readBoolean());var i=Ho(this);for(o=o||[];this.pos<i;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==_r.Bytes)return o.push(this.readFloat());var i=Ho(this);for(o=o||[];this.pos<i;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==_r.Bytes)return o.push(this.readDouble());var i=Ho(this);for(o=o||[];this.pos<i;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==_r.Bytes)return o.push(this.readFixed32());var i=Ho(this);for(o=o||[];this.pos<i;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==_r.Bytes)return o.push(this.readSFixed32());var i=Ho(this);for(o=o||[];this.pos<i;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==_r.Bytes)return o.push(this.readFixed64());var i=Ho(this);for(o=o||[];this.pos<i;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==_r.Bytes)return o.push(this.readSFixed64());var i=Ho(this);for(o=o||[];this.pos<i;)o.push(this.readSFixed64());return o},skip:function(o){var i=7&o;if(i===_r.Varint)for(;this.buf[this.pos++]>127;);else if(i===_r.Bytes)this.pos=this.readVarint()+this.pos;else if(i===_r.Fixed32)this.pos+=4;else{if(i!==_r.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(o,i){this.writeVarint(o<<3|i)},realloc:function(o){for(var i=this.length||16;i<this.pos+o;)i*=2;if(i!==this.length){var u=new Uint8Array(i);u.set(this.buf),this.buf=u,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),fc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),fc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),fc(this.buf,-1&o,this.pos),fc(this.buf,Math.floor(o*S2),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),fc(this.buf,-1&o,this.pos),fc(this.buf,Math.floor(o*S2),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(i,u){var f,m;if(i>=0?(f=i%4294967296|0,m=i/4294967296|0):(m=~(-i/4294967296),4294967295^(f=~(-i%4294967296))?f=f+1|0:(f=0,m=m+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(x,w,T){T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,T.buf[T.pos]=127&(x>>>=7)}(f,0,u),function(x,w){var T=(7&x)<<4;w.buf[w.pos++]|=T|((x>>>=3)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x)))))}(m,u)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var i=this.pos;this.pos=function(f,m,x){for(var w,T,C=0;C<m.length;C++){if((w=m.charCodeAt(C))>55295&&w<57344){if(!T){w>56319||C+1===m.length?(f[x++]=239,f[x++]=191,f[x++]=189):T=w;continue}if(w<56320){f[x++]=239,f[x++]=191,f[x++]=189,T=w;continue}w=T-55296<<10|w-56320|65536,T=null}else T&&(f[x++]=239,f[x++]=191,f[x++]=189,T=null);w<128?f[x++]=w:(w<2048?f[x++]=w>>6|192:(w<65536?f[x++]=w>>12|224:(f[x++]=w>>18|240,f[x++]=w>>12&63|128),f[x++]=w>>6&63|128),f[x++]=63&w|128)}return x}(this.buf,o,this.pos);var u=this.pos-i;u>=128&&P2(i,u,this),this.pos=i-1,this.writeVarint(u),this.pos+=u},writeFloat:function(o){this.realloc(4),w2(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),w2(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var i=o.length;this.writeVarint(i),this.realloc(i);for(var u=0;u<i;u++)this.buf[this.pos++]=o[u]},writeRawMessage:function(o,i){this.pos++;var u=this.pos;o(i,this);var f=this.pos-u;f>=128&&P2(u,f,this),this.pos=u-1,this.writeVarint(f),this.pos+=f},writeMessage:function(o,i,u){this.writeTag(o,_r.Bytes),this.writeRawMessage(i,u)},writePackedVarint:function(o,i){i.length&&this.writeMessage(o,mj,i)},writePackedSVarint:function(o,i){i.length&&this.writeMessage(o,gj,i)},writePackedBoolean:function(o,i){i.length&&this.writeMessage(o,_j,i)},writePackedFloat:function(o,i){i.length&&this.writeMessage(o,yj,i)},writePackedDouble:function(o,i){i.length&&this.writeMessage(o,vj,i)},writePackedFixed32:function(o,i){i.length&&this.writeMessage(o,xj,i)},writePackedSFixed32:function(o,i){i.length&&this.writeMessage(o,bj,i)},writePackedFixed64:function(o,i){i.length&&this.writeMessage(o,wj,i)},writePackedSFixed64:function(o,i){i.length&&this.writeMessage(o,Sj,i)},writeBytesField:function(o,i){this.writeTag(o,_r.Bytes),this.writeBytes(i)},writeFixed32Field:function(o,i){this.writeTag(o,_r.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(o,i){this.writeTag(o,_r.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(o,i){this.writeTag(o,_r.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(o,i){this.writeTag(o,_r.Fixed64),this.writeSFixed64(i)},writeVarintField:function(o,i){this.writeTag(o,_r.Varint),this.writeVarint(i)},writeSVarintField:function(o,i){this.writeTag(o,_r.Varint),this.writeSVarint(i)},writeStringField:function(o,i){this.writeTag(o,_r.Bytes),this.writeString(i)},writeFloatField:function(o,i){this.writeTag(o,_r.Fixed32),this.writeFloat(i)},writeDoubleField:function(o,i){this.writeTag(o,_r.Fixed64),this.writeDouble(i)},writeBooleanField:function(o,i){this.writeVarintField(o,!!i)}};var X_=b(x2);const Y_=3;function Tj(o,i,u){o===1&&u.readMessage(Pj,i)}function Pj(o,i,u){if(o===3){const{id:f,bitmap:m,width:x,height:w,left:T,top:C,advance:M}=u.readMessage(Aj,{});i.push({id:f,bitmap:new Mf({width:x+2*Y_,height:w+2*Y_},m),metrics:{width:x,height:w,left:T,top:C,advance:M}})}}function Aj(o,i,u){o===1?i.id=u.readVarint():o===2?i.bitmap=u.readBytes():o===3?i.width=u.readVarint():o===4?i.height=u.readVarint():o===5?i.left=u.readSVarint():o===6?i.top=u.readSVarint():o===7&&(i.advance=u.readVarint())}const E2=Y_;function C2(o){let i=0,u=0;for(const w of o)i+=w.w*w.h,u=Math.max(u,w.w);o.sort((w,T)=>T.h-w.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),u),h:1/0}];let m=0,x=0;for(const w of o)for(let T=f.length-1;T>=0;T--){const C=f[T];if(!(w.w>C.w||w.h>C.h)){if(w.x=C.x,w.y=C.y,x=Math.max(x,w.y+w.h),m=Math.max(m,w.x+w.w),w.w===C.w&&w.h===C.h){const M=f.pop();T<f.length&&(f[T]=M)}else w.h===C.h?(C.x+=w.w,C.w-=w.w):w.w===C.w?(C.y+=w.h,C.h-=w.h):(f.push({x:C.x+w.w,y:C.y,w:C.w-w.w,h:w.h}),C.y+=w.h,C.h-=w.h);break}}return{w:m,h:x,fill:i/(m*x)||0}}const Ii=1;class J_{constructor(i,{pixelRatio:u,version:f,stretchX:m,stretchY:x,content:w}){this.paddedRect=i,this.pixelRatio=u,this.stretchX=m,this.stretchY=x,this.content=w,this.version=f}get tl(){return[this.paddedRect.x+Ii,this.paddedRect.y+Ii]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ii,this.paddedRect.y+this.paddedRect.h-Ii]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ii)/this.pixelRatio,(this.paddedRect.h-2*Ii)/this.pixelRatio]}}class k2{constructor(i,u){const f={},m={};this.haveRenderCallbacks=[];const x=[];this.addImages(i,f,x),this.addImages(u,m,x);const{w,h:T}=C2(x),C=new ta({width:w||1,height:T||1});for(const M in i){const L=i[M],U=f[M].paddedRect;ta.copy(L.data,C,{x:0,y:0},{x:U.x+Ii,y:U.y+Ii},L.data)}for(const M in u){const L=u[M],U=m[M].paddedRect,Z=U.x+Ii,Y=U.y+Ii,Q=L.data.width,ne=L.data.height;ta.copy(L.data,C,{x:0,y:0},{x:Z,y:Y},L.data),ta.copy(L.data,C,{x:0,y:ne-1},{x:Z,y:Y-1},{width:Q,height:1}),ta.copy(L.data,C,{x:0,y:0},{x:Z,y:Y+ne},{width:Q,height:1}),ta.copy(L.data,C,{x:Q-1,y:0},{x:Z-1,y:Y},{width:1,height:ne}),ta.copy(L.data,C,{x:0,y:0},{x:Z+Q,y:Y},{width:1,height:ne})}this.image=C,this.iconPositions=f,this.patternPositions=m}addImages(i,u,f){for(const m in i){const x=i[m],w={x:0,y:0,w:x.data.width+2*Ii,h:x.data.height+2*Ii};f.push(w),u[m]=new J_(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(i,u){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in i.updatedImages)this.patchUpdatedImage(this.iconPositions[f],i.getImage(f),u),this.patchUpdatedImage(this.patternPositions[f],i.getImage(f),u)}patchUpdatedImage(i,u,f){if(!i||!u||i.version===u.version)return;i.version=u.version;const[m,x]=i.tl;f.update(u.data,void 0,{x:m,y:x})}}var Bs;vt("ImagePosition",J_),vt("ImageAtlas",k2),l.ai=void 0,(Bs=l.ai||(l.ai={}))[Bs.none=0]="none",Bs[Bs.horizontal=1]="horizontal",Bs[Bs.vertical=2]="vertical",Bs[Bs.horizontalOnly=3]="horizontalOnly";const Nf=-17;class Bf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,u){const f=new Bf;return f.scale=i||1,f.fontStack=u,f}static forImage(i){const u=new Bf;return u.imageName=i,u}}class dc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,u){const f=new dc;for(let m=0;m<i.sections.length;m++){const x=i.sections[m];x.image?f.addImageSection(x):f.addTextSection(x,u)}return f}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let u="";for(let f=0;f<i.length;f++){const m=i.charCodeAt(f+1)||null,x=i.charCodeAt(f-1)||null;u+=m&&xm(m)&&!Rf[i[f+1]]||x&&xm(x)&&!Rf[i[f-1]]||!Rf[i[f]]?i[f]:Rf[i[f]]}return u}(this.text)}trim(){let i=0;for(let f=0;f<this.text.length&&Fm[this.text.charCodeAt(f)];f++)i++;let u=this.text.length;for(let f=this.text.length-1;f>=0&&f>=i&&Fm[this.text.charCodeAt(f)];f--)u--;this.text=this.text.substring(i,u),this.sectionIndex=this.sectionIndex.slice(i,u)}substring(i,u){const f=new dc;return f.text=this.text.substring(i,u),f.sectionIndex=this.sectionIndex.slice(i,u),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,u)=>Math.max(i,this.sections[u].scale),0)}addTextSection(i,u){this.text+=i.text,this.sections.push(Bf.forText(i.scale,i.fontStack||u));const f=this.sections.length-1;for(let m=0;m<i.text.length;++m)this.sectionIndex.push(f)}addImageSection(i){const u=i.image?i.image.name:"";if(u.length===0)return void Re("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Bf.forImage(u)),this.sectionIndex.push(this.sections.length-1)):Re("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Bm(o,i,u,f,m,x,w,T,C,M,L,U,Z,Y,Q,ne){const he=dc.fromFeature(o,m);let pe;U===l.ai.vertical&&he.verticalizePunctuation();const{processBidirectionalText:Se,processStyledBidirectionalText:ge}=Ci;if(Se&&he.sections.length===1){pe=[];const Ze=Se(he.toString(),Q_(he,M,x,i,f,Y,Q));for(const dt of Ze){const wt=new dc;wt.text=dt,wt.sections=he.sections;for(let ht=0;ht<dt.length;ht++)wt.sectionIndex.push(0);pe.push(wt)}}else if(ge){pe=[];const Ze=ge(he.text,he.sectionIndex,Q_(he,M,x,i,f,Y,Q));for(const dt of Ze){const wt=new dc;wt.text=dt[0],wt.sectionIndex=dt[1],wt.sections=he.sections,pe.push(wt)}}else pe=function(Ze,dt){const wt=[],ht=Ze.text;let ct=0;for(const it of dt)wt.push(Ze.substring(ct,it)),ct=it;return ct<ht.length&&wt.push(Ze.substring(ct,ht.length)),wt}(he,Q_(he,M,x,i,f,Y,Q));const Ee=[],Oe={positionedLines:Ee,text:he.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:U,iconsInText:!1,verticalizable:!1};return function(Ze,dt,wt,ht,ct,it,_t,st,tt,Mt,Tt,Zt){let kr=0,zr=Nf,_n=0,Zi=0;const fi=st==="right"?1:st==="left"?0:.5;let fn=0;for(const xn of ct){xn.trim();const bn=xn.getMaxScale(),Qn=(bn-1)*vn,mi={positionedGlyphs:[],lineOffset:0};Ze.positionedLines[fn]=mi;const ei=mi.positionedGlyphs;let Mi=0;if(!xn.length()){zr+=it,++fn;continue}for(let wn=0;wn<xn.length();wn++){const Qt=xn.getSection(wn),ti=xn.getSectionIndex(wn),qn=xn.getCharCode(wn);let Sn=0,wa=null,Wa=null,Za=null,Ko=vn;const Sa=!(tt===l.ai.horizontal||!Tt&&!ff(qn)||Tt&&(Fm[qn]||(On=qn,ft.Arabic(On)||ft["Arabic Supplement"](On)||ft["Arabic Extended-A"](On)||ft["Arabic Presentation Forms-A"](On)||ft["Arabic Presentation Forms-B"](On))));if(Qt.imageName){const na=ht[Qt.imageName];if(!na)continue;Za=Qt.imageName,Ze.iconsInText=Ze.iconsInText||!0,Wa=na.paddedRect;const zi=na.displaySize;Qt.scale=Qt.scale*vn/Zt,wa={width:zi[0],height:zi[1],left:Ii,top:-E2,advance:Sa?zi[1]:zi[0]},Sn=Qn+(vn-zi[1]*Qt.scale),Ko=wa.advance;const Xo=Sa?zi[0]*Qt.scale-vn*bn:zi[1]*Qt.scale-vn*bn;Xo>0&&Xo>Mi&&(Mi=Xo)}else{const na=wt[Qt.fontStack],zi=na&&na[qn];if(zi&&zi.rect)Wa=zi.rect,wa=zi.metrics;else{const Xo=dt[Qt.fontStack],Gf=Xo&&Xo[qn];if(!Gf)continue;wa=Gf.metrics}Sn=(bn-Qt.scale)*vn}Sa?(Ze.verticalizable=!0,ei.push({glyph:qn,imageName:Za,x:kr,y:zr+Sn,vertical:Sa,scale:Qt.scale,fontStack:Qt.fontStack,sectionIndex:ti,metrics:wa,rect:Wa}),kr+=Ko*Qt.scale+Mt):(ei.push({glyph:qn,imageName:Za,x:kr,y:zr+Sn,vertical:Sa,scale:Qt.scale,fontStack:Qt.fontStack,sectionIndex:ti,metrics:wa,rect:Wa}),kr+=wa.advance*Qt.scale+Mt)}ei.length!==0&&(_n=Math.max(kr-Mt,_n),kj(ei,0,ei.length-1,fi,Mi)),kr=0;const Oi=it*bn+Mi;mi.lineOffset=Math.max(Mi,Qn),zr+=Oi,Zi=Math.max(Oi,Zi),++fn}var On;const Vn=zr-Nf,{horizontalAlign:di,verticalAlign:pi}=ex(_t);(function(xn,bn,Qn,mi,ei,Mi,Oi,wn,Qt){const ti=(bn-Qn)*ei;let qn=0;qn=Mi!==Oi?-wn*mi-Nf:(-mi*Qt+.5)*Oi;for(const Sn of xn)for(const wa of Sn.positionedGlyphs)wa.x+=ti,wa.y+=qn})(Ze.positionedLines,fi,di,pi,_n,Zi,it,Vn,ct.length),Ze.top+=-pi*Vn,Ze.bottom=Ze.top+Vn,Ze.left+=-di*_n,Ze.right=Ze.left+_n}(Oe,i,u,f,pe,w,T,C,U,M,Z,ne),!function(Ze){for(const dt of Ze)if(dt.positionedGlyphs.length!==0)return!1;return!0}(Ee)&&Oe}const Fm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ej={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function I2(o,i,u,f,m,x){if(i.imageName){const w=f[i.imageName];return w?w.displaySize[0]*i.scale*vn/x+m:0}{const w=u[i.fontStack],T=w&&w[o];return T?T.metrics.advance*i.scale+m:0}}function M2(o,i,u,f){const m=Math.pow(o-i,2);return f?o<i?m/2:2*m:m+Math.abs(u)*u}function Cj(o,i,u){let f=0;return o===10&&(f-=1e4),u&&(f+=150),o!==40&&o!==65288||(f+=50),i!==41&&i!==65289||(f+=50),f}function O2(o,i,u,f,m,x){let w=null,T=M2(i,u,m,x);for(const C of f){const M=M2(i-C.x,u,m,x)+C.badness;M<=T&&(w=C,T=M)}return{index:o,x:i,priorBreak:w,badness:T}}function z2(o){return o?z2(o.priorBreak).concat(o.index):[]}function Q_(o,i,u,f,m,x,w){if(x!=="point")return[];if(!o)return[];const T=[],C=function(Z,Y,Q,ne,he,pe){let Se=0;for(let ge=0;ge<Z.length();ge++){const Ee=Z.getSection(ge);Se+=I2(Z.getCharCode(ge),Ee,ne,he,Y,pe)}return Se/Math.max(1,Math.ceil(Se/Q))}(o,i,u,f,m,w),M=o.text.indexOf("")>=0;let L=0;for(let Z=0;Z<o.length();Z++){const Y=o.getSection(Z),Q=o.getCharCode(Z);if(Fm[Q]||(L+=I2(Q,Y,f,m,i,w)),Z<o.length()-1){const ne=!((U=Q)<11904||!(ft["Bopomofo Extended"](U)||ft.Bopomofo(U)||ft["CJK Compatibility Forms"](U)||ft["CJK Compatibility Ideographs"](U)||ft["CJK Compatibility"](U)||ft["CJK Radicals Supplement"](U)||ft["CJK Strokes"](U)||ft["CJK Symbols and Punctuation"](U)||ft["CJK Unified Ideographs Extension A"](U)||ft["CJK Unified Ideographs"](U)||ft["Enclosed CJK Letters and Months"](U)||ft["Halfwidth and Fullwidth Forms"](U)||ft.Hiragana(U)||ft["Ideographic Description Characters"](U)||ft["Kangxi Radicals"](U)||ft["Katakana Phonetic Extensions"](U)||ft.Katakana(U)||ft["Vertical Forms"](U)||ft["Yi Radicals"](U)||ft["Yi Syllables"](U)));(Ej[Q]||ne||Y.imageName)&&T.push(O2(Z+1,L,C,T,Cj(Q,o.getCharCode(Z+1),ne&&M),!1))}}var U;return z2(O2(o.length(),L,C,T,0,!0))}function ex(o){let i=.5,u=.5;switch(o){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:i,verticalAlign:u}}function kj(o,i,u,f,m){if(!f&&!m)return;const x=o[u],w=(o[u].x+x.metrics.advance*x.scale)*f;for(let T=i;T<=u;T++)o[T].x-=w,o[T].y+=m}function Ij(o,i,u){const{horizontalAlign:f,verticalAlign:m}=ex(u),x=i[0]-o.displaySize[0]*f,w=i[1]-o.displaySize[1]*m;return{image:o,top:w,bottom:w+o.displaySize[1],left:x,right:x+o.displaySize[0]}}function D2(o,i,u,f,m,x){const w=o.image;let T;if(w.content){const he=w.content,pe=w.pixelRatio||1;T=[he[0]/pe,he[1]/pe,w.displaySize[0]-he[2]/pe,w.displaySize[1]-he[3]/pe]}const C=i.left*x,M=i.right*x;let L,U,Z,Y;u==="width"||u==="both"?(Y=m[0]+C-f[3],U=m[0]+M+f[1]):(Y=m[0]+(C+M-w.displaySize[0])/2,U=Y+w.displaySize[0]);const Q=i.top*x,ne=i.bottom*x;return u==="height"||u==="both"?(L=m[1]+Q-f[0],Z=m[1]+ne+f[2]):(L=m[1]+(Q+ne-w.displaySize[1])/2,Z=L+w.displaySize[1]),{image:w,top:L,right:U,bottom:Z,left:Y,collisionPadding:T}}const Ff=255,_o=128,Fs=Ff*_o;function L2(o,i){const{expression:u}=i;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Er(o+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:m}=u;let x=0;for(;x<f.length&&f[x]<=o;)x++;x=Math.max(0,x-1);let w=x;for(;w<f.length&&f[w]<o+1;)w++;w=Math.min(f.length-1,w);const T=f[x],C=f[w];return u.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:C,interpolationType:m}:{kind:"camera",minZoom:T,maxZoom:C,minSize:u.evaluate(new Er(T)),maxSize:u.evaluate(new Er(C)),interpolationType:m}}}function tx(o,i,u){let f="never";const m=o.get(i);return m?f=m:o.get(u)&&(f="always"),f}const Mj=Ns.VectorTileFeature.types,Oj=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Um(o,i,u,f,m,x,w,T,C,M,L,U,Z){const Y=T?Math.min(Fs,Math.round(T[0])):0,Q=T?Math.min(Fs,Math.round(T[1])):0;o.emplaceBack(i,u,Math.round(32*f),Math.round(32*m),x,w,(Y<<1)+(C?1:0),Q,16*M,16*L,256*U,256*Z)}function rx(o,i,u){o.emplaceBack(i.x,i.y,u),o.emplaceBack(i.x,i.y,u),o.emplaceBack(i.x,i.y,u),o.emplaceBack(i.x,i.y,u)}function zj(o){for(const i of o.sections)if(C_(i.text))return!0;return!1}class nx{constructor(i){this.layoutVertexArray=new Kt,this.indexArray=new In,this.programConfigurations=i,this.segments=new Cr,this.dynamicLayoutVertexArray=new Gt,this.opacityVertexArray=new Yt,this.hasVisibleVertices=!1,this.placedSymbolArray=new xe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,u,f,m){this.isEmpty()||(f&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,cj.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,hj.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,Oj,!0),this.opacityVertexBuffer.itemSize=1),(f||m)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}vt("SymbolBuffers",nx);class ix{constructor(i,u,f){this.layoutVertexArray=new i,this.layoutAttributes=u,this.indexArray=new f,this.segments=new Cr,this.collisionVertexArray=new Tr}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,fj.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}vt("CollisionBuffers",ix);class pc{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(w=>w.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=L_([]),this.placementViewportMatrix=L_([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=L2(this.zoom,u["text-size"]),this.iconSizeData=L2(this.zoom,u["icon-size"]);const f=this.layers[0].layout,m=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=tx(f,"text-overlap","text-allow-overlap")!=="never"||tx(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(w=>l.ai[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=i.sourceID}createArrays(){this.text=new nx(new Ga(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new nx(new Ga(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new be,this.lineVertexArray=new De,this.symbolInstances=new de,this.textAnchorOffsets=new We}calculateGlyphDependencies(i,u,f,m,x){for(let w=0;w<i.length;w++)if(u[i.charCodeAt(w)]=!0,(f||m)&&x){const T=Rf[i.charAt(w)];T&&(u[T.charCodeAt(0)]=!0)}}populate(i,u,f){const m=this.layers[0],x=m.layout,w=x.get("text-font"),T=x.get("text-field"),C=x.get("icon-image"),M=(T.value.kind!=="constant"||T.value.value instanceof Bn&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),L=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,U=x.get("symbol-sort-key");if(this.features=[],!M&&!L)return;const Z=u.iconDependencies,Y=u.glyphDependencies,Q=u.availableImages,ne=new Er(this.zoom);for(const{feature:he,id:pe,index:Se,sourceLayerIndex:ge}of i){const Ee=m._featureFilter.needGeometry,Oe=ql(he,Ee);if(!m._featureFilter.filter(ne,Oe,f))continue;let Ze,dt;if(Ee||(Oe.geometry=Vl(he)),M){const ht=m.getValueAndResolveTokens("text-field",Oe,f,Q),ct=Bn.factory(ht);zj(ct)&&(this.hasRTLText=!0),(!this.hasRTLText||vf()==="unavailable"||this.hasRTLText&&Ci.isParsed())&&(Ze=pj(ct,m,Oe))}if(L){const ht=m.getValueAndResolveTokens("icon-image",Oe,f,Q);dt=ht instanceof kn?ht:kn.fromString(ht)}if(!Ze&&!dt)continue;const wt=this.sortFeaturesByKey?U.evaluate(Oe,{},f):void 0;if(this.features.push({id:pe,text:Ze,icon:dt,index:Se,sourceLayerIndex:ge,geometry:Oe.geometry,properties:he.properties,type:Mj[he.type],sortKey:wt}),dt&&(Z[dt.name]=!0),Ze){const ht=w.evaluate(Oe,{},f).join(","),ct=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ai.vertical)>=0;for(const it of Ze.sections)if(it.image)Z[it.image.name]=!0;else{const _t=cf(Ze.toString()),st=it.fontStack||ht,tt=Y[st]=Y[st]||{};this.calculateGlyphDependencies(it.text,tt,ct,this.allowVerticalPlacement,_t)}}}x.get("symbol-placement")==="line"&&(this.features=function(he){const pe={},Se={},ge=[];let Ee=0;function Oe(ht){ge.push(he[ht]),Ee++}function Ze(ht,ct,it){const _t=Se[ht];return delete Se[ht],Se[ct]=_t,ge[_t].geometry[0].pop(),ge[_t].geometry[0]=ge[_t].geometry[0].concat(it[0]),_t}function dt(ht,ct,it){const _t=pe[ct];return delete pe[ct],pe[ht]=_t,ge[_t].geometry[0].shift(),ge[_t].geometry[0]=it[0].concat(ge[_t].geometry[0]),_t}function wt(ht,ct,it){const _t=it?ct[0][ct[0].length-1]:ct[0][0];return`${ht}:${_t.x}:${_t.y}`}for(let ht=0;ht<he.length;ht++){const ct=he[ht],it=ct.geometry,_t=ct.text?ct.text.toString():null;if(!_t){Oe(ht);continue}const st=wt(_t,it),tt=wt(_t,it,!0);if(st in Se&&tt in pe&&Se[st]!==pe[tt]){const Mt=dt(st,tt,it),Tt=Ze(st,tt,ge[Mt].geometry);delete pe[st],delete Se[tt],Se[wt(_t,ge[Tt].geometry,!0)]=Tt,ge[Mt].geometry=null}else st in Se?Ze(st,tt,it):tt in pe?dt(st,tt,it):(Oe(ht),pe[st]=Ee-1,Se[tt]=Ee-1)}return ge.filter(ht=>ht.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((he,pe)=>he.sortKey-pe.sortKey)}update(i,u,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,u,this.layers,f),this.icon.programConfigurations.updatePaintArrays(i,u,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,u){const f=this.lineVertexArray.length;if(i.segment!==void 0){let m=i.dist(u[i.segment+1]),x=i.dist(u[i.segment]);const w={};for(let T=i.segment+1;T<u.length;T++)w[T]={x:u[T].x,y:u[T].y,tileUnitDistanceFromAnchor:m},T<u.length-1&&(m+=u[T+1].dist(u[T]));for(let T=i.segment||0;T>=0;T--)w[T]={x:u[T].x,y:u[T].y,tileUnitDistanceFromAnchor:x},T>0&&(x+=u[T-1].dist(u[T]));for(let T=0;T<u.length;T++){const C=w[T];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(i,u,f,m,x,w,T,C,M,L,U,Z){const Y=i.indexArray,Q=i.layoutVertexArray,ne=i.segments.prepareSegment(4*u.length,Q,Y,this.canOverlap?w.sortKey:void 0),he=this.glyphOffsetArray.length,pe=ne.vertexLength,Se=this.allowVerticalPlacement&&T===l.ai.vertical?Math.PI/2:0,ge=w.text&&w.text.sections;for(let Ee=0;Ee<u.length;Ee++){const{tl:Oe,tr:Ze,bl:dt,br:wt,tex:ht,pixelOffsetTL:ct,pixelOffsetBR:it,minFontScaleX:_t,minFontScaleY:st,glyphOffset:tt,isSDF:Mt,sectionIndex:Tt}=u[Ee],Zt=ne.vertexLength,kr=tt[1];Um(Q,C.x,C.y,Oe.x,kr+Oe.y,ht.x,ht.y,f,Mt,ct.x,ct.y,_t,st),Um(Q,C.x,C.y,Ze.x,kr+Ze.y,ht.x+ht.w,ht.y,f,Mt,it.x,ct.y,_t,st),Um(Q,C.x,C.y,dt.x,kr+dt.y,ht.x,ht.y+ht.h,f,Mt,ct.x,it.y,_t,st),Um(Q,C.x,C.y,wt.x,kr+wt.y,ht.x+ht.w,ht.y+ht.h,f,Mt,it.x,it.y,_t,st),rx(i.dynamicLayoutVertexArray,C,Se),Y.emplaceBack(Zt,Zt+1,Zt+2),Y.emplaceBack(Zt+1,Zt+2,Zt+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(tt[0]),Ee!==u.length-1&&Tt===u[Ee+1].sectionIndex||i.programConfigurations.populatePaintArrays(Q.length,w,w.index,{},Z,ge&&ge[Tt])}i.placedSymbolArray.emplaceBack(C.x,C.y,he,this.glyphOffsetArray.length-he,pe,M,L,C.segment,f?f[0]:0,f?f[1]:0,m[0],m[1],T,0,!1,0,U)}_addCollisionDebugVertex(i,u,f,m,x,w){return u.emplaceBack(0,0),i.emplaceBack(f.x,f.y,m,x,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(i,u,f,m,x,w,T){const C=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),M=C.vertexLength,L=x.layoutVertexArray,U=x.collisionVertexArray,Z=T.anchorX,Y=T.anchorY;this._addCollisionDebugVertex(L,U,w,Z,Y,new k(i,u)),this._addCollisionDebugVertex(L,U,w,Z,Y,new k(f,u)),this._addCollisionDebugVertex(L,U,w,Z,Y,new k(f,m)),this._addCollisionDebugVertex(L,U,w,Z,Y,new k(i,m)),C.vertexLength+=4;const Q=x.indexArray;Q.emplaceBack(M,M+1),Q.emplaceBack(M+1,M+2),Q.emplaceBack(M+2,M+3),Q.emplaceBack(M+3,M),C.primitiveLength+=4}addDebugCollisionBoxes(i,u,f,m){for(let x=i;x<u;x++){const w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,m?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ix(Yr,_2.members,gn),this.iconCollisionBox=new ix(Yr,_2.members,gn);for(let i=0;i<this.symbolInstances.length;i++){const u=this.symbolInstances.get(i);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(i,u,f,m,x,w,T,C,M){const L={};for(let U=u;U<f;U++){const Z=i.get(U);L.textBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},L.textFeatureIndex=Z.featureIndex;break}for(let U=m;U<x;U++){const Z=i.get(U);L.verticalTextBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},L.verticalTextFeatureIndex=Z.featureIndex;break}for(let U=w;U<T;U++){const Z=i.get(U);L.iconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},L.iconFeatureIndex=Z.featureIndex;break}for(let U=C;U<M;U++){const Z=i.get(U);L.verticalIconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},L.verticalIconFeatureIndex=Z.featureIndex;break}return L}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,u){const f=i.placedSymbolArray.get(u),m=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<m;x+=4)i.indexArray.emplaceBack(x,x+1,x+2),i.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(i),f=Math.cos(i),m=[],x=[],w=[];for(let T=0;T<this.symbolInstances.length;++T){w.push(T);const C=this.symbolInstances.get(T);m.push(0|Math.round(u*C.anchorX+f*C.anchorY)),x.push(C.featureIndex)}return w.sort((T,C)=>m[T]-m[C]||x[C]-x[T]),w}addToSortKeyRanges(i,u){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===u?f.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const f=this.symbolInstances.get(u);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((m,x,w)=>{m>=0&&w.indexOf(m)===x&&this.addIndicesForPlacedSymbol(this.text,m)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let j2,$2;vt("SymbolBucket",pc,{omit:["layers","collisionBoxArray","features","compareText"]}),pc.MAX_GLYPHS=65535,pc.addDynamicAttributes=rx;var ax={get paint(){return $2=$2||new rn({"icon-opacity":new Lt(Ne.paint_symbol["icon-opacity"]),"icon-color":new Lt(Ne.paint_symbol["icon-color"]),"icon-halo-color":new Lt(Ne.paint_symbol["icon-halo-color"]),"icon-halo-width":new Lt(Ne.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Lt(Ne.paint_symbol["icon-halo-blur"]),"icon-translate":new Pt(Ne.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pt(Ne.paint_symbol["icon-translate-anchor"]),"text-opacity":new Lt(Ne.paint_symbol["text-opacity"]),"text-color":new Lt(Ne.paint_symbol["text-color"],{runtimeType:Xn,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Lt(Ne.paint_symbol["text-halo-color"]),"text-halo-width":new Lt(Ne.paint_symbol["text-halo-width"]),"text-halo-blur":new Lt(Ne.paint_symbol["text-halo-blur"]),"text-translate":new Pt(Ne.paint_symbol["text-translate"]),"text-translate-anchor":new Pt(Ne.paint_symbol["text-translate-anchor"])})},get layout(){return j2=j2||new rn({"symbol-placement":new Pt(Ne.layout_symbol["symbol-placement"]),"symbol-spacing":new Pt(Ne.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pt(Ne.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Lt(Ne.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pt(Ne.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pt(Ne.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Pt(Ne.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Pt(Ne.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pt(Ne.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pt(Ne.layout_symbol["icon-rotation-alignment"]),"icon-size":new Lt(Ne.layout_symbol["icon-size"]),"icon-text-fit":new Pt(Ne.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pt(Ne.layout_symbol["icon-text-fit-padding"]),"icon-image":new Lt(Ne.layout_symbol["icon-image"]),"icon-rotate":new Lt(Ne.layout_symbol["icon-rotate"]),"icon-padding":new Lt(Ne.layout_symbol["icon-padding"]),"icon-keep-upright":new Pt(Ne.layout_symbol["icon-keep-upright"]),"icon-offset":new Lt(Ne.layout_symbol["icon-offset"]),"icon-anchor":new Lt(Ne.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pt(Ne.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pt(Ne.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pt(Ne.layout_symbol["text-rotation-alignment"]),"text-field":new Lt(Ne.layout_symbol["text-field"]),"text-font":new Lt(Ne.layout_symbol["text-font"]),"text-size":new Lt(Ne.layout_symbol["text-size"]),"text-max-width":new Lt(Ne.layout_symbol["text-max-width"]),"text-line-height":new Pt(Ne.layout_symbol["text-line-height"]),"text-letter-spacing":new Lt(Ne.layout_symbol["text-letter-spacing"]),"text-justify":new Lt(Ne.layout_symbol["text-justify"]),"text-radial-offset":new Lt(Ne.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pt(Ne.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Lt(Ne.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Lt(Ne.layout_symbol["text-anchor"]),"text-max-angle":new Pt(Ne.layout_symbol["text-max-angle"]),"text-writing-mode":new Pt(Ne.layout_symbol["text-writing-mode"]),"text-rotate":new Lt(Ne.layout_symbol["text-rotate"]),"text-padding":new Pt(Ne.layout_symbol["text-padding"]),"text-keep-upright":new Pt(Ne.layout_symbol["text-keep-upright"]),"text-transform":new Lt(Ne.layout_symbol["text-transform"]),"text-offset":new Lt(Ne.layout_symbol["text-offset"]),"text-allow-overlap":new Pt(Ne.layout_symbol["text-allow-overlap"]),"text-overlap":new Pt(Ne.layout_symbol["text-overlap"]),"text-ignore-placement":new Pt(Ne.layout_symbol["text-ignore-placement"]),"text-optional":new Pt(Ne.layout_symbol["text-optional"])})}};class R2{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Na,this.defaultValue=i}evaluate(i){if(i.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(i.formattedSection))return u.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}vt("FormatSectionOverride",R2,{omit:["defaultValue"]});class Vm extends Gi{constructor(i){super(i,ax)}recalculate(i,u){if(super.recalculate(i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const m=[];for(const x of f)m.indexOf(x)<0&&m.push(x);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,u,f,m){const x=this.layout.get(i).evaluate(u,{},f,m),w=this._unevaluatedLayout._values[i];return w.isDataDriven()||Hu(w.value)||!x?x:function(T,C){return C.replace(/{([^{}]+)}/g,(M,L)=>T&&L in T?String(T[L]):"")}(u.properties,x)}createBucket(i){return new pc(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of ax.paint.overridableProperties){if(!Vm.hasPaintOverride(this.layout,i))continue;const u=this.paint.get(i),f=new R2(u),m=new nf(f,u.property.specification);let x=null;x=u.value.kind==="constant"||u.value.kind==="source"?new af("source",m):new Xu("composite",m,u.value.zoomStops),this.paint._values[i]=new Yn(u.property,x,u.parameters)}}_handleOverridablePaintPropertyUpdate(i,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&Vm.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,u){const f=i.get("text-field"),m=ax.paint.properties[u];let x=!1;const w=T=>{for(const C of T)if(m.overrides&&m.overrides.hasOverride(C))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Bn)w(f.value.value.sections);else if(f.value.kind==="source"){const T=M=>{x||(M instanceof jo&&Lr(M.value)===oe?w(M.value.sections):M instanceof Zu?w(M.sections):M.eachChild(T))},C=f.value;C._styleExpression&&T(C._styleExpression.expression)}return x}}let N2;var Dj={get paint(){return N2=N2||new rn({"background-color":new Pt(Ne.paint_background["background-color"]),"background-pattern":new xf(Ne.paint_background["background-pattern"]),"background-opacity":new Pt(Ne.paint_background["background-opacity"])})}};class Lj extends Gi{constructor(i){super(i,Dj)}}let B2;var jj={get paint(){return B2=B2||new rn({"raster-opacity":new Pt(Ne.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pt(Ne.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pt(Ne.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pt(Ne.paint_raster["raster-brightness-max"]),"raster-saturation":new Pt(Ne.paint_raster["raster-saturation"]),"raster-contrast":new Pt(Ne.paint_raster["raster-contrast"]),"raster-resampling":new Pt(Ne.paint_raster["raster-resampling"]),"raster-fade-duration":new Pt(Ne.paint_raster["raster-fade-duration"])})}};class $j extends Gi{constructor(i){super(i,jj)}}class Rj extends Gi{constructor(i){super(i,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Nj{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const ox=63710088e-1;class Us{constructor(i,u){if(isNaN(i)||isNaN(u))throw new Error(`Invalid LngLat object: (${i}, ${u})`);if(this.lng=+i,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Us(ee(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const u=Math.PI/180,f=this.lat*u,m=i.lat*u,x=Math.sin(f)*Math.sin(m)+Math.cos(f)*Math.cos(m)*Math.cos((i.lng-this.lng)*u);return ox*Math.acos(Math.min(x,1))}static convert(i){if(i instanceof Us)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Us(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Us(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const F2=2*Math.PI*ox;function U2(o){return F2*Math.cos(o*Math.PI/180)}function V2(o){return(180+o)/360}function q2(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function G2(o,i){return o/U2(i)}function W2(o){return 360*o-180}function sx(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class qm{constructor(i,u,f=0){this.x=+i,this.y=+u,this.z=+f}static fromLngLat(i,u=0){const f=Us.convert(i);return new qm(V2(f.lng),q2(f.lat),G2(u,f.lat))}toLngLat(){return new Us(W2(this.x),sx(this.y))}toAltitude(){return this.z*U2(sx(this.y))}meterInMercatorCoordinateUnits(){return 1/F2*(i=sx(this.y),1/Math.cos(i*Math.PI/180));var i}}function Z2(o,i,u){var f=2*Math.PI*6378137/256/Math.pow(2,u);return[o*f-2*Math.PI*6378137/2,i*f-2*Math.PI*6378137/2]}class lx{constructor(i,u,f){if(i<0||i>25||f<0||f>=Math.pow(2,i)||u<0||u>=Math.pow(2,i))throw new Error(`x=${u}, y=${f}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=u,this.y=f,this.key=Uf(0,i,i,u,f)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,u,f){const m=(w=this.y,T=this.z,C=Z2(256*(x=this.x),256*(w=Math.pow(2,T)-w-1),T),M=Z2(256*(x+1),256*(w+1),T),C[0]+","+C[1]+","+M[0]+","+M[1]);var x,w,T,C,M;const L=function(U,Z,Y){let Q,ne="";for(let he=U;he>0;he--)Q=1<<he-1,ne+=(Z&Q?1:0)+(Y&Q?2:0);return ne}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,m)}isChildOf(i){const u=this.z-i.z;return u>0&&i.x===this.x>>u&&i.y===this.y>>u}getTilePoint(i){const u=Math.pow(2,this.z);return new k((i.x*u-this.x)*hn,(i.y*u-this.y)*hn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class H2{constructor(i,u){this.wrap=i,this.canonical=u,this.key=Uf(i,u.z,u.z,u.x,u.y)}}class ra{constructor(i,u,f,m,x){if(i<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${f}`);this.overscaledZ=i,this.wrap=u,this.canonical=new lx(f,+m,+x),this.key=Uf(u,i,f,m,x)}clone(){return new ra(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-i;return i>this.canonical.z?new ra(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ra(i,this.wrap,i,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(i,u){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-i;return i>this.canonical.z?Uf(this.wrap*+u,i,this.canonical.z,this.canonical.x,this.canonical.y):Uf(this.wrap*+u,i,i,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const u=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>u&&i.canonical.y===this.canonical.y>>u}children(i){if(this.overscaledZ>=i)return[new ra(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,f=2*this.canonical.x,m=2*this.canonical.y;return[new ra(u,this.wrap,u,f,m),new ra(u,this.wrap,u,f+1,m),new ra(u,this.wrap,u,f,m+1),new ra(u,this.wrap,u,f+1,m+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new ra(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new ra(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new H2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new qm(i.x-this.wrap,i.y))}}function Uf(o,i,u,f,m){(o*=2)<0&&(o=-1*o-1);const x=1<<u;return(x*x*o+x*m+f).toString(36)+u.toString(36)+i.toString(36)}vt("CanonicalTileID",lx),vt("OverscaledTileID",ra,{omit:["posMatrix"]});class K2{constructor(i,u,f,m=1,x=1,w=1,T=0){if(this.uid=i,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Re(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const C=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=x,this.blueFactor=w,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let M=0;M<C;M++)this.data[this._idx(-1,M)]=this.data[this._idx(0,M)],this.data[this._idx(C,M)]=this.data[this._idx(C-1,M)],this.data[this._idx(M,-1)]=this.data[this._idx(M,0)],this.data[this._idx(M,C)]=this.data[this._idx(M,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let M=0;M<C;M++)for(let L=0;L<C;L++){const U=this.get(M,L);U>this.max&&(this.max=U),U<this.min&&(this.min=U)}}get(i,u){const f=new Uint8Array(this.data.buffer),m=4*this._idx(i,u);return this.unpack(f[m],f[m+1],f[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,u){if(i<-1||i>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(i+1)}unpack(i,u,f){return i*this.redFactor+u*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new ta({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,u,f){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let m=u*this.dim,x=u*this.dim+this.dim,w=f*this.dim,T=f*this.dim+this.dim;switch(u){case-1:m=x-1;break;case 1:x=m+1}switch(f){case-1:w=T-1;break;case 1:T=w+1}const C=-u*this.dim,M=-f*this.dim;for(let L=w;L<T;L++)for(let U=m;U<x;U++)this.data[this._idx(U,L)]=i.data[this._idx(U+C,L+M)]}}vt("DEMData",K2);class X2{constructor(i){this._stringToNumber={},this._numberToString=[];for(let u=0;u<i.length;u++){const f=i[u];this._stringToNumber[f]=u,this._numberToString[u]=f}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class Y2{constructor(i,u,f,m,x){this.type="Feature",this._vectorTileFeature=i,i._z=u,i._x=f,i._y=m,this.properties=i.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(i[u]=this[u]);return i}}class J2{constructor(i,u){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Ds(hn,16,0),this.grid3D=new Ds(hn,16,0),this.featureIndexArray=new Je,this.promoteId=u}insert(i,u,f,m,x,w){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,m,x);const C=w?this.grid3D:this.grid;for(let M=0;M<u.length;M++){const L=u[M],U=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<L.length;Z++){const Y=L[Z];U[0]=Math.min(U[0],Y.x),U[1]=Math.min(U[1],Y.y),U[2]=Math.max(U[2],Y.x),U[3]=Math.max(U[3],Y.y)}U[0]<hn&&U[1]<hn&&U[2]>=0&&U[3]>=0&&C.insert(T,U[0],U[1],U[2],U[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ns.VectorTile(new X_(this.rawTileData)).layers,this.sourceLayerCoder=new X2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,u,f,m){this.loadVTLayers();const x=i.params||{},w=hn/i.tileSize/i.scale,T=sf(x.filter),C=i.queryGeometry,M=i.queryPadding*w,L=eT(C),U=this.grid.query(L.minX-M,L.minY-M,L.maxX+M,L.maxY+M),Z=eT(i.cameraQueryGeometry),Y=this.grid3D.query(Z.minX-M,Z.minY-M,Z.maxX+M,Z.maxY+M,(he,pe,Se,ge)=>function(Ee,Oe,Ze,dt,wt){for(const ct of Ee)if(Oe<=ct.x&&Ze<=ct.y&&dt>=ct.x&&wt>=ct.y)return!0;const ht=[new k(Oe,Ze),new k(Oe,wt),new k(dt,wt),new k(dt,Ze)];if(Ee.length>2){for(const ct of ht)if(sc(Ee,ct))return!0}for(let ct=0;ct<Ee.length-1;ct++)if(yL(Ee[ct],Ee[ct+1],ht))return!0;return!1}(i.cameraQueryGeometry,he-M,pe-M,Se+M,ge+M));for(const he of Y)U.push(he);U.sort(Bj);const Q={};let ne;for(let he=0;he<U.length;he++){const pe=U[he];if(pe===ne)continue;ne=pe;const Se=this.featureIndexArray.get(pe);let ge=null;this.loadMatchingFeature(Q,Se.bucketIndex,Se.sourceLayerIndex,Se.featureIndex,T,x.layers,x.availableImages,u,f,m,(Ee,Oe,Ze)=>(ge||(ge=Vl(Ee)),Oe.queryIntersectsFeature(C,Ee,Ze,ge,this.z,i.transform,w,i.pixelPosMatrix)))}return Q}loadMatchingFeature(i,u,f,m,x,w,T,C,M,L,U){const Z=this.bucketLayerIDs[u];if(w&&!function(he,pe){for(let Se=0;Se<he.length;Se++)if(pe.indexOf(he[Se])>=0)return!0;return!1}(w,Z))return;const Y=this.sourceLayerCoder.decode(f),Q=this.vtLayers[Y].feature(m);if(x.needGeometry){const he=ql(Q,!0);if(!x.filter(new Er(this.tileID.overscaledZ),he,this.tileID.canonical))return}else if(!x.filter(new Er(this.tileID.overscaledZ),Q))return;const ne=this.getId(Q,Y);for(let he=0;he<Z.length;he++){const pe=Z[he];if(w&&w.indexOf(pe)<0)continue;const Se=C[pe];if(!Se)continue;let ge={};ne&&L&&(ge=L.getState(Se.sourceLayer||"_geojsonTileLayer",ne));const Ee=le({},M[pe]);Ee.paint=Q2(Ee.paint,Se.paint,Q,ge,T),Ee.layout=Q2(Ee.layout,Se.layout,Q,ge,T);const Oe=!U||U(Q,Se,ge);if(!Oe)continue;const Ze=new Y2(Q,this.z,this.x,this.y,ne);Ze.layer=Ee;let dt=i[pe];dt===void 0&&(dt=i[pe]=[]),dt.push({featureIndex:m,feature:Ze,intersectionZ:Oe})}}lookupSymbolFeatures(i,u,f,m,x,w,T,C){const M={};this.loadVTLayers();const L=sf(x);for(const U of i)this.loadMatchingFeature(M,f,m,U,L,w,T,C,u);return M}hasLayer(i){for(const u of this.bucketLayerIDs)for(const f of u)if(i===f)return!0;return!1}getId(i,u){let f=i.id;return this.promoteId&&(f=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof f=="boolean"&&(f=Number(f))),f}}function Q2(o,i,u,f,m){return Pe(o,(x,w)=>{const T=i instanceof ac?i.get(w):null;return T&&T.evaluate?T.evaluate(u,f,m):T})}function eT(o){let i=1/0,u=1/0,f=-1/0,m=-1/0;for(const x of o)i=Math.min(i,x.x),u=Math.min(u,x.y),f=Math.max(f,x.x),m=Math.max(m,x.y);return{minX:i,minY:u,maxX:f,maxY:m}}function Bj(o,i){return i-o}function tT(o,i,u,f,m){const x=[];for(let w=0;w<o.length;w++){const T=o[w];let C;for(let M=0;M<T.length-1;M++){let L=T[M],U=T[M+1];L.x<i&&U.x<i||(L.x<i?L=new k(i,L.y+(i-L.x)/(U.x-L.x)*(U.y-L.y))._round():U.x<i&&(U=new k(i,L.y+(i-L.x)/(U.x-L.x)*(U.y-L.y))._round()),L.y<u&&U.y<u||(L.y<u?L=new k(L.x+(u-L.y)/(U.y-L.y)*(U.x-L.x),u)._round():U.y<u&&(U=new k(L.x+(u-L.y)/(U.y-L.y)*(U.x-L.x),u)._round()),L.x>=f&&U.x>=f||(L.x>=f?L=new k(f,L.y+(f-L.x)/(U.x-L.x)*(U.y-L.y))._round():U.x>=f&&(U=new k(f,L.y+(f-L.x)/(U.x-L.x)*(U.y-L.y))._round()),L.y>=m&&U.y>=m||(L.y>=m?L=new k(L.x+(m-L.y)/(U.y-L.y)*(U.x-L.x),m)._round():U.y>=m&&(U=new k(L.x+(m-L.y)/(U.y-L.y)*(U.x-L.x),m)._round()),C&&L.equals(C[C.length-1])||(C=[L],x.push(C)),C.push(U)))))}}return x}vt("FeatureIndex",J2,{omit:["rawTileData","sourceLayerCoder"]});class Vs extends k{constructor(i,u,f,m){super(i,u),this.angle=f,m!==void 0&&(this.segment=m)}clone(){return new Vs(this.x,this.y,this.angle,this.segment)}}function rT(o,i,u,f,m){if(i.segment===void 0||u===0)return!0;let x=i,w=i.segment+1,T=0;for(;T>-u/2;){if(w--,w<0)return!1;T-=o[w].dist(x),x=o[w]}T+=o[w].dist(o[w+1]),w++;const C=[];let M=0;for(;T<u/2;){const L=o[w],U=o[w+1];if(!U)return!1;let Z=o[w-1].angleTo(L)-L.angleTo(U);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:T,angleDelta:Z}),M+=Z;T-C[0].distance>f;)M-=C.shift().angleDelta;if(M>m)return!1;w++,T+=L.dist(U)}return!0}function nT(o){let i=0;for(let u=0;u<o.length-1;u++)i+=o[u].dist(o[u+1]);return i}function iT(o,i,u){return o?.6*i*u:0}function aT(o,i){return Math.max(o?o.right-o.left:0,i?i.right-i.left:0)}function Fj(o,i,u,f,m,x){const w=iT(u,m,x),T=aT(u,f)*x;let C=0;const M=nT(o)/2;for(let L=0;L<o.length-1;L++){const U=o[L],Z=o[L+1],Y=U.dist(Z);if(C+Y>M){const Q=(M-C)/Y,ne=Pi.number(U.x,Z.x,Q),he=Pi.number(U.y,Z.y,Q),pe=new Vs(ne,he,Z.angleTo(U),L);return pe._round(),!w||rT(o,pe,T,w,i)?pe:void 0}C+=Y}}function Uj(o,i,u,f,m,x,w,T,C){const M=iT(f,x,w),L=aT(f,m),U=L*w,Z=o[0].x===0||o[0].x===C||o[0].y===0||o[0].y===C;return i-U<i/4&&(i=U+i/4),oT(o,Z?i/2*T%i:(L/2+2*x)*w*T%i,i,M,u,U,Z,!1,C)}function oT(o,i,u,f,m,x,w,T,C){const M=x/2,L=nT(o);let U=0,Z=i-u,Y=[];for(let Q=0;Q<o.length-1;Q++){const ne=o[Q],he=o[Q+1],pe=ne.dist(he),Se=he.angleTo(ne);for(;Z+u<U+pe;){Z+=u;const ge=(Z-U)/pe,Ee=Pi.number(ne.x,he.x,ge),Oe=Pi.number(ne.y,he.y,ge);if(Ee>=0&&Ee<C&&Oe>=0&&Oe<C&&Z-M>=0&&Z+M<=L){const Ze=new Vs(Ee,Oe,Se,Q);Ze._round(),f&&!rT(o,Ze,x,f,m)||Y.push(Ze)}}U+=pe}return T||Y.length||w||(Y=oT(o,U/2,u,f,m,x,w,!0,C)),Y}vt("Anchor",Vs);const mc=Ii;function sT(o,i,u,f){const m=[],x=o.image,w=x.pixelRatio,T=x.paddedRect.w-2*mc,C=x.paddedRect.h-2*mc,M=o.right-o.left,L=o.bottom-o.top,U=x.stretchX||[[0,T]],Z=x.stretchY||[[0,C]],Y=(it,_t)=>it+_t[1]-_t[0],Q=U.reduce(Y,0),ne=Z.reduce(Y,0),he=T-Q,pe=C-ne;let Se=0,ge=Q,Ee=0,Oe=ne,Ze=0,dt=he,wt=0,ht=pe;if(x.content&&f){const it=x.content;Se=Gm(U,0,it[0]),Ee=Gm(Z,0,it[1]),ge=Gm(U,it[0],it[2]),Oe=Gm(Z,it[1],it[3]),Ze=it[0]-Se,wt=it[1]-Ee,dt=it[2]-it[0]-ge,ht=it[3]-it[1]-Oe}const ct=(it,_t,st,tt)=>{const Mt=Wm(it.stretch-Se,ge,M,o.left),Tt=Zm(it.fixed-Ze,dt,it.stretch,Q),Zt=Wm(_t.stretch-Ee,Oe,L,o.top),kr=Zm(_t.fixed-wt,ht,_t.stretch,ne),zr=Wm(st.stretch-Se,ge,M,o.left),_n=Zm(st.fixed-Ze,dt,st.stretch,Q),Zi=Wm(tt.stretch-Ee,Oe,L,o.top),fi=Zm(tt.fixed-wt,ht,tt.stretch,ne),fn=new k(Mt,Zt),On=new k(zr,Zt),Vn=new k(zr,Zi),di=new k(Mt,Zi),pi=new k(Tt/w,kr/w),xn=new k(_n/w,fi/w),bn=i*Math.PI/180;if(bn){const ei=Math.sin(bn),Mi=Math.cos(bn),Oi=[Mi,-ei,ei,Mi];fn._matMult(Oi),On._matMult(Oi),di._matMult(Oi),Vn._matMult(Oi)}const Qn=it.stretch+it.fixed,mi=_t.stretch+_t.fixed;return{tl:fn,tr:On,bl:di,br:Vn,tex:{x:x.paddedRect.x+mc+Qn,y:x.paddedRect.y+mc+mi,w:st.stretch+st.fixed-Qn,h:tt.stretch+tt.fixed-mi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:pi,pixelOffsetBR:xn,minFontScaleX:dt/w/M,minFontScaleY:ht/w/L,isSDF:u}};if(f&&(x.stretchX||x.stretchY)){const it=lT(U,he,Q),_t=lT(Z,pe,ne);for(let st=0;st<it.length-1;st++){const tt=it[st],Mt=it[st+1];for(let Tt=0;Tt<_t.length-1;Tt++)m.push(ct(tt,_t[Tt],Mt,_t[Tt+1]))}}else m.push(ct({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:C+1}));return m}function Gm(o,i,u){let f=0;for(const m of o)f+=Math.max(i,Math.min(u,m[1]))-Math.max(i,Math.min(u,m[0]));return f}function lT(o,i,u){const f=[{fixed:-mc,stretch:0}];for(const[m,x]of o){const w=f[f.length-1];f.push({fixed:m-w.stretch,stretch:w.stretch}),f.push({fixed:m-w.stretch,stretch:w.stretch+(x-m)})}return f.push({fixed:i+mc,stretch:u}),f}function Wm(o,i,u,f){return o/i*u+f}function Zm(o,i,u,f){return o-i*u/f}class Hm{constructor(i,u,f,m,x,w,T,C,M,L){if(this.boxStartIndex=i.length,M){let U=w.top,Z=w.bottom;const Y=w.collisionPadding;Y&&(U-=Y[1],Z+=Y[3]);let Q=Z-U;Q>0&&(Q=Math.max(10,Q),this.circleDiameter=Q)}else{let U=w.top*T-C[0],Z=w.bottom*T+C[2],Y=w.left*T-C[3],Q=w.right*T+C[1];const ne=w.collisionPadding;if(ne&&(Y-=ne[0]*T,U-=ne[1]*T,Q+=ne[2]*T,Z+=ne[3]*T),L){const he=new k(Y,U),pe=new k(Q,U),Se=new k(Y,Z),ge=new k(Q,Z),Ee=L*Math.PI/180;he._rotate(Ee),pe._rotate(Ee),Se._rotate(Ee),ge._rotate(Ee),Y=Math.min(he.x,pe.x,Se.x,ge.x),Q=Math.max(he.x,pe.x,Se.x,ge.x),U=Math.min(he.y,pe.y,Se.y,ge.y),Z=Math.max(he.y,pe.y,Se.y,ge.y)}i.emplaceBack(u.x,u.y,Y,U,Q,Z,f,m,x)}this.boxEndIndex=i.length}}class Vj{constructor(i=[],u=qj){if(this.data=i,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:u,compare:f}=this,m=u[i];for(;i>0;){const x=i-1>>1,w=u[x];if(f(m,w)>=0)break;u[i]=w,i=x}u[i]=m}_down(i){const{data:u,compare:f}=this,m=this.length>>1,x=u[i];for(;i<m;){let w=1+(i<<1),T=u[w];const C=w+1;if(C<this.length&&f(u[C],T)<0&&(w=C,T=u[C]),f(T,x)>=0)break;u[i]=T,i=w}u[i]=x}}function qj(o,i){return o<i?-1:o>i?1:0}function Gj(o,i=1,u=!1){let f=1/0,m=1/0,x=-1/0,w=-1/0;const T=o[0];for(let Y=0;Y<T.length;Y++){const Q=T[Y];(!Y||Q.x<f)&&(f=Q.x),(!Y||Q.y<m)&&(m=Q.y),(!Y||Q.x>x)&&(x=Q.x),(!Y||Q.y>w)&&(w=Q.y)}const C=Math.min(x-f,w-m);let M=C/2;const L=new Vj([],Wj);if(C===0)return new k(f,m);for(let Y=f;Y<x;Y+=C)for(let Q=m;Q<w;Q+=C)L.push(new gc(Y+M,Q+M,M,o));let U=function(Y){let Q=0,ne=0,he=0;const pe=Y[0];for(let Se=0,ge=pe.length,Ee=ge-1;Se<ge;Ee=Se++){const Oe=pe[Se],Ze=pe[Ee],dt=Oe.x*Ze.y-Ze.x*Oe.y;ne+=(Oe.x+Ze.x)*dt,he+=(Oe.y+Ze.y)*dt,Q+=3*dt}return new gc(ne/Q,he/Q,0,Y)}(o),Z=L.length;for(;L.length;){const Y=L.pop();(Y.d>U.d||!U.d)&&(U=Y,u&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,Z)),Y.max-U.d<=i||(M=Y.h/2,L.push(new gc(Y.p.x-M,Y.p.y-M,M,o)),L.push(new gc(Y.p.x+M,Y.p.y-M,M,o)),L.push(new gc(Y.p.x-M,Y.p.y+M,M,o)),L.push(new gc(Y.p.x+M,Y.p.y+M,M,o)),Z+=4)}return u&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${U.d}`)),U.p}function Wj(o,i){return i.max-o.max}function gc(o,i,u,f){this.p=new k(o,i),this.h=u,this.d=function(m,x){let w=!1,T=1/0;for(let C=0;C<x.length;C++){const M=x[C];for(let L=0,U=M.length,Z=U-1;L<U;Z=L++){const Y=M[L],Q=M[Z];Y.y>m.y!=Q.y>m.y&&m.x<(Q.x-Y.x)*(m.y-Y.y)/(Q.y-Y.y)+Y.x&&(w=!w),T=Math.min(T,qS(m,Y,Q))}}return(w?1:-1)*Math.sqrt(T)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var Un;l.aq=void 0,(Un=l.aq||(l.aq={}))[Un.center=1]="center",Un[Un.left=2]="left",Un[Un.right=3]="right",Un[Un.top=4]="top",Un[Un.bottom=5]="bottom",Un[Un["top-left"]=6]="top-left",Un[Un["top-right"]=7]="top-right",Un[Un["bottom-left"]=8]="bottom-left",Un[Un["bottom-right"]=9]="bottom-right";const qs=7,ux=Number.POSITIVE_INFINITY;function uT(o,i){return i[1]!==ux?function(u,f,m){let x=0,w=0;switch(f=Math.abs(f),m=Math.abs(m),u){case"top-right":case"top-left":case"top":w=m-qs;break;case"bottom-right":case"bottom-left":case"bottom":w=-m+qs}switch(u){case"top-right":case"bottom-right":case"right":x=-f;break;case"top-left":case"bottom-left":case"left":x=f}return[x,w]}(o,i[0],i[1]):function(u,f){let m=0,x=0;f<0&&(f=0);const w=f/Math.SQRT2;switch(u){case"top-right":case"top-left":x=w-qs;break;case"bottom-right":case"bottom-left":x=-w+qs;break;case"bottom":x=-f+qs;break;case"top":x=f-qs}switch(u){case"top-right":case"bottom-right":m=-w;break;case"top-left":case"bottom-left":m=w;break;case"left":m=f;break;case"right":m=-f}return[m,x]}(o,i[0])}function cT(o,i,u){var f;const m=o.layout,x=(f=m.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(i,{},u);if(x){const T=x.values,C=[];for(let M=0;M<T.length;M+=2){const L=C[M]=T[M],U=T[M+1].map(Z=>Z*vn);L.startsWith("top")?U[1]-=qs:L.startsWith("bottom")&&(U[1]+=qs),C[M+1]=U}return new Fi(C)}const w=m.get("text-variable-anchor");if(w){let T;T=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(i,{},u)*vn,ux]:m.get("text-offset").evaluate(i,{},u).map(M=>M*vn);const C=[];for(const M of w)C.push(M,uT(M,T));return new Fi(C)}return null}function cx(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Zj(o,i,u,f,m,x,w,T,C,M,L){let U=x.textMaxSize.evaluate(i,{});U===void 0&&(U=w);const Z=o.layers[0].layout,Y=Z.get("icon-offset").evaluate(i,{},L),Q=fT(u.horizontal),ne=w/24,he=o.tilePixelRatio*ne,pe=o.tilePixelRatio*U/24,Se=o.tilePixelRatio*T,ge=o.tilePixelRatio*Z.get("symbol-spacing"),Ee=Z.get("text-padding")*o.tilePixelRatio,Oe=function(tt,Mt,Tt,Zt=1){const kr=tt.get("icon-padding").evaluate(Mt,{},Tt),zr=kr&&kr.values;return[zr[0]*Zt,zr[1]*Zt,zr[2]*Zt,zr[3]*Zt]}(Z,i,L,o.tilePixelRatio),Ze=Z.get("text-max-angle")/180*Math.PI,dt=Z.get("text-rotation-alignment")!=="viewport"&&Z.get("symbol-placement")!=="point",wt=Z.get("icon-rotation-alignment")==="map"&&Z.get("symbol-placement")!=="point",ht=Z.get("symbol-placement"),ct=ge/2,it=Z.get("icon-text-fit");let _t;f&&it!=="none"&&(o.allowVerticalPlacement&&u.vertical&&(_t=D2(f,u.vertical,it,Z.get("icon-text-fit-padding"),Y,ne)),Q&&(f=D2(f,Q,it,Z.get("icon-text-fit-padding"),Y,ne)));const st=(tt,Mt)=>{Mt.x<0||Mt.x>=hn||Mt.y<0||Mt.y>=hn||function(Tt,Zt,kr,zr,_n,Zi,fi,fn,On,Vn,di,pi,xn,bn,Qn,mi,ei,Mi,Oi,wn,Qt,ti,qn,Sn,wa){const Wa=Tt.addToLineVertexArray(Zt,kr);let Za,Ko,Sa,na,zi=0,Xo=0,Gf=0,gT=0,vx=-1,_x=-1;const Yo={};let yT=Go("");if(Tt.allowVerticalPlacement&&zr.vertical){const ri=fn.layout.get("text-rotate").evaluate(Qt,{},Sn)+90;Sa=new Hm(On,Zt,Vn,di,pi,zr.vertical,xn,bn,Qn,ri),fi&&(na=new Hm(On,Zt,Vn,di,pi,fi,ei,Mi,Qn,ri))}if(_n){const ri=fn.layout.get("icon-rotate").evaluate(Qt,{}),ia=fn.layout.get("icon-text-fit")!=="none",Wl=sT(_n,ri,qn,ia),Ka=fi?sT(fi,ri,qn,ia):void 0;Ko=new Hm(On,Zt,Vn,di,pi,_n,ei,Mi,!1,ri),zi=4*Wl.length;const Zl=Tt.iconSizeData;let xo=null;Zl.kind==="source"?(xo=[_o*fn.layout.get("icon-size").evaluate(Qt,{})],xo[0]>Fs&&Re(`${Tt.layerIds[0]}: Value for "icon-size" is >= ${Ff}. Reduce your "icon-size".`)):Zl.kind==="composite"&&(xo=[_o*ti.compositeIconSizes[0].evaluate(Qt,{},Sn),_o*ti.compositeIconSizes[1].evaluate(Qt,{},Sn)],(xo[0]>Fs||xo[1]>Fs)&&Re(`${Tt.layerIds[0]}: Value for "icon-size" is >= ${Ff}. Reduce your "icon-size".`)),Tt.addSymbols(Tt.icon,Wl,xo,wn,Oi,Qt,l.ai.none,Zt,Wa.lineStartIndex,Wa.lineLength,-1,Sn),vx=Tt.icon.placedSymbolArray.length-1,Ka&&(Xo=4*Ka.length,Tt.addSymbols(Tt.icon,Ka,xo,wn,Oi,Qt,l.ai.vertical,Zt,Wa.lineStartIndex,Wa.lineLength,-1,Sn),_x=Tt.icon.placedSymbolArray.length-1)}const vT=Object.keys(zr.horizontal);for(const ri of vT){const ia=zr.horizontal[ri];if(!Za){yT=Go(ia.text);const Ka=fn.layout.get("text-rotate").evaluate(Qt,{},Sn);Za=new Hm(On,Zt,Vn,di,pi,ia,xn,bn,Qn,Ka)}const Wl=ia.positionedLines.length===1;if(Gf+=hT(Tt,Zt,ia,Zi,fn,Qn,Qt,mi,Wa,zr.vertical?l.ai.horizontal:l.ai.horizontalOnly,Wl?vT:[ri],Yo,vx,ti,Sn),Wl)break}zr.vertical&&(gT+=hT(Tt,Zt,zr.vertical,Zi,fn,Qn,Qt,mi,Wa,l.ai.vertical,["vertical"],Yo,_x,ti,Sn));const Xj=Za?Za.boxStartIndex:Tt.collisionBoxArray.length,Yj=Za?Za.boxEndIndex:Tt.collisionBoxArray.length,Jj=Sa?Sa.boxStartIndex:Tt.collisionBoxArray.length,Qj=Sa?Sa.boxEndIndex:Tt.collisionBoxArray.length,e$=Ko?Ko.boxStartIndex:Tt.collisionBoxArray.length,t$=Ko?Ko.boxEndIndex:Tt.collisionBoxArray.length,r$=na?na.boxStartIndex:Tt.collisionBoxArray.length,n$=na?na.boxEndIndex:Tt.collisionBoxArray.length;let Ha=-1;const Xm=(ri,ia)=>ri&&ri.circleDiameter?Math.max(ri.circleDiameter,ia):ia;Ha=Xm(Za,Ha),Ha=Xm(Sa,Ha),Ha=Xm(Ko,Ha),Ha=Xm(na,Ha);const _T=Ha>-1?1:0;_T&&(Ha*=wa/vn),Tt.glyphOffsetArray.length>=pc.MAX_GLYPHS&&Re("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Qt.sortKey!==void 0&&Tt.addToSortKeyRanges(Tt.symbolInstances.length,Qt.sortKey);const i$=cT(fn,Qt,Sn),[a$,o$]=function(ri,ia){const Wl=ri.length,Ka=ia==null?void 0:ia.values;if((Ka==null?void 0:Ka.length)>0)for(let Zl=0;Zl<Ka.length;Zl+=2){const xo=Ka[Zl+1];ri.emplaceBack(l.aq[Ka[Zl]],xo[0],xo[1])}return[Wl,ri.length]}(Tt.textAnchorOffsets,i$);Tt.symbolInstances.emplaceBack(Zt.x,Zt.y,Yo.right>=0?Yo.right:-1,Yo.center>=0?Yo.center:-1,Yo.left>=0?Yo.left:-1,Yo.vertical||-1,vx,_x,yT,Xj,Yj,Jj,Qj,e$,t$,r$,n$,Vn,Gf,gT,zi,Xo,_T,0,xn,Ha,a$,o$)}(o,Mt,tt,u,f,m,_t,o.layers[0],o.collisionBoxArray,i.index,i.sourceLayerIndex,o.index,he,[Ee,Ee,Ee,Ee],dt,C,Se,Oe,wt,Y,i,x,M,L,w)};if(ht==="line")for(const tt of tT(i.geometry,0,0,hn,hn)){const Mt=Uj(tt,ge,Ze,u.vertical||Q,f,24,pe,o.overscaling,hn);for(const Tt of Mt)Q&&Hj(o,Q.text,ct,Tt)||st(tt,Tt)}else if(ht==="line-center"){for(const tt of i.geometry)if(tt.length>1){const Mt=Fj(tt,Ze,u.vertical||Q,f,24,pe);Mt&&st(tt,Mt)}}else if(i.type==="Polygon")for(const tt of U_(i.geometry,0)){const Mt=Gj(tt,16);st(tt[0],new Vs(Mt.x,Mt.y,0))}else if(i.type==="LineString")for(const tt of i.geometry)st(tt,new Vs(tt[0].x,tt[0].y,0));else if(i.type==="Point")for(const tt of i.geometry)for(const Mt of tt)st([Mt],new Vs(Mt.x,Mt.y,0))}function hT(o,i,u,f,m,x,w,T,C,M,L,U,Z,Y,Q){const ne=function(Se,ge,Ee,Oe,Ze,dt,wt,ht){const ct=Oe.layout.get("text-rotate").evaluate(dt,{})*Math.PI/180,it=[];for(const _t of ge.positionedLines)for(const st of _t.positionedGlyphs){if(!st.rect)continue;const tt=st.rect||{};let Mt=E2+1,Tt=!0,Zt=1,kr=0;const zr=(Ze||ht)&&st.vertical,_n=st.metrics.advance*st.scale/2;if(ht&&ge.verticalizable&&(kr=_t.lineOffset/2-(st.imageName?-(vn-st.metrics.width*st.scale)/2:(st.scale-1)*vn)),st.imageName){const wn=wt[st.imageName];Tt=wn.sdf,Zt=wn.pixelRatio,Mt=Ii/Zt}const Zi=Ze?[st.x+_n,st.y]:[0,0];let fi=Ze?[0,0]:[st.x+_n+Ee[0],st.y+Ee[1]-kr],fn=[0,0];zr&&(fn=fi,fi=[0,0]);const On=st.metrics.isDoubleResolution?2:1,Vn=(st.metrics.left-Mt)*st.scale-_n+fi[0],di=(-st.metrics.top-Mt)*st.scale+fi[1],pi=Vn+tt.w/On*st.scale/Zt,xn=di+tt.h/On*st.scale/Zt,bn=new k(Vn,di),Qn=new k(pi,di),mi=new k(Vn,xn),ei=new k(pi,xn);if(zr){const wn=new k(-_n,_n-Nf),Qt=-Math.PI/2,ti=vn/2-_n,qn=new k(5-Nf-ti,-(st.imageName?ti:0)),Sn=new k(...fn);bn._rotateAround(Qt,wn)._add(qn)._add(Sn),Qn._rotateAround(Qt,wn)._add(qn)._add(Sn),mi._rotateAround(Qt,wn)._add(qn)._add(Sn),ei._rotateAround(Qt,wn)._add(qn)._add(Sn)}if(ct){const wn=Math.sin(ct),Qt=Math.cos(ct),ti=[Qt,-wn,wn,Qt];bn._matMult(ti),Qn._matMult(ti),mi._matMult(ti),ei._matMult(ti)}const Mi=new k(0,0),Oi=new k(0,0);it.push({tl:bn,tr:Qn,bl:mi,br:ei,tex:tt,writingMode:ge.writingMode,glyphOffset:Zi,sectionIndex:st.sectionIndex,isSDF:Tt,pixelOffsetTL:Mi,pixelOffsetBR:Oi,minFontScaleX:0,minFontScaleY:0})}return it}(0,u,T,m,x,w,f,o.allowVerticalPlacement),he=o.textSizeData;let pe=null;he.kind==="source"?(pe=[_o*m.layout.get("text-size").evaluate(w,{})],pe[0]>Fs&&Re(`${o.layerIds[0]}: Value for "text-size" is >= ${Ff}. Reduce your "text-size".`)):he.kind==="composite"&&(pe=[_o*Y.compositeTextSizes[0].evaluate(w,{},Q),_o*Y.compositeTextSizes[1].evaluate(w,{},Q)],(pe[0]>Fs||pe[1]>Fs)&&Re(`${o.layerIds[0]}: Value for "text-size" is >= ${Ff}. Reduce your "text-size".`)),o.addSymbols(o.text,ne,pe,T,x,w,M,i,C.lineStartIndex,C.lineLength,Z,Q);for(const Se of L)U[Se]=o.text.placedSymbolArray.length-1;return 4*ne.length}function fT(o){for(const i in o)return o[i];return null}function Hj(o,i,u,f){const m=o.compareText;if(i in m){const x=m[i];for(let w=x.length-1;w>=0;w--)if(f.dist(x[w])<u)return!0}else m[i]=[];return m[i].push(f),!1}const dT=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class hx{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,f]=new Uint8Array(i,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=f>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const x=dT[15&f];if(!x)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(i,2,1),[T]=new Uint32Array(i,4,1);return new hx(T,w,x,i)}constructor(i,u=64,f=Float64Array,m){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=f,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const x=dT.indexOf(this.ArrayType),w=2*i*this.ArrayType.BYTES_PER_ELEMENT,T=i*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-T%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${f}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+T+C,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+w+T+C),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+T+C,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=i)}add(i,u){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=i,this.coords[this._pos++]=u,f}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return fx(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,u,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:T}=this,C=[0,x.length-1,0],M=[];for(;C.length;){const L=C.pop()||0,U=C.pop()||0,Z=C.pop()||0;if(U-Z<=T){for(let he=Z;he<=U;he++){const pe=w[2*he],Se=w[2*he+1];pe>=i&&pe<=f&&Se>=u&&Se<=m&&M.push(x[he])}continue}const Y=Z+U>>1,Q=w[2*Y],ne=w[2*Y+1];Q>=i&&Q<=f&&ne>=u&&ne<=m&&M.push(x[Y]),(L===0?i<=Q:u<=ne)&&(C.push(Z),C.push(Y-1),C.push(1-L)),(L===0?f>=Q:m>=ne)&&(C.push(Y+1),C.push(U),C.push(1-L))}return M}within(i,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:x,nodeSize:w}=this,T=[0,m.length-1,0],C=[],M=f*f;for(;T.length;){const L=T.pop()||0,U=T.pop()||0,Z=T.pop()||0;if(U-Z<=w){for(let he=Z;he<=U;he++)mT(x[2*he],x[2*he+1],i,u)<=M&&C.push(m[he]);continue}const Y=Z+U>>1,Q=x[2*Y],ne=x[2*Y+1];mT(Q,ne,i,u)<=M&&C.push(m[Y]),(L===0?i-f<=Q:u-f<=ne)&&(T.push(Z),T.push(Y-1),T.push(1-L)),(L===0?i+f>=Q:u+f>=ne)&&(T.push(Y+1),T.push(U),T.push(1-L))}return C}}function fx(o,i,u,f,m,x){if(m-f<=u)return;const w=f+m>>1;pT(o,i,w,f,m,x),fx(o,i,u,f,w-1,1-x),fx(o,i,u,w+1,m,1-x)}function pT(o,i,u,f,m,x){for(;m>f;){if(m-f>600){const M=m-f+1,L=u-f+1,U=Math.log(M),Z=.5*Math.exp(2*U/3),Y=.5*Math.sqrt(U*Z*(M-Z)/M)*(L-M/2<0?-1:1);pT(o,i,u,Math.max(f,Math.floor(u-L*Z/M+Y)),Math.min(m,Math.floor(u+(M-L)*Z/M+Y)),x)}const w=i[2*u+x];let T=f,C=m;for(Vf(o,i,f,u),i[2*m+x]>w&&Vf(o,i,f,m);T<C;){for(Vf(o,i,T,C),T++,C--;i[2*T+x]<w;)T++;for(;i[2*C+x]>w;)C--}i[2*f+x]===w?Vf(o,i,f,C):(C++,Vf(o,i,C,m)),C<=u&&(f=C+1),u<=C&&(m=C-1)}}function Vf(o,i,u,f){dx(o,u,f),dx(i,2*u,2*f),dx(i,2*u+1,2*f+1)}function dx(o,i,u){const f=o[i];o[i]=o[u],o[u]=f}function mT(o,i,u,f){const m=o-u,x=i-f;return m*m+x*x}var px;l.bh=void 0,(px=l.bh||(l.bh={})).create="create",px.load="load",px.fullLoad="fullLoad";let Km=null,qf=[];const mx=1e3/60,gx="loadTime",yx="fullLoadTime",Kj={mark(o){performance.mark(o)},frame(o){const i=o;Km!=null&&qf.push(i-Km),Km=i},clearMetrics(){Km=null,qf=[],performance.clearMeasures(gx),performance.clearMeasures(yx);for(const o in l.bh)performance.clearMarks(l.bh[o])},getPerformanceMetrics(){performance.measure(gx,l.bh.create,l.bh.load),performance.measure(yx,l.bh.create,l.bh.fullLoad);const o=performance.getEntriesByName(gx)[0].duration,i=performance.getEntriesByName(yx)[0].duration,u=qf.length,f=1/(qf.reduce((x,w)=>x+w,0)/u/1e3),m=qf.filter(x=>x>mx).reduce((x,w)=>x+(w-mx)/mx,0);return{loadTime:o,fullLoadTime:i,fps:f,percentDroppedFrames:m/(u+m)*100,totalFrames:u}}};l.$=function(o,i,u){var f,m,x,w,T,C,M,L,U,Z,Y,Q,ne=u[0],he=u[1],pe=u[2];return i===o?(o[12]=i[0]*ne+i[4]*he+i[8]*pe+i[12],o[13]=i[1]*ne+i[5]*he+i[9]*pe+i[13],o[14]=i[2]*ne+i[6]*he+i[10]*pe+i[14],o[15]=i[3]*ne+i[7]*he+i[11]*pe+i[15]):(m=i[1],x=i[2],w=i[3],T=i[4],C=i[5],M=i[6],L=i[7],U=i[8],Z=i[9],Y=i[10],Q=i[11],o[0]=f=i[0],o[1]=m,o[2]=x,o[3]=w,o[4]=T,o[5]=C,o[6]=M,o[7]=L,o[8]=U,o[9]=Z,o[10]=Y,o[11]=Q,o[12]=f*ne+T*he+U*pe+i[12],o[13]=m*ne+C*he+Z*pe+i[13],o[14]=x*ne+M*he+Y*pe+i[14],o[15]=w*ne+L*he+Q*pe+i[15]),o},l.A=lc,l.B=Pi,l.C=class{constructor(o,i,u){this.receive=f=>{const m=f.data,x=m.id;if(x&&(!m.targetMapId||this.mapId===m.targetMapId))if(m.type==="<cancel>"){delete this.tasks[x];const w=this.cancelCallbacks[x];delete this.cancelCallbacks[x],w&&w()}else Ke()||m.mustQueue?(this.tasks[x]=m,this.taskQueue.push(x),this.invoker.trigger()):this.processTask(x,m)},this.process=()=>{if(!this.taskQueue.length)return;const f=this.taskQueue.shift(),m=this.tasks[f];delete this.tasks[f],this.taskQueue.length&&this.invoker.trigger(),m&&this.processTask(f,m)},this.target=o,this.parent=i,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new Nj(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ke()?o:window}send(o,i,u,f,m=!1){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[x]=u);const w=[],T={id:x,type:o,hasCallback:!!u,targetMapId:f,mustQueue:m,sourceMapId:this.mapId,data:go(i,w)};return this.target.postMessage(T,{transfer:w}),{cancel:()=>{u&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}processTask(o,i){if(i.type==="<response>"){const u=this.callbacks[o];delete this.callbacks[o],u&&(i.error?u(Ls(i.error)):u(null,Ls(i.data)))}else{let u=!1;const f=[],m=i.hasCallback?(T,C)=>{u=!0,delete this.cancelCallbacks[o];const M={id:o,type:"<response>",sourceMapId:this.mapId,error:T?go(T):null,data:go(C,f)};this.target.postMessage(M,{transfer:f})}:T=>{u=!0};let x=null;const w=Ls(i.data);if(this.parent[i.type])x=this.parent[i.type](i.sourceMapId,w,m);else if("getWorkerSource"in this.parent){const T=i.type.split(".");x=this.parent.getWorkerSource(i.sourceMapId,T[0],w.source)[T[1]](w,m)}else m(new Error(`Could not find function ${i.type}`));!u&&x&&x.cancel&&(this.cancelCallbacks[o]=x.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.D=Pt,l.E=mn,l.F=function(o,i){const u={};for(let f=0;f<i.length;f++){const m=i[f];m in o&&(u[m]=o[m])}return u},l.G=V2,l.H=q2,l.I=J_,l.J=R,l.K=F,l.L=Us,l.M=Ue,l.N=hn,l.O=ra,l.P=k,l.Q=Rr,l.R=ta,l.S=Cr,l.T=Tm,l.U=qm,l.V=class extends Vo{},l.W=lx,l.X=function(o,i){const u=window.document.createElement("video");u.muted=!0,u.onloadstart=function(){i(null,u)};for(let f=0;f<o.length;f++){const m=window.document.createElement("source");$t(o[f])||(u.crossOrigin="Anonymous"),m.src=o[f],u.appendChild(m)}return{cancel:()=>{}}},l.Y=at,l.Z=function(){var o=new lc(16);return lc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},l._=v,l.a=_e,l.a$=class extends K{},l.a0=function(o,i,u){var f=u[0],m=u[1],x=u[2];return o[0]=i[0]*f,o[1]=i[1]*f,o[2]=i[2]*f,o[3]=i[3]*f,o[4]=i[4]*m,o[5]=i[5]*m,o[6]=i[6]*m,o[7]=i[7]*m,o[8]=i[8]*x,o[9]=i[9]*x,o[10]=i[10]*x,o[11]=i[11]*x,o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15],o},l.a1=HS,l.a2=function(){return ve++},l.a3=se,l.a4=pc,l.a5=function(){Ci.isLoading()||Ci.isLoaded()||vf()!=="deferred"||Sm()},l.a6=sf,l.a7=ql,l.a8=Er,l.a9=Y2,l.aA=Rl,l.aB=function(o){o=o.slice();const i=Object.create(null);for(let u=0;u<o.length;u++)i[o[u].id]=o[u];for(let u=0;u<o.length;u++)"ref"in o[u]&&(o[u]=un(o[u],i[o[u].ref]));return o},l.aC=function(o){if(o.type==="custom")return new Rj(o);switch(o.type){case"background":return new Lj(o);case"circle":return new xL(o);case"fill":return new BL(o);case"fill-extrusion":return new tj(o);case"heatmap":return new wL(o);case"hillshade":return new TL(o);case"line":return new uj(o);case"raster":return new $j(o);case"symbol":return new Vm(o)}},l.aD=Te,l.aE=function(o,i){if(!o)return[{command:nr.setStyle,args:[i]}];let u=[];try{if(!hr(o.version,i.version))return[{command:nr.setStyle,args:[i]}];hr(o.center,i.center)||u.push({command:nr.setCenter,args:[i.center]}),hr(o.zoom,i.zoom)||u.push({command:nr.setZoom,args:[i.zoom]}),hr(o.bearing,i.bearing)||u.push({command:nr.setBearing,args:[i.bearing]}),hr(o.pitch,i.pitch)||u.push({command:nr.setPitch,args:[i.pitch]}),hr(o.sprite,i.sprite)||u.push({command:nr.setSprite,args:[i.sprite]}),hr(o.glyphs,i.glyphs)||u.push({command:nr.setGlyphs,args:[i.glyphs]}),hr(o.transition,i.transition)||u.push({command:nr.setTransition,args:[i.transition]}),hr(o.light,i.light)||u.push({command:nr.setLight,args:[i.light]});const f={},m=[];(function(w,T,C,M){let L;for(L in T=T||{},w=w||{})Object.prototype.hasOwnProperty.call(w,L)&&(Object.prototype.hasOwnProperty.call(T,L)||Ss(L,C,M));for(L in T)Object.prototype.hasOwnProperty.call(T,L)&&(Object.prototype.hasOwnProperty.call(w,L)?hr(w[L],T[L])||(w[L].type==="geojson"&&T[L].type==="geojson"&&Mu(w,T,L)?C.push({command:nr.setGeoJSONSourceData,args:[L,T[L].data]}):Ra(L,T,C,M)):Si(L,T,C))})(o.sources,i.sources,m,f);const x=[];o.layers&&o.layers.forEach(w=>{f[w.source]?u.push({command:nr.removeLayer,args:[w.id]}):x.push(w)}),u=u.concat(m),function(w,T,C){T=T||[];const M=(w=w||[]).map(uo),L=T.map(uo),U=w.reduce(Do,{}),Z=T.reduce(Do,{}),Y=M.slice(),Q=Object.create(null);let ne,he,pe,Se,ge,Ee,Oe;for(ne=0,he=0;ne<M.length;ne++)pe=M[ne],Object.prototype.hasOwnProperty.call(Z,pe)?he++:(C.push({command:nr.removeLayer,args:[pe]}),Y.splice(Y.indexOf(pe,he),1));for(ne=0,he=0;ne<L.length;ne++)pe=L[L.length-1-ne],Y[Y.length-1-ne]!==pe&&(Object.prototype.hasOwnProperty.call(U,pe)?(C.push({command:nr.removeLayer,args:[pe]}),Y.splice(Y.lastIndexOf(pe,Y.length-he),1)):he++,Ee=Y[Y.length-ne],C.push({command:nr.addLayer,args:[Z[pe],Ee]}),Y.splice(Y.length-ne,0,pe),Q[pe]=!0);for(ne=0;ne<L.length;ne++)if(pe=L[ne],Se=U[pe],ge=Z[pe],!Q[pe]&&!hr(Se,ge))if(hr(Se.source,ge.source)&&hr(Se["source-layer"],ge["source-layer"])&&hr(Se.type,ge.type)){for(Oe in Ts(Se.layout,ge.layout,C,pe,null,nr.setLayoutProperty),Ts(Se.paint,ge.paint,C,pe,null,nr.setPaintProperty),hr(Se.filter,ge.filter)||C.push({command:nr.setFilter,args:[pe,ge.filter]}),hr(Se.minzoom,ge.minzoom)&&hr(Se.maxzoom,ge.maxzoom)||C.push({command:nr.setLayerZoomRange,args:[pe,ge.minzoom,ge.maxzoom]}),Se)Object.prototype.hasOwnProperty.call(Se,Oe)&&Oe!=="layout"&&Oe!=="paint"&&Oe!=="filter"&&Oe!=="metadata"&&Oe!=="minzoom"&&Oe!=="maxzoom"&&(Oe.indexOf("paint.")===0?Ts(Se[Oe],ge[Oe],C,pe,Oe.slice(6),nr.setPaintProperty):hr(Se[Oe],ge[Oe])||C.push({command:nr.setLayerProperty,args:[pe,Oe,ge[Oe]]}));for(Oe in ge)Object.prototype.hasOwnProperty.call(ge,Oe)&&!Object.prototype.hasOwnProperty.call(Se,Oe)&&Oe!=="layout"&&Oe!=="paint"&&Oe!=="filter"&&Oe!=="metadata"&&Oe!=="minzoom"&&Oe!=="maxzoom"&&(Oe.indexOf("paint.")===0?Ts(Se[Oe],ge[Oe],C,pe,Oe.slice(6),nr.setPaintProperty):hr(Se[Oe],ge[Oe])||C.push({command:nr.setLayerProperty,args:[pe,Oe,ge[Oe]]}))}else C.push({command:nr.removeLayer,args:[pe]}),Ee=Y[Y.lastIndexOf(pe)+1],C.push({command:nr.addLayer,args:[ge,Ee]})}(x,i.layers,u)}catch(f){console.warn("Unable to compute style diff:",f),u=[{command:nr.setStyle,args:[i]}]}return u},l.aF=function(o){const i=[],u=o.id;return u===void 0&&i.push({message:`layers.${u}: missing required property "id"`}),o.render===void 0&&i.push({message:`layers.${u}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&i.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),i},l.aG=function o(i,u){if(Array.isArray(i)){if(!Array.isArray(u)||i.length!==u.length)return!1;for(let f=0;f<i.length;f++)if(!o(i[f],u[f]))return!1;return!0}if(typeof i=="object"&&i!==null&&u!==null){if(typeof u!="object"||Object.keys(i).length!==Object.keys(u).length)return!1;for(const f in i)if(!o(i[f],u[f]))return!1;return!0}return i===u},l.aH=Pe,l.aI=Ce,l.aJ=Nl,l.aK=function(o){return o({pluginStatus:ui,pluginURL:yo}),Nl.on("pluginStateChange",o),o},l.aL=class extends Wo{constructor(o,i){super(o,i),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.aM=oc,l.aN=class extends Wo{constructor(o,i){super(o,i),this.current=I_}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let i=1;i<16;i++)if(o[i]!==this.current[i]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},l.aO=Cm,l.aP=class extends Wo{constructor(o,i){super(o,i),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},l.aQ=class extends Wo{constructor(o,i){super(o,i),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},l.aR=km,l.aS=function(o,i,u,f,m,x,w){var T=1/(i-u),C=1/(f-m),M=1/(x-w);return o[0]=-2*T,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*C,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*M,o[11]=0,o[12]=(i+u)*T,o[13]=(m+f)*C,o[14]=(w+x)*M,o[15]=1,o},l.aT=pr,l.aU=_L,l.aV=class extends p{},l.aW=dj,l.aX=class extends _{},l.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},l.aZ=QS,l.a_=rt,l.aa=function(o){const i={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,f,m,x)=>{const w=m||x;return i[f]=!w||w.toLowerCase(),""}),i["max-age"]){const u=parseInt(i["max-age"],10);isNaN(u)?delete i["max-age"]:i["max-age"]=u}return i},l.ab=function(o,i){const u=[];for(const f in o)f in i||u.push(f);return u},l.ac=function(o){if(ce==null){const i=o.navigator?o.navigator.userAgent:null;ce=!!o.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return ce},l.ad=W,l.ae=function(o,i,u){var f=Math.sin(u),m=Math.cos(u),x=i[0],w=i[1],T=i[2],C=i[3],M=i[4],L=i[5],U=i[6],Z=i[7];return i!==o&&(o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15]),o[0]=x*m+M*f,o[1]=w*m+L*f,o[2]=T*m+U*f,o[3]=C*m+Z*f,o[4]=M*m-x*f,o[5]=L*m-w*f,o[6]=U*m-T*f,o[7]=Z*m-C*f,o},l.af=function(o){var i=new lc(16);return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],i},l.ag=zm,l.ah=function(o,i){let u=0,f=0;if(o.kind==="constant")f=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:x,maxZoom:w}=o,T=m?W(Ai.interpolationFactor(m,i,x,w),0,1):0;o.kind==="camera"?f=Pi.number(o.minSize,o.maxSize,T):u=T}return{uSizeT:u,uSize:f}},l.aj=function(o,{uSize:i,uSizeT:u},{lowerSize:f,upperSize:m}){return o.kind==="source"?f/_o:o.kind==="composite"?Pi.number(f/_o,m/_o,u):i},l.ak=rx,l.al=function(o,i,u,f){const m=i.y-o.y,x=i.x-o.x,w=f.y-u.y,T=f.x-u.x,C=w*x-T*m;if(C===0)return null;const M=(T*(o.y-u.y)-w*(o.x-u.x))/C;return new k(o.x+M*x,o.y+M*m)},l.am=tT,l.an=US,l.ao=L_,l.ap=vn,l.ar=tx,l.as=function(o,i){var u=i[0],f=i[1],m=i[2],x=i[3],w=i[4],T=i[5],C=i[6],M=i[7],L=i[8],U=i[9],Z=i[10],Y=i[11],Q=i[12],ne=i[13],he=i[14],pe=i[15],Se=u*T-f*w,ge=u*C-m*w,Ee=u*M-x*w,Oe=f*C-m*T,Ze=f*M-x*T,dt=m*M-x*C,wt=L*ne-U*Q,ht=L*he-Z*Q,ct=L*pe-Y*Q,it=U*he-Z*ne,_t=U*pe-Y*ne,st=Z*pe-Y*he,tt=Se*st-ge*_t+Ee*it+Oe*ct-Ze*ht+dt*wt;return tt?(o[0]=(T*st-C*_t+M*it)*(tt=1/tt),o[1]=(m*_t-f*st-x*it)*tt,o[2]=(ne*dt-he*Ze+pe*Oe)*tt,o[3]=(Z*Ze-U*dt-Y*Oe)*tt,o[4]=(C*ct-w*st-M*ht)*tt,o[5]=(u*st-m*ct+x*ht)*tt,o[6]=(he*Ee-Q*dt-pe*ge)*tt,o[7]=(L*dt-Z*Ee+Y*ge)*tt,o[8]=(w*_t-T*ct+M*wt)*tt,o[9]=(f*ct-u*_t-x*wt)*tt,o[10]=(Q*Ze-ne*Ee+pe*Se)*tt,o[11]=(U*Ee-L*Ze-Y*Se)*tt,o[12]=(T*ht-w*it-C*wt)*tt,o[13]=(u*it-f*ht+m*wt)*tt,o[14]=(ne*ge-Q*Oe-he*Se)*tt,o[15]=(L*Oe-U*ge+Z*Se)*tt,o):null},l.at=cx,l.au=ex,l.av=hx,l.aw=function(){const o={},i=Ne.$version;for(const u in Ne.$root){const f=Ne.$root[u];if(f.required){let m=null;m=u==="version"?i:f.type==="array"?[]:{},m!=null&&(o[u]=m)}}return o},l.ax=nr,l.ay=_m,l.az=Ye,l.b=function(o,i){const u=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(u).then(f=>{i(null,f)}).catch(f=>{i(new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.b0=In,l.b1=function(o,i){var u=o[0],f=o[1],m=o[2],x=o[3],w=o[4],T=o[5],C=o[6],M=o[7],L=o[8],U=o[9],Z=o[10],Y=o[11],Q=o[12],ne=o[13],he=o[14],pe=o[15],Se=i[0],ge=i[1],Ee=i[2],Oe=i[3],Ze=i[4],dt=i[5],wt=i[6],ht=i[7],ct=i[8],it=i[9],_t=i[10],st=i[11],tt=i[12],Mt=i[13],Tt=i[14],Zt=i[15];return Math.abs(u-Se)<=hi*Math.max(1,Math.abs(u),Math.abs(Se))&&Math.abs(f-ge)<=hi*Math.max(1,Math.abs(f),Math.abs(ge))&&Math.abs(m-Ee)<=hi*Math.max(1,Math.abs(m),Math.abs(Ee))&&Math.abs(x-Oe)<=hi*Math.max(1,Math.abs(x),Math.abs(Oe))&&Math.abs(w-Ze)<=hi*Math.max(1,Math.abs(w),Math.abs(Ze))&&Math.abs(T-dt)<=hi*Math.max(1,Math.abs(T),Math.abs(dt))&&Math.abs(C-wt)<=hi*Math.max(1,Math.abs(C),Math.abs(wt))&&Math.abs(M-ht)<=hi*Math.max(1,Math.abs(M),Math.abs(ht))&&Math.abs(L-ct)<=hi*Math.max(1,Math.abs(L),Math.abs(ct))&&Math.abs(U-it)<=hi*Math.max(1,Math.abs(U),Math.abs(it))&&Math.abs(Z-_t)<=hi*Math.max(1,Math.abs(Z),Math.abs(_t))&&Math.abs(Y-st)<=hi*Math.max(1,Math.abs(Y),Math.abs(st))&&Math.abs(Q-tt)<=hi*Math.max(1,Math.abs(Q),Math.abs(tt))&&Math.abs(ne-Mt)<=hi*Math.max(1,Math.abs(ne),Math.abs(Mt))&&Math.abs(he-Tt)<=hi*Math.max(1,Math.abs(he),Math.abs(Tt))&&Math.abs(pe-Zt)<=hi*Math.max(1,Math.abs(pe),Math.abs(Zt))},l.b2=function(o,i){return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15],o},l.b3=function(o,i,u){return o[0]=i[0]*u[0],o[1]=i[1]*u[1],o[2]=i[2]*u[2],o[3]=i[3]*u[3],o},l.b4=function(o,i){return o[0]*i[0]+o[1]*i[1]+o[2]*i[2]+o[3]*i[3]},l.b5=ee,l.b6=H2,l.b7=G2,l.b8=function(o,i,u,f,m){var x,w=1/Math.tan(i/2);return o[0]=w/u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=w,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+f)*(x=1/(f-m)),o[14]=2*m*f*x):(o[10]=-1,o[14]=-2*f),o},l.b9=function(o,i,u){var f=Math.sin(u),m=Math.cos(u),x=i[4],w=i[5],T=i[6],C=i[7],M=i[8],L=i[9],U=i[10],Z=i[11];return i!==o&&(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15]),o[4]=x*m+M*f,o[5]=w*m+L*f,o[6]=T*m+U*f,o[7]=C*m+Z*f,o[8]=M*m-x*f,o[9]=L*m-w*f,o[10]=U*m-T*f,o[11]=Z*m-C*f,o},l.bA=S,l.bB=x2,l.bC=Ku,l.bD=Ci,l.ba=X,l.bb=q,l.bc=function(o,i){return o[0]=i[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=i[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},l.bd=class extends Ul{},l.be=ox,l.bf=W2,l.bg=Kj,l.bi=Jt,l.bj=function(o,i,u=!1){if(ui===df||ui===pf||ui===mf)throw new Error("setRTLTextPlugin cannot be called multiple times.");yo=Rt.resolveURL(o),ui=df,gf=i,yf(),u||Sm()},l.bk=vf,l.bl=function(o,i){const u={};for(let m=0;m<o.length;m++){const x=i&&i[o[m].id]||Qu(o[m]);i&&(i[o[m].id]=x);let w=u[x];w||(w=u[x]=[]),w.push(o[m])}const f=[];for(const m in u)f.push(u[m]);return f},l.bm=vt,l.bn=X2,l.bo=J2,l.bp=k2,l.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=hn/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const i=o.bucket.layers[0],u=i.layout,f=i._unevaluatedLayout._values,m={layoutIconSize:f["icon-size"].possiblyEvaluate(new Er(o.bucket.zoom+1),o.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new Er(o.bucket.zoom+1),o.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new Er(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:M,maxZoom:L}=o.bucket.textSizeData;m.compositeTextSizes=[f["text-size"].possiblyEvaluate(new Er(M),o.canonical),f["text-size"].possiblyEvaluate(new Er(L),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:M,maxZoom:L}=o.bucket.iconSizeData;m.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new Er(M),o.canonical),f["icon-size"].possiblyEvaluate(new Er(L),o.canonical)]}const x=u.get("text-line-height")*vn,w=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",T=u.get("text-keep-upright"),C=u.get("text-size");for(const M of o.bucket.features){const L=u.get("text-font").evaluate(M,{},o.canonical).join(","),U=C.evaluate(M,{},o.canonical),Z=m.layoutTextSize.evaluate(M,{},o.canonical),Y=m.layoutIconSize.evaluate(M,{},o.canonical),Q={horizontal:{},vertical:void 0},ne=M.text;let he,pe=[0,0];if(ne){const Ee=ne.toString(),Oe=u.get("text-letter-spacing").evaluate(M,{},o.canonical)*vn,Ze=hf(Ee)?Oe:0,dt=u.get("text-anchor").evaluate(M,{},o.canonical),wt=cT(i,M,o.canonical);if(!wt){const st=u.get("text-radial-offset").evaluate(M,{},o.canonical);pe=st?uT(dt,[st*vn,ux]):u.get("text-offset").evaluate(M,{},o.canonical).map(tt=>tt*vn)}let ht=w?"center":u.get("text-justify").evaluate(M,{},o.canonical);const ct=u.get("symbol-placement"),it=ct==="point"?u.get("text-max-width").evaluate(M,{},o.canonical)*vn:0,_t=()=>{o.bucket.allowVerticalPlacement&&cf(Ee)&&(Q.vertical=Bm(ne,o.glyphMap,o.glyphPositions,o.imagePositions,L,it,x,dt,"left",Ze,pe,l.ai.vertical,!0,ct,Z,U))};if(!w&&wt){const st=new Set;if(ht==="auto")for(let Mt=0;Mt<wt.values.length;Mt+=2)st.add(cx(wt.values[Mt]));else st.add(ht);let tt=!1;for(const Mt of st)if(!Q.horizontal[Mt])if(tt)Q.horizontal[Mt]=Q.horizontal[0];else{const Tt=Bm(ne,o.glyphMap,o.glyphPositions,o.imagePositions,L,it,x,"center",Mt,Ze,pe,l.ai.horizontal,!1,ct,Z,U);Tt&&(Q.horizontal[Mt]=Tt,tt=Tt.positionedLines.length===1)}_t()}else{ht==="auto"&&(ht=cx(dt));const st=Bm(ne,o.glyphMap,o.glyphPositions,o.imagePositions,L,it,x,dt,ht,Ze,pe,l.ai.horizontal,!1,ct,Z,U);st&&(Q.horizontal[ht]=st),_t(),cf(Ee)&&w&&T&&(Q.vertical=Bm(ne,o.glyphMap,o.glyphPositions,o.imagePositions,L,it,x,dt,ht,Ze,pe,l.ai.vertical,!1,ct,Z,U))}}let Se=!1;if(M.icon&&M.icon.name){const Ee=o.imageMap[M.icon.name];Ee&&(he=Ij(o.imagePositions[M.icon.name],u.get("icon-offset").evaluate(M,{},o.canonical),u.get("icon-anchor").evaluate(M,{},o.canonical)),Se=!!Ee.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Se:o.bucket.sdfIcons!==Se&&Re("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ee.pixelRatio!==o.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const ge=fT(Q.horizontal)||Q.vertical;o.bucket.iconsInText=!!ge&&ge.iconsInText,(ge||he)&&Zj(o.bucket,M,Q,he,o.imageMap,m,Z,Y,pe,Se,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},l.br=H_,l.bs=G_,l.bt=Z_,l.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},l.bv=X_,l.bw=Ns,l.bx=function(o,i,u,f,m){return v(this,void 0,void 0,function*(){if(F())try{return yield Ue(o,i,u,f,m)}catch{}return function(x,w,T,C,M){const L=x.width,U=x.height;je&&Qe||(je=new OffscreenCanvas(L,U),Qe=je.getContext("2d",{willReadFrequently:!0})),je.width=L,je.height=U,Qe.drawImage(x,0,0,L,U);const Z=Qe.getImageData(w,T,C,M);return Qe.clearRect(0,0,L,U),Z.data}(o,i,u,f,m)})},l.by=K2,l.bz=b,l.c=Bt,l.d=function(o,i){const u=new Image;u.onload=()=>{i(null,u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=ke})},u.onerror=()=>i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(o)],{type:"image/png"});u.src=o.byteLength?URL.createObjectURL(f):ke},l.e=le,l.f=function(o,i){return ze(le(o,{type:"json"}),i)},l.g=nt,l.h=Rt,l.i=Ke,l.j=Ht,l.k=Ot,l.l=kt,l.m=ze,l.n=function(o){return new X_(o).readFields(Tj,[])},l.o=function(o,i,u){if(!o.length)return u(null,[]);let f=o.length;const m=new Array(o.length);let x=null;o.forEach((w,T)=>{i(w,(C,M)=>{C&&(x=C),m[T]=M,--f==0&&u(x,m)})})},l.p=C2,l.q=Mf,l.r=rn,l.s=$t,l.t=A_,l.u=ft,l.v=Ne,l.w=Re,l.x=rc,l.y=Va,l.z=function([o,i,u]){return i+=90,i*=Math.PI/180,u*=Math.PI/180,{x:o*Math.cos(i)*Math.sin(u),y:o*Math.sin(i)*Math.sin(u),z:o*Math.cos(u)}}}),c(["./shared"],function(l){class v{constructor(G){this.keyCache={},G&&this.replace(G)}replace(G){this._layerConfigs={},this._layers={},this.update(G,[])}update(G,H){for(const ue of G){this._layerConfigs[ue.id]=ue;const fe=this._layers[ue.id]=l.aC(ue);fe._featureFilter=l.a6(fe.filter),this.keyCache[ue.id]&&delete this.keyCache[ue.id]}for(const ue of H)delete this.keyCache[ue],delete this._layerConfigs[ue],delete this._layers[ue];this.familiesBySource={};const te=l.bl(Object.values(this._layerConfigs),this.keyCache);for(const ue of te){const fe=ue.map(Ge=>this._layers[Ge.id]),Ae=fe[0];if(Ae.visibility==="none")continue;const ye=Ae.source||"";let me=this.familiesBySource[ye];me||(me=this.familiesBySource[ye]={});const we=Ae.sourceLayer||"_geojsonTileLayer";let Ve=me[we];Ve||(Ve=me[we]=[]),Ve.push(fe)}}}class b{constructor(G){const H={},te=[];for(const ye in G){const me=G[ye],we=H[ye]={};for(const Ve in me){const Ge=me[+Ve];if(!Ge||Ge.bitmap.width===0||Ge.bitmap.height===0)continue;const Xe={x:0,y:0,w:Ge.bitmap.width+2,h:Ge.bitmap.height+2};te.push(Xe),we[Ve]={rect:Xe,metrics:Ge.metrics}}}const{w:ue,h:fe}=l.p(te),Ae=new l.q({width:ue||1,height:fe||1});for(const ye in G){const me=G[ye];for(const we in me){const Ve=me[+we];if(!Ve||Ve.bitmap.width===0||Ve.bitmap.height===0)continue;const Ge=H[ye][we].rect;l.q.copy(Ve.bitmap,Ae,{x:0,y:0},{x:Ge.x+1,y:Ge.y+1},Ve.bitmap)}}this.image=Ae,this.positions=H}}l.bm("GlyphAtlas",b);class S{constructor(G){this.tileID=new l.O(G.tileID.overscaledZ,G.tileID.wrap,G.tileID.canonical.z,G.tileID.canonical.x,G.tileID.canonical.y),this.uid=G.uid,this.zoom=G.zoom,this.pixelRatio=G.pixelRatio,this.tileSize=G.tileSize,this.source=G.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=G.showCollisionBoxes,this.collectResourceTiming=!!G.collectResourceTiming,this.returnDependencies=!!G.returnDependencies,this.promoteId=G.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(G,H,te,ue,fe){this.status="parsing",this.data=G,this.collisionBoxArray=new l.a3;const Ae=new l.bn(Object.keys(G.layers).sort()),ye=new l.bo(this.tileID,this.promoteId);ye.bucketLayerIDs=[];const me={},we={featureIndex:ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:te},Ve=H.familiesBySource[this.source];for(const ar in Ve){const ir=G.layers[ar];if(!ir)continue;ir.version===1&&l.w(`Vector tile source "${this.source}" layer "${ar}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Nn=Ae.encode(ar),Sr=[];for(let cn=0;cn<ir.length;cn++){const Cn=ir.feature(cn),Bi=ye.getId(Cn,ar);Sr.push({feature:Cn,id:Bi,index:cn,sourceLayerIndex:Nn})}for(const cn of Ve[ar]){const Cn=cn[0];Cn.source!==this.source&&l.w(`layer.source = ${Cn.source} does not equal this.source = ${this.source}`),Cn.minzoom&&this.zoom<Math.floor(Cn.minzoom)||Cn.maxzoom&&this.zoom>=Cn.maxzoom||Cn.visibility!=="none"&&(P(cn,this.zoom,te),(me[Cn.id]=Cn.createBucket({index:ye.bucketLayerIDs.length,layers:cn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Nn,sourceID:this.source})).populate(Sr,we,this.tileID.canonical),ye.bucketLayerIDs.push(cn.map(Bi=>Bi.id)))}}let Ge,Xe,It,Nt;const xt=l.aH(we.glyphDependencies,ar=>Object.keys(ar).map(Number));this.inFlightDependencies.forEach(ar=>ar==null?void 0:ar.cancel()),this.inFlightDependencies=[];const zt=++this.dependencySentinel;Object.keys(xt).length?this.inFlightDependencies.push(ue.send("getGlyphs",{uid:this.uid,stacks:xt,source:this.source,tileID:this.tileID,type:"glyphs"},(ar,ir)=>{zt===this.dependencySentinel&&(Ge||(Ge=ar,Xe=ir,vr.call(this)))})):Xe={};const Ut=Object.keys(we.iconDependencies);Ut.length?this.inFlightDependencies.push(ue.send("getImages",{icons:Ut,source:this.source,tileID:this.tileID,type:"icons"},(ar,ir)=>{zt===this.dependencySentinel&&(Ge||(Ge=ar,It=ir,vr.call(this)))})):It={};const fr=Object.keys(we.patternDependencies);function vr(){if(Ge)return fe(Ge);if(Xe&&It&&Nt){const ar=new b(Xe),ir=new l.bp(It,Nt);for(const Nn in me){const Sr=me[Nn];Sr instanceof l.a4?(P(Sr.layers,this.zoom,te),l.bq({bucket:Sr,glyphMap:Xe,glyphPositions:ar.positions,imageMap:It,imagePositions:ir.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Sr.hasPattern&&(Sr instanceof l.br||Sr instanceof l.bs||Sr instanceof l.bt)&&(P(Sr.layers,this.zoom,te),Sr.addFeatures(we,this.tileID.canonical,ir.patternPositions))}this.status="done",fe(null,{buckets:Object.values(me).filter(Nn=>!Nn.isEmpty()),featureIndex:ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ar.image,imageAtlas:ir,glyphMap:this.returnDependencies?Xe:null,iconMap:this.returnDependencies?It:null,glyphPositions:this.returnDependencies?ar.positions:null})}}fr.length?this.inFlightDependencies.push(ue.send("getImages",{icons:fr,source:this.source,tileID:this.tileID,type:"patterns"},(ar,ir)=>{zt===this.dependencySentinel&&(Ge||(Ge=ar,Nt=ir,vr.call(this)))})):Nt={},vr.call(this)}}function P(oe,G,H){const te=new l.a8(G);for(const ue of oe)ue.recalculate(te,H)}function k(oe,G){const H=l.l(oe.request,(te,ue,fe,Ae)=>{if(te)G(te);else if(ue)try{const ye=new l.bw.VectorTile(new l.bv(ue));G(null,{vectorTile:ye,rawData:ue,cacheControl:fe,expires:Ae})}catch(ye){const me=new Uint8Array(ue);let we=`Unable to parse the tile at ${oe.request.url}, `;we+=me[0]===31&&me[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ye.messge}`,G(new Error(we))}});return()=>{H.cancel(),G()}}class z{constructor(G,H,te,ue){this.actor=G,this.layerIndex=H,this.availableImages=te,this.loadVectorData=ue||k,this.fetching={},this.loading={},this.loaded={}}loadTile(G,H){const te=G.uid;this.loading||(this.loading={});const ue=!!(G&&G.request&&G.request.collectResourceTiming)&&new l.bu(G.request),fe=this.loading[te]=new S(G);fe.abort=this.loadVectorData(G,(Ae,ye)=>{if(delete this.loading[te],Ae||!ye)return fe.status="done",this.loaded[te]=fe,H(Ae);const me=ye.rawData,we={};ye.expires&&(we.expires=ye.expires),ye.cacheControl&&(we.cacheControl=ye.cacheControl);const Ve={};if(ue){const Ge=ue.finish();Ge&&(Ve.resourceTiming=JSON.parse(JSON.stringify(Ge)))}fe.vectorTile=ye.vectorTile,fe.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ge,Xe)=>{if(delete this.fetching[te],Ge||!Xe)return H(Ge);H(null,l.e({rawTileData:me.slice(0)},Xe,we,Ve))}),this.loaded=this.loaded||{},this.loaded[te]=fe,this.fetching[te]={rawTileData:me,cacheControl:we,resourceTiming:Ve}})}reloadTile(G,H){const te=this.loaded,ue=G.uid;if(te&&te[ue]){const fe=te[ue];fe.showCollisionBoxes=G.showCollisionBoxes,fe.status==="parsing"?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ae,ye)=>{if(Ae||!ye)return H(Ae,ye);let me;if(this.fetching[ue]){const{rawTileData:we,cacheControl:Ve,resourceTiming:Ge}=this.fetching[ue];delete this.fetching[ue],me=l.e({rawTileData:we.slice(0)},ye,Ve,Ge)}else me=ye;H(null,me)}):fe.status==="done"&&(fe.vectorTile?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,H):H())}}abortTile(G,H){const te=this.loading,ue=G.uid;te&&te[ue]&&te[ue].abort&&(te[ue].abort(),delete te[ue]),H()}removeTile(G,H){const te=this.loaded,ue=G.uid;te&&te[ue]&&delete te[ue],H()}}class B{constructor(){this.loaded={}}loadTile(G,H){return l._(this,void 0,void 0,function*(){const{uid:te,encoding:ue,rawImageData:fe,redFactor:Ae,greenFactor:ye,blueFactor:me,baseShift:we}=G,Ve=fe.width+2,Ge=fe.height+2,Xe=l.a(fe)?new l.R({width:Ve,height:Ge},yield l.bx(fe,-1,-1,Ve,Ge)):fe,It=new l.by(te,Xe,ue,Ae,ye,me,we);this.loaded=this.loaded||{},this.loaded[te]=It,H(null,It)})}removeTile(G){const H=this.loaded,te=G.uid;H&&H[te]&&delete H[te]}}function j(oe,G){if(oe.length!==0){V(oe[0],G);for(var H=1;H<oe.length;H++)V(oe[H],!G)}}function V(oe,G){for(var H=0,te=0,ue=0,fe=oe.length,Ae=fe-1;ue<fe;Ae=ue++){var ye=(oe[ue][0]-oe[Ae][0])*(oe[Ae][1]+oe[ue][1]),me=H+ye;te+=Math.abs(H)>=Math.abs(ye)?H-me+ye:ye-me+H,H=me}H+te>=0!=!!G&&oe.reverse()}var D=l.bz(function oe(G,H){var te,ue=G&&G.type;if(ue==="FeatureCollection")for(te=0;te<G.features.length;te++)oe(G.features[te],H);else if(ue==="GeometryCollection")for(te=0;te<G.geometries.length;te++)oe(G.geometries[te],H);else if(ue==="Feature")oe(G.geometry,H);else if(ue==="Polygon")j(G.coordinates,H);else if(ue==="MultiPolygon")for(te=0;te<G.coordinates.length;te++)j(G.coordinates[te],H);return G});const R=l.bw.VectorTileFeature.prototype.toGeoJSON;var F={exports:{}},X=l.bA,q=l.bw.VectorTileFeature,W=ee;function ee(oe,G){this.options=G||{},this.features=oe,this.length=oe.length}function le(oe,G){this.id=typeof oe.id=="number"?oe.id:void 0,this.type=oe.type,this.rawGeometry=oe.type===1?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=G||4096}ee.prototype.feature=function(oe){return new le(this.features[oe],this.options.extent)},le.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var G=0;G<oe.length;G++){for(var H=oe[G],te=[],ue=0;ue<H.length;ue++)te.push(new X(H[ue][0],H[ue][1]));this.geometry.push(te)}return this.geometry},le.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,G=1/0,H=-1/0,te=1/0,ue=-1/0,fe=0;fe<oe.length;fe++)for(var Ae=oe[fe],ye=0;ye<Ae.length;ye++){var me=Ae[ye];G=Math.min(G,me.x),H=Math.max(H,me.x),te=Math.min(te,me.y),ue=Math.max(ue,me.y)}return[G,te,H,ue]},le.prototype.toGeoJSON=q.prototype.toGeoJSON;var ve=l.bB,Pe=W;function Ce(oe){var G=new ve;return function(H,te){for(var ue in H.layers)te.writeMessage(3,Te,H.layers[ue])}(oe,G),G.finish()}function Te(oe,G){var H;G.writeVarintField(15,oe.version||1),G.writeStringField(1,oe.name||""),G.writeVarintField(5,oe.extent||4096);var te={keys:[],values:[],keycache:{},valuecache:{}};for(H=0;H<oe.length;H++)te.feature=oe.feature(H),G.writeMessage(2,Fe,te);var ue=te.keys;for(H=0;H<ue.length;H++)G.writeStringField(3,ue[H]);var fe=te.values;for(H=0;H<fe.length;H++)G.writeMessage(4,ce,fe[H])}function Fe(oe,G){var H=oe.feature;H.id!==void 0&&G.writeVarintField(1,H.id),G.writeMessage(2,Re,oe),G.writeVarintField(3,H.type),G.writeMessage(4,Ke,H)}function Re(oe,G){var H=oe.feature,te=oe.keys,ue=oe.values,fe=oe.keycache,Ae=oe.valuecache;for(var ye in H.properties){var me=H.properties[ye],we=fe[ye];if(me!==null){we===void 0&&(te.push(ye),fe[ye]=we=te.length-1),G.writeVarint(we);var Ve=typeof me;Ve!=="string"&&Ve!=="boolean"&&Ve!=="number"&&(me=JSON.stringify(me));var Ge=Ve+":"+me,Xe=Ae[Ge];Xe===void 0&&(ue.push(me),Ae[Ge]=Xe=ue.length-1),G.writeVarint(Xe)}}}function Be(oe,G){return(G<<3)+(7&oe)}function qe(oe){return oe<<1^oe>>31}function Ke(oe,G){for(var H=oe.loadGeometry(),te=oe.type,ue=0,fe=0,Ae=H.length,ye=0;ye<Ae;ye++){var me=H[ye],we=1;te===1&&(we=me.length),G.writeVarint(Be(1,we));for(var Ve=te===3?me.length-1:me.length,Ge=0;Ge<Ve;Ge++){Ge===1&&te!==1&&G.writeVarint(Be(2,Ve-1));var Xe=me[Ge].x-ue,It=me[Ge].y-fe;G.writeVarint(qe(Xe)),G.writeVarint(qe(It)),ue+=Xe,fe+=It}te===3&&G.writeVarint(Be(7,1))}}function ce(oe,G){var H=typeof oe;H==="string"?G.writeStringField(1,oe):H==="boolean"?G.writeBooleanField(7,oe):H==="number"&&(oe%1!=0?G.writeDoubleField(3,oe):oe<0?G.writeSVarintField(6,oe):G.writeVarintField(5,oe))}F.exports=Ce,F.exports.fromVectorTileJs=Ce,F.exports.fromGeojsonVt=function(oe,G){G=G||{};var H={};for(var te in oe)H[te]=new Pe(oe[te].features,G),H[te].name=te,H[te].version=G.version,H[te].extent=G.extent;return Ce({layers:H})},F.exports.GeoJSONWrapper=Pe;var _e=l.bz(F.exports);const ke={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:oe=>oe},Ue=Math.fround||(je=new Float32Array(1),oe=>(je[0]=+oe,je[0]));var je;const Qe=3,pt=5,Dt=6;class Rt{constructor(G){this.options=Object.assign(Object.create(ke),G),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(G){const{log:H,minZoom:te,maxZoom:ue}=this.options;H&&console.time("total time");const fe=`prepare ${G.length} points`;H&&console.time(fe),this.points=G;const Ae=[];for(let me=0;me<G.length;me++){const we=G[me];if(!we.geometry)continue;const[Ve,Ge]=we.geometry.coordinates,Xe=Ue(Ye(Ve)),It=Ue(nt(Ge));Ae.push(Xe,It,1/0,me,-1,1),this.options.reduce&&Ae.push(0)}let ye=this.trees[ue+1]=this._createTree(Ae);H&&console.timeEnd(fe);for(let me=ue;me>=te;me--){const we=+Date.now();ye=this.trees[me]=this._createTree(this._cluster(ye,me)),H&&console.log("z%d: %d clusters in %dms",me,ye.numItems,+Date.now()-we)}return H&&console.timeEnd("total time"),this}getClusters(G,H){let te=((G[0]+180)%360+360)%360-180;const ue=Math.max(-90,Math.min(90,G[1]));let fe=G[2]===180?180:((G[2]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,G[3]));if(G[2]-G[0]>=360)te=-180,fe=180;else if(te>fe){const Ge=this.getClusters([te,ue,180,Ae],H),Xe=this.getClusters([-180,ue,fe,Ae],H);return Ge.concat(Xe)}const ye=this.trees[this._limitZoom(H)],me=ye.range(Ye(te),nt(Ae),Ye(fe),nt(ue)),we=ye.data,Ve=[];for(const Ge of me){const Xe=this.stride*Ge;Ve.push(we[Xe+pt]>1?Bt(we,Xe,this.clusterProps):this.points[we[Xe+Qe]])}return Ve}getChildren(G){const H=this._getOriginId(G),te=this._getOriginZoom(G),ue="No cluster with the specified id.",fe=this.trees[te];if(!fe)throw new Error(ue);const Ae=fe.data;if(H*this.stride>=Ae.length)throw new Error(ue);const ye=this.options.radius/(this.options.extent*Math.pow(2,te-1)),me=fe.within(Ae[H*this.stride],Ae[H*this.stride+1],ye),we=[];for(const Ve of me){const Ge=Ve*this.stride;Ae[Ge+4]===G&&we.push(Ae[Ge+pt]>1?Bt(Ae,Ge,this.clusterProps):this.points[Ae[Ge+Qe]])}if(we.length===0)throw new Error(ue);return we}getLeaves(G,H,te){const ue=[];return this._appendLeaves(ue,G,H=H||10,te=te||0,0),ue}getTile(G,H,te){const ue=this.trees[this._limitZoom(G)],fe=Math.pow(2,G),{extent:Ae,radius:ye}=this.options,me=ye/Ae,we=(te-me)/fe,Ve=(te+1+me)/fe,Ge={features:[]};return this._addTileFeatures(ue.range((H-me)/fe,we,(H+1+me)/fe,Ve),ue.data,H,te,fe,Ge),H===0&&this._addTileFeatures(ue.range(1-me/fe,we,1,Ve),ue.data,fe,te,fe,Ge),H===fe-1&&this._addTileFeatures(ue.range(0,we,me/fe,Ve),ue.data,-1,te,fe,Ge),Ge.features.length?Ge:null}getClusterExpansionZoom(G){let H=this._getOriginZoom(G)-1;for(;H<=this.options.maxZoom;){const te=this.getChildren(G);if(H++,te.length!==1)break;G=te[0].properties.cluster_id}return H}_appendLeaves(G,H,te,ue,fe){const Ae=this.getChildren(H);for(const ye of Ae){const me=ye.properties;if(me&&me.cluster?fe+me.point_count<=ue?fe+=me.point_count:fe=this._appendLeaves(G,me.cluster_id,te,ue,fe):fe<ue?fe++:G.push(ye),G.length===te)break}return fe}_createTree(G){const H=new l.av(G.length/this.stride|0,this.options.nodeSize,Float32Array);for(let te=0;te<G.length;te+=this.stride)H.add(G[te],G[te+1]);return H.finish(),H.data=G,H}_addTileFeatures(G,H,te,ue,fe,Ae){for(const ye of G){const me=ye*this.stride,we=H[me+pt]>1;let Ve,Ge,Xe;if(we)Ve=Jt(H,me,this.clusterProps),Ge=H[me],Xe=H[me+1];else{const xt=this.points[H[me+Qe]];Ve=xt.properties;const[zt,Ut]=xt.geometry.coordinates;Ge=Ye(zt),Xe=nt(Ut)}const It={type:1,geometry:[[Math.round(this.options.extent*(Ge*fe-te)),Math.round(this.options.extent*(Xe*fe-ue))]],tags:Ve};let Nt;Nt=we||this.options.generateId?H[me+Qe]:this.points[H[me+Qe]].id,Nt!==void 0&&(It.id=Nt),Ae.features.push(It)}}_limitZoom(G){return Math.max(this.options.minZoom,Math.min(Math.floor(+G),this.options.maxZoom+1))}_cluster(G,H){const{radius:te,extent:ue,reduce:fe,minPoints:Ae}=this.options,ye=te/(ue*Math.pow(2,H)),me=G.data,we=[],Ve=this.stride;for(let Ge=0;Ge<me.length;Ge+=Ve){if(me[Ge+2]<=H)continue;me[Ge+2]=H;const Xe=me[Ge],It=me[Ge+1],Nt=G.within(me[Ge],me[Ge+1],ye),xt=me[Ge+pt];let zt=xt;for(const Ut of Nt){const fr=Ut*Ve;me[fr+2]>H&&(zt+=me[fr+pt])}if(zt>xt&&zt>=Ae){let Ut,fr=Xe*xt,vr=It*xt,ar=-1;const ir=((Ge/Ve|0)<<5)+(H+1)+this.points.length;for(const Nn of Nt){const Sr=Nn*Ve;if(me[Sr+2]<=H)continue;me[Sr+2]=H;const cn=me[Sr+pt];fr+=me[Sr]*cn,vr+=me[Sr+1]*cn,me[Sr+4]=ir,fe&&(Ut||(Ut=this._map(me,Ge,!0),ar=this.clusterProps.length,this.clusterProps.push(Ut)),fe(Ut,this._map(me,Sr)))}me[Ge+4]=ir,we.push(fr/zt,vr/zt,1/0,ir,-1,zt),fe&&we.push(ar)}else{for(let Ut=0;Ut<Ve;Ut++)we.push(me[Ge+Ut]);if(zt>1)for(const Ut of Nt){const fr=Ut*Ve;if(!(me[fr+2]<=H)){me[fr+2]=H;for(let vr=0;vr<Ve;vr++)we.push(me[fr+vr])}}}}return we}_getOriginId(G){return G-this.points.length>>5}_getOriginZoom(G){return(G-this.points.length)%32}_map(G,H,te){if(G[H+pt]>1){const Ae=this.clusterProps[G[H+Dt]];return te?Object.assign({},Ae):Ae}const ue=this.points[G[H+Qe]].properties,fe=this.options.map(ue);return te&&fe===ue?Object.assign({},fe):fe}}function Bt(oe,G,H){return{type:"Feature",id:oe[G+Qe],properties:Jt(oe,G,H),geometry:{type:"Point",coordinates:[(te=oe[G],360*(te-.5)),At(oe[G+1])]}};var te}function Jt(oe,G,H){const te=oe[G+pt],ue=te>=1e4?`${Math.round(te/1e3)}k`:te>=1e3?Math.round(te/100)/10+"k":te,fe=oe[G+Dt],Ae=fe===-1?{}:Object.assign({},H[fe]);return Object.assign(Ae,{cluster:!0,cluster_id:oe[G+Qe],point_count:te,point_count_abbreviated:ue})}function Ye(oe){return oe/360+.5}function nt(oe){const G=Math.sin(oe*Math.PI/180),H=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return H<0?0:H>1?1:H}function At(oe){const G=(180-360*oe)*Math.PI/180;return 360*Math.atan(Math.exp(G))/Math.PI-90}function ze(oe,G,H,te){for(var ue,fe=te,Ae=H-G>>1,ye=H-G,me=oe[G],we=oe[G+1],Ve=oe[H],Ge=oe[H+1],Xe=G+3;Xe<H;Xe+=3){var It=kt(oe[Xe],oe[Xe+1],me,we,Ve,Ge);if(It>fe)ue=Xe,fe=It;else if(It===fe){var Nt=Math.abs(Xe-Ae);Nt<ye&&(ue=Xe,ye=Nt)}}fe>te&&(ue-G>3&&ze(oe,G,ue,te),oe[ue+2]=fe,H-ue>3&&ze(oe,ue,H,te))}function kt(oe,G,H,te,ue,fe){var Ae=ue-H,ye=fe-te;if(Ae!==0||ye!==0){var me=((oe-H)*Ae+(G-te)*ye)/(Ae*Ae+ye*ye);me>1?(H=ue,te=fe):me>0&&(H+=Ae*me,te+=ye*me)}return(Ae=oe-H)*Ae+(ye=G-te)*ye}function $t(oe,G,H,te){var ue={id:oe===void 0?null:oe,type:G,geometry:H,tags:te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(fe){var Ae=fe.geometry,ye=fe.type;if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")mt(fe,Ae);else if(ye==="Polygon"||ye==="MultiLineString")for(var me=0;me<Ae.length;me++)mt(fe,Ae[me]);else if(ye==="MultiPolygon")for(me=0;me<Ae.length;me++)for(var we=0;we<Ae[me].length;we++)mt(fe,Ae[me][we])}(ue),ue}function mt(oe,G){for(var H=0;H<G.length;H+=3)oe.minX=Math.min(oe.minX,G[H]),oe.minY=Math.min(oe.minY,G[H+1]),oe.maxX=Math.max(oe.maxX,G[H]),oe.maxY=Math.max(oe.maxY,G[H+1])}function yt(oe,G,H,te){if(G.geometry){var ue=G.geometry.coordinates,fe=G.geometry.type,Ae=Math.pow(H.tolerance/((1<<H.maxZoom)*H.extent),2),ye=[],me=G.id;if(H.promoteId?me=G.properties[H.promoteId]:H.generateId&&(me=te||0),fe==="Point")Ot(ue,ye);else if(fe==="MultiPoint")for(var we=0;we<ue.length;we++)Ot(ue[we],ye);else if(fe==="LineString")Ht(ue,ye,Ae,!1);else if(fe==="MultiLineString"){if(H.lineMetrics){for(we=0;we<ue.length;we++)Ht(ue[we],ye=[],Ae,!1),oe.push($t(me,"LineString",ye,G.properties));return}mn(ue,ye,Ae,!1)}else if(fe==="Polygon")mn(ue,ye,Ae,!0);else{if(fe!=="MultiPolygon"){if(fe==="GeometryCollection"){for(we=0;we<G.geometry.geometries.length;we++)yt(oe,{id:me,geometry:G.geometry.geometries[we],properties:G.properties},H,te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(we=0;we<ue.length;we++){var Ve=[];mn(ue[we],Ve,Ae,!0),ye.push(Ve)}}oe.push($t(me,fe,ye,G.properties))}}function Ot(oe,G){G.push(Ne(oe[0])),G.push(Xr(oe[1])),G.push(0)}function Ht(oe,G,H,te){for(var ue,fe,Ae=0,ye=0;ye<oe.length;ye++){var me=Ne(oe[ye][0]),we=Xr(oe[ye][1]);G.push(me),G.push(we),G.push(0),ye>0&&(Ae+=te?(ue*we-me*fe)/2:Math.sqrt(Math.pow(me-ue,2)+Math.pow(we-fe,2))),ue=me,fe=we}var Ve=G.length-3;G[2]=1,ze(G,0,Ve,H),G[Ve+2]=1,G.size=Math.abs(Ae),G.start=0,G.end=G.size}function mn(oe,G,H,te){for(var ue=0;ue<oe.length;ue++){var fe=[];Ht(oe[ue],fe,H,te),G.push(fe)}}function Ne(oe){return oe/360+.5}function Xr(oe){var G=Math.sin(oe*Math.PI/180),H=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return H<0?0:H>1?1:H}function un(oe,G,H,te,ue,fe,Ae,ye){if(te/=G,fe>=(H/=G)&&Ae<te)return oe;if(Ae<H||fe>=te)return null;for(var me=[],we=0;we<oe.length;we++){var Ve=oe[we],Ge=Ve.geometry,Xe=Ve.type,It=ue===0?Ve.minX:Ve.minY,Nt=ue===0?Ve.maxX:Ve.maxY;if(It>=H&&Nt<te)me.push(Ve);else if(!(Nt<H||It>=te)){var xt=[];if(Xe==="Point"||Xe==="MultiPoint")hr(Ge,xt,H,te,ue);else if(Xe==="LineString")nr(Ge,xt,H,te,ue,!1,ye.lineMetrics);else if(Xe==="MultiLineString")Ss(Ge,xt,H,te,ue,!1);else if(Xe==="Polygon")Ss(Ge,xt,H,te,ue,!0);else if(Xe==="MultiPolygon")for(var zt=0;zt<Ge.length;zt++){var Ut=[];Ss(Ge[zt],Ut,H,te,ue,!0),Ut.length&&xt.push(Ut)}if(xt.length){if(ye.lineMetrics&&Xe==="LineString"){for(zt=0;zt<xt.length;zt++)me.push($t(Ve.id,Xe,xt[zt],Ve.tags));continue}Xe!=="LineString"&&Xe!=="MultiLineString"||(xt.length===1?(Xe="LineString",xt=xt[0]):Xe="MultiLineString"),Xe!=="Point"&&Xe!=="MultiPoint"||(Xe=xt.length===3?"Point":"MultiPoint"),me.push($t(Ve.id,Xe,xt,Ve.tags))}}}return me.length?me:null}function hr(oe,G,H,te,ue){for(var fe=0;fe<oe.length;fe+=3){var Ae=oe[fe+ue];Ae>=H&&Ae<=te&&(G.push(oe[fe]),G.push(oe[fe+1]),G.push(oe[fe+2]))}}function nr(oe,G,H,te,ue,fe,Ae){for(var ye,me,we=Si(oe),Ve=ue===0?Mu:Ts,Ge=oe.start,Xe=0;Xe<oe.length-3;Xe+=3){var It=oe[Xe],Nt=oe[Xe+1],xt=oe[Xe+2],zt=oe[Xe+3],Ut=oe[Xe+4],fr=ue===0?It:Nt,vr=ue===0?zt:Ut,ar=!1;Ae&&(ye=Math.sqrt(Math.pow(It-zt,2)+Math.pow(Nt-Ut,2))),fr<H?vr>H&&(me=Ve(we,It,Nt,zt,Ut,H),Ae&&(we.start=Ge+ye*me)):fr>te?vr<te&&(me=Ve(we,It,Nt,zt,Ut,te),Ae&&(we.start=Ge+ye*me)):Ra(we,It,Nt,xt),vr<H&&fr>=H&&(me=Ve(we,It,Nt,zt,Ut,H),ar=!0),vr>te&&fr<=te&&(me=Ve(we,It,Nt,zt,Ut,te),ar=!0),!fe&&ar&&(Ae&&(we.end=Ge+ye*me),G.push(we),we=Si(oe)),Ae&&(Ge+=ye)}var ir=oe.length-3;It=oe[ir],Nt=oe[ir+1],xt=oe[ir+2],(fr=ue===0?It:Nt)>=H&&fr<=te&&Ra(we,It,Nt,xt),ir=we.length-3,fe&&ir>=3&&(we[ir]!==we[0]||we[ir+1]!==we[1])&&Ra(we,we[0],we[1],we[2]),we.length&&G.push(we)}function Si(oe){var G=[];return G.size=oe.size,G.start=oe.start,G.end=oe.end,G}function Ss(oe,G,H,te,ue,fe){for(var Ae=0;Ae<oe.length;Ae++)nr(oe[Ae],G,H,te,ue,fe,!1)}function Ra(oe,G,H,te){oe.push(G),oe.push(H),oe.push(te)}function Mu(oe,G,H,te,ue,fe){var Ae=(fe-G)/(te-G);return oe.push(fe),oe.push(H+(ue-H)*Ae),oe.push(1),Ae}function Ts(oe,G,H,te,ue,fe){var Ae=(fe-H)/(ue-H);return oe.push(G+(te-G)*Ae),oe.push(fe),oe.push(1),Ae}function uo(oe,G){for(var H=[],te=0;te<oe.length;te++){var ue,fe=oe[te],Ae=fe.type;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")ue=Do(fe.geometry,G);else if(Ae==="MultiLineString"||Ae==="Polygon"){ue=[];for(var ye=0;ye<fe.geometry.length;ye++)ue.push(Do(fe.geometry[ye],G))}else if(Ae==="MultiPolygon")for(ue=[],ye=0;ye<fe.geometry.length;ye++){for(var me=[],we=0;we<fe.geometry[ye].length;we++)me.push(Do(fe.geometry[ye][we],G));ue.push(me)}H.push($t(fe.id,Ae,ue,fe.tags))}return H}function Do(oe,G){var H=[];H.size=oe.size,oe.start!==void 0&&(H.start=oe.start,H.end=oe.end);for(var te=0;te<oe.length;te+=3)H.push(oe[te]+G,oe[te+1],oe[te+2]);return H}function at(oe,G){if(oe.transformed)return oe;var H,te,ue,fe=1<<oe.z,Ae=oe.x,ye=oe.y;for(H=0;H<oe.features.length;H++){var me=oe.features[H],we=me.geometry,Ve=me.type;if(me.geometry=[],Ve===1)for(te=0;te<we.length;te+=2)me.geometry.push(pa(we[te],we[te+1],G,fe,Ae,ye));else for(te=0;te<we.length;te++){var Ge=[];for(ue=0;ue<we[te].length;ue+=2)Ge.push(pa(we[te][ue],we[te][ue+1],G,fe,Ae,ye));me.geometry.push(Ge)}}return oe.transformed=!0,oe}function pa(oe,G,H,te,ue,fe){return[Math.round(H*(oe*te-ue)),Math.round(H*(G*te-fe))]}function Fr(oe,G,H,te,ue){for(var fe=G===ue.maxZoom?0:ue.tolerance/((1<<G)*ue.extent),Ae={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:H,y:te,z:G,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ye=0;ye<oe.length;ye++){Ae.numFeatures++,Lo(Ae,oe[ye],fe,ue);var me=oe[ye].minX,we=oe[ye].minY,Ve=oe[ye].maxX,Ge=oe[ye].maxY;me<Ae.minX&&(Ae.minX=me),we<Ae.minY&&(Ae.minY=we),Ve>Ae.maxX&&(Ae.maxX=Ve),Ge>Ae.maxY&&(Ae.maxY=Ge)}return Ae}function Lo(oe,G,H,te){var ue=G.geometry,fe=G.type,Ae=[];if(fe==="Point"||fe==="MultiPoint")for(var ye=0;ye<ue.length;ye+=3)Ae.push(ue[ye]),Ae.push(ue[ye+1]),oe.numPoints++,oe.numSimplified++;else if(fe==="LineString")Na(Ae,ue,oe,H,!1,!1);else if(fe==="MultiLineString"||fe==="Polygon")for(ye=0;ye<ue.length;ye++)Na(Ae,ue[ye],oe,H,fe==="Polygon",ye===0);else if(fe==="MultiPolygon")for(var me=0;me<ue.length;me++){var we=ue[me];for(ye=0;ye<we.length;ye++)Na(Ae,we[ye],oe,H,!0,ye===0)}if(Ae.length){var Ve=G.tags||null;if(fe==="LineString"&&te.lineMetrics){for(var Ge in Ve={},G.tags)Ve[Ge]=G.tags[Ge];Ve.mapbox_clip_start=ue.start/ue.size,Ve.mapbox_clip_end=ue.end/ue.size}var Xe={geometry:Ae,type:fe==="Polygon"||fe==="MultiPolygon"?3:fe==="LineString"||fe==="MultiLineString"?2:1,tags:Ve};G.id!==null&&(Xe.id=G.id),oe.features.push(Xe)}}function Na(oe,G,H,te,ue,fe){var Ae=te*te;if(te>0&&G.size<(ue?Ae:te))H.numPoints+=G.length/3;else{for(var ye=[],me=0;me<G.length;me+=3)(te===0||G[me+2]>Ae)&&(H.numSimplified++,ye.push(G[me]),ye.push(G[me+1])),H.numPoints++;ue&&function(we,Ve){for(var Ge=0,Xe=0,It=we.length,Nt=It-2;Xe<It;Nt=Xe,Xe+=2)Ge+=(we[Xe]-we[Nt])*(we[Xe+1]+we[Nt+1]);if(Ge>0===Ve)for(Xe=0,It=we.length;Xe<It/2;Xe+=2){var xt=we[Xe],zt=we[Xe+1];we[Xe]=we[It-2-Xe],we[Xe+1]=we[It-1-Xe],we[It-2-Xe]=xt,we[It-1-Xe]=zt}}(ye,fe),oe.push(ye)}}function lt(oe,G){var H=(G=this.options=function(ue,fe){for(var Ae in fe)ue[Ae]=fe[Ae];return ue}(Object.create(this.options),G)).debug;if(H&&console.time("preprocess data"),G.maxZoom<0||G.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(G.promoteId&&G.generateId)throw new Error("promoteId and generateId cannot be used together.");var te=function(ue,fe){var Ae=[];if(ue.type==="FeatureCollection")for(var ye=0;ye<ue.features.length;ye++)yt(Ae,ue.features[ye],fe,ye);else yt(Ae,ue.type==="Feature"?ue:{geometry:ue},fe);return Ae}(oe,G);this.tiles={},this.tileCoords=[],H&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",G.indexMaxZoom,G.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),te=function(ue,fe){var Ae=fe.buffer/fe.extent,ye=ue,me=un(ue,1,-1-Ae,Ae,0,-1,2,fe),we=un(ue,1,1-Ae,2+Ae,0,-1,2,fe);return(me||we)&&(ye=un(ue,1,-Ae,1+Ae,0,-1,2,fe)||[],me&&(ye=uo(me,1).concat(ye)),we&&(ye=ye.concat(uo(we,-1)))),ye}(te,G),te.length&&this.splitTile(te,0,0,0),H&&(te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Wt(oe,G,H){return 32*((1<<oe)*H+G)+oe}function Ft(oe,G){return G?oe.properties[G]:oe.id}function Xn(oe,G){if(oe==null)return!0;if(oe.type==="Feature")return Ft(oe,G)!=null;if(oe.type==="FeatureCollection"){const H=new Set;for(const te of oe.features){const ue=Ft(te,G);if(ue==null||H.has(ue))return!1;H.add(ue)}return!0}return!1}function ma(oe,G){const H=new Map;if(oe!=null)if(oe.type==="Feature")H.set(Ft(oe,G),oe);else for(const te of oe.features)H.set(Ft(te,G),te);return H}lt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},lt.prototype.splitTile=function(oe,G,H,te,ue,fe,Ae){for(var ye=[oe,G,H,te],me=this.options,we=me.debug;ye.length;){te=ye.pop(),H=ye.pop(),G=ye.pop(),oe=ye.pop();var Ve=1<<G,Ge=Wt(G,H,te),Xe=this.tiles[Ge];if(!Xe&&(we>1&&console.time("creation"),Xe=this.tiles[Ge]=Fr(oe,G,H,te,me),this.tileCoords.push({z:G,x:H,y:te}),we)){we>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",G,H,te,Xe.numFeatures,Xe.numPoints,Xe.numSimplified),console.timeEnd("creation"));var It="z"+G;this.stats[It]=(this.stats[It]||0)+1,this.total++}if(Xe.source=oe,ue){if(G===me.maxZoom||G===ue)continue;var Nt=1<<ue-G;if(H!==Math.floor(fe/Nt)||te!==Math.floor(Ae/Nt))continue}else if(G===me.indexMaxZoom||Xe.numPoints<=me.indexMaxPoints)continue;if(Xe.source=null,oe.length!==0){we>1&&console.time("clipping");var xt,zt,Ut,fr,vr,ar,ir=.5*me.buffer/me.extent,Nn=.5-ir,Sr=.5+ir,cn=1+ir;xt=zt=Ut=fr=null,vr=un(oe,Ve,H-ir,H+Sr,0,Xe.minX,Xe.maxX,me),ar=un(oe,Ve,H+Nn,H+cn,0,Xe.minX,Xe.maxX,me),oe=null,vr&&(xt=un(vr,Ve,te-ir,te+Sr,1,Xe.minY,Xe.maxY,me),zt=un(vr,Ve,te+Nn,te+cn,1,Xe.minY,Xe.maxY,me),vr=null),ar&&(Ut=un(ar,Ve,te-ir,te+Sr,1,Xe.minY,Xe.maxY,me),fr=un(ar,Ve,te+Nn,te+cn,1,Xe.minY,Xe.maxY,me),ar=null),we>1&&console.timeEnd("clipping"),ye.push(xt||[],G+1,2*H,2*te),ye.push(zt||[],G+1,2*H,2*te+1),ye.push(Ut||[],G+1,2*H+1,2*te),ye.push(fr||[],G+1,2*H+1,2*te+1)}}},lt.prototype.getTile=function(oe,G,H){var te=this.options,ue=te.extent,fe=te.debug;if(oe<0||oe>24)return null;var Ae=1<<oe,ye=Wt(oe,G=(G%Ae+Ae)%Ae,H);if(this.tiles[ye])return at(this.tiles[ye],ue);fe>1&&console.log("drilling down to z%d-%d-%d",oe,G,H);for(var me,we=oe,Ve=G,Ge=H;!me&&we>0;)we--,Ve=Math.floor(Ve/2),Ge=Math.floor(Ge/2),me=this.tiles[Wt(we,Ve,Ge)];return me&&me.source?(fe>1&&console.log("found parent tile z%d-%d-%d",we,Ve,Ge),fe>1&&console.time("drilling down"),this.splitTile(me.source,we,Ve,Ge,oe,G,H),fe>1&&console.timeEnd("drilling down"),this.tiles[ye]?at(this.tiles[ye],ue):null):null};class qt extends z{constructor(G,H,te,ue){super(G,H,te),this._dataUpdateable=new Map,this.loadGeoJSON=(fe,Ae)=>{const{promoteId:ye}=fe;if(fe.request)return l.f(fe.request,(me,we,Ve,Ge)=>{this._dataUpdateable=Xn(we,ye)?ma(we,ye):void 0,Ae(me,we,Ve,Ge)});if(typeof fe.data=="string")try{const me=JSON.parse(fe.data);this._dataUpdateable=Xn(me,ye)?ma(me,ye):void 0,Ae(null,me)}catch{Ae(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`))}else fe.dataDiff?this._dataUpdateable?(function(me,we,Ve){var Ge,Xe,It,Nt;if(we.removeAll&&me.clear(),we.remove)for(const xt of we.remove)me.delete(xt);if(we.add)for(const xt of we.add){const zt=Ft(xt,Ve);zt!=null&&me.set(zt,xt)}if(we.update)for(const xt of we.update){let zt=me.get(xt.id);if(zt==null)continue;const Ut=!xt.removeAllProperties&&(((Ge=xt.removeProperties)===null||Ge===void 0?void 0:Ge.length)>0||((Xe=xt.addOrUpdateProperties)===null||Xe===void 0?void 0:Xe.length)>0);if((xt.newGeometry||xt.removeAllProperties||Ut)&&(zt=Object.assign({},zt),me.set(xt.id,zt),Ut&&(zt.properties=Object.assign({},zt.properties))),xt.newGeometry&&(zt.geometry=xt.newGeometry),xt.removeAllProperties)zt.properties={};else if(((It=xt.removeProperties)===null||It===void 0?void 0:It.length)>0)for(const fr of xt.removeProperties)Object.prototype.hasOwnProperty.call(zt.properties,fr)&&delete zt.properties[fr];if(((Nt=xt.addOrUpdateProperties)===null||Nt===void 0?void 0:Nt.length)>0)for(const{key:fr,value:vr}of xt.addOrUpdateProperties)zt.properties[fr]=vr}}(this._dataUpdateable,fe.dataDiff,ye),Ae(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Ae(new Error(`Cannot update existing geojson data in ${fe.source}`)):Ae(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,ue&&(this.loadGeoJSON=ue)}loadGeoJSONTile(G,H){const te=G.tileID.canonical;if(!this._geoJSONIndex)return H(null,null);const ue=this._geoJSONIndex.getTile(te.z,te.x,te.y);if(!ue)return H(null,null);const fe=new class{constructor(ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.N,this.length=ye.length,this._features=ye}feature(ye){return new class{constructor(me){this._feature=me,this.extent=l.N,this.type=me.type,this.properties=me.tags,"id"in me&&!isNaN(me.id)&&(this.id=parseInt(me.id,10))}loadGeometry(){if(this._feature.type===1){const me=[];for(const we of this._feature.geometry)me.push([new l.P(we[0],we[1])]);return me}{const me=[];for(const we of this._feature.geometry){const Ve=[];for(const Ge of we)Ve.push(new l.P(Ge[0],Ge[1]));me.push(Ve)}return me}}toGeoJSON(me,we,Ve){return R.call(this,me,we,Ve)}}(this._features[ye])}}(ue.features);let Ae=_e(fe);Ae.byteOffset===0&&Ae.byteLength===Ae.buffer.byteLength||(Ae=new Uint8Array(Ae)),H(null,{vectorTile:fe,rawData:Ae.buffer})}loadData(G,H){var te;(te=this._pendingRequest)===null||te===void 0||te.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ue=!!(G&&G.request&&G.request.collectResourceTiming)&&new l.bu(G.request);this._pendingCallback=H,this._pendingRequest=this.loadGeoJSON(G,(fe,Ae)=>{if(delete this._pendingCallback,delete this._pendingRequest,fe||!Ae)return H(fe);if(typeof Ae!="object")return H(new Error(`Input data given to '${G.source}' is not a valid GeoJSON object.`));{D(Ae,!0);try{if(G.filter){const me=l.bC(G.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(me.result==="error")throw new Error(me.value.map(Ve=>`${Ve.key}: ${Ve.message}`).join(", "));Ae={type:"FeatureCollection",features:Ae.features.filter(Ve=>me.value.evaluate({zoom:0},Ve))}}this._geoJSONIndex=G.cluster?new Rt(function({superclusterOptions:me,clusterProperties:we}){if(!we||!me)return me;const Ve={},Ge={},Xe={accumulated:null,zoom:0},It={properties:null},Nt=Object.keys(we);for(const xt of Nt){const[zt,Ut]=we[xt],fr=l.bC(Ut),vr=l.bC(typeof zt=="string"?[zt,["accumulated"],["get",xt]]:zt);Ve[xt]=fr.value,Ge[xt]=vr.value}return me.map=xt=>{It.properties=xt;const zt={};for(const Ut of Nt)zt[Ut]=Ve[Ut].evaluate(Xe,It);return zt},me.reduce=(xt,zt)=>{It.properties=zt;for(const Ut of Nt)Xe.accumulated=xt[Ut],xt[Ut]=Ge[Ut].evaluate(Xe,It)},me}(G)).load(Ae.features):function(me,we){return new lt(me,we)}(Ae,G.geojsonVtOptions)}catch(me){return H(me)}this.loaded={};const ye={};if(ue){const me=ue.finish();me&&(ye.resourceTiming={},ye.resourceTiming[G.source]=JSON.parse(JSON.stringify(me)))}H(null,ye)}})}reloadTile(G,H){const te=this.loaded;return te&&te[G.uid]?super.reloadTile(G,H):this.loadTile(G,H)}removeSource(G,H){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),H()}getClusterExpansionZoom(G,H){try{H(null,this._geoJSONIndex.getClusterExpansionZoom(G.clusterId))}catch(te){H(te)}}getClusterChildren(G,H){try{H(null,this._geoJSONIndex.getChildren(G.clusterId))}catch(te){H(te)}}getClusterLeaves(G,H){try{H(null,this._geoJSONIndex.getLeaves(G.clusterId,G.limit,G.offset))}catch(te){H(te)}}}class Ba{constructor(G){this.self=G,this.actor=new l.C(G,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:z,geojson:qt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(H,te)=>{if(this.workerSourceTypes[H])throw new Error(`Worker source with name "${H}" already registered.`);this.workerSourceTypes[H]=te},this.self.registerRTLTextPlugin=H=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.applyArabicShaping=H.applyArabicShaping,l.bD.processBidirectionalText=H.processBidirectionalText,l.bD.processStyledBidirectionalText=H.processStyledBidirectionalText}}setReferrer(G,H){this.referrer=H}setImages(G,H,te){this.availableImages[G]=H;for(const ue in this.workerSources[G]){const fe=this.workerSources[G][ue];for(const Ae in fe)fe[Ae].availableImages=H}te()}setLayers(G,H,te){this.getLayerIndex(G).replace(H),te()}updateLayers(G,H,te){this.getLayerIndex(G).update(H.layers,H.removedIds),te()}loadTile(G,H,te){this.getWorkerSource(G,H.type,H.source).loadTile(H,te)}loadDEMTile(G,H,te){this.getDEMWorkerSource(G,H.source).loadTile(H,te)}reloadTile(G,H,te){this.getWorkerSource(G,H.type,H.source).reloadTile(H,te)}abortTile(G,H,te){this.getWorkerSource(G,H.type,H.source).abortTile(H,te)}removeTile(G,H,te){this.getWorkerSource(G,H.type,H.source).removeTile(H,te)}removeDEMTile(G,H){this.getDEMWorkerSource(G,H.source).removeTile(H)}removeSource(G,H,te){if(!this.workerSources[G]||!this.workerSources[G][H.type]||!this.workerSources[G][H.type][H.source])return;const ue=this.workerSources[G][H.type][H.source];delete this.workerSources[G][H.type][H.source],ue.removeSource!==void 0?ue.removeSource(H,te):te()}loadWorkerSource(G,H,te){try{this.self.importScripts(H.url),te()}catch(ue){te(ue.toString())}}syncRTLPluginState(G,H,te){try{l.bD.setState(H);const ue=l.bD.getPluginURL();if(l.bD.isLoaded()&&!l.bD.isParsed()&&ue!=null){this.self.importScripts(ue);const fe=l.bD.isParsed();te(fe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ue}`),fe)}}catch(ue){te(ue.toString())}}getAvailableImages(G){let H=this.availableImages[G];return H||(H=[]),H}getLayerIndex(G){let H=this.layerIndexes[G];return H||(H=this.layerIndexes[G]=new v),H}getWorkerSource(G,H,te){return this.workerSources[G]||(this.workerSources[G]={}),this.workerSources[G][H]||(this.workerSources[G][H]={}),this.workerSources[G][H][te]||(this.workerSources[G][H][te]=new this.workerSourceTypes[H]({send:(ue,fe,Ae)=>{this.actor.send(ue,fe,Ae,G)}},this.getLayerIndex(G),this.getAvailableImages(G))),this.workerSources[G][H][te]}getDEMWorkerSource(G,H){return this.demWorkerSources[G]||(this.demWorkerSources[G]={}),this.demWorkerSources[G][H]||(this.demWorkerSources[G][H]=new B),this.demWorkerSources[G][H]}}return l.i()&&(self.worker=new Ba(self)),Ba}),c(["./shared"],function(l){var v="3.6.2";class b{static testProp(a){if(!b.docStyle)return a[0];for(let h=0;h<a.length;h++)if(a[h]in b.docStyle)return a[h];return a[0]}static create(a,h,p){const g=window.document.createElement(a);return h!==void 0&&(g.className=h),p&&p.appendChild(g),g}static createNS(a,h){return window.document.createElementNS(a,h)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(a,h){a.style[b.transformProp]=h}static addEventListener(a,h,p,g={}){a.addEventListener(h,p,"passive"in g?g:g.capture)}static removeEventListener(a,h,p,g={}){a.removeEventListener(h,p,"passive"in g?g:g.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static mousePos(a,h){const p=a.getBoundingClientRect();return new l.P(h.clientX-p.left-a.clientLeft,h.clientY-p.top-a.clientTop)}static touchPos(a,h){const p=a.getBoundingClientRect(),g=[];for(let _=0;_<h.length;_++)g.push(new l.P(h[_].clientX-p.left-a.clientLeft,h[_].clientY-p.top-a.clientTop));return g}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}}b.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const S={supported:!1,testSupport:function(y){!z&&k&&(B?j(y):P=y)}};let P,k,z=!1,B=!1;function j(y){const a=y.createTexture();y.bindTexture(y.TEXTURE_2D,a);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,k),y.isContextLost())return;S.supported=!0}catch{}y.deleteTexture(a),z=!0}var V,D;typeof document<"u"&&(k=document.createElement("img"),k.onload=function(){P&&j(P),P=null,B=!0},k.onerror=function(){z=!0,P=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let a,h,p,g;y.resetRequestQueue=()=>{a=[],h=0,p=0,g={}},y.addThrottleControl=O=>{const $=p++;return g[$]=O,$},y.removeThrottleControl=O=>{delete g[O],E()},y.getImage=(O,$,N=!0)=>{S.supported&&(O.headers||(O.headers={}),O.headers.accept="image/webp,*/*");const K={requestParameters:O,supportImageRefresh:N,callback:$,cancelled:!1,completed:!1,cancel:()=>{K.completed||K.cancelled||(K.cancelled=!0,K.innerRequest&&(K.innerRequest.cancel(),h--),E())}};return a.push(K),E(),K};const _=O=>{const{requestParameters:$,supportImageRefresh:N,callback:K}=O;return l.e($,{type:"image"}),(N!==!1||l.i()||l.g($.url)||$.headers&&!Object.keys($.headers).reduce((ae,ie)=>ae&&ie==="accept",!0)?l.m:I)($,(ae,ie,se,re)=>{A(O,K,ae,ie,se,re)})},A=(O,$,N,K,ae,ie)=>{N?$(N):K instanceof HTMLImageElement||l.a(K)?$(null,K):K&&((se,re)=>{typeof createImageBitmap=="function"?l.b(se,re):l.d(se,re)})(K,(se,re)=>{se!=null?$(se):re!=null&&$(null,re,{cacheControl:ae,expires:ie})}),O.cancelled||(O.completed=!0,h--,E())},E=()=>{const O=(()=>{const $=Object.keys(g);let N=!1;if($.length>0){for(const K of $)if(N=g[K](),N)break}return N})()?l.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let $=h;$<O&&a.length>0;$++){const N=a.shift();if(N.cancelled){$--;continue}const K=_(N);h++,N.innerRequest=K}},I=(O,$)=>{const N=new Image,K=O.url;let ae=!1;const ie=O.credentials;return ie&&ie==="include"?N.crossOrigin="use-credentials":(ie&&ie==="same-origin"||!l.s(K))&&(N.crossOrigin="anonymous"),N.fetchPriority="high",N.onload=()=>{$(null,N),N.onerror=N.onload=null},N.onerror=()=>{ae||$(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),N.onerror=N.onload=null},N.src=K,{cancel:()=>{ae=!0,N.src=""}}}}(V||(V={})),V.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(D||(D={}));class R{constructor(a){this._transformRequestFn=a}transformRequest(a,h){return this._transformRequestFn&&this._transformRequestFn(a,h)||{url:a}}normalizeSpriteURL(a,h,p){const g=function(_){const A=_.match(F);if(!A)throw new Error(`Unable to parse URL "${_}"`);return{protocol:A[1],authority:A[2],path:A[3]||"/",params:A[4]?A[4].split("&"):[]}}(a);return g.path+=`${h}${p}`,function(_){const A=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${A}`}(g)}setTransformRequest(a){this._transformRequestFn=a}}const F=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function X(y){var a=new l.A(3);return a[0]=y[0],a[1]=y[1],a[2]=y[2],a}var q,W=function(y,a,h){return y[0]=a[0]-h[0],y[1]=a[1]-h[1],y[2]=a[2]-h[2],y};q=new l.A(3),l.A!=Float32Array&&(q[0]=0,q[1]=0,q[2]=0);var ee=function(y){var a=y[0],h=y[1];return a*a+h*h};function le(y){const a=[];if(typeof y=="string")a.push({id:"default",url:y});else if(y&&y.length>0){const h=[];for(const{id:p,url:g}of y){const _=`${p}${g}`;h.indexOf(_)===-1&&(h.push(_),a.push({id:p,url:g}))}}return a}function ve(y,a,h,p,g){if(p)return void y(p);if(g!==Object.values(a).length||g!==Object.values(h).length)return;const _={};for(const A in a){_[A]={};const E=l.h.getImageCanvasContext(h[A]),I=a[A];for(const O in I){const{width:$,height:N,x:K,y:ae,sdf:ie,pixelRatio:se,stretchX:re,stretchY:xe,content:Ie}=I[O];_[A][O]={data:null,pixelRatio:se,sdf:ie,stretchX:re,stretchY:xe,content:Ie,spriteData:{width:$,height:N,x:K,y:ae,context:E}}}}y(null,_)}(function(){var y=new l.A(2);l.A!=Float32Array&&(y[0]=0,y[1]=0)})();class Pe{constructor(a,h,p,g){this.context=a,this.format=p,this.texture=a.gl.createTexture(),this.update(h,g)}update(a,h,p){const{width:g,height:_}=a,A=!(this.size&&this.size[0]===g&&this.size[1]===_||p),{context:E}=this,{gl:I}=E;if(this.useMipmap=!!(h&&h.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!h||h.premultiply!==!1)),A)this.size=[g,_],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||l.a(a)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,a):I.texImage2D(I.TEXTURE_2D,0,this.format,g,_,0,this.format,I.UNSIGNED_BYTE,a.data);else{const{x:O,y:$}=p||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||l.a(a)?I.texSubImage2D(I.TEXTURE_2D,0,O,$,I.RGBA,I.UNSIGNED_BYTE,a):I.texSubImage2D(I.TEXTURE_2D,0,O,$,g,_,I.RGBA,I.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)}bind(a,h,p){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),p!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=_.LINEAR),a!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,a),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,p||a),this.filter=a),h!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,h),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function Ce(y){const{userImage:a}=y;return!!(a&&a.render&&a.render())&&(y.data.replace(new Uint8Array(a.data.buffer)),!0)}class Te extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:h,callback:p}of this.requestors)this._notify(h,p);this.requestors=[]}}getImage(a){const h=this.images[a];if(h&&!h.data&&h.spriteData){const p=h.spriteData;h.data=new l.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),h.spriteData=null}return h}addImage(a,h){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,h)&&(this.images[a]=h)}_validate(a,h){let p=!0;const g=h.data||h.spriteData;return this._validateStretch(h.stretchX,g&&g.width)||(this.fire(new l.j(new Error(`Image "${a}" has invalid "stretchX" value`))),p=!1),this._validateStretch(h.stretchY,g&&g.height)||(this.fire(new l.j(new Error(`Image "${a}" has invalid "stretchY" value`))),p=!1),this._validateContent(h.content,h)||(this.fire(new l.j(new Error(`Image "${a}" has invalid "content" value`))),p=!1),p}_validateStretch(a,h){if(!a)return!0;let p=0;for(const g of a){if(g[0]<p||g[1]<g[0]||h<g[1])return!1;p=g[1]}return!0}_validateContent(a,h){if(!a)return!0;if(a.length!==4)return!1;const p=h.spriteData,g=p&&p.width||h.data.width,_=p&&p.height||h.data.height;return!(a[0]<0||g<a[0]||a[1]<0||_<a[1]||a[2]<0||g<a[2]||a[3]<0||_<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,h,p=!0){const g=this.getImage(a);if(p&&(g.data.width!==h.data.width||g.data.height!==h.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=g.version+1,this.images[a]=h,this.updatedImages[a]=!0}removeImage(a){const h=this.images[a];delete this.images[a],delete this.patterns[a],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a,h){let p=!0;if(!this.isLoaded())for(const g of a)this.images[g]||(p=!1);this.isLoaded()||p?this._notify(a,h):this.requestors.push({ids:a,callback:h})}_notify(a,h){const p={};for(const g of a){let _=this.getImage(g);_||(this.fire(new l.k("styleimagemissing",{id:g})),_=this.getImage(g)),_?p[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:l.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,p)}getPixelSize(){const{width:a,height:h}=this.atlasImage;return{width:a,height:h}}getPattern(a){const h=this.patterns[a],p=this.getImage(a);if(!p)return null;if(h&&h.position.version===p.version)return h.position;if(h)h.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},_=new l.I(g,p);this.patterns[a]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const h=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Pe(a,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const _ in this.patterns)a.push(this.patterns[_].bin);const{w:h,h:p}=l.p(a),g=this.atlasImage;g.resize({width:h||1,height:p||1});for(const _ in this.patterns){const{bin:A}=this.patterns[_],E=A.x+1,I=A.y+1,O=this.getImage(_).data,$=O.width,N=O.height;l.R.copy(O,g,{x:0,y:0},{x:E,y:I},{width:$,height:N}),l.R.copy(O,g,{x:0,y:N-1},{x:E,y:I-1},{width:$,height:1}),l.R.copy(O,g,{x:0,y:0},{x:E,y:I+N},{width:$,height:1}),l.R.copy(O,g,{x:$-1,y:0},{x:E-1,y:I},{width:1,height:N}),l.R.copy(O,g,{x:0,y:0},{x:E+$,y:I},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const h of a){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const p=this.getImage(h);p||l.w(`Image with ID: "${h}" was not found`),Ce(p)&&this.updateImage(h,p)}}}const Fe=1e20;function Re(y,a,h,p,g,_,A,E,I){for(let O=a;O<a+p;O++)Be(y,h*_+O,_,g,A,E,I);for(let O=h;O<h+g;O++)Be(y,O*_+a,1,p,A,E,I)}function Be(y,a,h,p,g,_,A){_[0]=0,A[0]=-Fe,A[1]=Fe,g[0]=y[a];for(let E=1,I=0,O=0;E<p;E++){g[E]=y[a+E*h];const $=E*E;do{const N=_[I];O=(g[E]-g[N]+$-N*N)/(E-N)/2}while(O<=A[I]&&--I>-1);I++,_[I]=E,A[I]=O,A[I+1]=Fe}for(let E=0,I=0;E<p;E++){for(;A[I+1]<E;)I++;const O=_[I],$=E-O;y[a+E*h]=g[O]+$*$}}class qe{constructor(a,h){this.requestManager=a,this.localIdeographFontFamily=h,this.entries={}}setURL(a){this.url=a}getGlyphs(a,h){const p=[];for(const g in a)for(const _ of a[g])p.push({stack:g,id:_});l.o(p,({stack:g,id:_},A)=>{let E=this.entries[g];E||(E=this.entries[g]={glyphs:{},requests:{},ranges:{}});let I=E.glyphs[_];if(I!==void 0)return void A(null,{stack:g,id:_,glyph:I});if(I=this._tinySDF(E,g,_),I)return E.glyphs[_]=I,void A(null,{stack:g,id:_,glyph:I});const O=Math.floor(_/256);if(256*O>65535)return void A(new Error("glyphs > 65535 not supported"));if(E.ranges[O])return void A(null,{stack:g,id:_,glyph:I});if(!this.url)return void A(new Error("glyphsUrl is not set"));let $=E.requests[O];$||($=E.requests[O]=[],qe.loadGlyphRange(g,O,this.url,this.requestManager,(N,K)=>{if(K){for(const ae in K)this._doesCharSupportLocalGlyph(+ae)||(E.glyphs[+ae]=K[+ae]);E.ranges[O]=!0}for(const ae of $)ae(N,K);delete E.requests[O]})),$.push((N,K)=>{N?A(N):K&&A(null,{stack:g,id:_,glyph:K[_]||null})})},(g,_)=>{if(g)h(g);else if(_){const A={};for(const{stack:E,id:I,glyph:O}of _)(A[E]||(A[E]={}))[I]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};h(null,A)}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](a)||l.u["Hangul Syllables"](a)||l.u.Hiragana(a)||l.u.Katakana(a))}_tinySDF(a,h,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let _=a.tinySDF;if(!_){let E="400";/bold/i.test(h)?E="900":/medium/i.test(h)?E="500":/light/i.test(h)&&(E="200"),_=a.tinySDF=new qe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:E})}const A=_.draw(String.fromCharCode(p));return{id:p,bitmap:new l.q({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}qe.loadGlyphRange=function(y,a,h,p,g){const _=256*a,A=_+255,E=p.transformRequest(h.replace("{fontstack}",y).replace("{range}",`${_}-${A}`),D.Glyphs);l.l(E,(I,O)=>{if(I)g(I);else if(O){const $={};for(const N of l.n(O))$[N.id]=N;g(null,$)}})},qe.TinySDF=class{constructor({fontSize:y=24,buffer:a=3,radius:h=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:A="normal"}={}){this.buffer=a,this.cutoff=p,this.radius=h;const E=this.size=y+4*a,I=this._createCanvas(E),O=this.ctx=I.getContext("2d",{willReadFrequently:!0});O.font=`${A} ${_} ${y}px ${g}`,O.textBaseline="alphabetic",O.textAlign="left",O.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(y){const a=document.createElement("canvas");return a.width=a.height=y,a}draw(y){const{width:a,actualBoundingBoxAscent:h,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(y),A=Math.ceil(h),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),I=Math.min(this.size-this.buffer,A+Math.ceil(p)),O=E+2*this.buffer,$=I+2*this.buffer,N=Math.max(O*$,0),K=new Uint8ClampedArray(N),ae={data:K,width:O,height:$,glyphWidth:E,glyphHeight:I,glyphTop:A,glyphLeft:0,glyphAdvance:a};if(E===0||I===0)return ae;const{ctx:ie,buffer:se,gridInner:re,gridOuter:xe}=this;ie.clearRect(se,se,E,I),ie.fillText(y,se,se+A);const Ie=ie.getImageData(se,se,E,I);xe.fill(Fe,0,N),re.fill(0,0,N);for(let de=0;de<I;de++)for(let be=0;be<E;be++){const De=Ie.data[4*(de*E+be)+3]/255;if(De===0)continue;const Le=(de+se)*O+be+se;if(De===1)xe[Le]=0,re[Le]=Fe;else{const We=.5-De;xe[Le]=We>0?We*We:0,re[Le]=We<0?We*We:0}}Re(xe,0,0,O,$,O,this.f,this.v,this.z),Re(re,se,se,E,I,O,this.f,this.v,this.z);for(let de=0;de<N;de++){const be=Math.sqrt(xe[de])-Math.sqrt(re[de]);K[de]=Math.round(255-255*(be/this.radius+this.cutoff))}return ae}};class Ke{constructor(){this.specification=l.v.light.position}possiblyEvaluate(a,h){return l.z(a.expression.evaluate(h))}interpolate(a,h,p){return{x:l.B.number(a.x,h.x,p),y:l.B.number(a.y,h.y,p),z:l.B.number(a.z,h.z,p)}}}let ce;class _e extends l.E{constructor(a){super(),ce=ce||new l.r({anchor:new l.D(l.v.light.anchor),position:new Ke,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(ce),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,h={}){if(!this._validate(l.t,a,h))for(const p in a){const g=a[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,h,p){return(!p||p.validate!==!1)&&l.x(this,a.call(l.y,l.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}}class ke{constructor(a,h){this.width=a,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,h){const p=a.join(",")+String(h);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(a,h)),this.dashEntry[p]}getDashRanges(a,h,p){const g=[];let _=a.length%2==1?-a[a.length-1]*p:0,A=a[0]*p,E=!0;g.push({left:_,right:A,isDash:E,zeroLength:a[0]===0});let I=a[0];for(let O=1;O<a.length;O++){E=!E;const $=a[O];_=I*p,I+=$,A=I*p,g.push({left:_,right:A,isDash:E,zeroLength:$===0})}return g}addRoundDash(a,h,p){const g=h/2;for(let _=-p;_<=p;_++){const A=this.width*(this.nextRow+p+_);let E=0,I=a[E];for(let O=0;O<this.width;O++){O/I.right>1&&(I=a[++E]);const $=Math.abs(O-I.left),N=Math.abs(O-I.right),K=Math.min($,N);let ae;const ie=_/p*(g+1);if(I.isDash){const se=g-Math.abs(ie);ae=Math.sqrt(K*K+se*se)}else ae=g-Math.sqrt(K*K+ie*ie);this.data[A+O]=Math.max(0,Math.min(255,ae+128))}}}addRegularDash(a){for(let E=a.length-1;E>=0;--E){const I=a[E],O=a[E+1];I.zeroLength?a.splice(E,1):O&&O.isDash===I.isDash&&(O.left=I.left,a.splice(E,1))}const h=a[0],p=a[a.length-1];h.isDash===p.isDash&&(h.left=p.left-this.width,p.right=h.right+this.width);const g=this.width*this.nextRow;let _=0,A=a[_];for(let E=0;E<this.width;E++){E/A.right>1&&(A=a[++_]);const I=Math.abs(E-A.left),O=Math.abs(E-A.right),$=Math.min(I,O);this.data[g+E]=Math.max(0,Math.min(255,(A.isDash?$:-$)+128))}}addDash(a,h){const p=h?7:0,g=2*p+1;if(this.nextRow+g>this.height)return l.w("LineAtlas out of space"),null;let _=0;for(let E=0;E<a.length;E++)_+=a[E];if(_!==0){const E=this.width/_,I=this.getDashRanges(a,this.width,E);h?this.addRoundDash(I,E,p):this.addRegularDash(I)}const A={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:_};return this.nextRow+=g,this.dirty=!0,A}bind(a){const h=a.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}class Ue{constructor(a,h,p){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let _=0;_<g.length;_++){const A=new l.C(g[_],h,p);A.name=`Worker ${_}`,this.actors.push(A)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,h,p){l.o(this.actors,(g,_)=>{g.send(a,h,_)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(h=>{h.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}}function je(y,a,h){const p=function(g,_){if(g)return h(g);if(_){const A=l.F(l.e(_,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(A.vectorLayers=_.vector_layers,A.vectorLayerIds=A.vectorLayers.map(E=>E.id)),h(null,A)}};return y.url?l.f(a.transformRequest(y.url,D.Source),p):l.h.frame(()=>p(null,y))}class Qe{constructor(a,h){a&&(h?this.setSouthWest(a).setNorthEast(h):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof l.L?new l.L(a.lng,a.lat):l.L.convert(a),this}setSouthWest(a){return this._sw=a instanceof l.L?new l.L(a.lng,a.lat):l.L.convert(a),this}extend(a){const h=this._sw,p=this._ne;let g,_;if(a instanceof l.L)g=a,_=a;else{if(!(a instanceof Qe))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Qe.convert(a)):this.extend(l.L.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(l.L.convert(a)):this;if(g=a._sw,_=a._ne,!g||!_)return this}return h||p?(h.lng=Math.min(g.lng,h.lng),h.lat=Math.min(g.lat,h.lat),p.lng=Math.max(_.lng,p.lng),p.lat=Math.max(_.lat,p.lat)):(this._sw=new l.L(g.lng,g.lat),this._ne=new l.L(_.lng,_.lat)),this}getCenter(){return new l.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.L(this.getWest(),this.getNorth())}getSouthEast(){return new l.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:h,lat:p}=l.L.convert(a);let g=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(a){return a instanceof Qe?a:a&&new Qe(a)}static fromLngLat(a,h=0){const p=360*h/40075017,g=p/Math.cos(Math.PI/180*a.lat);return new Qe(new l.L(a.lng-g,a.lat-p),new l.L(a.lng+g,a.lat+p))}}class pt{constructor(a,h,p){this.bounds=Qe.convert(this.validateBounds(a)),this.minzoom=h||0,this.maxzoom=p||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const h=Math.pow(2,a.z),p=Math.floor(l.G(this.bounds.getWest())*h),g=Math.floor(l.H(this.bounds.getNorth())*h),_=Math.ceil(l.G(this.bounds.getEast())*h),A=Math.ceil(l.H(this.bounds.getSouth())*h);return a.x>=p&&a.x<_&&a.y>=g&&a.y<A}}class Dt extends l.E{constructor(a,h,p,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=je(this._options,this.map._requestManager,(_,A)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new l.j(_)):A&&(l.e(this,A),A.bounds&&(this.tileBounds=new pt(A.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.e({},this._options),this.id=a,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.F(h,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(a,h){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,D.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(A,E){return delete a.request,a.aborted?h(null):A&&A.status!==404?h(A):(E&&E.resourceTiming&&(a.resourceTiming=E.resourceTiming),this.map._refreshExpiredTiles&&E&&a.setExpiryData(E),a.loadVectorData(E,this.map.painter),h(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=h:a.request=a.actor.send("reloadTile",g,_.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",g,_.bind(this)))}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)}unloadTile(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Rt extends l.E{constructor(a,h,p,g){super(),this.id=a,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},h),l.e(this,l.F(h,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=je(this._options,this.map._requestManager,(a,h)=>{this._tileJSONRequest=null,this._loaded=!0,a?this.fire(new l.j(a)):h&&(l.e(this,h),h.bounds&&(this.tileBounds=new pt(h.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}serialize(){return l.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a,h){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.request=V.getImage(this.map._requestManager.transformRequest(p,D.Tile),(g,_,A)=>{if(delete a.request,a.aborted)a.state="unloaded",h(null);else if(g)a.state="errored",h(g);else if(_){this.map._refreshExpiredTiles&&A&&a.setExpiryData(A);const E=this.map.painter.context,I=E.gl;a.texture=this.map.painter.getTileTexture(_.width),a.texture?a.texture.update(_,{useMipmap:!0}):(a.texture=new Pe(E,_,I.RGBA,{useMipmap:!0}),a.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST),E.extTextureFilterAnisotropic&&I.texParameterf(I.TEXTURE_2D,E.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,E.extTextureFilterAnisotropicMax)),a.state="loaded",h(null)}},this.map._refreshExpiredTiles)}abortTile(a,h){a.request&&(a.request.cancel(),delete a.request),h()}unloadTile(a,h){a.texture&&this.map.painter.saveTileTexture(a.texture),h()}hasTransition(){return!1}}class Bt extends Rt{constructor(a,h,p,g){super(a,h,p,g),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox",this.redFactor=h.redFactor,this.greenFactor=h.greenFactor,this.blueFactor=h.blueFactor,this.baseShift=h.baseShift}loadTile(a,h){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,D.Tile);function _(A,E){A&&(a.state="errored",h(A)),E&&(a.dem=E,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded",h(null))}a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.request=V.getImage(g,(A,E,I)=>l._(this,void 0,void 0,function*(){if(delete a.request,a.aborted)a.state="unloaded",h(null);else if(A)a.state="errored",h(A);else if(E){this.map._refreshExpiredTiles&&a.setExpiryData(I);const O=l.a(E)&&l.J()?E:yield function(N){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.K()){const K=N.width+2,ae=N.height+2;try{return new l.R({width:K,height:ae},yield l.M(N,-1,-1,K,ae))}catch{}}return l.h.getImageData(N,1)})}(E),$={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:O,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",$,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(a){const h=a.canonical,p=Math.pow(2,h.z),g=(h.x-1+p)%p,_=h.x===0?a.wrap-1:a.wrap,A=(h.x+1+p)%p,E=h.x+1===p?a.wrap+1:a.wrap,I={};return I[new l.O(a.overscaledZ,_,h.z,g,h.y).key]={backfilled:!1},I[new l.O(a.overscaledZ,E,h.z,A,h.y).key]={backfilled:!1},h.y>0&&(I[new l.O(a.overscaledZ,_,h.z,g,h.y-1).key]={backfilled:!1},I[new l.O(a.overscaledZ,a.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},I[new l.O(a.overscaledZ,E,h.z,A,h.y-1).key]={backfilled:!1}),h.y+1<p&&(I[new l.O(a.overscaledZ,_,h.z,g,h.y+1).key]={backfilled:!1},I[new l.O(a.overscaledZ,a.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},I[new l.O(a.overscaledZ,E,h.z,A,h.y+1).key]={backfilled:!1}),I}unloadTile(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})}}class Jt extends l.E{constructor(a,h,p,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.e({},this._options,{type:this.type,data:this._data}),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=h.data,this._options=l.e({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const _=l.N/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*_,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*_,extent:l.N,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:l.N,radius:(h.clusterRadius||50)*_,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=a.clusterRadius),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},h),this}getClusterChildren(a,h){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},h),this}getClusterLeaves(a,h,p,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:h,offset:p},g),this}_updateWorkerData(a){const h=l.e({},this.workerOptions);a?h.dataDiff=a:typeof this._data=="string"?(h.request=this.map._requestManager.transformRequest(l.h.resolveURL(this._data),D.Source),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,h,(p,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let _=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(_=g.resourceTiming[this.id].slice(0)),p)return void this.fire(new l.j(p));const A={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&l.e(A,{resourceTiming:_}),this.fire(new l.k("data",Object.assign(Object.assign({},A),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},A),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(a,h){const p=a.actor?"reloadTile":"loadTile";a.actor=this.actor;const g={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};a.request=this.actor.send(p,g,(_,A)=>(delete a.request,a.unloadVectorData(),a.aborted?h(null):_?h(_):(a.loadVectorData(A,this.map.painter,p==="reloadTile"),h(null))))}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0}unloadTile(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Ye=l.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class nt extends l.E{constructor(a,h,p,g){super(),this.load=(_,A)=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=V.getImage(this.map._requestManager.transformRequest(this.url,D.Image),(E,I)=>{this._request=null,this._loaded=!0,E?this.fire(new l.j(E)):I&&(this.image=I,_&&(this.coordinates=_),A&&A(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,A=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Pe(_,this.image,A.RGBA),this.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE));let E=!1;for(const I in this.tiles){const O=this.tiles[I];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture,E=!0)}E&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=a,this.dispatcher=p,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=h}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=a.url,this.load(a.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(a){this.coordinates=a;const h=a.map(l.U.fromLngLat);this.tileID=function(g){let _=1/0,A=1/0,E=-1/0,I=-1/0;for(const K of g)_=Math.min(_,K.x),A=Math.min(A,K.y),E=Math.max(E,K.x),I=Math.max(I,K.y);const O=Math.max(E-_,I-A),$=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),N=Math.pow(2,$);return new l.W($,Math.floor((_+E)/2*N),Math.floor((A+I)/2*N))}(h),this.minzoom=this.maxzoom=this.tileID.z;const p=h.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new l.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,l.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,l.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,l.N,l.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(a,h){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},h(null)):(a.state="errored",h(null))}hasTransition(){return!1}}class At extends nt{constructor(a,h,p,g){super(a,h,p,g),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const A of _.urls)this.urls.push(this.map._requestManager.transformRequest(A,D.Source).url);l.X(this.urls,(A,E)=>{this._loaded=!0,A?this.fire(new l.j(A)):E&&(this.video=E,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,A=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE),A.texSubImage2D(A.TEXTURE_2D,0,0,0,A.RGBA,A.UNSIGNED_BYTE,this.video)):(this.texture=new Pe(_,this.video,A.RGBA),this.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE));let E=!1;for(const I in this.tiles){const O=this.tiles[I];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture,E=!0)}E&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=h}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const h=this.video.seekable;a<h.start(0)||a>h.end(0)?this.fire(new l.j(new l.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class ze extends nt{constructor(a,h,p,g){super(a,h,p,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const A=this.map.painter.context,E=A.gl;this.boundsBuffer||(this.boundsBuffer=A.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Pe(A,this.canvas,E.RGBA,{premultiply:!0});let I=!1;for(const O in this.tiles){const $=this.tiles[O];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture,I=!0)}I&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(A=>typeof A!="number"))||this.fire(new l.j(new l.Y(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.Y(`sources.${a}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new l.j(new l.Y(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.Y(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.Y(`sources.${a}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const kt={},$t=y=>{switch(y){case"geojson":return Jt;case"image":return nt;case"raster":return Rt;case"raster-dem":return Bt;case"vector":return Dt;case"video":return At;case"canvas":return ze}return kt[y]};function mt(y,a){const h=l.Z();return l.$(h,h,[1,1,0]),l.a0(h,h,[.5*y.width,.5*y.height,1]),l.a1(h,h,y.calculatePosMatrix(a.toUnwrapped()))}function yt(y,a,h,p,g,_){const A=function(N,K,ae){if(N)for(const ie of N){const se=K[ie];if(se&&se.source===ae&&se.type==="fill-extrusion")return!0}else for(const ie in K){const se=K[ie];if(se.source===ae&&se.type==="fill-extrusion")return!0}return!1}(g&&g.layers,a,y.id),E=_.maxPitchScaleFactor(),I=y.tilesIn(p,E,A);I.sort(Ot);const O=[];for(const N of I)O.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(a,h,y._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,g,_,E,mt(y.transform,N.tileID))});const $=function(N){const K={},ae={};for(const ie of N){const se=ie.queryResults,re=ie.wrappedTileID,xe=ae[re]=ae[re]||{};for(const Ie in se){const de=se[Ie],be=xe[Ie]=xe[Ie]||{},De=K[Ie]=K[Ie]||[];for(const Le of de)be[Le.featureIndex]||(be[Le.featureIndex]=!0,De.push(Le))}}return K}(O);for(const N in $)$[N].forEach(K=>{const ae=K.feature,ie=y.getFeatureState(ae.layer["source-layer"],ae.id);ae.source=ae.layer.source,ae.layer["source-layer"]&&(ae.sourceLayer=ae.layer["source-layer"]),ae.state=ie});return $}function Ot(y,a){const h=y.tileID,p=a.tileID;return h.overscaledZ-p.overscaledZ||h.canonical.y-p.canonical.y||h.wrap-p.wrap||h.canonical.x-p.canonical.x}class Ht{constructor(a,h){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=l.a2(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const h=a+this.timeAdded;h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,h,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(g,_){const A={};if(!_)return A;for(const E of g){const I=E.layerIds.map(O=>_.getLayer(O)).filter(Boolean);if(I.length!==0){E.layers=I,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(O=>I.filter($=>$.id===O)[0]));for(const O of I)A[O.id]=E}}return A}(a.buckets,h.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof l.a4){if(this.hasSymbolBuckets=!0,!p)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof l.a4&&_.hasRTLText){this.hasRTLText=!0,l.a5();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(g).queryRadius(_))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new l.a3}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(a)}const h=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Pe(a,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Pe(a,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,h,p,g,_,A,E,I,O,$){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:A,tileSize:this.tileSize,pixelPosMatrix:$,transform:I,params:E,queryPadding:this.queryPadding*O},a,h,p):{}}querySourceFeatures(a,h){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),_=h&&h.sourceLayer?h.sourceLayer:"",A=g._geojsonTileLayer||g[_];if(!A)return;const E=l.a6(h&&h.filter),{z:I,x:O,y:$}=this.tileID.canonical,N={z:I,x:O,y:$};for(let K=0;K<A.length;K++){const ae=A.feature(K);if(E.needGeometry){const re=l.a7(ae,!0);if(!E.filter(new l.a8(this.tileID.overscaledZ),re,this.tileID.canonical))continue}else if(!E.filter(new l.a8(this.tileID.overscaledZ),ae))continue;const ie=p.getId(ae,_),se=new l.a9(ae,I,O,$,ie);se.tile=N,a.push(se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const h=this.expirationTime;if(a.cacheControl){const p=l.aa(a.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(h)if(this.expirationTime<h)g=!0;else{const _=this.expirationTime-h;_?this.expirationTime=p+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!h.style.hasLayer(g))continue;const _=this.buckets[g],A=_.layers[0].sourceLayer||"_geojsonTileLayer",E=p[A],I=a[A];if(!E||!I||Object.keys(I).length===0)continue;_.update(I,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});const O=h&&h.style&&h.style.getLayer(g);O&&(this.queryPadding=Math.max(this.queryPadding,O.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=l.h.now()+a}setDependencies(a,h){const p={};for(const g of h)p[g]=!0;this.dependencies[a]=p}hasDependency(a,h){for(const p of a){const g=this.dependencies[p];if(g){for(const _ of h)if(g[_])return!0}}return!1}}class mn{constructor(a,h){this.max=a,this.onRemove=h,this.reset()}reset(){for(const a in this.data)for(const h of this.data[a])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(a,h,p){const g=a.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:h,timeout:void 0};if(p!==void 0&&(_.timeout=setTimeout(()=>{this.remove(a,_)},p)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const h=this.data[a].shift();return h.timeout&&clearTimeout(h.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),h.value}getByKey(a){const h=this.data[a];return h?h[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,h){if(!this.has(a))return this;const p=a.wrapped().key,g=h===void 0?0:this.data[p].indexOf(h),_=this.data[p][g];return this.data[p].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(_.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(a){const h=[];for(const p in this.data)for(const g of this.data[p])a(g.value)||h.push(g);for(const p of h)this.remove(p.value.tileID,p)}}class Ne{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,h,p){const g=String(h);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][g]=this.stateChanges[a][g]||{},l.e(this.stateChanges[a][g],p),this.deletedStates[a]===null){this.deletedStates[a]={};for(const _ in this.state[a])_!==g&&(this.deletedStates[a][_]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][g]===null){this.deletedStates[a][g]={};for(const _ in this.state[a][g])p[_]||(this.deletedStates[a][g][_]=null)}else for(const _ in p)this.deletedStates[a]&&this.deletedStates[a][g]&&this.deletedStates[a][g][_]===null&&delete this.deletedStates[a][g][_]}removeFeatureState(a,h,p){if(this.deletedStates[a]===null)return;const g=String(h);if(this.deletedStates[a]=this.deletedStates[a]||{},p&&h!==void 0)this.deletedStates[a][g]!==null&&(this.deletedStates[a][g]=this.deletedStates[a][g]||{},this.deletedStates[a][g][p]=null);else if(h!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][g])for(p in this.deletedStates[a][g]={},this.stateChanges[a][g])this.deletedStates[a][g][p]=null;else this.deletedStates[a][g]=null;else this.deletedStates[a]=null}getState(a,h){const p=String(h),g=l.e({},(this.state[a]||{})[p],(this.stateChanges[a]||{})[p]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const _=this.deletedStates[a][h];if(_===null)return{};for(const A in _)delete g[A]}return g}initializeTileState(a,h){a.setFeatureState(this.state,h)}coalesceChanges(a,h){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const A in this.stateChanges[g])this.state[g][A]||(this.state[g][A]={}),l.e(this.state[g][A],this.stateChanges[g][A]),_[A]=this.state[g][A];p[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const A in this.state[g])_[A]={},this.state[g][A]={};else for(const A in this.deletedStates[g]){if(this.deletedStates[g][A]===null)this.state[g][A]={};else for(const E of Object.keys(this.deletedStates[g][A]))delete this.state[g][A][E];_[A]=this.state[g][A]}p[g]=p[g]||{},l.e(p[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in a)a[g].setFeatureState(p,h)}}class Xr extends l.E{constructor(a,h,p){super(),this.id=a,this.dispatcher=p,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,A,E)=>{const I=new($t(_.type))(g,_,A,E);if(I.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${I.id}`);return I})(a,h,p,this),this._tiles={},this._cache=new mn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ne,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a in this._tiles){const h=this._tiles[a];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,h){return this._source.loadTile(a,h)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a,()=>{})}_abortTile(a){this._source.abortTile&&this._source.abortTile(a,()=>{}),this._source.fire(new l.k("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const p=this._tiles[h];p.upload(a),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(un).map(a=>a.key)}getRenderableIds(a){const h=[];for(const p in this._tiles)this._isIdRenderable(p,a)&&h.push(this._tiles[p]);return a?h.sort((p,g)=>{const _=p.tileID,A=g.tileID,E=new l.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),I=new l.P(A.canonical.x,A.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-A.overscaledZ||I.y-E.y||I.x-E.x}).map(p=>p.tileID.key):h.map(p=>p.tileID).sort(un).map(p=>p.key)}hasRenderableParent(a){const h=this.findLoadedParent(a,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(a,h){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(h||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")}}_reloadTile(a,h){const p=this._tiles[a];p&&(p.state!=="loading"&&(p.state=h),this._loadTile(p,this._tileLoaded.bind(this,p,a,h)))}_tileLoaded(a,h,p,g){if(g)return a.state="errored",void(g.status!==404?this._source.fire(new l.j(g,{tile:a})):this.update(this.transform,this.terrain));a.timeAdded=l.h.now(),p==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(h,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const h=this.getRenderableIds();for(let g=0;g<h.length;g++){const _=h[g];if(a.neighboringTiles&&a.neighboringTiles[_]){const A=this.getTileByID(_);p(a,A),p(A,a)}}function p(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let A=_.tileID.canonical.x-g.tileID.canonical.x;const E=_.tileID.canonical.y-g.tileID.canonical.y,I=Math.pow(2,g.tileID.canonical.z),O=_.tileID.key;A===0&&E===0||Math.abs(E)>1||(Math.abs(A)>1&&(Math.abs(A+I)===1?A+=I:Math.abs(A-I)===1&&(A-=I)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,A,E),g.neighboringTiles&&g.neighboringTiles[O]&&(g.neighboringTiles[O].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,h,p,g){for(const _ in this._tiles){let A=this._tiles[_];if(g[_]||!A.hasData()||A.tileID.overscaledZ<=h||A.tileID.overscaledZ>p)continue;let E=A.tileID;for(;A&&A.tileID.overscaledZ>h+1;){const O=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[O.key],A&&A.hasData()&&(E=O)}let I=E;for(;I.overscaledZ>h;)if(I=I.scaledTo(I.overscaledZ-1),a[I.key]){g[E.key]=E;break}}}findLoadedParent(a,h){if(a.key in this._loadedParentTiles){const p=this._loadedParentTiles[a.key];return p&&p.tileID.overscaledZ>=h?p:null}for(let p=a.overscaledZ-1;p>=h;p--){const g=a.scaledTo(p),_=this._getLoadedTile(g);if(_)return _}}_getLoadedTile(a){const h=this._tiles[a.key];return h&&h.hasData()?h:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const h=Math.ceil(a.width/this._source.tileSize)+1,p=Math.ceil(a.height/this._source.tileSize)+1,g=Math.floor(h*p*(this._maxTileCacheZoomLevels===null?l.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(a){const h=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,h){const p={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+h),p[_.tileID.key]=_}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(a,h){if(this.transform=a,this.terrain=h,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=a.getVisibleUnwrappedCoordinates(this._source.tileID).map($=>new l.O($.canonical.z,$.wrap,$.canonical.z,$.canonical.x,$.canonical.y)):(p=a.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h}),this._source.hasTile&&(p=p.filter($=>this._source.hasTile($)))):p=[];const g=a.coveringZoomLevel(this._source),_=Math.max(g-Xr.maxOverzooming,this._source.minzoom),A=Math.max(g+Xr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const $={};for(const N of p)if(N.canonical.z>this._source.minzoom){const K=N.scaledTo(N.canonical.z-1);$[K.key]=K;const ae=N.scaledTo(Math.max(this._source.minzoom,Math.min(N.canonical.z,5)));$[ae.key]=ae}p=p.concat(Object.values($))}const E=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const I=this._updateRetainedTiles(p,g);if(hr(this._source.type)){const $={},N={},K=Object.keys(I),ae=l.h.now();for(const ie of K){const se=I[ie],re=this._tiles[ie];if(!re||re.fadeEndTime!==0&&re.fadeEndTime<=ae)continue;const xe=this.findLoadedParent(se,_);xe&&(this._addTile(xe.tileID),$[xe.tileID.key]=xe.tileID),N[ie]=se}this._retainLoadedChildren(N,g,A,I);for(const ie in $)I[ie]||(this._coveredTiles[ie]=!0,I[ie]=$[ie]);if(h){const ie={},se={};for(const re of p)this._tiles[re.key].hasData()?ie[re.key]=re:se[re.key]=re;for(const re in se){const xe=se[re].children(this._source.maxzoom);this._tiles[xe[0].key]&&this._tiles[xe[1].key]&&this._tiles[xe[2].key]&&this._tiles[xe[3].key]&&(ie[xe[0].key]=I[xe[0].key]=xe[0],ie[xe[1].key]=I[xe[1].key]=xe[1],ie[xe[2].key]=I[xe[2].key]=xe[2],ie[xe[3].key]=I[xe[3].key]=xe[3],delete se[re])}for(const re in se){const xe=this.findLoadedParent(se[re],this._source.minzoom);if(xe){ie[xe.tileID.key]=I[xe.tileID.key]=xe.tileID;for(const Ie in ie)ie[Ie].isChildOf(xe.tileID)&&delete ie[Ie]}}for(const re in this._tiles)ie[re]||(this._coveredTiles[re]=!0)}}for(const $ in I)this._tiles[$].clearFadeHold();const O=l.ab(this._tiles,I);for(const $ of O){const N=this._tiles[$];N.hasSymbolBuckets&&!N.holdingForFade()?N.setHoldDuration(this.map._fadeDuration):N.hasSymbolBuckets&&!N.symbolFadeFinished()||this._removeTile($)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,h){const p={},g={},_=Math.max(h-Xr.maxOverzooming,this._source.minzoom),A=Math.max(h+Xr.maxUnderzooming,this._source.minzoom),E={};for(const I of a){const O=this._addTile(I);p[I.key]=I,O.hasData()||h<this._source.maxzoom&&(E[I.key]=I)}this._retainLoadedChildren(E,h,A,p);for(const I of a){let O=this._tiles[I.key];if(O.hasData())continue;if(h+1>this._source.maxzoom){const N=I.children(this._source.maxzoom)[0],K=this.getTile(N);if(K&&K.hasData()){p[N.key]=N;continue}}else{const N=I.children(this._source.maxzoom);if(p[N[0].key]&&p[N[1].key]&&p[N[2].key]&&p[N[3].key])continue}let $=O.wasRequested();for(let N=I.overscaledZ-1;N>=_;--N){const K=I.scaledTo(N);if(g[K.key])break;if(g[K.key]=!0,O=this.getTile(K),!O&&$&&(O=this._addTile(K)),O){const ae=O.hasData();if(($||ae)&&(p[K.key]=K),$=O.wasRequested(),ae)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const h=[];let p,g=this._tiles[a].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}h.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(_),p)break;g=_}for(const _ of h)this._loadedParentTiles[_]=p}}_addTile(a){let h=this._tiles[a.key];if(h)return h;h=this._cache.getAndRemove(a),h&&(this._setTileReloadTimer(a.key,h),h.tileID=a,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,h)));const p=h;return h||(h=new Ht(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(h,this._tileLoaded.bind(this,h,a.key,h.state))),h.uses++,this._tiles[a.key]=h,p||this._source.fire(new l.k("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(a,h){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const p=h.getExpiryTimeout();p&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},p))}_removeTile(a){const h=this._tiles[a];h&&(h.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,h,p){const g=[],_=this.transform;if(!_)return g;const A=p?_.getCameraQueryGeometry(a):a,E=a.map(ie=>_.pointCoordinate(ie,this.terrain)),I=A.map(ie=>_.pointCoordinate(ie,this.terrain)),O=this.getIds();let $=1/0,N=1/0,K=-1/0,ae=-1/0;for(const ie of I)$=Math.min($,ie.x),N=Math.min(N,ie.y),K=Math.max(K,ie.x),ae=Math.max(ae,ie.y);for(let ie=0;ie<O.length;ie++){const se=this._tiles[O[ie]];if(se.holdingForFade())continue;const re=se.tileID,xe=Math.pow(2,_.zoom-se.tileID.overscaledZ),Ie=h*se.queryPadding*l.N/se.tileSize/xe,de=[re.getTilePoint(new l.U($,N)),re.getTilePoint(new l.U(K,ae))];if(de[0].x-Ie<l.N&&de[0].y-Ie<l.N&&de[1].x+Ie>=0&&de[1].y+Ie>=0){const be=E.map(Le=>re.getTilePoint(Le)),De=I.map(Le=>re.getTilePoint(Le));g.push({tile:se,tileID:re,queryGeometry:be,cameraQueryGeometry:De,scale:xe})}}return g}getVisibleCoordinates(a){const h=this.getRenderableIds(a).map(p=>this._tiles[p].tileID);for(const p of h)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(hr(this._source.type)){const a=l.h.now();for(const h in this._tiles)if(this._tiles[h].fadeEndTime>=a)return!0}return!1}setFeatureState(a,h,p){this._state.updateState(a=a||"_geojsonTileLayer",h,p)}removeFeatureState(a,h,p){this._state.removeFeatureState(a=a||"_geojsonTileLayer",h,p)}getFeatureState(a,h){return this._state.getState(a=a||"_geojsonTileLayer",h)}setDependencies(a,h,p){const g=this._tiles[a];g&&g.setDependencies(h,p)}reloadTilesForDependencies(a,h){for(const p in this._tiles)this._tiles[p].hasDependency(a,h)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(a,h))}}function un(y,a){const h=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*a.wrap)-+(a.wrap<0);return y.overscaledZ-a.overscaledZ||p-h||a.canonical.y-y.canonical.y||a.canonical.x-y.canonical.x}function hr(y){return y==="raster"||y==="image"||y==="video"}Xr.maxOverzooming=10,Xr.maxUnderzooming=3;const nr="mapboxgl_preloaded_worker_pool";class Si{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<Si.workerCount;)this.workers.push(new Worker(l.c.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[nr]}numActive(){return Object.keys(this.active).length}}const Ss=Math.floor(l.h.hardwareConcurrency/2);let Ra;function Mu(){return Ra||(Ra=new Si),Ra}Si.workerCount=l.ac(globalThis)?Math.max(Math.min(Ss,3),1):1;class Ts{constructor(a,h){this.reset(a,h)}reset(a,h){this.points=a||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=l.ad(a,0,1);let h=1,p=this._distances[h];const g=a*this.paddedLength+this.padding;for(;p<g&&h<this._distances.length;)p=this._distances[++h];const _=h-1,A=this._distances[_],E=p-A,I=E>0?(g-A)/E:0;return this.points[_].mult(1-I).add(this.points[h].mult(I))}}function uo(y,a){let h=!0;return y==="always"||y!=="never"&&a!=="never"||(h=!1),h}class Do{constructor(a,h,p){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(a/p),this.yCellCount=Math.ceil(h/p);for(let A=0;A<this.xCellCount*this.yCellCount;A++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=h,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,h,p,g,_){this._forEachCell(h,p,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(a,h,p,g){this._forEachCell(h-g,p-g,h+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(h),this.circles.push(p),this.circles.push(g)}_insertBoxCell(a,h,p,g,_,A){this.boxCells[_].push(A)}_insertCircleCell(a,h,p,g,_,A){this.circleCells[_].push(A)}_query(a,h,p,g,_,A,E){if(p<0||a>this.width||g<0||h>this.height)return[];const I=[];if(a<=0&&h<=0&&this.width<=p&&this.height<=g){if(_)return[{key:null,x1:a,y1:h,x2:p,y2:g}];for(let O=0;O<this.boxKeys.length;O++)I.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){const $=this.circles[3*O],N=this.circles[3*O+1],K=this.circles[3*O+2];I.push({key:this.circleKeys[O],x1:$-K,y1:N-K,x2:$+K,y2:N+K})}}else this._forEachCell(a,h,p,g,this._queryCell,I,{hitTest:_,overlapMode:A,seenUids:{box:{},circle:{}}},E);return I}query(a,h,p,g){return this._query(a,h,p,g,!1,null)}hitTest(a,h,p,g,_,A){return this._query(a,h,p,g,!0,_,A).length>0}hitTestCircle(a,h,p,g,_){const A=a-p,E=a+p,I=h-p,O=h+p;if(E<0||A>this.width||O<0||I>this.height)return!1;const $=[];return this._forEachCell(A,I,E,O,this._queryCellCircle,$,{hitTest:!0,overlapMode:g,circle:{x:a,y:h,radius:p},seenUids:{box:{},circle:{}}},_),$.length>0}_queryCell(a,h,p,g,_,A,E,I){const{seenUids:O,hitTest:$,overlapMode:N}=E,K=this.boxCells[_];if(K!==null){const ie=this.bboxes;for(const se of K)if(!O.box[se]){O.box[se]=!0;const re=4*se,xe=this.boxKeys[se];if(a<=ie[re+2]&&h<=ie[re+3]&&p>=ie[re+0]&&g>=ie[re+1]&&(!I||I(xe))&&(!$||!uo(N,xe.overlapMode))&&(A.push({key:xe,x1:ie[re],y1:ie[re+1],x2:ie[re+2],y2:ie[re+3]}),$))return!0}}const ae=this.circleCells[_];if(ae!==null){const ie=this.circles;for(const se of ae)if(!O.circle[se]){O.circle[se]=!0;const re=3*se,xe=this.circleKeys[se];if(this._circleAndRectCollide(ie[re],ie[re+1],ie[re+2],a,h,p,g)&&(!I||I(xe))&&(!$||!uo(N,xe.overlapMode))){const Ie=ie[re],de=ie[re+1],be=ie[re+2];if(A.push({key:xe,x1:Ie-be,y1:de-be,x2:Ie+be,y2:de+be}),$)return!0}}}return!1}_queryCellCircle(a,h,p,g,_,A,E,I){const{circle:O,seenUids:$,overlapMode:N}=E,K=this.boxCells[_];if(K!==null){const ie=this.bboxes;for(const se of K)if(!$.box[se]){$.box[se]=!0;const re=4*se,xe=this.boxKeys[se];if(this._circleAndRectCollide(O.x,O.y,O.radius,ie[re+0],ie[re+1],ie[re+2],ie[re+3])&&(!I||I(xe))&&!uo(N,xe.overlapMode))return A.push(!0),!0}}const ae=this.circleCells[_];if(ae!==null){const ie=this.circles;for(const se of ae)if(!$.circle[se]){$.circle[se]=!0;const re=3*se,xe=this.circleKeys[se];if(this._circlesCollide(ie[re],ie[re+1],ie[re+2],O.x,O.y,O.radius)&&(!I||I(xe))&&!uo(N,xe.overlapMode))return A.push(!0),!0}}}_forEachCell(a,h,p,g,_,A,E,I){const O=this._convertToXCellCoord(a),$=this._convertToYCellCoord(h),N=this._convertToXCellCoord(p),K=this._convertToYCellCoord(g);for(let ae=O;ae<=N;ae++)for(let ie=$;ie<=K;ie++)if(_.call(this,a,h,p,g,this.xCellCount*ie+ae,A,E,I))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,h,p,g,_,A){const E=g-a,I=_-h,O=p+A;return O*O>E*E+I*I}_circleAndRectCollide(a,h,p,g,_,A,E){const I=(A-g)/2,O=Math.abs(a-(g+I));if(O>I+p)return!1;const $=(E-_)/2,N=Math.abs(h-(_+$));if(N>$+p)return!1;if(O<=I||N<=$)return!0;const K=O-I,ae=N-$;return K*K+ae*ae<=p*p}}function at(y,a,h,p,g){const _=l.Z();return a?(l.a0(_,_,[1/g,1/g,1]),h||l.ae(_,_,p.angle)):l.a1(_,p.labelPlaneMatrix,y),_}function pa(y,a,h,p,g){if(a){const _=l.af(y);return l.a0(_,_,[g,g,1]),h||l.ae(_,_,-p.angle),_}return p.glCoordMatrix}function Fr(y,a,h){let p;h?(p=[y.x,y.y,h(y.x,y.y),1],l.ag(p,p,a)):(p=[y.x,y.y,0,1],ue(p,p,a));const g=p[3];return{point:new l.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g}}function Lo(y,a){return .5+y/a*.5}function Na(y,a){const h=y[0]/y[3],p=y[1]/y[3];return h>=-a[0]&&h<=a[0]&&p>=-a[1]&&p<=a[1]}function lt(y,a,h,p,g,_,A,E,I,O){const $=p?y.textSizeData:y.iconSizeData,N=l.ah($,h.transform.zoom),K=[256/h.width*2+1,256/h.height*2+1],ae=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ae.clear();const ie=y.lineVertexArray,se=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,re=h.transform.width/h.transform.height;let xe=!1;for(let Ie=0;Ie<se.length;Ie++){const de=se.get(Ie);if(de.hidden||de.writingMode===l.ai.vertical&&!xe){te(de.numGlyphs,ae);continue}let be;if(xe=!1,O?(be=[de.anchorX,de.anchorY,O(de.anchorX,de.anchorY),1],l.ag(be,be,a)):(be=[de.anchorX,de.anchorY,0,1],ue(be,be,a)),!Na(be,K)){te(de.numGlyphs,ae);continue}const De=Lo(h.transform.cameraToCenterDistance,be[3]),Le=l.aj($,N,de),We=A?Le/De:Le*De,et=new l.P(de.anchorX,de.anchorY),Je=Fr(et,g,O).point,rt={projections:{},offsets:{}},bt=Xn(de,We,!1,E,a,g,_,y.glyphOffsetArray,ie,ae,Je,et,rt,re,I,O);xe=bt.useVertical,(bt.notEnoughRoom||xe||bt.needsFlipping&&Xn(de,We,!0,E,a,g,_,y.glyphOffsetArray,ie,ae,Je,et,rt,re,I,O).notEnoughRoom)&&te(de.numGlyphs,ae)}p?y.text.dynamicLayoutVertexBuffer.updateData(ae):y.icon.dynamicLayoutVertexBuffer.updateData(ae)}function Wt(y,a,h,p,g,_,A,E,I,O,$,N,K){const ae=E.glyphStartIndex+E.numGlyphs,ie=E.lineStartIndex,se=E.lineStartIndex+E.lineLength,re=a.getoffsetX(E.glyphStartIndex),xe=a.getoffsetX(ae-1),Ie=G(y*re,h,p,g,_,A,E.segment,ie,se,I,O,$,N,K);if(!Ie)return null;const de=G(y*xe,h,p,g,_,A,E.segment,ie,se,I,O,$,N,K);return de?{first:Ie,last:de}:null}function Ft(y,a,h,p){return y===l.ai.horizontal&&Math.abs(h.y-a.y)>Math.abs(h.x-a.x)*p?{useVertical:!0}:(y===l.ai.vertical?a.y<h.y:a.x>h.x)?{needsFlipping:!0}:null}function Xn(y,a,h,p,g,_,A,E,I,O,$,N,K,ae,ie,se){const re=a/24,xe=y.lineOffsetX*re,Ie=y.lineOffsetY*re;let de;if(y.numGlyphs>1){const be=y.glyphStartIndex+y.numGlyphs,De=y.lineStartIndex,Le=y.lineStartIndex+y.lineLength,We=Wt(re,E,xe,Ie,h,$,N,y,I,_,K,ie,se);if(!We)return{notEnoughRoom:!0};const et=Fr(We.first.point,A,se).point,Je=Fr(We.last.point,A,se).point;if(p&&!h){const rt=Ft(y.writingMode,et,Je,ae);if(rt)return rt}de=[We.first];for(let rt=y.glyphStartIndex+1;rt<be-1;rt++)de.push(G(re*E.getoffsetX(rt),xe,Ie,h,$,N,y.segment,De,Le,I,_,K,ie,se));de.push(We.last)}else{if(p&&!h){const De=Fr(N,g,se).point,Le=y.lineStartIndex+y.segment+1,We=new l.P(I.getx(Le),I.gety(Le)),et=Fr(We,g,se),Je=et.signedDistanceFromCamera>0?et.point:ma(N,We,De,1,g,se),rt=Ft(y.writingMode,De,Je,ae);if(rt)return rt}const be=G(re*E.getoffsetX(y.glyphStartIndex),xe,Ie,h,$,N,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,I,_,K,ie,se);if(!be)return{notEnoughRoom:!0};de=[be]}for(const be of de)l.ak(O,be.point,be.angle);return{}}function ma(y,a,h,p,g,_){const A=Fr(y.add(y.sub(a)._unit()),g,_).point,E=h.sub(A);return h.add(E._mult(p/E.mag()))}function qt(y,a){const{projectionCache:h,lineVertexArray:p,labelPlaneMatrix:g,tileAnchorPoint:_,distanceFromAnchor:A,getElevation:E,previousVertex:I,direction:O,absOffsetX:$}=a;if(h.projections[y])return h.projections[y];const N=new l.P(p.getx(y),p.gety(y)),K=Fr(N,g,E);if(K.signedDistanceFromCamera>0)return h.projections[y]=K.point,K.point;const ae=y-O;return ma(A===0?_:new l.P(p.getx(ae),p.gety(ae)),N,I,$-A+1,g,E)}function Ba(y,a,h){return y._unit()._perp()._mult(a*h)}function oe(y,a,h,p,g,_,A,E){const{projectionCache:I,direction:O}=E;if(I.offsets[y])return I.offsets[y];const $=h.add(a);if(y+O<p||y+O>=g)return I.offsets[y]=$,$;const N=qt(y+O,E),K=Ba(N.sub(h),A,O),ae=h.add(K),ie=N.add(K);return I.offsets[y]=l.al(_,$,ae,ie)||$,I.offsets[y]}function G(y,a,h,p,g,_,A,E,I,O,$,N,K,ae){const ie=p?y-a:y+a;let se=ie>0?1:-1,re=0;p&&(se*=-1,re=Math.PI),se<0&&(re+=Math.PI);let xe,Ie,de=se>0?E+A:E+A+1,be=g,De=g,Le=0,We=0;const et=Math.abs(ie),Je=[];let rt;for(;Le+We<=et;){if(de+=se,de<E||de>=I)return null;Le+=We,De=be,Ie=xe;const ut={projectionCache:N,lineVertexArray:O,labelPlaneMatrix:$,tileAnchorPoint:_,distanceFromAnchor:Le,getElevation:ae,previousVertex:De,direction:se,absOffsetX:et};if(be=qt(de,ut),h===0)Je.push(De),rt=be.sub(De);else{let jt;const St=be.sub(De);jt=St.mag()===0?Ba(qt(de+se,ut).sub(be),h,se):Ba(St,h,se),Ie||(Ie=De.add(jt)),xe=oe(de,jt,be,E,I,Ie,h,ut),Je.push(Ie),rt=xe.sub(Ie)}We=rt.mag()}const bt=rt._mult((et-Le)/We)._add(Ie||De),Xt=re+Math.atan2(be.y-De.y,be.x-De.x);return Je.push(bt),{point:bt,angle:K?Xt:0,path:Je}}const H=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function te(y,a){for(let h=0;h<y;h++){const p=a.length;a.resize(p+4),a.float32.set(H,3*p)}}function ue(y,a,h){const p=a[0],g=a[1];return y[0]=h[0]*p+h[4]*g+h[12],y[1]=h[1]*p+h[5]*g+h[13],y[3]=h[3]*p+h[7]*g+h[15],y}const fe=100;class Ae{constructor(a,h=new Do(a.width+200,a.height+200,25),p=new Do(a.width+200,a.height+200,25)){this.transform=a,this.grid=h,this.ignoredGrid=p,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+fe,this.screenBottomBoundary=a.height+fe,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,h,p,g,_,A){const E=this.projectAndGetPerspectiveRatio(g,a.anchorPointX,a.anchorPointY,A),I=p*E.perspectiveRatio,O=a.x1*I+E.point.x,$=a.y1*I+E.point.y,N=a.x2*I+E.point.x,K=a.y2*I+E.point.y;return!this.isInsideGrid(O,$,N,K)||h!=="always"&&this.grid.hitTest(O,$,N,K,h,_)||E.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[O,$,N,K],offscreen:this.isOffscreen(O,$,N,K)}}placeCollisionCircles(a,h,p,g,_,A,E,I,O,$,N,K,ae,ie){const se=[],re=new l.P(h.anchorX,h.anchorY),xe=Fr(re,A,ie),Ie=Lo(this.transform.cameraToCenterDistance,xe.signedDistanceFromCamera),de=($?_/Ie:_*Ie)/l.ap,be=Fr(re,E,ie).point,De=Wt(de,g,h.lineOffsetX*de,h.lineOffsetY*de,!1,be,re,h,p,E,{projections:{},offsets:{}},!1,ie);let Le=!1,We=!1,et=!0;if(De){const Je=.5*K*Ie+ae,rt=new l.P(-100,-100),bt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Xt=new Ts,ut=De.first,jt=De.last;let St=[];for(let Gt=ut.path.length-1;Gt>=1;Gt--)St.push(ut.path[Gt]);for(let Gt=1;Gt<jt.path.length;Gt++)St.push(jt.path[Gt]);const mr=2.5*Je;if(I){const Gt=St.map(Yt=>Fr(Yt,I,ie));St=Gt.some(Yt=>Yt.signedDistanceFromCamera<=0)?[]:Gt.map(Yt=>Yt.point)}let Kt=[];if(St.length>0){const Gt=St[0].clone(),Yt=St[0].clone();for(let Yr=1;Yr<St.length;Yr++)Gt.x=Math.min(Gt.x,St[Yr].x),Gt.y=Math.min(Gt.y,St[Yr].y),Yt.x=Math.max(Yt.x,St[Yr].x),Yt.y=Math.max(Yt.y,St[Yr].y);Kt=Gt.x>=rt.x&&Yt.x<=bt.x&&Gt.y>=rt.y&&Yt.y<=bt.y?[St]:Yt.x<rt.x||Gt.x>bt.x||Yt.y<rt.y||Gt.y>bt.y?[]:l.am([St],rt.x,rt.y,bt.x,bt.y)}for(const Gt of Kt){Xt.reset(Gt,.25*Je);let Yt=0;Yt=Xt.length<=.5*Je?1:Math.ceil(Xt.paddedLength/mr)+1;for(let Yr=0;Yr<Yt;Yr++){const Tr=Yr/Math.max(Yt-1,1),In=Xt.lerp(Tr),gn=In.x+fe,nn=In.y+fe;se.push(gn,nn,Je,0);const ki=gn-Je,Cr=nn-Je,ya=gn+Je,va=nn+Je;if(et=et&&this.isOffscreen(ki,Cr,ya,va),We=We||this.isInsideGrid(ki,Cr,ya,va),a!=="always"&&this.grid.hitTestCircle(gn,nn,Je,a,N)&&(Le=!0,!O))return{circles:[],offscreen:!1,collisionDetected:Le}}}}return{circles:!O&&Le||!We||Ie<this.perspectiveRatioCutoff?[]:se,offscreen:et,collisionDetected:Le}}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let p=1/0,g=1/0,_=-1/0,A=-1/0;for(const $ of a){const N=new l.P($.x+fe,$.y+fe);p=Math.min(p,N.x),g=Math.min(g,N.y),_=Math.max(_,N.x),A=Math.max(A,N.y),h.push(N)}const E=this.grid.query(p,g,_,A).concat(this.ignoredGrid.query(p,g,_,A)),I={},O={};for(const $ of E){const N=$.key;if(I[N.bucketInstanceId]===void 0&&(I[N.bucketInstanceId]={}),I[N.bucketInstanceId][N.featureIndex])continue;const K=[new l.P($.x1,$.y1),new l.P($.x2,$.y1),new l.P($.x2,$.y2),new l.P($.x1,$.y2)];l.an(h,K)&&(I[N.bucketInstanceId][N.featureIndex]=!0,O[N.bucketInstanceId]===void 0&&(O[N.bucketInstanceId]=[]),O[N.bucketInstanceId].push(N.featureIndex))}return O}insertCollisionBox(a,h,p,g,_,A){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:A,overlapMode:h},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,h,p,g,_,A){const E=p?this.ignoredGrid:this.grid,I={bucketInstanceId:g,featureIndex:_,collisionGroupID:A,overlapMode:h};for(let O=0;O<a.length;O+=4)E.insertCircle(I,a[O],a[O+1],a[O+2])}projectAndGetPerspectiveRatio(a,h,p,g){let _;return g?(_=[h,p,g(h,p),1],l.ag(_,_,a)):(_=[h,p,0,1],ue(_,_,a)),{point:new l.P((_[0]/_[3]+1)/2*this.transform.width+fe,(-_[1]/_[3]+1)/2*this.transform.height+fe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(a,h,p,g){return p<fe||a>=this.screenRightBoundary||g<fe||h>this.screenBottomBoundary}isInsideGrid(a,h,p,g){return p>=0&&a<this.gridRightBoundary&&g>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const a=l.ao([]);return l.$(a,a,[-100,-100,0]),a}}function ye(y,a,h){return a*(l.N/(y.tileSize*Math.pow(2,h-y.tileID.overscaledZ)))}class me{constructor(a,h,p,g){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?h:-h))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class we{constructor(a,h,p,g,_){this.text=new me(a?a.text:null,h,p,_),this.icon=new me(a?a.icon:null,h,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ve{constructor(a,h,p){this.text=a,this.icon=h,this.skipFade=p}}class Ge{constructor(){this.invProjMatrix=l.Z(),this.viewportMatrix=l.Z(),this.circles=[]}}class Xe{constructor(a,h,p,g,_){this.bucketInstanceId=a,this.featureIndex=h,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=_}}class It{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const h=++this.maxGroupID;this.collisionGroups[a]={ID:h,predicate:p=>p.collisionGroupID===h}}return this.collisionGroups[a]}}function Nt(y,a,h,p,g){const{horizontalAlign:_,verticalAlign:A}=l.au(y);return new l.P(-(_-.5)*a+p[0]*g,-(A-.5)*h+p[1]*g)}function xt(y,a,h,p,g,_){const{x1:A,x2:E,y1:I,y2:O,anchorPointX:$,anchorPointY:N}=y,K=new l.P(a,h);return p&&K._rotate(g?_:-_),{x1:A+K.x,y1:I+K.y,x2:E+K.x,y2:O+K.y,anchorPointX:$,anchorPointY:N}}class zt{constructor(a,h,p,g,_){this.transform=a.clone(),this.terrain=h,this.collisionIndex=new Ae(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new It(g),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,h,p,g){const _=p.getBucket(h),A=p.latestFeatureIndex;if(!_||!A||h.id!==_.layerIds[0])return;const E=p.collisionBoxArray,I=_.layers[0].layout,O=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),$=p.tileSize/l.N,N=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),K=I.get("text-pitch-alignment")==="map",ae=I.get("text-rotation-alignment")==="map",ie=ye(p,1,this.transform.zoom),se=at(N,K,ae,this.transform,ie);let re=null;if(K){const Ie=pa(N,K,ae,this.transform,ie);re=l.a1([],this.transform.labelPlaneMatrix,Ie)}this.retainedQueryData[_.bucketInstanceId]=new Xe(_.bucketInstanceId,A,_.sourceLayerIndex,_.index,p.tileID);const xe={bucket:_,layout:I,posMatrix:N,textLabelPlaneMatrix:se,labelToScreenMatrix:re,scale:O,textPixelRatio:$,holdingForFade:p.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:l.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const Ie of _.sortKeyRanges){const{sortKey:de,symbolInstanceStart:be,symbolInstanceEnd:De}=Ie;a.push({sortKey:de,symbolInstanceStart:be,symbolInstanceEnd:De,parameters:xe})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:xe})}attemptAnchorPlacement(a,h,p,g,_,A,E,I,O,$,N,K,ae,ie,se,re){const xe=l.aq[a.textAnchor],Ie=[a.textOffset0,a.textOffset1],de=Nt(xe,p,g,Ie,_),be=this.collisionIndex.placeCollisionBox(xt(h,de.x,de.y,A,E,this.transform.angle),N,I,O,$.predicate,re);if((!se||this.collisionIndex.placeCollisionBox(xt(se,de.x,de.y,A,E,this.transform.angle),N,I,O,$.predicate,re).box.length!==0)&&be.box.length>0){let De;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(De=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:Ie,width:p,height:g,anchor:xe,textBoxScale:_,prevAnchor:De},this.markUsedJustification(ae,xe,K,ie),ae.allowVerticalPlacement&&(this.markUsedOrientation(ae,ie,K),this.placedOrientations[K.crossTileID]=ie),{shift:de,placedGlyphBoxes:be}}}placeLayerBucketPart(a,h,p){const{bucket:g,layout:_,posMatrix:A,textLabelPlaneMatrix:E,labelToScreenMatrix:I,textPixelRatio:O,holdingForFade:$,collisionBoxArray:N,partiallyEvaluatedTextSize:K,collisionGroup:ae}=a.parameters,ie=_.get("text-optional"),se=_.get("icon-optional"),re=l.ar(_,"text-overlap","text-allow-overlap"),xe=re==="always",Ie=l.ar(_,"icon-overlap","icon-allow-overlap"),de=Ie==="always",be=_.get("text-rotation-alignment")==="map",De=_.get("text-pitch-alignment")==="map",Le=_.get("icon-text-fit")!=="none",We=_.get("symbol-z-order")==="viewport-y",et=xe&&(de||!g.hasIconData()||se),Je=de&&(xe||!g.hasTextData()||ie);!g.collisionArrays&&N&&g.deserializeCollisionBoxes(N);const rt=this.retainedQueryData[g.bucketInstanceId].tileID,bt=this.terrain?(ut,jt)=>this.terrain.getElevation(rt,ut,jt):null,Xt=(ut,jt)=>{var St,mr;if(h[ut.crossTileID])return;if($)return void(this.placements[ut.crossTileID]=new Ve(!1,!1,!1));let Kt=!1,Gt=!1,Yt=!0,Yr=null,Tr={box:null,offscreen:null},In={box:null},gn=null,nn=null,ki=null,Cr=0,ya=0,va=0;jt.textFeatureIndex?Cr=jt.textFeatureIndex:ut.useRuntimeCollisionCircles&&(Cr=ut.featureIndex),jt.verticalTextFeatureIndex&&(ya=jt.verticalTextFeatureIndex);const vo=jt.textBox;if(vo){const Fn=Jr=>{let yn=l.ai.horizontal;if(g.allowVerticalPlacement&&!Jr&&this.prevPlacement){const ci=this.prevPlacement.placedOrientations[ut.crossTileID];ci&&(this.placedOrientations[ut.crossTileID]=ci,yn=ci,this.markUsedOrientation(g,yn,ut))}return yn},Mn=(Jr,yn)=>{if(g.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&jt.verticalTextBox){for(const ci of g.writingModes)if(ci===l.ai.vertical?(Tr=yn(),In=Tr):Tr=Jr(),Tr&&Tr.box&&Tr.box.length)break}else Tr=Jr()},Jn=ut.textAnchorOffsetStartIndex,Go=ut.textAnchorOffsetEndIndex;if(Go===Jn){const Jr=(yn,ci)=>{const Qr=this.collisionIndex.placeCollisionBox(yn,re,O,A,ae.predicate,bt);return Qr&&Qr.box&&Qr.box.length&&(this.markUsedOrientation(g,ci,ut),this.placedOrientations[ut.crossTileID]=ci),Qr};Mn(()=>Jr(vo,l.ai.horizontal),()=>{const yn=jt.verticalTextBox;return g.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&yn?Jr(yn,l.ai.vertical):{box:null,offscreen:null}}),Fn(Tr&&Tr.box&&Tr.box.length)}else{let Jr=l.aq[(mr=(St=this.prevPlacement)===null||St===void 0?void 0:St.variableOffsets[ut.crossTileID])===null||mr===void 0?void 0:mr.anchor];const yn=(Qr,Wo,oc)=>{const Cm=Qr.x2-Qr.x1,km=Qr.y2-Qr.y1,I_=ut.textBoxScale,Ef=Le&&Ie==="never"?Wo:null;let _a={box:[],offscreen:!1},Zo=re==="never"?1:2,xa="never";Jr&&Zo++;for(let Wi=0;Wi<Zo;Wi++){for(let ba=Jn;ba<Go;ba++){const Cf=g.textAnchorOffsets.get(ba);if(Jr&&Cf.textAnchor!==Jr)continue;const Ga=this.attemptAnchorPlacement(Cf,Qr,Cm,km,I_,be,De,O,A,ae,xa,ut,g,oc,Ef,bt);if(Ga&&(_a=Ga.placedGlyphBoxes,_a&&_a.box&&_a.box.length))return Kt=!0,Yr=Ga.shift,_a}Jr?Jr=null:xa=re}return _a};Mn(()=>yn(vo,jt.iconBox,l.ai.horizontal),()=>{const Qr=jt.verticalTextBox;return g.allowVerticalPlacement&&!(Tr&&Tr.box&&Tr.box.length)&&ut.numVerticalGlyphVertices>0&&Qr?yn(Qr,jt.verticalIconBox,l.ai.vertical):{box:null,offscreen:null}}),Tr&&(Kt=Tr.box,Yt=Tr.offscreen);const ci=Fn(Tr&&Tr.box);if(!Kt&&this.prevPlacement){const Qr=this.prevPlacement.variableOffsets[ut.crossTileID];Qr&&(this.variableOffsets[ut.crossTileID]=Qr,this.markUsedJustification(g,Qr.anchor,ut,ci))}}}if(gn=Tr,Kt=gn&&gn.box&&gn.box.length>0,Yt=gn&&gn.offscreen,ut.useRuntimeCollisionCircles){const Fn=g.text.placedSymbolArray.get(ut.centerJustifiedTextSymbolIndex),Mn=l.aj(g.textSizeData,K,Fn),Jn=_.get("text-padding");nn=this.collisionIndex.placeCollisionCircles(re,Fn,g.lineVertexArray,g.glyphOffsetArray,Mn,A,E,I,p,De,ae.predicate,ut.collisionCircleDiameter,Jn,bt),nn.circles.length&&nn.collisionDetected&&!p&&l.w("Collisions detected, but collision boxes are not shown"),Kt=xe||nn.circles.length>0&&!nn.collisionDetected,Yt=Yt&&nn.offscreen}if(jt.iconFeatureIndex&&(va=jt.iconFeatureIndex),jt.iconBox){const Fn=Mn=>{const Jn=Le&&Yr?xt(Mn,Yr.x,Yr.y,be,De,this.transform.angle):Mn;return this.collisionIndex.placeCollisionBox(Jn,Ie,O,A,ae.predicate,bt)};In&&In.box&&In.box.length&&jt.verticalIconBox?(ki=Fn(jt.verticalIconBox),Gt=ki.box.length>0):(ki=Fn(jt.iconBox),Gt=ki.box.length>0),Yt=Yt&&ki.offscreen}const qo=ie||ut.numHorizontalGlyphVertices===0&&ut.numVerticalGlyphVertices===0,Rs=se||ut.numIconVertices===0;if(qo||Rs?Rs?qo||(Gt=Gt&&Kt):Kt=Gt&&Kt:Gt=Kt=Gt&&Kt,Kt&&gn&&gn.box&&this.collisionIndex.insertCollisionBox(gn.box,re,_.get("text-ignore-placement"),g.bucketInstanceId,In&&In.box&&ya?ya:Cr,ae.ID),Gt&&ki&&this.collisionIndex.insertCollisionBox(ki.box,Ie,_.get("icon-ignore-placement"),g.bucketInstanceId,va,ae.ID),nn&&(Kt&&this.collisionIndex.insertCollisionCircles(nn.circles,re,_.get("text-ignore-placement"),g.bucketInstanceId,Cr,ae.ID),p)){const Fn=g.bucketInstanceId;let Mn=this.collisionCircleArrays[Fn];Mn===void 0&&(Mn=this.collisionCircleArrays[Fn]=new Ge);for(let Jn=0;Jn<nn.circles.length;Jn+=4)Mn.circles.push(nn.circles[Jn+0]),Mn.circles.push(nn.circles[Jn+1]),Mn.circles.push(nn.circles[Jn+2]),Mn.circles.push(nn.collisionDetected?1:0)}if(ut.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ut.crossTileID]=new Ve(Kt||et,Gt||Je,Yt||g.justReloaded),h[ut.crossTileID]=!0};if(We){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ut=g.getSortedSymbolIndexes(this.transform.angle);for(let jt=ut.length-1;jt>=0;--jt){const St=ut[jt];Xt(g.symbolInstances.get(St),g.collisionArrays[St])}}else for(let ut=a.symbolInstanceStart;ut<a.symbolInstanceEnd;ut++)Xt(g.symbolInstances.get(ut),g.collisionArrays[ut]);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const ut=this.collisionCircleArrays[g.bucketInstanceId];l.as(ut.invProjMatrix,A),ut.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(a,h,p,g){let _;_=g===l.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[l.at(h)];const A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const E of A)E>=0&&(a.text.placedSymbolArray.get(E).crossTileID=_>=0&&E!==_?0:p.crossTileID)}markUsedOrientation(a,h,p){const g=h===l.ai.horizontal||h===l.ai.horizontalOnly?h:0,_=h===l.ai.vertical?h:0,A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const E of A)a.text.placedSymbolArray.get(E).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let p=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const g=h?h.symbolFadeChange(a):1,_=h?h.opacities:{},A=h?h.variableOffsets:{},E=h?h.placedOrientations:{};for(const I in this.placements){const O=this.placements[I],$=_[I];$?(this.opacities[I]=new we($,g,O.text,O.icon),p=p||O.text!==$.text.placed||O.icon!==$.icon.placed):(this.opacities[I]=new we(null,g,O.text,O.icon,O.skipFade),p=p||O.text||O.icon)}for(const I in _){const O=_[I];if(!this.opacities[I]){const $=new we(O,g,!1,!1);$.isHidden()||(this.opacities[I]=$,p=p||O.text.placed||O.icon.placed)}}for(const I in A)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=A[I]);for(const I in E)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=E[I]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:a)}updateLayerOpacities(a,h){const p={};for(const g of h){const _=g.getBucket(a);_&&g.latestFeatureIndex&&a.id===_.layerIds[0]&&this.updateBucketOpacities(_,p,g.collisionBoxArray)}}updateBucketOpacities(a,h,p){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const g=a.layers[0],_=g.layout,A=new we(null,0,!1,!1,!0),E=_.get("text-allow-overlap"),I=_.get("icon-allow-overlap"),O=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),$=_.get("text-rotation-alignment")==="map",N=_.get("text-pitch-alignment")==="map",K=_.get("icon-text-fit")!=="none",ae=new we(null,0,E&&(I||!a.hasIconData()||_.get("icon-optional")),I&&(E||!a.hasTextData()||_.get("text-optional")),!0);!a.collisionArrays&&p&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(p);const ie=(se,re,xe)=>{for(let Ie=0;Ie<re/4;Ie++)se.opacityVertexArray.emplaceBack(xe);se.hasVisibleVertices=se.hasVisibleVertices||xe!==Bi};for(let se=0;se<a.symbolInstances.length;se++){const re=a.symbolInstances.get(se),{numHorizontalGlyphVertices:xe,numVerticalGlyphVertices:Ie,crossTileID:de}=re;let be=this.opacities[de];h[de]?be=A:be||(be=ae,this.opacities[de]=be),h[de]=!0;const De=re.numIconVertices>0,Le=this.placedOrientations[re.crossTileID],We=Le===l.ai.vertical,et=Le===l.ai.horizontal||Le===l.ai.horizontalOnly;if(xe>0||Ie>0){const Je=Cn(be.text);ie(a.text,xe,We?Bi:Je),ie(a.text,Ie,et?Bi:Je);const rt=be.text.isHidden();[re.rightJustifiedTextSymbolIndex,re.centerJustifiedTextSymbolIndex,re.leftJustifiedTextSymbolIndex].forEach(ut=>{ut>=0&&(a.text.placedSymbolArray.get(ut).hidden=rt||We?1:0)}),re.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(re.verticalPlacedTextSymbolIndex).hidden=rt||et?1:0);const bt=this.variableOffsets[re.crossTileID];bt&&this.markUsedJustification(a,bt.anchor,re,Le);const Xt=this.placedOrientations[re.crossTileID];Xt&&(this.markUsedJustification(a,"left",re,Xt),this.markUsedOrientation(a,Xt,re))}if(De){const Je=Cn(be.icon),rt=!(K&&re.verticalPlacedIconSymbolIndex&&We);re.placedIconSymbolIndex>=0&&(ie(a.icon,re.numIconVertices,rt?Je:Bi),a.icon.placedSymbolArray.get(re.placedIconSymbolIndex).hidden=be.icon.isHidden()),re.verticalPlacedIconSymbolIndex>=0&&(ie(a.icon,re.numVerticalIconVertices,rt?Bi:Je),a.icon.placedSymbolArray.get(re.verticalPlacedIconSymbolIndex).hidden=be.icon.isHidden())}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const Je=a.collisionArrays[se];if(Je){let rt=new l.P(0,0);if(Je.textBox||Je.verticalTextBox){let Xt=!0;if(O){const ut=this.variableOffsets[de];ut?(rt=Nt(ut.anchor,ut.width,ut.height,ut.textOffset,ut.textBoxScale),$&&rt._rotate(N?this.transform.angle:-this.transform.angle)):Xt=!1}Je.textBox&&Ut(a.textCollisionBox.collisionVertexArray,be.text.placed,!Xt||We,rt.x,rt.y),Je.verticalTextBox&&Ut(a.textCollisionBox.collisionVertexArray,be.text.placed,!Xt||et,rt.x,rt.y)}const bt=!!(!et&&Je.verticalIconBox);Je.iconBox&&Ut(a.iconCollisionBox.collisionVertexArray,be.icon.placed,bt,K?rt.x:0,K?rt.y:0),Je.verticalIconBox&&Ut(a.iconCollisionBox.collisionVertexArray,be.icon.placed,!bt,K?rt.x:0,K?rt.y:0)}}}if(a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);if(a.bucketInstanceId in this.collisionCircleArrays){const se=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=se.invProjMatrix,a.placementViewportMatrix=se.viewportMatrix,a.collisionCircleArray=se.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,h){const p=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*p>a}setStale(){this.stale=!0}}function Ut(y,a,h,p,g){y.emplaceBack(a?1:0,h?1:0,p||0,g||0),y.emplaceBack(a?1:0,h?1:0,p||0,g||0),y.emplaceBack(a?1:0,h?1:0,p||0,g||0),y.emplaceBack(a?1:0,h?1:0,p||0,g||0)}const fr=Math.pow(2,25),vr=Math.pow(2,24),ar=Math.pow(2,17),ir=Math.pow(2,16),Nn=Math.pow(2,9),Sr=Math.pow(2,8),cn=Math.pow(2,1);function Cn(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const a=y.placed?1:0,h=Math.floor(127*y.opacity);return h*fr+a*vr+h*ar+a*ir+h*Nn+a*Sr+h*cn+a}const Bi=0;class qp{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,h,p,g,_){const A=this._bucketParts;for(;this._currentTileIndex<a.length;)if(h.getBucketParts(A,g,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((E,I)=>E.sortKey-I.sortKey));this._currentPartIndex<A.length;)if(h.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,_())return!0;return!1}}class Ps{constructor(a,h,p,g,_,A,E,I){this.placement=new zt(a,h,A,E,I),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(a,h,p){const g=l.h.now(),_=()=>!this._forceFullPlacement&&l.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const A=h[a[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=E)&&(!A.maxzoom||A.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new qp(A)),this._inProgressLayer.continuePlacement(p[A.source],this.placement,this._showCollisionBoxes,A,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const As=512/l.N/2;class d_{constructor(a,h,p){this.tileID=a,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let _=0;_<h.length;_++){const A=h.get(_),E=A.key,I=g.get(E);I?I.push(A):g.set(E,[A])}for(const[_,A]of g){const E={positions:A.map(I=>({x:Math.floor(I.anchorX*As),y:Math.floor(I.anchorY*As)})),crossTileIDs:A.map(I=>I.crossTileID)};if(E.positions.length>128){const I=new l.av(E.positions.length,16,Uint16Array);for(const{x:O,y:$}of E.positions)I.add(O,$);I.finish(),delete E.positions,E.index=I}this._symbolsByKey[_]=E}}getScaledCoordinates(a,h){const{x:p,y:g,z:_}=this.tileID.canonical,{x:A,y:E,z:I}=h.canonical,O=As/Math.pow(2,I-_),$=(E*l.N+a.anchorY)*O,N=g*l.N*As;return{x:Math.floor((A*l.N+a.anchorX)*O-p*l.N*As),y:Math.floor($-N)}}findMatches(a,h,p){const g=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let _=0;_<a.length;_++){const A=a.get(_);if(A.crossTileID)continue;const E=this._symbolsByKey[A.key];if(!E)continue;const I=this.getScaledCoordinates(A,h);if(E.index){const O=E.index.range(I.x-g,I.y-g,I.x+g,I.y+g).sort();for(const $ of O){const N=E.crossTileIDs[$];if(!p[N]){p[N]=!0,A.crossTileID=N;break}}}else if(E.positions)for(let O=0;O<E.positions.length;O++){const $=E.positions[O],N=E.crossTileIDs[O];if(Math.abs($.x-I.x)<=g&&Math.abs($.y-I.y)<=g&&!p[N]){p[N]=!0,A.crossTileID=N;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class pr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Nh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const h=Math.round((a-this.lng)/360);if(h!==0)for(const p in this.indexes){const g=this.indexes[p],_={};for(const A in g){const E=g[A];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+h),_[E.tileID.key]=E}this.indexes[p]=_}this.lng=a}addBucket(a,h,p){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let _=0;_<h.symbolInstances.length;_++)h.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const g=this.usedCrossTileIDs[a.overscaledZ];for(const _ in this.indexes){const A=this.indexes[_];if(Number(_)>a.overscaledZ)for(const E in A){const I=A[E];I.tileID.isChildOf(a)&&I.findMatches(h.symbolInstances,a,g)}else{const E=A[a.scaledTo(Number(_)).key];E&&E.findMatches(h.symbolInstances,a,g)}}for(let _=0;_<h.symbolInstances.length;_++){const A=h.symbolInstances.get(_);A.crossTileID||(A.crossTileID=p.generate(),g[A.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new d_(a,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(a,h){for(const p of h.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[a][g]}removeStaleBuckets(a){let h=!1;for(const p in this.indexes){const g=this.indexes[p];for(const _ in g)a[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[_]),delete g[_],h=!0)}return h}}class Ou{constructor(){this.layerIndexes={},this.crossTileIDs=new pr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,h,p){let g=this.layerIndexes[a.id];g===void 0&&(g=this.layerIndexes[a.id]=new Nh);let _=!1;const A={};g.handleWrapJump(p);for(const E of h){const I=E.getBucket(a);I&&a.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(E.tileID,I,this.crossTileIDs)&&(_=!0),A[I.bucketInstanceId]=!0)}return g.removeStaleBuckets(A)&&(_=!0),_}pruneUnusedLayers(a){const h={};a.forEach(p=>{h[p]=!0});for(const p in this.layerIndexes)h[p]||delete this.layerIndexes[p]}}const Bn=(y,a)=>l.x(y,a&&a.filter(h=>h.identifier!=="source.canvas")),Ti=l.F(l.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),p_=l.F(l.ax,["setCenter","setZoom","setBearing","setPitch"]),Fi=l.aw();class kn extends l.E{constructor(a,h={}){super(),this.map=a,this.dispatcher=new Ue(Mu(),this,a._getMapId()),this.imageManager=new Te,this.imageManager.setEventedParent(this),this.glyphManager=new qe(a._requestManager,h.localIdeographFontFamily),this.lineAtlas=new ke(256,512),this.crossTileSymbolIndex=new Ou,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.az());const p=this;this._rtlTextPluginCallback=kn.registerForPluginStateChange(g=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(_,A)=>{if(l.aA(_),A&&A.every(E=>E))for(const E in p.sourceCaches){const I=p.sourceCaches[E].getSource().type;I!=="vector"&&I!=="geojson"||p.sourceCaches[E].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const _=this.sourceCaches[g.sourceId];if(!_)return;const A=_.getSource();if(A&&A.vectorLayerIds)for(const E in this._layers){const I=this._layers[E];I.source===A.id&&this._validateLayer(I)}})}loadURL(a,h={},p){this.fire(new l.k("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;const g=this.map._requestManager.transformRequest(a,D.Style);this._request=l.f(g,(_,A)=>{this._request=null,_?this.fire(new l.j(_)):A&&this._load(A,h,p)})}loadJSON(a,h={},p){this.fire(new l.k("dataloading",{dataType:"style"})),this._request=l.h.frame(()=>{this._request=null,h.validate=h.validate!==!1,this._load(a,h,p)})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(Fi,{validate:!1})}_load(a,h,p){var g;const _=h.transformStyle?h.transformStyle(p,a):a;if(!h.validate||!Bn(this,l.y(_))){this._loaded=!0,this.stylesheet=_;for(const A in _.sources)this.addSource(A,_.sources[A],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new _e(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const a=l.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",a),this._order=a.map(h=>h.id),this._layers={},this._serializedLayers=null;for(const h of a){const p=l.aC(h);p.setEventedParent(this,{layer:{id:h.id}}),this._layers[h.id]=p}}_loadSprite(a,h=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,_,A,E){const I=le(g),O=I.length,$=A>1?"@2x":"",N={},K={},ae={};for(const{id:ie,url:se}of I){const re=_.transformRequest(_.normalizeSpriteURL(se,$,".json"),D.SpriteJSON),xe=`${ie}_${re.url}`;N[xe]=l.f(re,(be,De)=>{delete N[xe],K[ie]=De,ve(E,K,ae,be,O)});const Ie=_.transformRequest(_.normalizeSpriteURL(se,$,".png"),D.SpriteImage),de=`${ie}_${Ie.url}`;N[de]=V.getImage(Ie,(be,De)=>{delete N[de],ae[ie]=De,ve(E,K,ae,be,O)})}return{cancel(){for(const ie of Object.values(N))ie.cancel()}}}(a,this.map._requestManager,this.map.getPixelRatio(),(g,_)=>{if(this._spriteRequest=null,g)this.fire(new l.j(g));else if(_)for(const A in _){this._spritesImagesIds[A]=[];const E=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter(I=>!(I in _)):[];for(const I of E)this.imageManager.removeImage(I),this._changedImages[I]=!0;for(const I in _[A]){const O=A==="default"?I:`${A}:${I}`;this._spritesImagesIds[A].push(O),O in this.imageManager.images?this.imageManager.updateImage(O,_[A][I],!1):this.imageManager.addImage(O,_[A][I]),h&&(this._changedImages[O]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(a){const h=this.sourceCaches[a.source];if(!h)return;const p=a.sourceLayer;if(!p)return;const g=h.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new l.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a){const h=this._serializedAllLayers();if(!a||a.length===0)return Object.values(h);const p=[];for(const g of a)h[g]&&p.push(h[g]);return p}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const h=Object.keys(this._layers);for(const p of h){const g=this._layers[p];g.type!=="custom"&&(a[p]=g.serialize())}return a}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const h=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const A in this._updatedSources){const E=this._updatedSources[A];if(E==="reload")this._reloadSource(A);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];p[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(a,this._availableImages),!_.isHidden(a.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in p){const _=this.sourceCaches[g];p[g]!==_.used&&_.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(a),this.z=a.zoom,h&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(a),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,h={}){this._checkLoaded();const p=this.serialize();if(a=h.transformStyle?h.transformStyle(p,a):a,Bn(this,l.y(a)))return!1;(a=l.aD(a)).layers=l.aB(a.layers);const g=l.aE(p,a).filter(A=>!(A.command in p_));if(g.length===0)return!1;const _=g.filter(A=>!(A.command in Ti));if(_.length>0)throw new Error(`Unimplemented: ${_.map(A=>A.command).join(", ")}.`);for(const A of g)A.command!=="setTransition"&&this[A.command].apply(this,A.args);return this.stylesheet=a,this._serializedLayers=null,!0}addImage(a,h){if(this.getImage(a))return this.fire(new l.j(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,h),this._afterImageUpdated(a)}updateImage(a,h){this.imageManager.updateImage(a,h)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new l.j(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,h,p={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(l.y.source,`sources.${a}`,h,null,p))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const g=this.sourceCaches[a]=new Xr(a,h,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:a})),g.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===a)return this.fire(new l.j(new Error(`Source "${a}" cannot be removed while layer "${p}" is using it.`)));const h=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],h.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,h){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);const p=this.sourceCaches[a].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(h),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,h,p={}){this._checkLoaded();const g=a.id;if(this.getLayer(g))return void this.fire(new l.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(a.type==="custom"){if(Bn(this,l.aF(a)))return;_=l.aC(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(g,a.source),a=l.aD(a),a=l.e(a,{source:g})),this._validate(l.y.layer,`layers.${g}`,a,{arrayIndex:-1},p))return;_=l.aC(a),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const A=h?this._order.indexOf(h):this._order.length;if(h&&A===-1)this.fire(new l.j(new Error(`Cannot add layer "${g}" before non-existing layer "${h}".`)));else{if(this._order.splice(A,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const E=this._removedLayers[g];delete this._removedLayers[g],E.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(a,h){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new l.j(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===h)return;const p=this._order.indexOf(a);this._order.splice(p,1);const g=h?this._order.indexOf(h):this._order.length;h&&g===-1?this.fire(new l.j(new Error(`Cannot move layer "${a}" before non-existing layer "${h}".`))):(this._order.splice(g,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const h=this._layers[a];if(!h)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${a}".`)));h.setEventedParent(null);const p=this._order.indexOf(a);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=h,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],h.onRemove&&h.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,h,p){this._checkLoaded();const g=this.getLayer(a);g?g.minzoom===h&&g.maxzoom===p||(h!=null&&(g.minzoom=h),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,h,p={}){this._checkLoaded();const g=this.getLayer(a);if(g){if(!l.aG(g.filter,h))return h==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(l.y.filter,`layers.${g.id}.filter`,h,null,p)||(g.filter=l.aD(h),this._updateLayer(g)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return l.aD(this.getLayer(a).filter)}setLayoutProperty(a,h,p,g={}){this._checkLoaded();const _=this.getLayer(a);_?l.aG(_.getLayoutProperty(h),p)||(_.setLayoutProperty(h,p,g),this._updateLayer(_)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,h){const p=this.getLayer(a);if(p)return p.getLayoutProperty(h);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,h,p,g={}){this._checkLoaded();const _=this.getLayer(a);_?l.aG(_.getPaintProperty(h),p)||(_.setPaintProperty(h,p,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new l.j(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,h){return this.getLayer(a).getPaintProperty(h)}setFeatureState(a,h){this._checkLoaded();const p=a.source,g=a.sourceLayer,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const A=_.getSource().type;A==="geojson"&&g?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||g?(a.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,a.id,h)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,h){this._checkLoaded();const p=a.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const _=g.getSource().type,A=_==="vector"?a.sourceLayer:void 0;_!=="vector"||A?h&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(A,a.id,h):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const h=a.source,p=a.sourceLayer,g=this.sourceCaches[h];if(g!==void 0)return g.getSource().type!=="vector"||p?(a.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,a.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=l.aH(this.sourceCaches,_=>_.serialize()),h=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return l.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:a,layers:h,terrain:p},_=>_!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const h=A=>this._layers[A].type==="fill-extrusion",p={},g=[];for(let A=this._order.length-1;A>=0;A--){const E=this._order[A];if(h(E)){p[E]=A;for(const I of a){const O=I[E];if(O)for(const $ of O)g.push($)}}}g.sort((A,E)=>E.intersectionZ-A.intersectionZ);const _=[];for(let A=this._order.length-1;A>=0;A--){const E=this._order[A];if(h(E))for(let I=g.length-1;I>=0;I--){const O=g[I].feature;if(p[O.layer.id]<A)break;_.push(O),g.pop()}else for(const I of a){const O=I[E];if(O)for(const $ of O)_.push($.feature)}}return _}queryRenderedFeatures(a,h,p){h&&h.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",h.filter,null,h);const g={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const E of h.layers){const I=this._layers[E];if(!I)return this.fire(new l.j(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];g[I.source]=!0}}const _=[];h.availableImages=this._availableImages;const A=this._serializedAllLayers();for(const E in this.sourceCaches)h.layers&&!g[E]||_.push(yt(this.sourceCaches[E],this._layers,A,a,h,p));return this.placement&&_.push(function(E,I,O,$,N,K,ae){const ie={},se=K.queryRenderedSymbols($),re=[];for(const xe of Object.keys(se).map(Number))re.push(ae[xe]);re.sort(Ot);for(const xe of re){const Ie=xe.featureIndex.lookupSymbolFeatures(se[xe.bucketInstanceId],I,xe.bucketIndex,xe.sourceLayerIndex,N.filter,N.layers,N.availableImages,E);for(const de in Ie){const be=ie[de]=ie[de]||[],De=Ie[de];De.sort((Le,We)=>{const et=xe.featureSortOrder;if(et){const Je=et.indexOf(Le.featureIndex);return et.indexOf(We.featureIndex)-Je}return We.featureIndex-Le.featureIndex});for(const Le of De)be.push(Le)}}for(const xe in ie)ie[xe].forEach(Ie=>{const de=Ie.feature,be=O[E[xe].source].getFeatureState(de.layer["source-layer"],de.id);de.source=de.layer.source,de.layer["source-layer"]&&(de.sourceLayer=de.layer["source-layer"]),de.state=be});return ie}(this._layers,A,this.sourceCaches,a,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(a,h){h&&h.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",h.filter,null,h);const p=this.sourceCaches[a];return p?function(g,_){const A=g.getRenderableIds().map(O=>g.getTileByID(O)),E=[],I={};for(let O=0;O<A.length;O++){const $=A[O],N=$.tileID.canonical.key;I[N]||(I[N]=!0,$.querySourceFeatures(E,_))}return E}(p,h):[]}addSourceType(a,h,p){return $t(a)?p(new Error(`A source type called "${a}" already exists.`)):(((g,_)=>{kt[g]=_})(a,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:h.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(a,h={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const A in a)if(!l.aG(a[A],p[A])){g=!0;break}if(!g)return;const _={now:l.h.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,h),this.light.updateTransitions(_)}_validate(a,h,p,g,_={}){return(!_||_.validate!==!1)&&Bn(this,a.call(l.y,l.e({key:h,style:this.serialize(),value:p,styleSpec:l.v},g)))}_remove(a=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this.sourceCaches){const p=this.sourceCaches[h];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const h in this.sourceCaches)this.sourceCaches[h].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,h,p,g,_=!1){let A=!1,E=!1;const I={};for(const O of this._order){const $=this._layers[O];if($.type!=="symbol")continue;if(!I[$.source]){const K=this.sourceCaches[$.source];I[$.source]=K.getRenderableIds(!0).map(ae=>K.getTileByID(ae)).sort((ae,ie)=>ie.tileID.overscaledZ-ae.tileID.overscaledZ||(ae.tileID.isLessThan(ie.tileID)?-1:1))}const N=this.crossTileSymbolIndex.addLayer($,I[$.source],a.center.lng);A=A||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.h.now(),a.zoom))&&(this.pauseablePlacement=new Ps(a,this.map.terrain,this._order,_,h,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.h.now()),E=!0),A&&this.pauseablePlacement.placement.setStale()),E||A)for(const O of this._order){const $=this._layers[O];$.type==="symbol"&&this.placement.updateLayerOpacities($,I[$.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.h.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,h,p){this.imageManager.getImages(h.icons,p),this._updateTilesForChangedImages();const g=this.sourceCaches[h.source];g&&g.setDependencies(h.tileID.key,h.type,h.icons)}getGlyphs(a,h,p){this.glyphManager.getGlyphs(h.stacks,p);const g=this.sourceCaches[h.source];g&&g.setDependencies(h.tileID.key,h.type,[""])}getResource(a,h,p){return l.m(h,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,h={}){this._checkLoaded(),a&&this._validate(l.y.glyphs,"glyphs",a,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,h,p={},g){this._checkLoaded();const _=[{id:a,url:h}],A=[...le(this.stylesheet.sprite),..._];this._validate(l.y.sprite,"sprite",A,null,p)||(this.stylesheet.sprite=A,this._loadSprite(_,!0,g))}removeSprite(a){this._checkLoaded();const h=le(this.stylesheet.sprite);if(h.find(p=>p.id===a)){if(this._spritesImagesIds[a])for(const p of this._spritesImagesIds[a])this.imageManager.removeImage(p),this._changedImages[p]=!0;h.splice(h.findIndex(p=>p.id===a),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return le(this.stylesheet.sprite)}setSprite(a,h={},p){this._checkLoaded(),a&&this._validate(l.y.sprite,"sprite",a,null,h)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,p):(this._unloadSprite(),p&&p(null)))}}kn.registerForPluginStateChange=l.aK;var zu=l.Q([{name:"a_pos",type:"Int16",components:2}]),Es="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Lr={prelude:lr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:lr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:lr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:lr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:lr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:lr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:lr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:lr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:lr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:lr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:lr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:lr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:lr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:lr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:lr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:lr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:lr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:lr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:lr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:lr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:lr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:lr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:lr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:lr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:lr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Es),terrainDepth:lr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Es),terrainCoords:lr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Es)};function lr(y,a){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=a.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=_?_.concat(g):g,E={};return{fragmentSource:y=y.replace(h,(I,O,$,N,K)=>(E[K]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${K}
varying ${$} ${N} ${K};
#else
uniform ${$} ${N} u_${K};
#endif
`:`
#ifdef HAS_UNIFORM_u_${K}
    ${$} ${N} ${K} = u_${K};
#endif
`)),vertexSource:a=a.replace(h,(I,O,$,N,K)=>{const ae=N==="float"?"vec2":"vec4",ie=K.match(/color/)?"color":ae;return E[K]?O==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${$} ${ae} a_${K};
varying ${$} ${N} ${K};
#else
uniform ${$} ${N} u_${K};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = a_${K};
#else
    ${$} ${N} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = unpack_mix_${ie}(a_${K}, u_${K}_t);
#else
    ${$} ${N} ${K} = u_${K};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${$} ${ae} a_${K};
#else
uniform ${$} ${N} u_${K};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${$} ${N} ${K} = a_${K};
#else
    ${$} ${N} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${$} ${N} ${K} = unpack_mix_${ie}(a_${K}, u_${K}_t);
#else
    ${$} ${N} ${K} = u_${K};
#endif
`}),staticAttributes:p,staticUniforms:A}}class jo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,h,p,g,_,A,E,I,O){this.context=a;let $=this.boundPaintVertexBuffers.length!==g.length;for(let N=0;!$&&N<g.length;N++)this.boundPaintVertexBuffers[N]!==g[N]&&($=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==p||$||this.boundIndexBuffer!==_||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==I||this.boundDynamicVertexBuffer3!==O?this.freshBind(h,p,g,_,A,E,I,O):(a.bindVertexArray.set(this.vao),E&&E.bind(),_&&_.dynamicDraw&&_.bind(),I&&I.bind(),O&&O.bind())}freshBind(a,h,p,g,_,A,E,I){const O=a.numAttributes,$=this.context,N=$.gl;this.vao&&this.destroy(),this.vao=$.createVertexArray(),$.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=I,h.enableAttributes(N,a);for(const K of p)K.enableAttributes(N,a);A&&A.enableAttributes(N,a),E&&E.enableAttributes(N,a),I&&I.enableAttributes(N,a),h.bind(),h.setVertexAttribPointers(N,a,_);for(const K of p)K.bind(),K.setVertexAttribPointers(N,a,_);A&&(A.bind(),A.setVertexAttribPointers(N,a,_)),g&&g.bind(),E&&(E.bind(),E.setVertexAttribPointers(N,a,_)),I&&(I.bind(),I.setVertexAttribPointers(N,a,_)),$.currentNumAttributes=O}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Ur(y){const a=[];for(let h=0;h<y.length;h++){if(y[h]===null)continue;const p=y[h].split(" ");a.push(p.pop())}return a}class Du{constructor(a,h,p,g,_,A){const E=a.gl;this.program=E.createProgram();const I=Ur(h.staticAttributes),O=p?p.getBinderAttributes():[],$=I.concat(O),N=Lr.prelude.staticUniforms?Ur(Lr.prelude.staticUniforms):[],K=h.staticUniforms?Ur(h.staticUniforms):[],ae=p?p.getBinderUniforms():[],ie=N.concat(K).concat(ae),se=[];for(const Le of ie)se.indexOf(Le)<0&&se.push(Le);const re=p?p.defines():[];_&&re.push("#define OVERDRAW_INSPECTOR;"),A&&re.push("#define TERRAIN3D;");const xe=re.concat(Lr.prelude.fragmentSource,h.fragmentSource).join(`
`),Ie=re.concat(Lr.prelude.vertexSource,h.vertexSource).join(`
`),de=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(de,xe),E.compileShader(de),!E.getShaderParameter(de,E.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${E.getShaderInfoLog(de)}`);E.attachShader(this.program,de);const be=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(be,Ie),E.compileShader(be),!E.getShaderParameter(be,E.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${E.getShaderInfoLog(be)}`);E.attachShader(this.program,be),this.attributes={};const De={};this.numAttributes=$.length;for(let Le=0;Le<this.numAttributes;Le++)$[Le]&&(E.bindAttribLocation(this.program,Le,$[Le]),this.attributes[$[Le]]=Le);if(E.linkProgram(this.program),!E.getProgramParameter(this.program,E.LINK_STATUS))throw new Error(`Program failed to link: ${E.getProgramInfoLog(this.program)}`);E.deleteShader(be),E.deleteShader(de);for(let Le=0;Le<se.length;Le++){const We=se[Le];if(We&&!De[We]){const et=E.getUniformLocation(this.program,We);et&&(De[We]=et)}}this.fixedUniforms=g(a,De),this.terrainUniforms=((Le,We)=>({u_depth:new l.aL(Le,We.u_depth),u_terrain:new l.aL(Le,We.u_terrain),u_terrain_dim:new l.aM(Le,We.u_terrain_dim),u_terrain_matrix:new l.aN(Le,We.u_terrain_matrix),u_terrain_unpack:new l.aO(Le,We.u_terrain_unpack),u_terrain_exaggeration:new l.aM(Le,We.u_terrain_exaggeration)}))(a,De),this.binderUniforms=p?p.getUniforms(a,De):[]}draw(a,h,p,g,_,A,E,I,O,$,N,K,ae,ie,se,re,xe,Ie){const de=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(p),a.setStencilMode(g),a.setColorMode(_),a.setCullFace(A),I){a.activeTexture.set(de.TEXTURE2),de.bindTexture(de.TEXTURE_2D,I.depthTexture),a.activeTexture.set(de.TEXTURE3),de.bindTexture(de.TEXTURE_2D,I.texture);for(const De in this.terrainUniforms)this.terrainUniforms[De].set(I[De])}for(const De in this.fixedUniforms)this.fixedUniforms[De].set(E[De]);se&&se.setUniforms(a,this.binderUniforms,ae,{zoom:ie});let be=0;switch(h){case de.LINES:be=2;break;case de.TRIANGLES:be=3;break;case de.LINE_STRIP:be=1}for(const De of K.get()){const Le=De.vaos||(De.vaos={});(Le[O]||(Le[O]=new jo)).bind(a,this,$,se?se.getPaintVertexBuffers():[],N,De.vertexOffset,re,xe,Ie),de.drawElements(h,De.primitiveLength*be,de.UNSIGNED_SHORT,De.primitiveOffset*be*2)}}}function Ui(y,a,h){const p=1/ye(h,1,a.transform.tileZoom),g=Math.pow(2,h.tileID.overscaledZ),_=h.tileSize*Math.pow(2,a.transform.tileZoom)/g,A=_*(h.tileID.canonical.x+h.tileID.wrap*g),E=_*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[A>>16,E>>16],u_pixel_coord_lower:[65535&A,65535&E]}}const Bh=(y,a,h,p)=>{const g=a.style.light,_=g.properties.get("position"),A=[_.x,_.y,_.z],E=function(){var O=new l.A(9);return l.A!=Float32Array&&(O[1]=0,O[2]=0,O[3]=0,O[5]=0,O[6]=0,O[7]=0),O[0]=1,O[4]=1,O[8]=1,O}();g.properties.get("anchor")==="viewport"&&function(O,$){var N=Math.sin($),K=Math.cos($);O[0]=K,O[1]=N,O[2]=0,O[3]=-N,O[4]=K,O[5]=0,O[6]=0,O[7]=0,O[8]=1}(E,-a.transform.angle),function(O,$,N){var K=$[0],ae=$[1],ie=$[2];O[0]=K*N[0]+ae*N[3]+ie*N[6],O[1]=K*N[1]+ae*N[4]+ie*N[7],O[2]=K*N[2]+ae*N[5]+ie*N[8]}(A,A,E);const I=g.properties.get("color");return{u_matrix:y,u_lightpos:A,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+h,u_opacity:p}},co=(y,a,h,p,g,_,A)=>l.e(Bh(y,a,h,p),Ui(_,a,A),{u_height_factor:-Math.pow(2,g.overscaledZ)/A.tileSize/8}),Gp=y=>({u_matrix:y}),Fh=(y,a,h,p)=>l.e(Gp(y),Ui(h,a,p)),Lu=(y,a)=>({u_matrix:y,u_world:a}),ju=(y,a,h,p,g)=>l.e(Fh(y,a,h,p),{u_world:g}),ho=(y,a,h,p)=>{const g=y.transform;let _,A;if(p.paint.get("circle-pitch-alignment")==="map"){const E=ye(h,1,g.zoom);_=!0,A=[E,E]}else _=!1,A=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(a.posMatrix,h,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:A}},Uh=(y,a,h)=>{const p=ye(h,1,a.zoom),g=Math.pow(2,a.zoom-h.tileID.overscaledZ),_=h.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:a.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[a.pixelsToGLUnits[0]/(p*g),a.pixelsToGLUnits[1]/(p*g)],u_overscale_factor:_}},El=(y,a,h=1)=>({u_matrix:y,u_color:a,u_overlay:0,u_overlay_scale:h}),Wp=y=>({u_matrix:y}),m_=(y,a,h,p)=>({u_matrix:y,u_extrude_scale:ye(a,1,h),u_intensity:p});function Vh(y,a){const h=Math.pow(2,a.canonical.z),p=a.canonical.y;return[new l.U(0,p/h).toLngLat().lat,new l.U(0,(p+1)/h).toLngLat().lat]}const qh=(y,a,h,p)=>{const g=y.transform;return{u_matrix:$u(y,a,h,p),u_ratio:1/ye(a,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Zp=(y,a,h,p,g)=>l.e(qh(y,a,h,g),{u_image:0,u_image_height:p}),g_=(y,a,h,p,g)=>{const _=y.transform,A=Kp(a,_);return{u_matrix:$u(y,a,h,g),u_texsize:a.imageAtlasTexture.size,u_ratio:1/ye(a,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[A,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Hp=(y,a,h,p,g,_)=>{const A=y.lineAtlas,E=Kp(a,y.transform),I=h.layout.get("line-cap")==="round",O=A.getDash(p.from,I),$=A.getDash(p.to,I),N=O.width*g.fromScale,K=$.width*g.toScale;return l.e(qh(y,a,h,_),{u_patternscale_a:[E/N,-O.height/2],u_patternscale_b:[E/K,-$.height/2],u_sdfgamma:A.width/(256*Math.min(N,K)*y.pixelRatio)/2,u_image:0,u_tex_y_a:O.y,u_tex_y_b:$.y,u_mix:g.t})};function Kp(y,a){return 1/ye(y,1,a.tileZoom)}function $u(y,a,h,p){return y.translatePosMatrix(p?p.posMatrix:a.tileID.posMatrix,a,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const Xp=(y,a,h,p,g)=>{return{u_matrix:y,u_tl_parent:a,u_scale_parent:h,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(A=g.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Yp(g.paint.get("raster-hue-rotate"))};var _,A};function Yp(y){y*=Math.PI/180;const a=Math.sin(y),h=Math.cos(y);return[(2*h+1)/3,(-Math.sqrt(3)*a-h+1)/3,(Math.sqrt(3)*a-h+1)/3]}const Gh=(y,a,h,p,g,_,A,E,I,O)=>{const $=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:$.cameraToCenterDistance,u_pitch:$.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:$.width/$.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:A,u_coord_matrix:E,u_is_text:+I,u_pitch_with_map:+p,u_texsize:O,u_texture:0}},Wh=(y,a,h,p,g,_,A,E,I,O,$)=>{const N=g.transform;return l.e(Gh(y,a,h,p,g,_,A,E,I,O),{u_gamma_scale:p?Math.cos(N._pitch)*N.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:1})},$o=(y,a,h,p,g,_,A,E,I,O)=>l.e(Wh(y,a,h,p,g,_,A,E,!0,I),{u_texsize_icon:O,u_texture_icon:1}),Ru=(y,a,h)=>({u_matrix:y,u_opacity:a,u_color:h}),Vi=(y,a,h,p,g,_)=>l.e(function(A,E,I,O){const $=I.imageManager.getPattern(A.from.toString()),N=I.imageManager.getPattern(A.to.toString()),{width:K,height:ae}=I.imageManager.getPixelSize(),ie=Math.pow(2,O.tileID.overscaledZ),se=O.tileSize*Math.pow(2,I.transform.tileZoom)/ie,re=se*(O.tileID.canonical.x+O.tileID.wrap*ie),xe=se*O.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:$.tl,u_pattern_br_a:$.br,u_pattern_tl_b:N.tl,u_pattern_br_b:N.br,u_texsize:[K,ae],u_mix:E.t,u_pattern_size_a:$.displaySize,u_pattern_size_b:N.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/ye(O,1,I.transform.tileZoom),u_pixel_coord_upper:[re>>16,xe>>16],u_pixel_coord_lower:[65535&re,65535&xe]}}(p,_,h,g),{u_matrix:y,u_opacity:a}),Nu={fillExtrusion:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_lightpos:new l.aP(y,a.u_lightpos),u_lightintensity:new l.aM(y,a.u_lightintensity),u_lightcolor:new l.aP(y,a.u_lightcolor),u_vertical_gradient:new l.aM(y,a.u_vertical_gradient),u_opacity:new l.aM(y,a.u_opacity)}),fillExtrusionPattern:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_lightpos:new l.aP(y,a.u_lightpos),u_lightintensity:new l.aM(y,a.u_lightintensity),u_lightcolor:new l.aP(y,a.u_lightcolor),u_vertical_gradient:new l.aM(y,a.u_vertical_gradient),u_height_factor:new l.aM(y,a.u_height_factor),u_image:new l.aL(y,a.u_image),u_texsize:new l.aQ(y,a.u_texsize),u_pixel_coord_upper:new l.aQ(y,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,a.u_pixel_coord_lower),u_scale:new l.aP(y,a.u_scale),u_fade:new l.aM(y,a.u_fade),u_opacity:new l.aM(y,a.u_opacity)}),fill:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix)}),fillPattern:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_image:new l.aL(y,a.u_image),u_texsize:new l.aQ(y,a.u_texsize),u_pixel_coord_upper:new l.aQ(y,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,a.u_pixel_coord_lower),u_scale:new l.aP(y,a.u_scale),u_fade:new l.aM(y,a.u_fade)}),fillOutline:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_world:new l.aQ(y,a.u_world)}),fillOutlinePattern:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_world:new l.aQ(y,a.u_world),u_image:new l.aL(y,a.u_image),u_texsize:new l.aQ(y,a.u_texsize),u_pixel_coord_upper:new l.aQ(y,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,a.u_pixel_coord_lower),u_scale:new l.aP(y,a.u_scale),u_fade:new l.aM(y,a.u_fade)}),circle:(y,a)=>({u_camera_to_center_distance:new l.aM(y,a.u_camera_to_center_distance),u_scale_with_map:new l.aL(y,a.u_scale_with_map),u_pitch_with_map:new l.aL(y,a.u_pitch_with_map),u_extrude_scale:new l.aQ(y,a.u_extrude_scale),u_device_pixel_ratio:new l.aM(y,a.u_device_pixel_ratio),u_matrix:new l.aN(y,a.u_matrix)}),collisionBox:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_camera_to_center_distance:new l.aM(y,a.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aM(y,a.u_pixels_to_tile_units),u_extrude_scale:new l.aQ(y,a.u_extrude_scale),u_overscale_factor:new l.aM(y,a.u_overscale_factor)}),collisionCircle:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_inv_matrix:new l.aN(y,a.u_inv_matrix),u_camera_to_center_distance:new l.aM(y,a.u_camera_to_center_distance),u_viewport_size:new l.aQ(y,a.u_viewport_size)}),debug:(y,a)=>({u_color:new l.aR(y,a.u_color),u_matrix:new l.aN(y,a.u_matrix),u_overlay:new l.aL(y,a.u_overlay),u_overlay_scale:new l.aM(y,a.u_overlay_scale)}),clippingMask:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix)}),heatmap:(y,a)=>({u_extrude_scale:new l.aM(y,a.u_extrude_scale),u_intensity:new l.aM(y,a.u_intensity),u_matrix:new l.aN(y,a.u_matrix)}),heatmapTexture:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_world:new l.aQ(y,a.u_world),u_image:new l.aL(y,a.u_image),u_color_ramp:new l.aL(y,a.u_color_ramp),u_opacity:new l.aM(y,a.u_opacity)}),hillshade:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_image:new l.aL(y,a.u_image),u_latrange:new l.aQ(y,a.u_latrange),u_light:new l.aQ(y,a.u_light),u_shadow:new l.aR(y,a.u_shadow),u_highlight:new l.aR(y,a.u_highlight),u_accent:new l.aR(y,a.u_accent)}),hillshadePrepare:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_image:new l.aL(y,a.u_image),u_dimension:new l.aQ(y,a.u_dimension),u_zoom:new l.aM(y,a.u_zoom),u_unpack:new l.aO(y,a.u_unpack)}),line:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_ratio:new l.aM(y,a.u_ratio),u_device_pixel_ratio:new l.aM(y,a.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,a.u_units_to_pixels)}),lineGradient:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_ratio:new l.aM(y,a.u_ratio),u_device_pixel_ratio:new l.aM(y,a.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,a.u_units_to_pixels),u_image:new l.aL(y,a.u_image),u_image_height:new l.aM(y,a.u_image_height)}),linePattern:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_texsize:new l.aQ(y,a.u_texsize),u_ratio:new l.aM(y,a.u_ratio),u_device_pixel_ratio:new l.aM(y,a.u_device_pixel_ratio),u_image:new l.aL(y,a.u_image),u_units_to_pixels:new l.aQ(y,a.u_units_to_pixels),u_scale:new l.aP(y,a.u_scale),u_fade:new l.aM(y,a.u_fade)}),lineSDF:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_ratio:new l.aM(y,a.u_ratio),u_device_pixel_ratio:new l.aM(y,a.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,a.u_units_to_pixels),u_patternscale_a:new l.aQ(y,a.u_patternscale_a),u_patternscale_b:new l.aQ(y,a.u_patternscale_b),u_sdfgamma:new l.aM(y,a.u_sdfgamma),u_image:new l.aL(y,a.u_image),u_tex_y_a:new l.aM(y,a.u_tex_y_a),u_tex_y_b:new l.aM(y,a.u_tex_y_b),u_mix:new l.aM(y,a.u_mix)}),raster:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_tl_parent:new l.aQ(y,a.u_tl_parent),u_scale_parent:new l.aM(y,a.u_scale_parent),u_buffer_scale:new l.aM(y,a.u_buffer_scale),u_fade_t:new l.aM(y,a.u_fade_t),u_opacity:new l.aM(y,a.u_opacity),u_image0:new l.aL(y,a.u_image0),u_image1:new l.aL(y,a.u_image1),u_brightness_low:new l.aM(y,a.u_brightness_low),u_brightness_high:new l.aM(y,a.u_brightness_high),u_saturation_factor:new l.aM(y,a.u_saturation_factor),u_contrast_factor:new l.aM(y,a.u_contrast_factor),u_spin_weights:new l.aP(y,a.u_spin_weights)}),symbolIcon:(y,a)=>({u_is_size_zoom_constant:new l.aL(y,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,a.u_is_size_feature_constant),u_size_t:new l.aM(y,a.u_size_t),u_size:new l.aM(y,a.u_size),u_camera_to_center_distance:new l.aM(y,a.u_camera_to_center_distance),u_pitch:new l.aM(y,a.u_pitch),u_rotate_symbol:new l.aL(y,a.u_rotate_symbol),u_aspect_ratio:new l.aM(y,a.u_aspect_ratio),u_fade_change:new l.aM(y,a.u_fade_change),u_matrix:new l.aN(y,a.u_matrix),u_label_plane_matrix:new l.aN(y,a.u_label_plane_matrix),u_coord_matrix:new l.aN(y,a.u_coord_matrix),u_is_text:new l.aL(y,a.u_is_text),u_pitch_with_map:new l.aL(y,a.u_pitch_with_map),u_texsize:new l.aQ(y,a.u_texsize),u_texture:new l.aL(y,a.u_texture)}),symbolSDF:(y,a)=>({u_is_size_zoom_constant:new l.aL(y,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,a.u_is_size_feature_constant),u_size_t:new l.aM(y,a.u_size_t),u_size:new l.aM(y,a.u_size),u_camera_to_center_distance:new l.aM(y,a.u_camera_to_center_distance),u_pitch:new l.aM(y,a.u_pitch),u_rotate_symbol:new l.aL(y,a.u_rotate_symbol),u_aspect_ratio:new l.aM(y,a.u_aspect_ratio),u_fade_change:new l.aM(y,a.u_fade_change),u_matrix:new l.aN(y,a.u_matrix),u_label_plane_matrix:new l.aN(y,a.u_label_plane_matrix),u_coord_matrix:new l.aN(y,a.u_coord_matrix),u_is_text:new l.aL(y,a.u_is_text),u_pitch_with_map:new l.aL(y,a.u_pitch_with_map),u_texsize:new l.aQ(y,a.u_texsize),u_texture:new l.aL(y,a.u_texture),u_gamma_scale:new l.aM(y,a.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,a.u_device_pixel_ratio),u_is_halo:new l.aL(y,a.u_is_halo)}),symbolTextAndIcon:(y,a)=>({u_is_size_zoom_constant:new l.aL(y,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,a.u_is_size_feature_constant),u_size_t:new l.aM(y,a.u_size_t),u_size:new l.aM(y,a.u_size),u_camera_to_center_distance:new l.aM(y,a.u_camera_to_center_distance),u_pitch:new l.aM(y,a.u_pitch),u_rotate_symbol:new l.aL(y,a.u_rotate_symbol),u_aspect_ratio:new l.aM(y,a.u_aspect_ratio),u_fade_change:new l.aM(y,a.u_fade_change),u_matrix:new l.aN(y,a.u_matrix),u_label_plane_matrix:new l.aN(y,a.u_label_plane_matrix),u_coord_matrix:new l.aN(y,a.u_coord_matrix),u_is_text:new l.aL(y,a.u_is_text),u_pitch_with_map:new l.aL(y,a.u_pitch_with_map),u_texsize:new l.aQ(y,a.u_texsize),u_texsize_icon:new l.aQ(y,a.u_texsize_icon),u_texture:new l.aL(y,a.u_texture),u_texture_icon:new l.aL(y,a.u_texture_icon),u_gamma_scale:new l.aM(y,a.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,a.u_device_pixel_ratio),u_is_halo:new l.aL(y,a.u_is_halo)}),background:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_opacity:new l.aM(y,a.u_opacity),u_color:new l.aR(y,a.u_color)}),backgroundPattern:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_opacity:new l.aM(y,a.u_opacity),u_image:new l.aL(y,a.u_image),u_pattern_tl_a:new l.aQ(y,a.u_pattern_tl_a),u_pattern_br_a:new l.aQ(y,a.u_pattern_br_a),u_pattern_tl_b:new l.aQ(y,a.u_pattern_tl_b),u_pattern_br_b:new l.aQ(y,a.u_pattern_br_b),u_texsize:new l.aQ(y,a.u_texsize),u_mix:new l.aM(y,a.u_mix),u_pattern_size_a:new l.aQ(y,a.u_pattern_size_a),u_pattern_size_b:new l.aQ(y,a.u_pattern_size_b),u_scale_a:new l.aM(y,a.u_scale_a),u_scale_b:new l.aM(y,a.u_scale_b),u_pixel_coord_upper:new l.aQ(y,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,a.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aM(y,a.u_tile_units_to_pixels)}),terrain:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_texture:new l.aL(y,a.u_texture),u_ele_delta:new l.aM(y,a.u_ele_delta)}),terrainDepth:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_ele_delta:new l.aM(y,a.u_ele_delta)}),terrainCoords:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_texture:new l.aL(y,a.u_texture),u_terrain_coords_id:new l.aM(y,a.u_terrain_coords_id),u_ele_delta:new l.aM(y,a.u_ele_delta)})};class Bu{constructor(a,h,p){this.context=a;const g=a.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Cl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Fu{constructor(a,h,p,g){this.length=h.length,this.attributes=p,this.itemSize=h.bytesPerElement,this.dynamicDraw=g,this.context=a;const _=a.gl;this.buffer=_.createBuffer(),a.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,h){for(let p=0;p<this.attributes.length;p++){const g=h.attributes[this.attributes[p].name];g!==void 0&&a.enableVertexAttribArray(g)}}setVertexAttribPointers(a,h,p){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],A=h.attributes[_.name];A!==void 0&&a.vertexAttribPointer(A,_.components,a[Cl[_.type]],!1,this.itemSize,_.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Cs=new WeakMap;function fo(y){var a;if(Cs.has(y))return Cs.get(y);{const h=(a=y.getParameter(y.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return Cs.set(y,h),h}}class tr{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Uu extends tr{getDefault(){return l.aT.transparent}set(a){const h=this.current;(a.r!==h.r||a.g!==h.g||a.b!==h.b||a.a!==h.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Pi extends tr{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class Ai extends tr{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Zh extends tr{getDefault(){return[!0,!0,!0,!0]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||a[3]!==h[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Vu extends tr{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class qu extends tr{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class Hh extends tr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const h=this.current;(a.func!==h.func||a.ref!==h.ref||a.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Kh extends tr{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Gu extends tr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=a,this.dirty=!1}}class Xh extends tr{getDefault(){return[0,1]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class Yh extends tr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=a,this.dirty=!1}}class Wu extends tr{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class Jp extends tr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.BLEND):h.disable(h.BLEND),this.current=a,this.dirty=!1}}class Qp extends tr{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class ks extends tr{getDefault(){return l.aT.transparent}set(a){const h=this.current;(a.r!==h.r||a.g!==h.g||a.b!==h.b||a.a!==h.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class y_ extends tr{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class v_ extends tr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=a,this.dirty=!1}}class __ extends tr{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class x_ extends tr{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class b_ extends tr{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class w_ extends tr{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class Jh extends tr{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||a[3]!==h[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Zu extends tr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class Qh extends tr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class ef extends tr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Is extends tr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class em extends tr{getDefault(){return null}set(a){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class tm extends tr{getDefault(){return null}set(a){var h;if(a===this.current&&!this.dirty)return;const p=this.gl;fo(p)?p.bindVertexArray(a):(h=p.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class tf extends tr{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class Ro extends tr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class rm extends tr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class po extends tr{constructor(a,h){super(a),this.context=a,this.parent=h}getDefault(){return null}}class Ms extends po{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class nm extends po{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class rf extends po{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class ur{constructor(a,h,p,g,_){this.context=a,this.width=h,this.height=p;const A=a.gl,E=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new Ms(a,E),g)this.depthAttachment=_?new rf(a,E):new nm(a,E);else if(_)throw new Error("Stencil cannot be setted without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const a=this.context.gl,h=this.colorAttachment.get();if(h&&a.deleteTexture(h),this.depthAttachment){const p=this.depthAttachment.get();p&&a.deleteRenderbuffer(p)}a.deleteFramebuffer(this.framebuffer)}}class jr{constructor(a,h,p){this.blendFunction=a,this.blendColor=h,this.mask=p}}jr.Replace=[1,0],jr.disabled=new jr(jr.Replace,l.aT.transparent,[!1,!1,!1,!1]),jr.unblended=new jr(jr.Replace,l.aT.transparent,[!0,!0,!0,!0]),jr.alphaBlended=new jr([1,771],l.aT.transparent,[!0,!0,!0,!0]);class S_{constructor(a){var h,p;if(this.gl=a,this.clearColor=new Uu(this),this.clearDepth=new Pi(this),this.clearStencil=new Ai(this),this.colorMask=new Zh(this),this.depthMask=new Vu(this),this.stencilMask=new qu(this),this.stencilFunc=new Hh(this),this.stencilOp=new Kh(this),this.stencilTest=new Gu(this),this.depthRange=new Xh(this),this.depthTest=new Yh(this),this.depthFunc=new Wu(this),this.blend=new Jp(this),this.blendFunc=new Qp(this),this.blendColor=new ks(this),this.blendEquation=new y_(this),this.cullFace=new v_(this),this.cullFaceSide=new __(this),this.frontFace=new x_(this),this.program=new b_(this),this.activeTexture=new w_(this),this.viewport=new Jh(this),this.bindFramebuffer=new Zu(this),this.bindRenderbuffer=new Qh(this),this.bindTexture=new ef(this),this.bindVertexBuffer=new Is(this),this.bindElementBuffer=new em(this),this.bindVertexArray=new tm(this),this.pixelStoreUnpack=new tf(this),this.pixelStoreUnpackPremultiplyAlpha=new Ro(this),this.pixelStoreUnpackFlipY=new rm(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),fo(a)){this.HALF_FLOAT=a.HALF_FLOAT;const g=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=a.RGBA16F)!==null&&h!==void 0?h:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=a.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const g=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,h){return new Bu(this,a,h)}createVertexBuffer(a,h,p){return new Fu(this,a,h,p)}createRenderbuffer(a,h,p){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,a,h,p),this.bindRenderbuffer.set(null),_}createFramebuffer(a,h,p,g){return new ur(this,a,h,p,g)}clear({color:a,depth:h,stencil:p}){const g=this.gl;let _=0;a&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),p!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(_)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){l.aG(a.blendFunction,jr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return fo(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var h;return fo(this.gl)?this.gl.deleteVertexArray(a):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}class rr{constructor(a,h,p){this.func=a,this.mask=h,this.range=p}}rr.ReadOnly=!1,rr.ReadWrite=!0,rr.disabled=new rr(519,rr.ReadOnly,[0,1]);const No=7680;class $r{constructor(a,h,p,g,_,A){this.test=a,this.ref=h,this.mask=p,this.fail=g,this.depthFail=_,this.pass=A}}$r.disabled=new $r({func:519,mask:0},0,0,No,No,No);class Or{constructor(a,h,p){this.enable=a,this.mode=h,this.frontFace=p}}let kl;function im(y,a,h,p,g,_,A){const E=y.context,I=E.gl,O=y.useProgram("collisionBox"),$=[];let N=0,K=0;for(let de=0;de<p.length;de++){const be=p[de],De=a.getTile(be),Le=De.getBucket(h);if(!Le)continue;let We=be.posMatrix;g[0]===0&&g[1]===0||(We=y.translatePosMatrix(be.posMatrix,De,g,_));const et=A?Le.textCollisionBox:Le.iconCollisionBox,Je=Le.collisionCircleArray;if(Je.length>0){const rt=l.Z(),bt=We;l.aU(rt,Le.placementInvProjMatrix,y.transform.glCoordMatrix),l.aU(rt,rt,Le.placementViewportMatrix),$.push({circleArray:Je,circleOffset:K,transform:bt,invTransform:rt,coord:be}),N+=Je.length/4,K=N}et&&O.draw(E,I.LINES,rr.disabled,$r.disabled,y.colorModeForRenderPass(),Or.disabled,Uh(We,y.transform,De),y.style.map.terrain&&y.style.map.terrain.getTerrainData(be),h.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,null,y.transform.zoom,null,null,et.collisionVertexBuffer)}if(!A||!$.length)return;const ae=y.useProgram("collisionCircle"),ie=new l.aV;ie.resize(4*N),ie._trim();let se=0;for(const de of $)for(let be=0;be<de.circleArray.length/4;be++){const De=4*be,Le=de.circleArray[De+0],We=de.circleArray[De+1],et=de.circleArray[De+2],Je=de.circleArray[De+3];ie.emplace(se++,Le,We,et,Je,0),ie.emplace(se++,Le,We,et,Je,1),ie.emplace(se++,Le,We,et,Je,2),ie.emplace(se++,Le,We,et,Je,3)}(!kl||kl.length<2*N)&&(kl=function(de){const be=2*de,De=new l.aX;De.resize(be),De._trim();for(let Le=0;Le<be;Le++){const We=6*Le;De.uint16[We+0]=4*Le+0,De.uint16[We+1]=4*Le+1,De.uint16[We+2]=4*Le+2,De.uint16[We+3]=4*Le+2,De.uint16[We+4]=4*Le+3,De.uint16[We+5]=4*Le+0}return De}(N));const re=E.createIndexBuffer(kl,!0),xe=E.createVertexBuffer(ie,l.aW.members,!0);for(const de of $){const be={u_matrix:de.transform,u_inv_matrix:de.invTransform,u_camera_to_center_distance:(Ie=y.transform).cameraToCenterDistance,u_viewport_size:[Ie.width,Ie.height]};ae.draw(E,I.TRIANGLES,rr.disabled,$r.disabled,y.colorModeForRenderPass(),Or.disabled,be,y.style.map.terrain&&y.style.map.terrain.getTerrainData(de.coord),h.id,xe,re,l.S.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Ie;xe.destroy(),re.destroy()}Or.disabled=new Or(!1,1029,2305),Or.backCCW=new Or(!0,1029,2305);const nf=l.ao(new Float32Array(16));function Hu(y,a,h,p,g,_){const{horizontalAlign:A,verticalAlign:E}=l.au(y);return new l.P((-(A-.5)*a/g+p[0])*_,(-(E-.5)*h/g+p[1])*_)}function Ku(y,a,h,p,g,_,A,E,I,O,$){const N=y.text.placedSymbolArray,K=y.text.dynamicLayoutVertexArray,ae=y.icon.dynamicLayoutVertexArray,ie={};K.clear();for(let se=0;se<N.length;se++){const re=N.get(se),xe=re.hidden||!re.crossTileID||y.allowVerticalPlacement&&!re.placedOrientation?null:p[re.crossTileID];if(xe){const Ie=new l.P(re.anchorX,re.anchorY),de=Fr(Ie,h?A:_,$),be=Lo(g.cameraToCenterDistance,de.signedDistanceFromCamera);let De=l.aj(y.textSizeData,I,re)*be/l.ap;h&&(De*=y.tilePixelRatio/E);const{width:Le,height:We,anchor:et,textOffset:Je,textBoxScale:rt}=xe,bt=Hu(et,Le,We,Je,rt,De),Xt=h?Fr(Ie.add(bt),_,$).point:de.point.add(a?bt.rotate(-g.angle):bt),ut=y.allowVerticalPlacement&&re.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let jt=0;jt<re.numGlyphs;jt++)l.ak(K,Xt,ut);O&&re.associatedIconIndex>=0&&(ie[re.associatedIconIndex]={shiftedAnchor:Xt,angle:ut})}else te(re.numGlyphs,K)}if(O){ae.clear();const se=y.icon.placedSymbolArray;for(let re=0;re<se.length;re++){const xe=se.get(re);if(xe.hidden)te(xe.numGlyphs,ae);else{const Ie=ie[re];if(Ie)for(let de=0;de<xe.numGlyphs;de++)l.ak(ae,Ie.shiftedAnchor,Ie.angle);else te(xe.numGlyphs,ae)}}y.icon.dynamicLayoutVertexBuffer.updateData(ae)}y.text.dynamicLayoutVertexBuffer.updateData(K)}function af(y,a,h){return h.iconsInText&&a?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Xu(y,a,h,p,g,_,A,E,I,O,$,N){const K=y.context,ae=K.gl,ie=y.transform,se=E==="map",re=I==="map",xe=E!=="viewport"&&h.layout.get("symbol-placement")!=="point",Ie=se&&!re&&!xe,de=!h.layout.get("symbol-sort-key").isConstant();let be=!1;const De=y.depthModeForSublayer(0,rr.ReadOnly),Le=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),We=[];for(const et of p){const Je=a.getTile(et),rt=Je.getBucket(h);if(!rt)continue;const bt=g?rt.text:rt.icon;if(!bt||!bt.segments.get().length||!bt.hasVisibleVertices)continue;const Xt=bt.programConfigurations.get(h.id),ut=g||rt.sdfIcons,jt=g?rt.textSizeData:rt.iconSizeData,St=re||ie.pitch!==0,mr=y.useProgram(af(ut,g,rt),Xt),Kt=l.ah(jt,ie.zoom),Gt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(et);let Yt,Yr,Tr,In,gn=[0,0],nn=null;if(g)Yr=Je.glyphAtlasTexture,Tr=ae.LINEAR,Yt=Je.glyphAtlasTexture.size,rt.iconsInText&&(gn=Je.imageAtlasTexture.size,nn=Je.imageAtlasTexture,In=St||y.options.rotating||y.options.zooming||jt.kind==="composite"||jt.kind==="camera"?ae.LINEAR:ae.NEAREST);else{const Jr=h.layout.get("icon-size").constantOr(0)!==1||rt.iconsNeedLinear;Yr=Je.imageAtlasTexture,Tr=ut||y.options.rotating||y.options.zooming||Jr||St?ae.LINEAR:ae.NEAREST,Yt=Je.imageAtlasTexture.size}const ki=ye(Je,1,y.transform.zoom),Cr=at(et.posMatrix,re,se,y.transform,ki),ya=pa(et.posMatrix,re,se,y.transform,ki),va=Le&&rt.hasTextData(),vo=h.layout.get("icon-text-fit")!=="none"&&va&&rt.hasIconData();if(xe){const Jr=y.style.map.terrain?(ci,Qr)=>y.style.map.terrain.getElevation(et,ci,Qr):null,yn=h.layout.get("text-rotation-alignment")==="map";lt(rt,et.posMatrix,y,g,Cr,ya,re,O,yn,Jr)}const qo=y.translatePosMatrix(et.posMatrix,Je,_,A),Rs=xe||g&&Le||vo?nf:Cr,Fn=y.translatePosMatrix(ya,Je,_,A,!0),Mn=ut&&h.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Jn;Jn=ut?rt.iconsInText?$o(jt.kind,Kt,Ie,re,y,qo,Rs,Fn,Yt,gn):Wh(jt.kind,Kt,Ie,re,y,qo,Rs,Fn,g,Yt):Gh(jt.kind,Kt,Ie,re,y,qo,Rs,Fn,g,Yt);const Go={program:mr,buffers:bt,uniformValues:Jn,atlasTexture:Yr,atlasTextureIcon:nn,atlasInterpolation:Tr,atlasInterpolationIcon:In,isSDF:ut,hasHalo:Mn};if(de&&rt.canOverlap){be=!0;const Jr=bt.segments.get();for(const yn of Jr)We.push({segments:new l.S([yn]),sortKey:yn.sortKey,state:Go,terrainData:Gt})}else We.push({segments:bt.segments,sortKey:0,state:Go,terrainData:Gt})}be&&We.sort((et,Je)=>et.sortKey-Je.sortKey);for(const et of We){const Je=et.state;if(K.activeTexture.set(ae.TEXTURE0),Je.atlasTexture.bind(Je.atlasInterpolation,ae.CLAMP_TO_EDGE),Je.atlasTextureIcon&&(K.activeTexture.set(ae.TEXTURE1),Je.atlasTextureIcon&&Je.atlasTextureIcon.bind(Je.atlasInterpolationIcon,ae.CLAMP_TO_EDGE)),Je.isSDF){const rt=Je.uniformValues;Je.hasHalo&&(rt.u_is_halo=1,of(Je.buffers,et.segments,h,y,Je.program,De,$,N,rt,et.terrainData)),rt.u_is_halo=0}of(Je.buffers,et.segments,h,y,Je.program,De,$,N,Je.uniformValues,et.terrainData)}}function of(y,a,h,p,g,_,A,E,I,O){const $=p.context;g.draw($,$.gl.TRIANGLES,_,A,E,Or.disabled,I,O,h.id,y.layoutVertexBuffer,y.indexBuffer,a,h.paint,p.transform.zoom,y.programConfigurations.get(h.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Il(y,a,h,p,g){if(!h||!p||!p.imageAtlas)return;const _=p.imageAtlas.patternPositions;let A=_[h.to.toString()],E=_[h.from.toString()];if(!A&&E&&(A=E),!E&&A&&(E=A),!A||!E){const I=g.getPaintProperty(a);A=_[I],E=_[I]}A&&E&&y.setConstantPatternPositions(A,E)}function Ml(y,a,h,p,g,_,A){const E=y.context.gl,I="fill-pattern",O=h.paint.get(I),$=O&&O.constantOr(1),N=h.getCrossfadeParameters();let K,ae,ie,se,re;A?(ae=$&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=E.LINES):(ae=$?"fillPattern":"fill",K=E.TRIANGLES);const xe=O.constantOr(null);for(const Ie of p){const de=a.getTile(Ie);if($&&!de.patternsLoaded())continue;const be=de.getBucket(h);if(!be)continue;const De=be.programConfigurations.get(h.id),Le=y.useProgram(ae,De),We=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ie);$&&(y.context.activeTexture.set(E.TEXTURE0),de.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),De.updatePaintBuffers(N)),Il(De,I,xe,de,h);const et=We?Ie:null,Je=y.translatePosMatrix(et?et.posMatrix:Ie.posMatrix,de,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(A){se=be.indexBuffer2,re=be.segments2;const rt=[E.drawingBufferWidth,E.drawingBufferHeight];ie=ae==="fillOutlinePattern"&&$?ju(Je,y,N,de,rt):Lu(Je,rt)}else se=be.indexBuffer,re=be.segments,ie=$?Fh(Je,y,N,de):Gp(Je);Le.draw(y.context,K,g,y.stencilModeForClipping(Ie),_,Or.disabled,ie,We,h.id,be.layoutVertexBuffer,se,re,h.paint,y.transform.zoom,De)}}function Ol(y,a,h,p,g,_,A){const E=y.context,I=E.gl,O="fill-extrusion-pattern",$=h.paint.get(O),N=$.constantOr(1),K=h.getCrossfadeParameters(),ae=h.paint.get("fill-extrusion-opacity"),ie=$.constantOr(null);for(const se of p){const re=a.getTile(se),xe=re.getBucket(h);if(!xe)continue;const Ie=y.style.map.terrain&&y.style.map.terrain.getTerrainData(se),de=xe.programConfigurations.get(h.id),be=y.useProgram(N?"fillExtrusionPattern":"fillExtrusion",de);N&&(y.context.activeTexture.set(I.TEXTURE0),re.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),de.updatePaintBuffers(K)),Il(de,O,ie,re,h);const De=y.translatePosMatrix(se.posMatrix,re,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Le=h.paint.get("fill-extrusion-vertical-gradient"),We=N?co(De,y,Le,ae,se,K,re):Bh(De,y,Le,ae);be.draw(E,E.gl.TRIANGLES,g,_,A,Or.backCCW,We,Ie,h.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,h.paint,y.transform.zoom,de,y.style.map.terrain&&xe.centroidVertexBuffer)}}function T_(y,a,h,p,g,_,A){const E=y.context,I=E.gl,O=h.fbo;if(!O)return;const $=y.useProgram("hillshade"),N=y.style.map.terrain&&y.style.map.terrain.getTerrainData(a);E.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,O.colorAttachment.get()),$.draw(E,I.TRIANGLES,g,_,A,Or.disabled,((K,ae,ie,se)=>{const re=ie.paint.get("hillshade-shadow-color"),xe=ie.paint.get("hillshade-highlight-color"),Ie=ie.paint.get("hillshade-accent-color");let de=ie.paint.get("hillshade-illumination-direction")*(Math.PI/180);ie.paint.get("hillshade-illumination-anchor")==="viewport"&&(de-=K.transform.angle);const be=!K.options.moving;return{u_matrix:se?se.posMatrix:K.transform.calculatePosMatrix(ae.tileID.toUnwrapped(),be),u_image:0,u_latrange:Vh(0,ae.tileID),u_light:[ie.paint.get("hillshade-exaggeration"),de],u_shadow:re,u_highlight:xe,u_accent:Ie}})(y,h,p,N?a:null),N,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function sf(y,a,h,p,g,_){const A=y.context,E=A.gl,I=a.dem;if(I&&I.data){const O=I.dim,$=I.stride,N=I.getPixels();if(A.activeTexture.set(E.TEXTURE1),A.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||y.getTileTexture($),a.demTexture){const ae=a.demTexture;ae.update(N,{premultiply:!1}),ae.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else a.demTexture=new Pe(A,N,E.RGBA,{premultiply:!1}),a.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);A.activeTexture.set(E.TEXTURE0);let K=a.fbo;if(!K){const ae=new Pe(A,{width:O,height:O,data:null},E.RGBA);ae.bind(E.LINEAR,E.CLAMP_TO_EDGE),K=a.fbo=A.createFramebuffer(O,O,!0,!1),K.colorAttachment.set(ae.texture)}A.bindFramebuffer.set(K.framebuffer),A.viewport.set([0,0,O,O]),y.useProgram("hillshadePrepare").draw(A,E.TRIANGLES,p,g,_,Or.disabled,((ae,ie)=>{const se=ie.stride,re=l.Z();return l.aS(re,0,l.N,-l.N,0,0,1),l.$(re,re,[0,-l.N,0]),{u_matrix:re,u_image:1,u_dimension:[se,se],u_zoom:ae.overscaledZ,u_unpack:ie.getUnpackVector()}})(a.tileID,I),null,h.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),a.needsHillshadePrepare=!1}}function P_(y,a,h,p,g,_){const A=p.paint.get("raster-fade-duration");if(!_&&A>0){const E=l.h.now(),I=(E-y.timeAdded)/A,O=a?(E-a.timeAdded)/A:-1,$=h.getSource(),N=g.coveringZoomLevel({tileSize:$.tileSize,roundZoom:$.roundZoom}),K=!a||Math.abs(a.tileID.overscaledZ-N)>Math.abs(y.tileID.overscaledZ-N),ae=K&&y.refreshedUponExpiration?1:l.ad(K?I:1-O,0,1);return y.refreshedUponExpiration&&I>=1&&(y.refreshedUponExpiration=!1),a?{opacity:1,mix:1-ae}:{opacity:ae,mix:0}}return{opacity:1,mix:0}}const am=new l.aT(1,0,0,1),Yu=new l.aT(0,1,0,1),lf=new l.aT(0,0,1,1),om=new l.aT(1,0,1,1),sm=new l.aT(0,1,1,1);function zl(y,a,h,p){Qu(y,0,a+h/2,y.transform.width,h,p)}function Ju(y,a,h,p){Qu(y,a-h/2,0,h,y.transform.height,p)}function Qu(y,a,h,p,g,_){const A=y.context,E=A.gl;E.enable(E.SCISSOR_TEST),E.scissor(a*y.pixelRatio,h*y.pixelRatio,p*y.pixelRatio,g*y.pixelRatio),A.clear({color:_}),E.disable(E.SCISSOR_TEST)}function lm(y,a,h){const p=y.context,g=p.gl,_=h.posMatrix,A=y.useProgram("debug"),E=rr.disabled,I=$r.disabled,O=y.colorModeForRenderPass(),$="$debug",N=y.style.map.terrain&&y.style.map.terrain.getTerrainData(h);p.activeTexture.set(g.TEXTURE0);const K=a.getTileByID(h.key).latestRawTileData,ae=Math.floor((K&&K.byteLength||0)/1024),ie=a.getTile(h).tileSize,se=512/Math.min(ie,512)*(h.overscaledZ/y.transform.zoom)*.5;let re=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(re+=` => ${h.overscaledZ}`),function(xe,Ie){xe.initDebugOverlayCanvas();const de=xe.debugOverlayCanvas,be=xe.context.gl,De=xe.debugOverlayCanvas.getContext("2d");De.clearRect(0,0,de.width,de.height),De.shadowColor="white",De.shadowBlur=2,De.lineWidth=1.5,De.strokeStyle="white",De.textBaseline="top",De.font="bold 36px Open Sans, sans-serif",De.fillText(Ie,5,5),De.strokeText(Ie,5,5),xe.debugOverlayTexture.update(de),xe.debugOverlayTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE)}(y,`${re} ${ae}kB`),A.draw(p,g.TRIANGLES,E,I,jr.alphaBlended,Or.disabled,El(_,l.aT.transparent,se),null,$,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),A.draw(p,g.LINE_STRIP,E,I,O,Or.disabled,El(_,l.aT.red),N,$,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Vr(y,a,h){const p=y.context,g=p.gl,_=y.colorModeForRenderPass(),A=new rr(g.LEQUAL,rr.ReadWrite,y.depthRangeFor3D),E=y.useProgram("terrain"),I=a.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const O of h){const $=y.renderToTexture.getTexture(O),N=a.getTerrainData(O.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,$.texture);const K={u_matrix:y.transform.calculatePosMatrix(O.tileID.toUnwrapped()),u_texture:0,u_ele_delta:a.getMeshFrameDelta(y.transform.zoom)};E.draw(p,g.TRIANGLES,A,$r.disabled,_,Or.backCCW,K,N,"terrain",I.vertexBuffer,I.indexBuffer,I.segments)}}class Bo{constructor(a,h){this.context=new S_(a),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.Z(),renderTime:0},this.setup(),this.numSublayers=Xr.maxUnderzooming+Xr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ou}resize(a,h,p){if(this.width=Math.floor(a*p),this.height=Math.floor(h*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const a=this.context,h=new l.a_;h.emplaceBack(0,0),h.emplaceBack(l.N,0),h.emplaceBack(0,l.N),h.emplaceBack(l.N,l.N),this.tileExtentBuffer=a.createVertexBuffer(h,zu.members),this.tileExtentSegments=l.S.simpleSegment(0,0,4,2);const p=new l.a_;p.emplaceBack(0,0),p.emplaceBack(l.N,0),p.emplaceBack(0,l.N),p.emplaceBack(l.N,l.N),this.debugBuffer=a.createVertexBuffer(p,zu.members),this.debugSegments=l.S.simpleSegment(0,0,4,5);const g=new l.V;g.emplaceBack(0,0,0,0),g.emplaceBack(l.N,0,l.N,0),g.emplaceBack(0,l.N,0,l.N),g.emplaceBack(l.N,l.N,l.N,l.N),this.rasterBoundsBuffer=a.createVertexBuffer(g,Ye.members),this.rasterBoundsSegments=l.S.simpleSegment(0,0,4,2);const _=new l.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(_,zu.members),this.viewportSegments=l.S.simpleSegment(0,0,4,2);const A=new l.a$;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(A);const E=new l.b0;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(E);const I=this.context.gl;this.stencilClearMode=new $r({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)}clearStencil(){const a=this.context,h=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=l.Z();l.aS(p,0,this.width,this.height,0,0,1),l.a0(p,p,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(a,h.TRIANGLES,rr.disabled,this.stencilClearMode,jr.disabled,Or.disabled,Wp(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,h){if(this.currentStencilSource===a.source||!a.isTileClipped()||!h||!h.length)return;this.currentStencilSource=a.source;const p=this.context,g=p.gl;this.nextStencilID+h.length>256&&this.clearStencil(),p.setColorMode(jr.disabled),p.setDepthMode(rr.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of h){const E=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,I=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A);_.draw(p,g.TRIANGLES,rr.disabled,new $r({func:g.ALWAYS,mask:0},E,255,g.KEEP,g.KEEP,g.REPLACE),jr.disabled,Or.disabled,Wp(A.posMatrix),I,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,h=this.context.gl;return new $r({func:h.NOTEQUAL,mask:255},a,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(a){const h=this.context.gl;return new $r({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(a){const h=this.context.gl,p=a.sort((A,E)=>E.overscaledZ-A.overscaledZ),g=p[p.length-1].overscaledZ,_=p[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const A={};for(let E=0;E<_;E++)A[E+g]=new $r({func:h.GEQUAL,mask:255},E+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=_,[A,p]}return[{[g]:$r.disabled},p]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new jr([a.CONSTANT_COLOR,a.ONE],new l.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?jr.unblended:jr.alphaBlended}depthModeForSublayer(a,h,p){if(!this.opaquePassEnabledForLayer())return rr.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new rr(p||this.context.gl.LEQUAL,h,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,h){this.style=a,this.options=h,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(l.h.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,_={},A={},E={};for(const I in g){const O=g[I];O.used&&O.prepare(this.context),_[I]=O.getVisibleCoordinates(),A[I]=_[I].slice().reverse(),E[I]=O.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<p.length;I++)if(this.style._layers[p[I]].is3D()){this.opaquePassCutoff=I;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const I=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||I.length)&&(l.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(O,$){const N=O.context,K=N.gl,ae=jr.unblended,ie=new rr(K.LEQUAL,rr.ReadWrite,[0,1]),se=$.getTerrainMesh(),re=$.sourceCache.getRenderableTiles(),xe=O.useProgram("terrainDepth");N.bindFramebuffer.set($.getFramebuffer("depth").framebuffer),N.viewport.set([0,0,O.width/devicePixelRatio,O.height/devicePixelRatio]),N.clear({color:l.aT.transparent,depth:1});for(const Ie of re){const de=$.getTerrainData(Ie.tileID),be={u_matrix:O.transform.calculatePosMatrix(Ie.tileID.toUnwrapped()),u_ele_delta:$.getMeshFrameDelta(O.transform.zoom)};xe.draw(N,K.TRIANGLES,ie,$r.disabled,ae,Or.backCCW,be,de,"terrain",se.vertexBuffer,se.indexBuffer,se.segments)}N.bindFramebuffer.set(null),N.viewport.set([0,0,O.width,O.height])}(this,this.style.map.terrain),function(O,$){const N=O.context,K=N.gl,ae=jr.unblended,ie=new rr(K.LEQUAL,rr.ReadWrite,[0,1]),se=$.getTerrainMesh(),re=$.getCoordsTexture(),xe=$.sourceCache.getRenderableTiles(),Ie=O.useProgram("terrainCoords");N.bindFramebuffer.set($.getFramebuffer("coords").framebuffer),N.viewport.set([0,0,O.width/devicePixelRatio,O.height/devicePixelRatio]),N.clear({color:l.aT.transparent,depth:1}),$.coordsIndex=[];for(const de of xe){const be=$.getTerrainData(de.tileID);N.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,re.texture);const De={u_matrix:O.transform.calculatePosMatrix(de.tileID.toUnwrapped()),u_terrain_coords_id:(255-$.coordsIndex.length)/255,u_texture:0,u_ele_delta:$.getMeshFrameDelta(O.transform.zoom)};Ie.draw(N,K.TRIANGLES,ie,$r.disabled,ae,Or.backCCW,De,be,"terrain",se.vertexBuffer,se.indexBuffer,se.segments),$.coordsIndex.push(de.tileID.key)}N.bindFramebuffer.set(null),N.viewport.set([0,0,O.width,O.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const I of p){const O=this.style._layers[I];if(!O.hasOffscreenPass()||O.isHidden(this.transform.zoom))continue;const $=A[O.source];(O.type==="custom"||$.length)&&this.renderLayer(this,g[O.source],O,$)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?l.aT.black:l.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const I=this.style._layers[p[this.currentLayer]],O=g[I.source],$=_[I.source];this._renderTileClippingMasks(I,$),this.renderLayer(this,O,I,$)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const I=this.style._layers[p[this.currentLayer]],O=g[I.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(I))continue;const $=(I.type==="symbol"?E:A)[I.source];this._renderTileClippingMasks(I,_[I.source]),this.renderLayer(this,O,I,$)}if(this.options.showTileBoundaries){const I=function(O,$){let N=null;const K=Object.values(O._layers).flatMap(re=>re.source&&!re.isHidden($)?[O.sourceCaches[re.source]]:[]),ae=K.filter(re=>re.getSource().type==="vector"),ie=K.filter(re=>re.getSource().type!=="vector"),se=re=>{(!N||N.getSource().maxzoom<re.getSource().maxzoom)&&(N=re)};return ae.forEach(re=>se(re)),N||ie.forEach(re=>se(re)),N}(this.style,this.transform.zoom);I&&function(O,$,N){for(let K=0;K<N.length;K++)lm(O,$,N[K])}(this,I,I.getVisibleCoordinates())}this.options.showPadding&&function(I){const O=I.transform.padding;zl(I,I.transform.height-(O.top||0),3,am),zl(I,O.bottom||0,3,Yu),Ju(I,O.left||0,3,lf),Ju(I,I.transform.width-(O.right||0),3,om);const $=I.transform.centerPoint;(function(N,K,ae,ie){Qu(N,K-1,ae-10,2,20,ie),Qu(N,K-10,ae-1,20,2,ie)})(I,$.x,I.transform.height-$.y,sm)}(this),this.context.setDefault()}renderLayer(a,h,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(_,A,E,I,O){if(_.renderPass!=="translucent")return;const $=$r.disabled,N=_.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(K,ae,ie,se,re,xe,Ie){const de=ae.transform,be=re==="map",De=xe==="map";for(const Le of K){const We=se.getTile(Le),et=We.getBucket(ie);if(!et||!et.text||!et.text.segments.get().length)continue;const Je=l.ah(et.textSizeData,de.zoom),rt=ye(We,1,ae.transform.zoom),bt=at(Le.posMatrix,De,be,ae.transform,rt),Xt=ie.layout.get("icon-text-fit")!=="none"&&et.hasIconData();if(Je){const ut=Math.pow(2,de.zoom-We.tileID.overscaledZ);Ku(et,be,De,Ie,de,bt,Le.posMatrix,ut,Je,Xt,ae.style.map.terrain?(jt,St)=>ae.style.map.terrain.getElevation(Le,jt,St):null)}}}(I,_,E,A,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),O),E.paint.get("icon-opacity").constantOr(1)!==0&&Xu(_,A,E,I,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),$,N),E.paint.get("text-opacity").constantOr(1)!==0&&Xu(_,A,E,I,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),$,N),A.map.showCollisionBoxes&&(im(_,A,E,I,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),!0),im(_,A,E,I,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),!1))})(a,h,p,g,this.style.placement.variableOffsets);break;case"circle":(function(_,A,E,I){if(_.renderPass!=="translucent")return;const O=E.paint.get("circle-opacity"),$=E.paint.get("circle-stroke-width"),N=E.paint.get("circle-stroke-opacity"),K=!E.layout.get("circle-sort-key").isConstant();if(O.constantOr(1)===0&&($.constantOr(1)===0||N.constantOr(1)===0))return;const ae=_.context,ie=ae.gl,se=_.depthModeForSublayer(0,rr.ReadOnly),re=$r.disabled,xe=_.colorModeForRenderPass(),Ie=[];for(let de=0;de<I.length;de++){const be=I[de],De=A.getTile(be),Le=De.getBucket(E);if(!Le)continue;const We=Le.programConfigurations.get(E.id),et=_.useProgram("circle",We),Je=Le.layoutVertexBuffer,rt=Le.indexBuffer,bt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(be),Xt={programConfiguration:We,program:et,layoutVertexBuffer:Je,indexBuffer:rt,uniformValues:ho(_,be,De,E),terrainData:bt};if(K){const ut=Le.segments.get();for(const jt of ut)Ie.push({segments:new l.S([jt]),sortKey:jt.sortKey,state:Xt})}else Ie.push({segments:Le.segments,sortKey:0,state:Xt})}K&&Ie.sort((de,be)=>de.sortKey-be.sortKey);for(const de of Ie){const{programConfiguration:be,program:De,layoutVertexBuffer:Le,indexBuffer:We,uniformValues:et,terrainData:Je}=de.state;De.draw(ae,ie.TRIANGLES,se,re,xe,Or.disabled,et,Je,E.id,Le,We,de.segments,E.paint,_.transform.zoom,be)}})(a,h,p,g);break;case"heatmap":(function(_,A,E,I){if(E.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const O=_.context,$=O.gl,N=$r.disabled,K=new jr([$.ONE,$.ONE],l.aT.transparent,[!0,!0,!0,!0]);(function(ae,ie,se){const re=ae.gl;ae.activeTexture.set(re.TEXTURE1),ae.viewport.set([0,0,ie.width/4,ie.height/4]);let xe=se.heatmapFbo;if(xe)re.bindTexture(re.TEXTURE_2D,xe.colorAttachment.get()),ae.bindFramebuffer.set(xe.framebuffer);else{const Ie=re.createTexture();re.bindTexture(re.TEXTURE_2D,Ie),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_S,re.CLAMP_TO_EDGE),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_T,re.CLAMP_TO_EDGE),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MIN_FILTER,re.LINEAR),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MAG_FILTER,re.LINEAR),xe=se.heatmapFbo=ae.createFramebuffer(ie.width/4,ie.height/4,!1,!1),function(de,be,De,Le){var We,et;const Je=de.gl,rt=(We=de.HALF_FLOAT)!==null&&We!==void 0?We:Je.UNSIGNED_BYTE,bt=(et=de.RGBA16F)!==null&&et!==void 0?et:Je.RGBA;Je.texImage2D(Je.TEXTURE_2D,0,bt,be.width/4,be.height/4,0,Je.RGBA,rt,null),Le.colorAttachment.set(De)}(ae,ie,Ie,xe)}})(O,_,E),O.clear({color:l.aT.transparent});for(let ae=0;ae<I.length;ae++){const ie=I[ae];if(A.hasRenderableParent(ie))continue;const se=A.getTile(ie),re=se.getBucket(E);if(!re)continue;const xe=re.programConfigurations.get(E.id),Ie=_.useProgram("heatmap",xe),{zoom:de}=_.transform;Ie.draw(O,$.TRIANGLES,rr.disabled,N,K,Or.disabled,m_(ie.posMatrix,se,de,E.paint.get("heatmap-intensity")),null,E.id,re.layoutVertexBuffer,re.indexBuffer,re.segments,E.paint,_.transform.zoom,xe)}O.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(O,$){const N=O.context,K=N.gl,ae=$.heatmapFbo;if(!ae)return;N.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,ae.colorAttachment.get()),N.activeTexture.set(K.TEXTURE1);let ie=$.colorRampTexture;ie||(ie=$.colorRampTexture=new Pe(N,$.colorRamp,K.RGBA)),ie.bind(K.LINEAR,K.CLAMP_TO_EDGE),O.useProgram("heatmapTexture").draw(N,K.TRIANGLES,rr.disabled,$r.disabled,O.colorModeForRenderPass(),Or.disabled,((se,re,xe,Ie)=>{const de=l.Z();l.aS(de,0,se.width,se.height,0,0,1);const be=se.context.gl;return{u_matrix:de,u_world:[be.drawingBufferWidth,be.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:re.paint.get("heatmap-opacity")}})(O,$),null,$.id,O.viewportBuffer,O.quadTriangleIndexBuffer,O.viewportSegments,$.paint,O.transform.zoom)}(_,E))})(a,h,p,g);break;case"line":(function(_,A,E,I){if(_.renderPass!=="translucent")return;const O=E.paint.get("line-opacity"),$=E.paint.get("line-width");if(O.constantOr(1)===0||$.constantOr(1)===0)return;const N=_.depthModeForSublayer(0,rr.ReadOnly),K=_.colorModeForRenderPass(),ae=E.paint.get("line-dasharray"),ie=E.paint.get("line-pattern"),se=ie.constantOr(1),re=E.paint.get("line-gradient"),xe=E.getCrossfadeParameters(),Ie=se?"linePattern":ae?"lineSDF":re?"lineGradient":"line",de=_.context,be=de.gl;let De=!0;for(const Le of I){const We=A.getTile(Le);if(se&&!We.patternsLoaded())continue;const et=We.getBucket(E);if(!et)continue;const Je=et.programConfigurations.get(E.id),rt=_.context.program.get(),bt=_.useProgram(Ie,Je),Xt=De||bt.program!==rt,ut=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Le),jt=ie.constantOr(null);if(jt&&We.imageAtlas){const Kt=We.imageAtlas,Gt=Kt.patternPositions[jt.to.toString()],Yt=Kt.patternPositions[jt.from.toString()];Gt&&Yt&&Je.setConstantPatternPositions(Gt,Yt)}const St=ut?Le:null,mr=se?g_(_,We,E,xe,St):ae?Hp(_,We,E,ae,xe,St):re?Zp(_,We,E,et.lineClipsArray.length,St):qh(_,We,E,St);if(se)de.activeTexture.set(be.TEXTURE0),We.imageAtlasTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE),Je.updatePaintBuffers(xe);else if(ae&&(Xt||_.lineAtlas.dirty))de.activeTexture.set(be.TEXTURE0),_.lineAtlas.bind(de);else if(re){const Kt=et.gradients[E.id];let Gt=Kt.texture;if(E.gradientVersion!==Kt.version){let Yt=256;if(E.stepInterpolant){const Yr=A.getSource().maxzoom,Tr=Le.canonical.z===Yr?Math.ceil(1<<_.transform.maxZoom-Le.canonical.z):1;Yt=l.ad(l.aY(et.maxLineLength/l.N*1024*Tr),256,de.maxTextureSize)}Kt.gradient=l.aZ({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:Yt,image:Kt.gradient||void 0,clips:et.lineClipsArray}),Kt.texture?Kt.texture.update(Kt.gradient):Kt.texture=new Pe(de,Kt.gradient,be.RGBA),Kt.version=E.gradientVersion,Gt=Kt.texture}de.activeTexture.set(be.TEXTURE0),Gt.bind(E.stepInterpolant?be.NEAREST:be.LINEAR,be.CLAMP_TO_EDGE)}bt.draw(de,be.TRIANGLES,N,_.stencilModeForClipping(Le),K,Or.disabled,mr,ut,E.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,E.paint,_.transform.zoom,Je,et.layoutVertexBuffer2),De=!1}})(a,h,p,g);break;case"fill":(function(_,A,E,I){const O=E.paint.get("fill-color"),$=E.paint.get("fill-opacity");if($.constantOr(1)===0)return;const N=_.colorModeForRenderPass(),K=E.paint.get("fill-pattern"),ae=_.opaquePassEnabledForLayer()&&!K.constantOr(1)&&O.constantOr(l.aT.transparent).a===1&&$.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===ae){const ie=_.depthModeForSublayer(1,_.renderPass==="opaque"?rr.ReadWrite:rr.ReadOnly);Ml(_,A,E,I,ie,N,!1)}if(_.renderPass==="translucent"&&E.paint.get("fill-antialias")){const ie=_.depthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,rr.ReadOnly);Ml(_,A,E,I,ie,N,!0)}})(a,h,p,g);break;case"fill-extrusion":(function(_,A,E,I){const O=E.paint.get("fill-extrusion-opacity");if(O!==0&&_.renderPass==="translucent"){const $=new rr(_.context.gl.LEQUAL,rr.ReadWrite,_.depthRangeFor3D);if(O!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))Ol(_,A,E,I,$,$r.disabled,jr.disabled),Ol(_,A,E,I,$,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const N=_.colorModeForRenderPass();Ol(_,A,E,I,$,$r.disabled,N)}}})(a,h,p,g);break;case"hillshade":(function(_,A,E,I){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const O=_.context,$=_.depthModeForSublayer(0,rr.ReadOnly),N=_.colorModeForRenderPass(),[K,ae]=_.renderPass==="translucent"?_.stencilConfigForOverlap(I):[{},I];for(const ie of ae){const se=A.getTile(ie);se.needsHillshadePrepare!==void 0&&se.needsHillshadePrepare&&_.renderPass==="offscreen"?sf(_,se,E,$,$r.disabled,N):_.renderPass==="translucent"&&T_(_,ie,se,E,$,K[ie.overscaledZ],N)}O.viewport.set([0,0,_.width,_.height])})(a,h,p,g);break;case"raster":(function(_,A,E,I){if(_.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!I.length)return;const O=_.context,$=O.gl,N=A.getSource(),K=_.useProgram("raster"),ae=_.colorModeForRenderPass(),[ie,se]=N instanceof nt?[{},I]:_.stencilConfigForOverlap(I),re=se[se.length-1].overscaledZ,xe=!_.options.moving;for(const Ie of se){const de=_.depthModeForSublayer(Ie.overscaledZ-re,E.paint.get("raster-opacity")===1?rr.ReadWrite:rr.ReadOnly,$.LESS),be=A.getTile(Ie);be.registerFadeDuration(E.paint.get("raster-fade-duration"));const De=A.findLoadedParent(Ie,0),Le=P_(be,De,A,E,_.transform,_.style.map.terrain);let We,et;const Je=E.paint.get("raster-resampling")==="nearest"?$.NEAREST:$.LINEAR;O.activeTexture.set($.TEXTURE0),be.texture.bind(Je,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),O.activeTexture.set($.TEXTURE1),De?(De.texture.bind(Je,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),We=Math.pow(2,De.tileID.overscaledZ-be.tileID.overscaledZ),et=[be.tileID.canonical.x*We%1,be.tileID.canonical.y*We%1]):be.texture.bind(Je,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST);const rt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ie),bt=rt?Ie:null,Xt=bt?bt.posMatrix:_.transform.calculatePosMatrix(Ie.toUnwrapped(),xe),ut=Xp(Xt,et||[0,0],We||1,Le,E);N instanceof nt?K.draw(O,$.TRIANGLES,de,$r.disabled,ae,Or.disabled,ut,rt,E.id,N.boundsBuffer,_.quadTriangleIndexBuffer,N.boundsSegments):K.draw(O,$.TRIANGLES,de,ie[Ie.overscaledZ],ae,Or.disabled,ut,rt,E.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(a,h,p,g);break;case"background":(function(_,A,E,I){const O=E.paint.get("background-color"),$=E.paint.get("background-opacity");if($===0)return;const N=_.context,K=N.gl,ae=_.transform,ie=ae.tileSize,se=E.paint.get("background-pattern");if(_.isPatternMissing(se))return;const re=!se&&O.a===1&&$===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==re)return;const xe=$r.disabled,Ie=_.depthModeForSublayer(0,re==="opaque"?rr.ReadWrite:rr.ReadOnly),de=_.colorModeForRenderPass(),be=_.useProgram(se?"backgroundPattern":"background"),De=I||ae.coveringTiles({tileSize:ie,terrain:_.style.map.terrain});se&&(N.activeTexture.set(K.TEXTURE0),_.imageManager.bind(_.context));const Le=E.getCrossfadeParameters();for(const We of De){const et=I?We.posMatrix:_.transform.calculatePosMatrix(We.toUnwrapped()),Je=se?Vi(et,$,_,se,{tileID:We,tileSize:ie},Le):Ru(et,$,O),rt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(We);be.draw(N,K.TRIANGLES,Ie,xe,de,Or.disabled,Je,rt,E.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(a,0,p,g);break;case"custom":(function(_,A,E){const I=_.context,O=E.implementation;if(_.renderPass==="offscreen"){const $=O.prerender;$&&(_.setCustomLayerDefaults(),I.setColorMode(_.colorModeForRenderPass()),$.call(O,I.gl,_.transform.customLayerMatrix()),I.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),I.setColorMode(_.colorModeForRenderPass()),I.setStencilMode($r.disabled);const $=O.renderingMode==="3d"?new rr(_.context.gl.LEQUAL,rr.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,rr.ReadOnly);I.setDepthMode($),O.render(I.gl,_.transform.customLayerMatrix()),I.setDirty(),_.setBaseState(),I.bindFramebuffer.set(null)}})(a,0,p)}}translatePosMatrix(a,h,p,g,_){if(!p[0]&&!p[1])return a;const A=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(A){const O=Math.sin(A),$=Math.cos(A);p=[p[0]*$-p[1]*O,p[0]*O+p[1]*$]}const E=[_?p[0]:ye(h,p[0],this.transform.zoom),_?p[1]:ye(h,p[1],this.transform.zoom),0],I=new Float32Array(16);return l.$(I,a,E),I}saveTileTexture(a){const h=this._tileTextures[a.size[0]];h?h.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const h=this._tileTextures[a];return h&&h.length>0?h.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const h=this.imageManager.getPattern(a.from.toString()),p=this.imageManager.getPattern(a.to.toString());return!h||!p}useProgram(a,h){this.cache=this.cache||{};const p=a+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Du(this.context,Lr[a],h,Nu[a],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Pe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:h}=this.context.gl;return this.width!==a||this.height!==h}}class li{constructor(a,h){this.points=a,this.planes=h}static fromInvProjectionMatrix(a,h,p){const g=Math.pow(2,p),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const I=1/(E=l.ag([],E,a))[3]/h*g;return l.b3(E,E,[I,I,1/E[3],I])}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const I=function(K,ae){var ie=ae[0],se=ae[1],re=ae[2],xe=ie*ie+se*se+re*re;return xe>0&&(xe=1/Math.sqrt(xe)),K[0]=ae[0]*xe,K[1]=ae[1]*xe,K[2]=ae[2]*xe,K}([],function(K,ae,ie){var se=ae[0],re=ae[1],xe=ae[2],Ie=ie[0],de=ie[1],be=ie[2];return K[0]=re*be-xe*de,K[1]=xe*Ie-se*be,K[2]=se*de-re*Ie,K}([],W([],_[E[0]],_[E[1]]),W([],_[E[2]],_[E[1]]))),O=-(($=I)[0]*(N=_[E[1]])[0]+$[1]*N[1]+$[2]*N[2]);var $,N;return I.concat(O)});return new li(_,A)}}class Os{constructor(a,h){this.min=a,this.max=h,this.center=function(p,g,_){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,_){return p[0]=g[0]+_[0],p[1]=g[1]+_[1],p[2]=g[2]+_[2],p}([],this.min,this.max))}quadrant(a){const h=[a%2==0,a<2],p=X(this.min),g=X(this.max);for(let _=0;_<h.length;_++)p[_]=h[_]?this.min[_]:this.center[_],g[_]=h[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new Os(p,g)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersects(a){const h=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<a.planes.length;g++){const _=a.planes[g];let A=0;for(let E=0;E<h.length;E++)l.b4(_,h[E])>=0&&A++;if(A===0)return 0;A!==h.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let E=0;E<a.points.length;E++){const I=a.points[E][g]-this.min[g];_=Math.min(_,I),A=Math.max(A,I)}if(A<0||_>this.max[g]-this.min[g])return 0}return 1}}class Dl{constructor(a=0,h=0,p=0,g=0){if(isNaN(a)||a<0||isNaN(h)||h<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=h,this.left=p,this.right=g}interpolate(a,h,p){return h.top!=null&&a.top!=null&&(this.top=l.B.number(a.top,h.top,p)),h.bottom!=null&&a.bottom!=null&&(this.bottom=l.B.number(a.bottom,h.bottom,p)),h.left!=null&&a.left!=null&&(this.left=l.B.number(a.left,h.left,p)),h.right!=null&&a.right!=null&&(this.right=l.B.number(a.right,h.right,p)),this}getCenter(a,h){const p=l.ad((this.left+a-this.right)/2,0,a),g=l.ad((this.top+h-this.bottom)/2,0,h);return new l.P(p,g)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new Dl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class ec{constructor(a,h,p,g,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=a||0,this._maxZoom=h||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Dl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const a=new ec(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return a.apply(this),a}apply(a){this.tileSize=a.tileSize,this.latRange=a.latRange,this.width=a.width,this.height=a.height,this._center=a._center,this._elevation=a._elevation,this._minEleveationForCurrentTile=a._minEleveationForCurrentTile,this.zoom=a.zoom,this.angle=a.angle,this._fov=a._fov,this._pitch=a._pitch,this._unmodified=a._unmodified,this._edgeInsets=a._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(a){const h=-l.b5(a,-180,180)*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=function(){var p=new l.A(4);return l.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,_){var A=g[0],E=g[1],I=g[2],O=g[3],$=Math.sin(_),N=Math.cos(_);p[0]=A*N+I*$,p[1]=E*N+O*$,p[2]=A*-$+I*N,p[3]=E*-$+O*N}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const h=l.ad(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(a){const h=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.tileZoom=Math.max(0,Math.floor(h)),this.scale=this.zoomScale(h),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,h,p){this._unmodified=!1,this._edgeInsets.interpolate(a,h,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const h=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(a){const h=[new l.b6(0,a)];if(this._renderWorldCopies){const p=this.pointCoordinate(new l.P(0,0)),g=this.pointCoordinate(new l.P(this.width,0)),_=this.pointCoordinate(new l.P(this.width,this.height)),A=this.pointCoordinate(new l.P(0,this.height)),E=Math.floor(Math.min(p.x,g.x,_.x,A.x)),I=Math.floor(Math.max(p.x,g.x,_.x,A.x)),O=1;for(let $=E-O;$<=I+O;$++)$!==0&&h.push(new l.b6($,a))}return h}coveringTiles(a){var h,p;let g=this.coveringZoomLevel(a);const _=g;if(a.minzoom!==void 0&&g<a.minzoom)return[];a.maxzoom!==void 0&&g>a.maxzoom&&(g=a.maxzoom);const A=this.pointCoordinate(this.getCameraPoint()),E=l.U.fromLngLat(this.center),I=Math.pow(2,g),O=[I*A.x,I*A.y,0],$=[I*E.x,I*E.y,0],N=li.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let K=a.minzoom||0;!a.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(K=g);const ae=a.terrain?2/Math.min(this.tileSize,a.tileSize)*this.tileSize:3,ie=de=>({aabb:new Os([de*I,0,0],[(de+1)*I,I,0]),zoom:0,x:0,y:0,wrap:de,fullyVisible:!1}),se=[],re=[],xe=g,Ie=a.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let de=1;de<=3;de++)se.push(ie(-de)),se.push(ie(de));for(se.push(ie(0));se.length>0;){const de=se.pop(),be=de.x,De=de.y;let Le=de.fullyVisible;if(!Le){const bt=de.aabb.intersects(N);if(bt===0)continue;Le=bt===2}const We=a.terrain?O:$,et=de.aabb.distanceX(We),Je=de.aabb.distanceY(We),rt=Math.max(Math.abs(et),Math.abs(Je));if(de.zoom===xe||rt>ae+(1<<xe-de.zoom)-2&&de.zoom>=K){const bt=xe-de.zoom,Xt=O[0]-.5-(be<<bt),ut=O[1]-.5-(De<<bt);re.push({tileID:new l.O(de.zoom===xe?Ie:de.zoom,de.wrap,de.zoom,be,De),distanceSq:ee([$[0]-.5-be,$[1]-.5-De]),tileDistanceToCamera:Math.sqrt(Xt*Xt+ut*ut)})}else for(let bt=0;bt<4;bt++){const Xt=(be<<1)+bt%2,ut=(De<<1)+(bt>>1),jt=de.zoom+1;let St=de.aabb.quadrant(bt);if(a.terrain){const mr=new l.O(jt,de.wrap,jt,Xt,ut),Kt=a.terrain.getMinMaxElevation(mr),Gt=(h=Kt.minElevation)!==null&&h!==void 0?h:this.elevation,Yt=(p=Kt.maxElevation)!==null&&p!==void 0?p:this.elevation;St=new Os([St.min[0],St.min[1],Gt],[St.max[0],St.max[1],Yt])}se.push({aabb:St,zoom:jt,x:Xt,y:ut,wrap:de.wrap,fullyVisible:Le})}}return re.sort((de,be)=>de.distanceSq-be.distanceSq).map(de=>de.tileID)}resize(a,h){this.width=a,this.height=h,this.pixelsToGLUnits=[2/a,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const h=l.ad(a.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.P(l.G(a.lng)*this.worldSize,l.H(h)*this.worldSize)}unproject(a){return new l.U(a.x/this.worldSize,a.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(a){const h=this.pointLocation(this.centerPoint,a),p=a.getElevationForLngLatZoom(h,this.tileZoom);if(!(this.elevation-p))return;const g=this.getCameraPosition(),_=l.U.fromLngLat(g.lngLat,g.altitude),A=l.U.fromLngLat(h,p),E=_.x-A.x,I=_.y-A.y,O=_.z-A.z,$=Math.sqrt(E*E+I*I+O*O),N=this.scaleZoom(this.cameraToCenterDistance/$/this.tileSize);this._elevation=p,this._center=h,this.zoom=N}setLocationAtPoint(a,h){const p=this.pointCoordinate(h),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(a),A=new l.U(_.x-(p.x-g.x),_.y-(p.y-g.y));this.center=this.coordinateLocation(A),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(a,h){return h?this.coordinatePoint(this.locationCoordinate(a),h.getElevationForLngLatZoom(a,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(a))}pointLocation(a,h){return this.coordinateLocation(this.pointCoordinate(a,h))}locationCoordinate(a){return l.U.fromLngLat(a)}coordinateLocation(a){return a&&a.toLngLat()}pointCoordinate(a,h){if(h){const K=h.pointCoordinate(a);if(K!=null)return K}const p=[a.x,a.y,0,1],g=[a.x,a.y,1,1];l.ag(p,p,this.pixelMatrixInverse),l.ag(g,g,this.pixelMatrixInverse);const _=p[3],A=g[3],E=p[1]/_,I=g[1]/A,O=p[2]/_,$=g[2]/A,N=O===$?0:(0-O)/($-O);return new l.U(l.B.number(p[0]/_,g[0]/A,N)/this.worldSize,l.B.number(E,I,N)/this.worldSize)}coordinatePoint(a,h=0,p=this.pixelMatrix){const g=[a.x*this.worldSize,a.y*this.worldSize,h,1];return l.ag(g,g,p),new l.P(g[0]/g[3],g[1]/g[3])}getBounds(){const a=Math.max(0,this.height/2-this.getHorizon());return new Qe().extend(this.pointLocation(new l.P(0,a))).extend(this.pointLocation(new l.P(this.width,a))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Qe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(a){a?(this.lngRange=[a.getWest(),a.getEast()],this.latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(a,h=!1){const p=a.key,g=h?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const _=a.canonical,A=this.worldSize/this.zoomScale(_.z),E=_.x+Math.pow(2,_.z)*a.wrap,I=l.ao(new Float64Array(16));return l.$(I,I,[E*A,_.y*A,0]),l.a0(I,I,[A/l.N,A/l.N,1]),l.a1(I,h?this.alignedProjMatrix:this.projMatrix,I),g[p]=new Float32Array(I),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let a,h,p,g,_=-90,A=90,E=-180,I=180;const O=this.size,$=this._unmodified;if(this.latRange){const ae=this.latRange;_=l.H(ae[1])*this.worldSize,A=l.H(ae[0])*this.worldSize,a=A-_<O.y?O.y/(A-_):0}if(this.lngRange){const ae=this.lngRange;E=l.b5(l.G(ae[0])*this.worldSize,0,this.worldSize),I=l.b5(l.G(ae[1])*this.worldSize,0,this.worldSize),I<E&&(I+=this.worldSize),h=I-E<O.x?O.x/(I-E):0}const N=this.point,K=Math.max(h||0,a||0);if(K)return this.center=this.unproject(new l.P(h?(I+E)/2:N.x,a?(A+_)/2:N.y)),this.zoom+=this.scaleZoom(K),this._unmodified=$,void(this._constraining=!1);if(this.latRange){const ae=N.y,ie=O.y/2;ae-ie<_&&(g=_+ie),ae+ie>A&&(g=A-ie)}if(this.lngRange){const ae=(E+I)/2,ie=l.b5(N.x,ae-this.worldSize/2,ae+this.worldSize/2),se=O.x/2;ie-se<E&&(p=E+se),ie+se>I&&(p=I-se)}p===void 0&&g===void 0||(this.center=this.unproject(new l.P(p!==void 0?p:N.x,g!==void 0?g:N.y)).wrap()),this._unmodified=$,this._constraining=!1}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,h=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b7(1,this.center.lat)*this.worldSize;let g=l.ao(new Float64Array(16));l.a0(g,g,[this.width/2,-this.height/2,1]),l.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=l.ao(new Float64Array(16)),l.a0(g,g,[1,-1,1]),l.$(g,g,[-1,-1,0]),l.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),A=Math.min(this.elevation,this._minEleveationForCurrentTile),E=_-A*this._pixelPerMeter/Math.cos(this._pitch),I=A<0?E:_,O=Math.PI/2+this._pitch,$=this._fov*(.5+a.y/this.height),N=Math.sin($)*I/Math.sin(l.ad(Math.PI-O-$,.01,Math.PI-.01)),K=this.getHorizon(),ae=2*Math.atan(K/this.cameraToCenterDistance)*(.5+a.y/(2*K)),ie=Math.sin(ae)*I/Math.sin(l.ad(Math.PI-O-ae,.01,Math.PI-.01)),se=Math.min(N,ie),re=1.01*(Math.cos(Math.PI/2-this._pitch)*se+I),xe=this.height/50;g=new Float64Array(16),l.b8(g,this._fov,this.width/this.height,xe,re),g[8]=2*-a.x/this.width,g[9]=2*a.y/this.height,l.a0(g,g,[1,-1,1]),l.$(g,g,[0,0,-this.cameraToCenterDistance]),l.b9(g,g,this._pitch),l.ae(g,g,this.angle),l.$(g,g,[-h,-p,0]),this.mercatorMatrix=l.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),l.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.a1(new Float64Array(16),this.labelPlaneMatrix,g),l.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=l.as([],g),this.pixelMatrix3D=l.a1(new Float64Array(16),this.labelPlaneMatrix,g);const Ie=this.width%2/2,de=this.height%2/2,be=Math.cos(this.angle),De=Math.sin(this.angle),Le=h-Math.round(h)+be*Ie+De*de,We=p-Math.round(p)+be*de+De*Ie,et=new Float64Array(g);if(l.$(et,et,[Le>.5?Le-1:Le,We>.5?We-1:We,0]),this.alignedProjMatrix=et,g=l.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const a=this.pointCoordinate(new l.P(0,0)),h=[a.x*this.worldSize,a.y*this.worldSize,0,1];return l.ag(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,a))}getCameraQueryGeometry(a){const h=this.getCameraPoint();if(a.length===1)return[a[0],h];{let p=h.x,g=h.y,_=h.x,A=h.y;for(const E of a)p=Math.min(p,E.x),g=Math.min(g,E.y),_=Math.max(_,E.x),A=Math.max(A,E.y);return[new l.P(p,g),new l.P(_,g),new l.P(_,A),new l.P(p,A),new l.P(p,g)]}}}function Fo(y,a){let h,p=!1,g=null,_=null;const A=()=>{g=null,p&&(y.apply(_,h),g=setTimeout(A,a),p=!1)};return(...E)=>(p=!0,_=this,h=E,g||A(),g)}class Ll{constructor(a){this._getCurrentHash=()=>{const h=window.location.hash.replace("#","");if(this._hashName){let p;return h.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{const h=this._getCurrentHash();if(h.length>=3&&!h.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:p,pitch:+(h[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const h=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,h)}catch{}},this._updateHash=Fo(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(a){const h=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),A=Math.round(h.lng*_)/_,E=Math.round(h.lat*_)/_,I=this._map.getBearing(),O=this._map.getPitch();let $="";if($+=a?`/${A}/${E}/${p}`:`${p}/${E}/${A}`,(I||O)&&($+="/"+Math.round(10*I)/10),O&&($+=`/${Math.round(O)}`),this._hashName){const N=this._hashName;let K=!1;const ae=window.location.hash.slice(1).split("&").map(ie=>{const se=ie.split("=")[0];return se===N?(K=!0,`${se}=${$}`):ie}).filter(ie=>ie);return K||ae.push(`${N}=${$}`),`#${ae.join("&")}`}return`#${$}`}}const zs={linearity:.3,easing:l.ba(0,0,.3,1)},um=l.e({deceleration:2500,maxSpeed:1400},zs),cm=l.e({deceleration:20,maxSpeed:1400},zs),hm=l.e({deceleration:1e3,maxSpeed:360},zs),fm=l.e({deceleration:1e3,maxSpeed:90},zs);class dm{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.h.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,h=l.h.now();for(;a.length>0&&h-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)h.zoom+=_.zoomDelta||0,h.bearing+=_.bearingDelta||0,h.pitch+=_.pitchDelta||0,_.panDelta&&h.pan._add(_.panDelta),_.around&&(h.around=_.around),_.pinchAround&&(h.pinchAround=_.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(h.pan.mag()){const _=jl(h.pan.mag(),p,l.e({},um,a||{}));g.offset=h.pan.mult(_.amount/h.pan.mag()),g.center=this._map.transform.center,ga(g,_)}if(h.zoom){const _=jl(h.zoom,p,cm);g.zoom=this._map.transform.zoom+_.amount,ga(g,_)}if(h.bearing){const _=jl(h.bearing,p,hm);g.bearing=this._map.transform.bearing+l.ad(_.amount,-179,179),ga(g,_)}if(h.pitch){const _=jl(h.pitch,p,fm);g.pitch=this._map.transform.pitch+_.amount,ga(g,_)}if(g.zoom||g.bearing){const _=h.pinchAround===void 0?h.around:h.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.e(g,{noMoveStart:!0})}}function ga(y,a){(!y.duration||y.duration<a.duration)&&(y.duration=a.duration,y.easing=a.easing)}function jl(y,a,h){const{maxSpeed:p,linearity:g,deceleration:_}=h,A=l.ad(y*g/(a/1e3),-p,p),E=Math.abs(A)/(_*g);return{easing:h.easing,duration:1e3*E,amount:A*(E/2)}}class Ei extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,p,g={}){const _=b.mousePos(h.getCanvasContainer(),p),A=h.unproject(_);super(a,l.e({point:_,lngLat:A,originalEvent:p},g)),this._defaultPrevented=!1,this.target=h}}class $l extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,p){const g=a==="touchend"?p.changedTouches:p.touches,_=b.touchPos(h.getCanvasContainer(),g),A=_.map(I=>h.unproject(I)),E=_.reduce((I,O,$,N)=>I.add(O.div(N.length)),new l.P(0,0));super(a,{points:_,point:E,lngLats:A,lngLat:h.unproject(E),originalEvent:p}),this._defaultPrevented=!1}}class pm extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,p){super(a,{originalEvent:p}),this._defaultPrevented=!1}}class mm{constructor(a,h){this._map=a,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new pm(a.type,this._map,a))}mousedown(a,h){return this._mousedownPos=h,this._firePreventable(new Ei(a.type,this._map,a))}mouseup(a){this._map.fire(new Ei(a.type,this._map,a))}click(a,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new Ei(a.type,this._map,a))}dblclick(a){return this._firePreventable(new Ei(a.type,this._map,a))}mouseover(a){this._map.fire(new Ei(a.type,this._map,a))}mouseout(a){this._map.fire(new Ei(a.type,this._map,a))}touchstart(a){return this._firePreventable(new $l(a.type,this._map,a))}touchmove(a){this._map.fire(new $l(a.type,this._map,a))}touchend(a){this._map.fire(new $l(a.type,this._map,a))}touchcancel(a){this._map.fire(new $l(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gm{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new Ei(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ei("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new Ei(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mo{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.pointLocation(l.P.convert(a),this._map.terrain)}}class ym{constructor(a,h){this._map=a,this._tr=new mo(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,h){this.isEnabled()&&a.shiftKey&&a.button===0&&(b.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(a,h){if(!this._active)return;const p=h;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const _=Math.min(g.x,p.x),A=Math.max(g.x,p.x),E=Math.min(g.y,p.y),I=Math.max(g.y,p.y);b.setTransform(this._box,`translate(${_}px,${E}px)`),this._box.style.width=A-_+"px",this._box.style.height=I-E+"px"}mouseupWindow(a,h){if(!this._active||a.button!==0)return;const p=this._startPos,g=h;if(this.reset(),b.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:a})),{cameraAnimation:_=>_.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,h){return this._map.fire(new l.k(a,{originalEvent:h}))}}function qi(y,a){if(y.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${a.length}`);const h={};for(let p=0;p<y.length;p++)h[y[p].identifier]=a[p];return h}class Fa{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,h,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const _=new l.P(0,0);for(const A of g)_._add(A);return _.div(g.length)}(h),this.touches=qi(p,h)))}touchmove(a,h,p){if(this.aborted||!this.centroid)return;const g=qi(p,h);for(const _ in this.touches){const A=g[_];(!A||A.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(a,h,p){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class tc{constructor(a){this.singleTap=new Fa(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,h,p){this.singleTap.touchstart(a,h,p)}touchmove(a,h,p){this.singleTap.touchmove(a,h,p)}touchend(a,h,p){const g=this.singleTap.touchend(a,h,p);if(g){const _=a.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(g)<30;if(_&&A||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Ua{constructor(a){this._tr=new mo(a),this._zoomIn=new tc({numTouches:1,numTaps:2}),this._zoomOut=new tc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,h,p){this._zoomIn.touchstart(a,h,p),this._zoomOut.touchstart(a,h,p)}touchmove(a,h,p){this._zoomIn.touchmove(a,h,p),this._zoomOut.touchmove(a,h,p)}touchend(a,h,p){const g=this._zoomIn.touchend(a,h,p),_=this._zoomOut.touchend(a,h,p),A=this._tr;return g?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(g)},{originalEvent:a})}):_?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(_)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Va{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const h=this._moveFunction(...a);if(h.bearingDelta||h.pitchDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(a,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=h.length?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,h){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const g=h.length?h[0]:h;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&b.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const A_={0:1,2:2};class uf{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const h=b.mouseButton(a);this._eventButton=h}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(h,p){const g=A_[p];return h.buttons===void 0||(h.buttons&g)!==g}(a,this._eventButton)}isValidEndEvent(a){return b.mouseButton(a)===this._eventButton}}class vm{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}const rc=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(a){a.preventDefault()}},Ds=({enable:y,clickTolerance:a,bearingDegreesPerPixelMoved:h=.8})=>{const p=new uf({checkCorrectEvent:g=>b.mouseButton(g)===0&&g.ctrlKey||b.mouseButton(g)===2});return new Va({clickTolerance:a,move:(g,_)=>({bearingDelta:(_.x-g.x)*h}),moveStateManager:p,enable:y,assignEvents:rc})},qa=({enable:y,clickTolerance:a,pitchDegreesPerPixelMoved:h=-.5})=>{const p=new uf({checkCorrectEvent:g=>b.mouseButton(g)===0&&g.ctrlKey||b.mouseButton(g)===2});return new Va({clickTolerance:a,move:(g,_)=>({pitchDelta:(_.y-g.y)*h}),moveStateManager:p,enable:y,assignEvents:rc})};class vt{constructor(a,h){this._minTouches=a.cooperativeGestures?2:1,this._clickTolerance=a.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(a,h,p){return this._calculateTransform(a,h,p)}touchmove(a,h,p){if(this._map._cooperativeGestures&&(this._minTouches===2&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(a,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return a.preventDefault(),this._calculateTransform(a,h,p)}touchend(a,h,p){this._calculateTransform(a,h,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,h,p){p.length>0&&(this._active=!0);const g=qi(p,h),_=new l.P(0,0),A=new l.P(0,0);let E=0;for(const O in g){const $=g[O],N=this._touches[O];N&&(_._add($),A._add($.sub(N)),E++,g[O]=$)}if(this._touches=g,E<this._minTouches||!A.mag())return;const I=A.div(E);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(E),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,h,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([h[0],h[1]]))}touchmove(a,h,p){if(!this._firstTwoTouches)return;a.preventDefault();const[g,_]=this._firstTwoTouches,A=go(p,h,g),E=go(p,h,_);if(!A||!E)return;const I=this._aroundCenter?null:A.add(E).div(2);return this._move([A,E],I,a)}touchend(a,h,p){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,A=go(p,h,g),E=go(p,h,_);A&&E||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function go(y,a,h){for(let p=0;p<y.length;p++)if(y[p].identifier===h)return a[p]}function Ls(y,a){return Math.log(y/a)/Math.LN2}class _m extends nc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,h){const p=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Ls(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ls(this._distance,p),pinchAround:h}}}function ft(y,a){return 180*y.angleWith(a)/Math.PI}class cf extends nc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,h){const p=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ft(this._vector,p),pinchAround:h}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const h=25/(Math.PI*this._minDiameter)*360,p=ft(a,this._startVector);return Math.abs(p)<h}}function hf(y){return Math.abs(y.y)>Math.abs(y.x)}class E_ extends nc{constructor(a){super(),this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,h,p){super.touchstart(a,h,p),this._currentTouchCount=p.length}_start(a){this._lastPoints=a,hf(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,h,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=a[0].sub(this._lastPoints[0]),_=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,p.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(a,h,p){if(this._valid!==void 0)return this._valid;const g=a.mag()>=2,_=h.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const A=a.y>0==h.y>0;return hf(a)&&hf(h)&&A}}const ff={panStep:100,bearingStep:15,pitchStep:10};class xm{constructor(a){this._tr=new mo(a);const h=ff;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let h=0,p=0,g=0,_=0,A=0;switch(a.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:a.shiftKey?p=-1:(a.preventDefault(),_=-1);break;case 39:a.shiftKey?p=1:(a.preventDefault(),_=1);break;case 38:a.shiftKey?g=1:(a.preventDefault(),A=-1);break;case 40:a.shiftKey?g=-1:(a.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:E=>{const I=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:bm,zoom:h?Math.round(I.zoom)+h*(a.shiftKey?2:1):I.zoom,bearing:I.bearing+p*this._bearingStep,pitch:I.pitch+g*this._pitchStep,offset:[-_*this._panStep,-A*this._panStep],center:I.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function bm(y){return y*(2-y)}const wm=4.000244140625;class C_{constructor(a,h){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=a,this._tr=new mo(a),this._el=a.getCanvasContainer(),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(a){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!a[this._map._metaKey])return;a.preventDefault()}let h=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const p=l.h.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,h!==0&&h%wm==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(g*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),a.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=a,this._delta-=h,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=b.mousePos(this._el,a),p=this._tr;this._around=l.L.convert(this._aroundCenter?p.center:p.unproject(h)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(this._delta!==0){const E=this._type==="wheel"&&Math.abs(this._delta)>wm?this._wheelZoomRate:this._defaultZoomRate;let I=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&I!==0&&(I=1/I);const O=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):a.scale;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(O*I))),this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom=="number"?this._targetZoom:a.zoom,p=this._startZoom,g=this._easing;let _,A=!1;if(this._type==="wheel"&&p&&g){const E=Math.min((l.h.now()-this._lastWheelEventTime)/200,1),I=g(E);_=l.B.number(p,h,I),E<1?this._frameId||(this._frameId=!0):A=!0}else _=h,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:_-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let h=l.bb;if(this._prevEase){const p=this._prevEase,g=(l.h.now()-p.start)/p.duration,_=p.easing(g+.01)-p.easing(g),A=.27/Math.sqrt(_*_+1e-4)*.01,E=Math.sqrt(.0729-A*A);h=l.ba(A,E,.25,1)}return this._prevEase={start:l.h.now(),duration:a,easing:h},h}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class df{constructor(a,h){this._clickZoom=a,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class pf{constructor(a){this._tr=new mo(a),this.reset()}reset(){this._active=!1}dblclick(a,h){return a.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mf{constructor(){this._tap=new tc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,h,p){if(!this._swipePoint)if(this._tapTime){const g=h[0],_=a.timeStamp-this._tapTime<500,A=this._tapPoint.dist(g)<30;_&&A?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(a,h,p)}touchmove(a,h,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=h[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,a.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(a,h,p)}touchend(a,h,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(a,h,p);g&&(this._tapTime=a.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gf{constructor(a,h,p){this._el=a,this._mousePan=h,this._touchPan=p}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ui{constructor(a,h,p){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=h,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class yo{constructor(a,h,p,g){this._el=a,this._touchZoom=h,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Rl=y=>y.zoom||y.drag||y.pitch||y.rotate;class yf extends l.k{}function Nl(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class vf{constructor(a,h){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=g.type==="renderFrame"?void 0:g,E={needsRenderFrame:!1},I={},O={},$=g.touches,N=$?this._getMapTouches($):void 0,K=N?b.touchPos(this._el,N):b.mousePos(this._el,g);for(const{handlerName:se,handler:re,allowed:xe}of this._handlers){if(!re.isEnabled())continue;let Ie;this._blockedByActive(O,xe,se)?re.reset():re[_||g.type]&&(Ie=re[_||g.type](g,K,N),this.mergeHandlerResult(E,I,Ie,se,A),Ie&&Ie.needsRenderFrame&&this._triggerRenderFrame()),(Ie||re.isActive())&&(O[se]=re)}const ae={};for(const se in this._previousActiveHandlers)O[se]||(ae[se]=A);this._previousActiveHandlers=O,(Object.keys(ae).length||Nl(E))&&(this._changes.push([E,I,ae]),this._triggerRenderFrame()),(Object.keys(O).length||Nl(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ie}=E;ie&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ie(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new dm(a),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,A]of this._listeners)b.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[a,h,p]of this._listeners)b.removeEventListener(a,h,a===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(a){const h=this._map,p=h.getCanvasContainer();this._add("mapEvent",new mm(h,a));const g=h.boxZoom=new ym(h,a);this._add("boxZoom",g),a.interactive&&a.boxZoom&&g.enable();const _=new Ua(h),A=new pf(h);h.doubleClickZoom=new df(A,_),this._add("tapZoom",_),this._add("clickZoom",A),a.interactive&&a.doubleClickZoom&&h.doubleClickZoom.enable();const E=new mf;this._add("tapDragZoom",E);const I=h.touchPitch=new E_(h);this._add("touchPitch",I),a.interactive&&a.touchPitch&&h.touchPitch.enable(a.touchPitch);const O=Ds(a),$=qa(a);h.dragRotate=new ui(a,O,$),this._add("mouseRotate",O,["mousePitch"]),this._add("mousePitch",$,["mouseRotate"]),a.interactive&&a.dragRotate&&h.dragRotate.enable();const N=(({enable:xe,clickTolerance:Ie})=>{const de=new uf({checkCorrectEvent:be=>b.mouseButton(be)===0&&!be.ctrlKey});return new Va({clickTolerance:Ie,move:(be,De)=>({around:De,panDelta:De.sub(be)}),activateOnStart:!0,moveStateManager:de,enable:xe,assignEvents:rc})})(a),K=new vt(a,h);h.dragPan=new gf(p,N,K),this._add("mousePan",N),this._add("touchPan",K,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&h.dragPan.enable(a.dragPan);const ae=new cf,ie=new _m;h.touchZoomRotate=new yo(p,ie,ae,E),this._add("touchRotate",ae,["touchPan","touchZoom"]),this._add("touchZoom",ie,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&h.touchZoomRotate.enable(a.touchZoomRotate);const se=h.scrollZoom=new C_(h,()=>this._triggerRenderFrame());this._add("scrollZoom",se,["mousePan"]),a.interactive&&a.scrollZoom&&h.scrollZoom.enable(a.scrollZoom);const re=h.keyboard=new xm(h);this._add("keyboard",re),a.interactive&&a.keyboard&&h.keyboard.enable(),this._add("blockableMapEvent",new gm(h))}_add(a,h,p){this._handlers.push({handlerName:a,handler:h,allowed:p}),this._handlersById[a]=h}stop(a){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Rl(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,h,p){for(const g in a)if(g!==p&&(!h||h.indexOf(g)<0))return!0;return!1}_getMapTouches(a){const h=[];for(const p of a)this._el.contains(p.target)&&h.push(p);return h}mergeHandlerResult(a,h,p,g,_){if(!p)return;l.e(a,p);const A={handlerName:g,originalEvent:p.originalEvent||_};p.zoomDelta!==void 0&&(h.zoom=A),p.panDelta!==void 0&&(h.drag=A),p.pitchDelta!==void 0&&(h.pitch=A),p.bearingDelta!==void 0&&(h.rotate=A)}_applyChanges(){const a={},h={},p={};for(const[g,_,A]of this._changes)g.panDelta&&(a.panDelta=(a.panDelta||new l.P(0,0))._add(g.panDelta)),g.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(a.around=g.around),g.pinchAround!==void 0&&(a.pinchAround=g.pinchAround),g.noInertia&&(a.noInertia=g.noInertia),l.e(h,_),l.e(p,A);this._updateMapTransform(a,h,p),this._changes=[]}_updateMapTransform(a,h,p){const g=this._map,_=g._getTransformForUpdate(),A=g.terrain;if(!(Nl(a)||A&&this._terrainMovement))return this._fireEvents(h,p,!0);let{panDelta:E,zoomDelta:I,bearingDelta:O,pitchDelta:$,around:N,pinchAround:K}=a;K!==void 0&&(N=K),g._stop(!0),N=N||g.transform.centerPoint;const ae=_.pointLocation(E?N.sub(E):N);O&&(_.bearing+=O),$&&(_.pitch+=$),I&&(_.zoom+=I),A?this._terrainMovement||!h.drag&&!h.zoom?h.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(E)):_.setLocationAtPoint(ae,N):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(ae,N),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(g.terrain)})):_.setLocationAtPoint(ae,N),g._applyUpdatedTransform(_),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(h,p,!0)}_fireEvents(a,h,p){const g=Rl(this._eventsInProgress),_=Rl(a),A={};for(const $ in a){const{originalEvent:N}=a[$];this._eventsInProgress[$]||(A[`${$}start`]=N),this._eventsInProgress[$]=a[$]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const $ in A)this._fireEvent($,A[$]);_&&this._fireEvent("move",_.originalEvent);for(const $ in a){const{originalEvent:N}=a[$];this._fireEvent($,N)}const E={};let I;for(const $ in this._eventsInProgress){const{handlerName:N,originalEvent:K}=this._eventsInProgress[$];this._handlersById[N].isActive()||(delete this._eventsInProgress[$],I=h[N]||K,E[`${$}end`]=I)}for(const $ in E)this._fireEvent($,E[$]);const O=Rl(this._eventsInProgress);if(p&&(g||_)&&!O){this._updatingCamera=!0;const $=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),N=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;!$||!$.essential&&l.h.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:I})),N(this._map.getBearing())&&this._map.resetNorth()):(N($.bearing||this._map.getBearing())&&($.bearing=0),$.freezeElevation=!0,this._map.easeTo($,{originalEvent:I})),this._updatingCamera=!1}}_fireEvent(a,h){this._map.fire(new l.k(a,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new yf("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Sm extends l.E{constructor(a,h){super(),this._renderFrameCallback=()=>{const p=Math.min((l.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=h.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.L(this.transform.center.lng,this.transform.center.lat)}setCenter(a,h){return this.jumpTo({center:a},h)}panBy(a,h,p){return a=l.P.convert(a).mult(-1),this.panTo(this.transform.center,l.e({offset:a},h),p)}panTo(a,h,p){return this.easeTo(l.e({center:a},h),p)}getZoom(){return this.transform.zoom}setZoom(a,h){return this.jumpTo({zoom:a},h),this}zoomTo(a,h,p){return this.easeTo(l.e({zoom:a},h),p)}zoomIn(a,h){return this.zoomTo(this.getZoom()+1,a,h),this}zoomOut(a,h){return this.zoomTo(this.getZoom()-1,a,h),this}getBearing(){return this.transform.bearing}setBearing(a,h){return this.jumpTo({bearing:a},h),this}getPadding(){return this.transform.padding}setPadding(a,h){return this.jumpTo({padding:a},h),this}rotateTo(a,h,p){return this.easeTo(l.e({bearing:a},h),p)}resetNorth(a,h){return this.rotateTo(0,l.e({duration:1e3},a),h),this}resetNorthPitch(a,h){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},a),h),this}snapToNorth(a,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,h):this}getPitch(){return this.transform.pitch}setPitch(a,h){return this.jumpTo({pitch:a},h),this}cameraForBounds(a,h){a=Qe.convert(a);const p=h&&h.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),p,h)}_cameraForBoxAndBearing(a,h,p,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=l.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const De=g.padding;g.padding={top:De,bottom:De,right:De,left:De}}g.padding=l.e(_,g.padding);const A=this.transform,E=A.padding,I=A.project(l.L.convert(a)),O=A.project(l.L.convert(h)),$=I.rotate(-p*Math.PI/180),N=O.rotate(-p*Math.PI/180),K=new l.P(Math.max($.x,N.x),Math.max($.y,N.y)),ae=new l.P(Math.min($.x,N.x),Math.min($.y,N.y)),ie=K.sub(ae),se=(A.width-(E.left+E.right+g.padding.left+g.padding.right))/ie.x,re=(A.height-(E.top+E.bottom+g.padding.top+g.padding.bottom))/ie.y;if(re<0||se<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const xe=Math.min(A.scaleZoom(A.scale*Math.min(se,re)),g.maxZoom),Ie=l.P.convert(g.offset),de=new l.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(p*Math.PI/180),be=Ie.add(de).mult(A.scale/A.zoomScale(xe));return{center:A.unproject(I.add(O).div(2).sub(be)),zoom:xe,bearing:p}}fitBounds(a,h,p){return this._fitInternal(this.cameraForBounds(a,h),h,p)}fitScreenCoordinates(a,h,p,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(a)),this.transform.pointLocation(l.P.convert(h)),p,g),g,_)}_fitInternal(a,h,p){return a?(delete(h=l.e(a,h)).padding,h.linear?this.easeTo(h,p):this.flyTo(h,p)):this}jumpTo(a,h){this.stop();const p=this._getTransformForUpdate();let g=!1,_=!1,A=!1;return"zoom"in a&&p.zoom!==+a.zoom&&(g=!0,p.zoom=+a.zoom),a.center!==void 0&&(p.center=l.L.convert(a.center)),"bearing"in a&&p.bearing!==+a.bearing&&(_=!0,p.bearing=+a.bearing),"pitch"in a&&p.pitch!==+a.pitch&&(A=!0,p.pitch=+a.pitch),a.padding==null||p.isPaddingEqual(a.padding)||(p.padding=a.padding),this._applyUpdatedTransform(p),this.fire(new l.k("movestart",h)).fire(new l.k("move",h)),g&&this.fire(new l.k("zoomstart",h)).fire(new l.k("zoom",h)).fire(new l.k("zoomend",h)),_&&this.fire(new l.k("rotatestart",h)).fire(new l.k("rotate",h)).fire(new l.k("rotateend",h)),A&&this.fire(new l.k("pitchstart",h)).fire(new l.k("pitch",h)).fire(new l.k("pitchend",h)),this.fire(new l.k("moveend",h))}calculateCameraOptionsFromTo(a,h,p,g=0){const _=l.U.fromLngLat(a,h),A=l.U.fromLngLat(p,g),E=A.x-_.x,I=A.y-_.y,O=A.z-_.z,$=Math.hypot(E,I,O);if($===0)throw new Error("Can't calculate camera options with same From and To");const N=Math.hypot(E,I),K=this.transform.scaleZoom(this.transform.cameraToCenterDistance/$/this.transform.tileSize),ae=180*Math.atan2(E,-I)/Math.PI;let ie=180*Math.acos(N/$)/Math.PI;return ie=O<0?90-ie:90+ie,{center:A.toLngLat(),zoom:K,pitch:ie,bearing:ae}}easeTo(a,h){this._stop(!1,a.easeId),((a=l.e({offset:[0,0],duration:500,easing:l.bb},a)).animate===!1||!a.essential&&l.h.prefersReducedMotion)&&(a.duration=0);const p=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),A=this.getPitch(),E=this.getPadding(),I="zoom"in a?+a.zoom:g,O="bearing"in a?this._normalizeBearing(a.bearing,_):_,$="pitch"in a?+a.pitch:A,N="padding"in a?a.padding:p.padding,K=l.P.convert(a.offset);let ae=p.centerPoint.add(K);const ie=p.pointLocation(ae),se=l.L.convert(a.center||ie);this._normalizeCenter(se);const re=p.project(ie),xe=p.project(se).sub(re),Ie=p.zoomScale(I-g);let de,be;a.around&&(de=l.L.convert(a.around),be=p.locationPoint(de));const De={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||I!==g,this._rotating=this._rotating||_!==O,this._pitching=this._pitching||$!==A,this._padding=!p.isPaddingEqual(N),this._easeId=a.easeId,this._prepareEase(h,a.noMoveStart,De),this.terrain&&this._prepareElevation(se),this._ease(Le=>{if(this._zooming&&(p.zoom=l.B.number(g,I,Le)),this._rotating&&(p.bearing=l.B.number(_,O,Le)),this._pitching&&(p.pitch=l.B.number(A,$,Le)),this._padding&&(p.interpolatePadding(E,N,Le),ae=p.centerPoint.add(K)),this.terrain&&!a.freezeElevation&&this._updateElevation(Le),de)p.setLocationAtPoint(de,be);else{const We=p.zoomScale(p.zoom-g),et=I>g?Math.min(2,Ie):Math.max(.5,Ie),Je=Math.pow(et,1-Le),rt=p.unproject(re.add(xe.mult(Le*Je)).mult(We));p.setLocationAtPoint(p.renderWorldCopies?rt.wrap():rt,ae)}this._applyUpdatedTransform(p),this._fireMoveEvents(h)},Le=>{this.terrain&&this._finalizeElevation(),this._afterEase(h,Le)},a),this}_prepareEase(a,h,p={}){this._moving=!0,h||p.moving||this.fire(new l.k("movestart",a)),this._zooming&&!p.zooming&&this.fire(new l.k("zoomstart",a)),this._rotating&&!p.rotating&&this.fire(new l.k("rotatestart",a)),this._pitching&&!p.pitching&&this.fire(new l.k("pitchstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&h!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(p-(h-(p*a+this._elevationStart))/(1-a)),this._elevationTarget=h}this.transform.elevation=l.B.number(this._elevationStart,this._elevationTarget,a)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(a){if(!this.transformCameraUpdate)return;const h=a.clone(),{center:p,zoom:g,pitch:_,bearing:A,elevation:E}=this.transformCameraUpdate(h);p&&(h.center=p),g!==void 0&&(h.zoom=g),_!==void 0&&(h.pitch=_),A!==void 0&&(h.bearing=A),E!==void 0&&(h.elevation=E),this.transform.apply(h)}_fireMoveEvents(a){this.fire(new l.k("move",a)),this._zooming&&this.fire(new l.k("zoom",a)),this._rotating&&this.fire(new l.k("rotate",a)),this._pitching&&this.fire(new l.k("pitch",a))}_afterEase(a,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;const p=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new l.k("zoomend",a)),g&&this.fire(new l.k("rotateend",a)),_&&this.fire(new l.k("pitchend",a)),this.fire(new l.k("moveend",a))}flyTo(a,h){if(!a.essential&&l.h.prefersReducedMotion){const St=l.F(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(St,h)}this.stop(),a=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.bb},a);const p=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),A=this.getPitch(),E=this.getPadding(),I="zoom"in a?l.ad(+a.zoom,p.minZoom,p.maxZoom):g,O="bearing"in a?this._normalizeBearing(a.bearing,_):_,$="pitch"in a?+a.pitch:A,N="padding"in a?a.padding:p.padding,K=p.zoomScale(I-g),ae=l.P.convert(a.offset);let ie=p.centerPoint.add(ae);const se=p.pointLocation(ie),re=l.L.convert(a.center||se);this._normalizeCenter(re);const xe=p.project(se),Ie=p.project(re).sub(xe);let de=a.curve;const be=Math.max(p.width,p.height),De=be/K,Le=Ie.mag();if("minZoom"in a){const St=l.ad(Math.min(a.minZoom,g,I),p.minZoom,p.maxZoom),mr=be/p.zoomScale(St-g);de=Math.sqrt(mr/Le*2)}const We=de*de;function et(St){const mr=(De*De-be*be+(St?-1:1)*We*We*Le*Le)/(2*(St?De:be)*We*Le);return Math.log(Math.sqrt(mr*mr+1)-mr)}function Je(St){return(Math.exp(St)-Math.exp(-St))/2}function rt(St){return(Math.exp(St)+Math.exp(-St))/2}const bt=et(!1);let Xt=function(St){return rt(bt)/rt(bt+de*St)},ut=function(St){return be*((rt(bt)*(Je(mr=bt+de*St)/rt(mr))-Je(bt))/We)/Le;var mr},jt=(et(!0)-bt)/de;if(Math.abs(Le)<1e-6||!isFinite(jt)){if(Math.abs(be-De)<1e-6)return this.easeTo(a,h);const St=De<be?-1:1;jt=Math.abs(Math.log(De/be))/de,ut=function(){return 0},Xt=function(mr){return Math.exp(St*de*mr)}}return a.duration="duration"in a?+a.duration:1e3*jt/("screenSpeed"in a?+a.screenSpeed/de:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=_!==O,this._pitching=$!==A,this._padding=!p.isPaddingEqual(N),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(re),this._ease(St=>{const mr=St*jt,Kt=1/Xt(mr);p.zoom=St===1?I:g+p.scaleZoom(Kt),this._rotating&&(p.bearing=l.B.number(_,O,St)),this._pitching&&(p.pitch=l.B.number(A,$,St)),this._padding&&(p.interpolatePadding(E,N,St),ie=p.centerPoint.add(ae)),this.terrain&&!a.freezeElevation&&this._updateElevation(St);const Gt=St===1?re:p.unproject(xe.add(Ie.mult(ut(mr))).mult(Kt));p.setLocationAtPoint(p.renderWorldCopies?Gt.wrap():Gt,ie),this._applyUpdatedTransform(p),this._fireMoveEvents(h)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(h)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,h)}if(!a){const p=this.handlers;p&&p.stop(!1)}return this}_ease(a,h,p){p.animate===!1||p.duration===0?(a(1),h()):(this._easeStart=l.h.now(),this._easeOptions=p,this._onEaseFrame=a,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,h){a=l.b5(a,-180,180);const p=Math.abs(a-h);return Math.abs(a-360-h)<p&&(a-=360),Math.abs(a+360-h)<p&&(a+=360),a}_normalizeCenter(a){const h=this.transform;if(!h.renderWorldCopies||h.lngRange)return;const p=a.lng-h.center.lng;a.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(l.L.convert(a),this.transform.tileZoom)-this.transform.elevation:null}}class Ci{constructor(a={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options&&this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,h){const p=this._map._getUIString(`AttributionControl.${h}`);a.title=p,a.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const h=this._map.style.sourceCaches;for(const g in h){const _=h[g];if(_.used||_.usedForTerrain){const A=_.getSource();A.attribution&&a.indexOf(A.attribution)<0&&a.push(A.attribution)}}a=a.filter(g=>String(g).trim()),a.sort((g,_)=>g.length-_.length),a=a.filter((g,_)=>{for(let A=_+1;A<a.length;A++)if(a[A].indexOf(g)>=0)return!1;return!0});const p=a.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,a.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Er{constructor(a={}){this._updateCompact=()=>{const h=this._container.children;if(h.length){const p=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const h=b.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ic{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const h=++this._id;return this._queue.push({callback:a,id:h,cancelled:!1}),h}remove(a){const h=this._currentlyRunning,p=h?this._queue.concat(h):this._queue;for(const g of p)if(g.id===a)return void(g.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const p of h)if(!p.cancelled&&(p.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const _f={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Tm=l.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Pm extends l.E{constructor(a){super(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,a.usedForTerrain=!0,a.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,h){this.sourceCache.update(a,h),this._renderableTilesKeys=[];const p={};for(const g of a.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),l.aS(g.posMatrix,0,l.N,0,l.N,0,1),this._tiles[g.key]=new Ht(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(a){for(const h in this._tiles){const p=this._tiles[h];(!a||p.tileID.equals(a)||p.tileID.isChildOf(a)||a.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a){const h={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(a.canonical)){const _=a.clone();_.posMatrix=new Float64Array(16),l.aS(_.posMatrix,0,l.N,0,l.N,0,1),h[p]=_}else if(g.canonical.isChildOf(a.canonical)){const _=a.clone();_.posMatrix=new Float64Array(16);const A=g.canonical.z-a.canonical.z,E=g.canonical.x-(g.canonical.x>>A<<A),I=g.canonical.y-(g.canonical.y>>A<<A),O=l.N>>A;l.aS(_.posMatrix,0,O,0,O,0,1),l.$(_.posMatrix,_.posMatrix,[-E*O,-I*O,0]),h[p]=_}else if(a.canonical.isChildOf(g.canonical)){const _=a.clone();_.posMatrix=new Float64Array(16);const A=a.canonical.z-g.canonical.z,E=a.canonical.x-(a.canonical.x>>A<<A),I=a.canonical.y-(a.canonical.y>>A<<A),O=l.N>>A;l.aS(_.posMatrix,0,l.N,0,l.N,0,1),l.$(_.posMatrix,_.posMatrix,[E*O,I*O,0]),l.a0(_.posMatrix,_.posMatrix,[1/2**A,1/2**A,0]),h[p]=_}}return h}getSourceTile(a,h){const p=this.sourceCache._source;let g=a.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!_||!_.dem)&&h)for(;g>=p.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(a.scaledTo(g--).key);return _}tilesAfterTime(a=Date.now()){return Object.values(this._tiles).filter(h=>h.timeAdded>=a)}}class Am{constructor(a,h,p){this.painter=a,this.sourceCache=new Pm(h),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,h,p,g=l.N){var _;if(!(h>=0&&h<g&&p>=0&&p<g))return 0;const A=this.getTerrainData(a),E=(_=A.tile)===null||_===void 0?void 0:_.dem;if(!E)return 0;const I=function(ie,se,re){var xe=se[0],Ie=se[1];return ie[0]=re[0]*xe+re[4]*Ie+re[12],ie[1]=re[1]*xe+re[5]*Ie+re[13],ie}([],[h/g*l.N,p/g*l.N],A.u_terrain_matrix),O=[I[0]*E.dim,I[1]*E.dim],$=Math.floor(O[0]),N=Math.floor(O[1]),K=O[0]-$,ae=O[1]-N;return E.get($,N)*(1-K)*(1-ae)+E.get($+1,N)*K*(1-ae)+E.get($,N+1)*(1-K)*ae+E.get($+1,N+1)*K*ae}getElevationForLngLatZoom(a,h){const{tileID:p,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(a,h);return this.getElevation(p,g%l.N,_%l.N,l.N)}getElevation(a,h,p,g=l.N){return this.getDEMElevation(a,h,p,g)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const g=this.painter.context,_=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Pe(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Pe(g,new l.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const h=this.sourceCache.getSourceTile(a,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const g=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new Pe(g,h.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),h.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const p=h&&h+h.tileID.key+a.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=a.canonical.z-h.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=g?_=a.canonical.z-g:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=a.canonical.x-(a.canonical.x>>_<<_),E=a.canonical.y-(a.canonical.y>>_<<_),I=l.bc(new Float64Array(16),[1/(l.N<<_),1/(l.N<<_),0]);l.$(I,I,[A*l.N,E*l.N,0]),this._demMatrixCache[a.key]={matrix:I,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(a){const h=this.painter,p=h.width/devicePixelRatio,g=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Pe(h.context,{width:p,height:g,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Pe(h.context,{width:p,height:g,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,A=0;_<this._coordsTextureSize;_++)for(let E=0;E<this._coordsTextureSize;E++,A+=4)h[A+0]=255&E,h[A+1]=255&_,h[A+2]=E>>8<<4|_>>8,h[A+3]=0;const p=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),g=new Pe(a,p,a.gl.RGBA,{premultiply:!1});return g.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(a){const h=new Uint8Array(4),p=this.painter.context,g=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,h),p.bindFramebuffer.set(null);const _=h[0]+(h[2]>>4<<8),A=h[1]+((15&h[2])<<8),E=this.coordsIndex[255-h[3]],I=E&&this.sourceCache.getTileByID(E);if(!I)return null;const O=this._coordsTextureSize,$=(1<<I.tileID.canonical.z)*O;return new l.U(this._allowMercatorOverflow(a,(I.tileID.canonical.x*O+_)/$),(I.tileID.canonical.y*O+A)/$,this.getElevation(I.tileID,_,A,O))}getTerrainMesh(){if(this._mesh)return this._mesh;const a=this.painter.context,h=new l.bd,p=new l.b0,g=this.meshSize,_=l.N/g,A=g*g;for(let N=0;N<=g;N++)for(let K=0;K<=g;K++)h.emplaceBack(K*_,N*_,0);for(let N=0;N<A;N+=g+1)for(let K=0;K<g;K++)p.emplaceBack(K+N,g+K+N+1,g+K+N+2),p.emplaceBack(K+N,g+K+N+2,K+N+1);const E=h.length,I=E+2*(g+1);for(const N of[0,1])for(let K=0;K<=g;K++)for(const ae of[0,1])h.emplaceBack(K*_,N*l.N,ae);for(let N=0;N<2*g;N+=2)p.emplaceBack(I+N,I+N+1,I+N+3),p.emplaceBack(I+N,I+N+3,I+N+2),p.emplaceBack(E+N,E+N+3,E+N+1),p.emplaceBack(E+N,E+N+2,E+N+3);const O=h.length,$=O+2*(g+1);for(const N of[0,1])for(let K=0;K<=g;K++)for(const ae of[0,1])h.emplaceBack(N*l.N,K*_,ae);for(let N=0;N<2*g;N+=2)p.emplaceBack(O+N,O+N+1,O+N+3),p.emplaceBack(O+N,O+N+3,O+N+2),p.emplaceBack($+N,$+N+3,$+N+1),p.emplaceBack($+N,$+N+2,$+N+3);return this._mesh={indexBuffer:a.createIndexBuffer(p),vertexBuffer:a.createVertexBuffer(h,Tm.members),segments:l.S.simpleSegment(0,0,h.length,p.length)},this._mesh}getMeshFrameDelta(a){return 2*Math.PI*l.be/Math.pow(2,a)/5}getMinTileElevationForLngLatZoom(a,h){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(a,h);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(a){const h=this.getTerrainData(a).tile,p={minElevation:null,maxElevation:null};return h&&h.dem&&(p.minElevation=h.dem.min*this.exaggeration,p.maxElevation=h.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(a,h){const p=l.U.fromLngLat(a.wrap()),g=(1<<h)*l.N,_=p.x*g,A=p.y*g,E=Math.floor(_/l.N),I=Math.floor(A/l.N);return{tileID:new l.O(h,0,h,E,I),mercatorX:_,mercatorY:A}}_allowMercatorOverflow(a,h){const p=a.x<this.painter.width/2;let g=l.bf(h);const _=this.painter.transform.center.lng;return p&&Math.sign(g)>0&&Math.sign(_)<0||!p&&Math.sign(g)<0&&Math.sign(_)>0?(g=360*Math.sign(_)+g,l.G(g)):h}}class k_{constructor(a,h,p){this._context=a,this._size=h,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new Pe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(p.texture),{id:a,fbo:h,texture:p,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(h=>a.id!==h),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}const Yn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ac{constructor(a,h){this.painter=a,this.terrain=h,this.pool=new k_(a.context,30,h.sourceCache.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(p=>!a._layers[p].isHidden(h)),this._coordsDescendingInv={};for(const p in a.sourceCaches){this._coordsDescendingInv[p]={};const g=a.sourceCaches[p].getVisibleCoordinates();for(const _ of g){const A=this.terrain.sourceCache.getTerrainCoords(_);for(const E in A)this._coordsDescendingInv[p][E]||(this._coordsDescendingInv[p][E]=[]),this._coordsDescendingInv[p][E].push(A[E])}}this._coordsDescendingInvStr={};for(const p of a._order){const g=a._layers[p],_=g.source;if(Yn[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const A in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][A]=this._coordsDescendingInv[_][A].map(E=>E.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][p.tileID.key];_&&_!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(a){if(a.isHidden(this.painter.transform.zoom))return!1;const h=a.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(Yn[h]&&(this._prevType&&Yn[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(a.id),!g))return!0;if(Yn[this._prevType]||Yn[h]&&g){this._prevType=h;const _=this._stacks.length-1,A=this._stacks[_]||[];for(const E of this._renderableTiles){if(this.pool.isFull()&&(Vr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(E),E.rtt[_]){const O=this.pool.getObjectForId(E.rtt[_].id);if(O.stamp===E.rtt[_].stamp){this.pool.useObject(O);continue}}const I=this.pool.getOrCreateFreeObject();this.pool.useObject(I),this.pool.stampObject(I),E.rtt[_]={id:I.id,stamp:I.stamp},p.context.bindFramebuffer.set(I.fbo.framebuffer),p.context.clear({color:l.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let O=0;O<A.length;O++){const $=p.style._layers[A[O]],N=$.source?this._coordsDescendingInv[$.source][E.tileID.key]:[E.tileID];p.context.viewport.set([0,0,I.fbo.width,I.fbo.height]),p._renderTileClippingMasks($,N),p.renderLayer(p,p.style.sourceCaches[$.source],$,N),$.source&&(E.rttCoords[$.source]=this._coordsDescendingInvStr[$.source][E.tileID.key])}}return Vr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Yn[h]}return!1}}const Pt=v,Lt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Bl=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},xf={showCompass:!0,showZoom:!0,visualizePitch:!1};class bf{constructor(a,h,p=!1){this.mousedown=A=>{this.startMouse(l.e({},A,{ctrlKey:!0,preventDefault:()=>A.preventDefault()}),b.mousePos(this.element,A)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.moveMouse(A,b.mousePos(this.element,A))},this.mouseup=A=>{this.mouseRotate.dragEnd(A),this.mousePitch&&this.mousePitch.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,A.targetTouches)[0],this.startTouch(A,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,A.targetTouches)[0],this.moveTouch(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=a.dragRotate._mouseRotate.getClickTolerance(),_=a.dragRotate._mousePitch.getClickTolerance();this.element=h,this.mouseRotate=Ds({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:A,clickTolerance:E,bearingDegreesPerPixelMoved:I=.8})=>{const O=new vm;return new Va({clickTolerance:E,move:($,N)=>({bearingDelta:(N.x-$.x)*I}),moveStateManager:O,enable:A,assignEvents:Bl})})({clickTolerance:g,enable:!0}),this.map=a,p&&(this.mousePitch=qa({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:A,clickTolerance:E,pitchDegreesPerPixelMoved:I=-.5})=>{const O=new vm;return new Va({clickTolerance:E,move:($,N)=>({pitchDelta:(N.y-$.y)*I}),moveStateManager:O,enable:A,assignEvents:Bl})})({clickTolerance:_,enable:!0})),b.addEventListener(h,"mousedown",this.mousedown),b.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(h,"touchcancel",this.reset)}startMouse(a,h){this.mouseRotate.dragStart(a,h),this.mousePitch&&this.mousePitch.dragStart(a,h),b.disableDrag()}startTouch(a,h){this.touchRotate.dragStart(a,h),this.touchPitch&&this.touchPitch.dragStart(a,h),b.disableDrag()}moveMouse(a,h){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(a,h)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(a,h)||{};_&&p.setPitch(p.getPitch()+_)}}moveTouch(a,h){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(a,h)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(a,h)||{};_&&p.setPitch(p.getPitch()+_)}}off(){const a=this.element;b.removeEventListener(a,"mousedown",this.mousedown),b.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let rn;function wf(y,a,h){if(y=new l.L(y.lng,y.lat),a){const p=new l.L(y.lng-360,y.lat),g=new l.L(y.lng+360,y.lat),_=h.locationPoint(y).distSqr(a);h.locationPoint(p).distSqr(a)<_?y=p:h.locationPoint(g).distSqr(a)<_&&(y=g)}for(;Math.abs(y.lng-h.center.lng)>180;){const p=h.locationPoint(y);if(p.x>=0&&p.y>=0&&p.x<=h.width&&p.y<=h.height)break;y.lng>h.center.lng?y.lng-=360:y.lng+=360}return y}const Gi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Em(y,a,h){const p=y.classList;for(const g in Gi)p.remove(`maplibregl-${h}-anchor-${g}`);p.add(`maplibregl-${h}-anchor-${a}`)}class Uo extends l.E{constructor(a){if(super(),this._onKeyPress=h=>{const p=h.code,g=h.charCode||h.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=h=>{const p=h.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=h=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((h==null?void 0:h.type)==="terrain"||(h==null?void 0:h.type)==="render"&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=wf(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),h&&h.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${Gi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const A=this._map.unproject(this._pos),E=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=A.distanceTo(this._lngLat)>20*E?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=h=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=l.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");const h=b.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${p}px`),h.setAttributeNS(null,"width",`${g}px`),h.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const _=b.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const A=b.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const E=b.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");const I=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const xe of I){const Ie=b.createNS("http://www.w3.org/2000/svg","ellipse");Ie.setAttributeNS(null,"opacity","0.04"),Ie.setAttributeNS(null,"cx","10.5"),Ie.setAttributeNS(null,"cy","5.80029008"),Ie.setAttributeNS(null,"rx",xe.rx),Ie.setAttributeNS(null,"ry",xe.ry),E.appendChild(Ie)}const O=b.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill",this._color);const $=b.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),O.appendChild($);const N=b.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"opacity","0.25"),N.setAttributeNS(null,"fill","#000000");const K=b.createNS("http://www.w3.org/2000/svg","path");K.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),N.appendChild(K);const ae=b.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ae.setAttributeNS(null,"fill","#FFFFFF");const ie=b.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");const se=b.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#000000"),se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962");const re=b.createNS("http://www.w3.org/2000/svg","circle");re.setAttributeNS(null,"fill","#FFFFFF"),re.setAttributeNS(null,"cx","5.5"),re.setAttributeNS(null,"cy","5.5"),re.setAttributeNS(null,"r","5.4999962"),ie.appendChild(se),ie.appendChild(re),A.appendChild(E),A.appendChild(O),A.appendChild(N),A.appendChild(ae),A.appendChild(ie),h.appendChild(A),h.setAttributeNS(null,"height",p*this._scale+"px"),h.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(h),this._offset=l.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),Em(this._element,this._anchor,"marker"),a&&a.className)for(const h of a.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=l.L.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const g=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(a){return this._offset=l.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const qr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Rr=0,js=!1;const Fl={maxWidth:100,unit:"metric"};function Ul(y,a,h){const p=h&&h.maxWidth||100,g=y._container.clientHeight/2,_=y.unproject([0,g]),A=y.unproject([p,g]),E=_.distanceTo(A);if(h&&h.unit==="imperial"){const I=3.2808*E;I>5280?Vo(a,p,I/5280,y._getUIString("ScaleControl.Miles")):Vo(a,p,I,y._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?Vo(a,p,E/1852,y._getUIString("ScaleControl.NauticalMiles")):E>=1e3?Vo(a,p,E/1e3,y._getUIString("ScaleControl.Kilometers")):Vo(a,p,E,y._getUIString("ScaleControl.Meters"))}function Vo(y,a,h,p){const g=function(_){const A=Math.pow(10,`${Math.floor(_)}`.length-1);let E=_/A;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(I){const O=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*O)/O}(E),A*E}(h);y.style.width=a*(g/h)+"px",y.innerHTML=`${g}&nbsp;${p}`}const Sf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Tf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function $s(y){if(y){if(typeof y=="number"){const a=Math.round(Math.abs(y)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,y),"top-left":new l.P(a,a),"top-right":new l.P(-a,a),bottom:new l.P(0,-y),"bottom-left":new l.P(a,-a),"bottom-right":new l.P(-a,-a),left:new l.P(y,0),right:new l.P(-y,0)}}if(y instanceof l.P||Array.isArray(y)){const a=l.P.convert(y);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:l.P.convert(y.center||[0,0]),top:l.P.convert(y.top||[0,0]),"top-left":l.P.convert(y["top-left"]||[0,0]),"top-right":l.P.convert(y["top-right"]||[0,0]),bottom:l.P.convert(y.bottom||[0,0]),"bottom-left":l.P.convert(y["bottom-left"]||[0,0]),"bottom-right":l.P.convert(y["bottom-right"]||[0,0]),left:l.P.convert(y.left||[0,0]),right:l.P.convert(y.right||[0,0])}}return $s(new l.P(0,0))}const Pf={extend:(y,...a)=>l.e(y,...a),run(y){y()},logToElement(y,a=!1,h="log"){const p=window.document.getElementById(h);p&&(a&&(p.innerHTML=""),p.innerHTML+=`<br>${y}`)}},Af=v;class cr{static get version(){return Af}static get workerCount(){return Si.workerCount}static set workerCount(a){Si.workerCount=a}static get maxParallelImageRequests(){return l.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(a){l.c.MAX_PARALLEL_IMAGE_REQUESTS=a}static get workerUrl(){return l.c.WORKER_URL}static set workerUrl(a){l.c.WORKER_URL=a}static addProtocol(a,h){l.c.REGISTERED_PROTOCOLS[a]=h}static removeProtocol(a){delete l.c.REGISTERED_PROTOCOLS[a]}}return cr.Map=class extends Sm{constructor(y){if(l.bg.mark(l.bh.create),(y=l.e({},Lt,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ec(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=a=>{this._onCooperativeGesture(a,a[this._metaKey],1)},this._contextLost=a=>{a.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new ic,this._controls=[],this._mapId=l.a2(),this._locale=l.e({},_f,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=V.addThrottleControl(()=>this.isMoving()),this._requestManager=new R(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1;const h=Fo(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{a?h(p):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new vf(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Ll(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,l.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Ci({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new Er,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new l.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new l.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new l.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(y,a){if(a===void 0&&(a=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[a];return a.indexOf("bottom")!==-1?p.insertBefore(h,p.firstChild):p.appendChild(h),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(y);return a>-1&&this._controls.splice(a,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,a,h,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(h,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,a,h,p)}resize(y){var a;const h=this._containerDimensions(),p=h[0],g=h[1],_=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,_),this.painter.resize(p,g,_),this.painter.overLimit()){const E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];const I=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,I),this.painter.resize(p,g,I)}this.transform.resize(p,g),(a=this._requestedCameraState)===null||a===void 0||a.resize(p,g);const A=!this._moving;return A&&(this.stop(),this.fire(new l.k("movestart",y)).fire(new l.k("move",y))),this.fire(new l.k("resize",y)),A&&this.fire(new l.k("moveend",y)),this}_getClampedPixelRatio(y,a){const{0:h,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),_=y*g,A=a*g;return Math.min(_>h?h/_:1,A>p?p/A:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Qe.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(l.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(l.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,a,h){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:a,listener:h,delegates:{mousemove:_=>{const A=this.getLayer(a)?this.queryRenderedFeatures(_.point,{layers:[a]}):[];A.length?p||(p=!0,h.call(this,new Ei(y,this,_.originalEvent,{features:A}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:a,listener:h,delegates:{mousemove:A=>{(this.getLayer(a)?this.queryRenderedFeatures(A.point,{layers:[a]}):[]).length?p=!0:p&&(p=!1,h.call(this,new Ei(y,this,A.originalEvent)))},mouseout:A=>{p&&(p=!1,h.call(this,new Ei(y,this,A.originalEvent)))}}}}{const p=g=>{const _=this.getLayer(a)?this.queryRenderedFeatures(g.point,{layers:[a]}):[];_.length&&(g.features=_,h.call(this,g),delete g.features)};return{layer:a,listener:h,delegates:{[y]:p}}}}on(y,a,h){if(h===void 0)return super.on(y,a);const p=this._createDelegatedListener(y,a,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(y,a,h){if(h===void 0)return super.once(y,a);const p=this._createDelegatedListener(y,a,h);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(y,a,h){return h===void 0?super.off(y,a):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const g=this._delegatedListeners[y];for(let _=0;_<g.length;_++){const A=g[_];if(A.layer===a&&A.listener===h){for(const E in A.delegates)this.off(E,A.delegates[E]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,a){if(!this.style)return[];let h;const p=y instanceof l.P||Array.isArray(y),g=p?y:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(p?{}:y)||{},g instanceof l.P||typeof g[0]=="number")h=[l.P.convert(g)];else{const _=l.P.convert(g[0]),A=l.P.convert(g[1]);h=[_,new l.P(A.x,_.y),A,new l.P(_.x,A.y),_]}return this.style.queryRenderedFeatures(h,a,this.transform)}querySourceFeatures(y,a){return this.style.querySourceFeatures(y,a)}setStyle(y,a){return(a=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(y,a))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const a=this._locale[y];if(a==null)throw new Error(`Missing UI string '${y}'`);return a}_updateStyle(y,a){if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,a));const h=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new kn(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,a,h):this.style.loadJSON(y,a,h),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new kn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,a){if(typeof y=="string"){const h=this._requestManager.transformRequest(y,D.Style);l.f(h,(p,g)=>{p?this.fire(new l.j(p)):g&&this._updateDiff(g,a)})}else typeof y=="object"&&this._updateDiff(y,a)}_updateDiff(y,a){try{this.style.setState(y,a)&&this._update(!0)}catch(h){l.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(y,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(y,a){return this._lazyInitEmptyStyle(),this.style.addSource(y,a),this._update(!0)}isSourceLoaded(y){const a=this.style&&this.style.sourceCaches[y];if(a!==void 0)return a.loaded();this.fire(new l.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const a=this.style.sourceCaches[y.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const h in this.style._layers){const p=this.style._layers[h];p.type==="hillshade"&&p.source===y.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Am(this.painter,a,y),this.painter.renderToTexture=new ac(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=h=>{h.dataType==="style"?this.terrain.sourceCache.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:y})),this}getTerrain(){var y,a;return(a=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&a!==void 0?a:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const a in y){const h=y[a]._tiles;for(const p in h){const g=h[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(y,a,h){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,a,h)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,a,h={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:_,stretchY:A,content:E}=h;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||l.a(a))){if(a.width===void 0||a.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:I,height:O,data:$}=a,N=a;return this.style.addImage(y,{data:new l.R({width:I,height:O},new Uint8Array($)),pixelRatio:p,stretchX:_,stretchY:A,content:E,sdf:g,version:0,userImage:N}),N.onAdd&&N.onAdd(this,y),this}}{const{width:I,height:O,data:$}=l.h.getImageData(a);this.style.addImage(y,{data:new l.R({width:I,height:O},$),pixelRatio:p,stretchX:_,stretchY:A,content:E,sdf:g,version:0})}}updateImage(y,a){const h=this.style.getImage(y);if(!h)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=a instanceof HTMLImageElement||l.a(a)?l.h.getImageData(a):a,{width:g,height:_,data:A}=p;if(g===void 0||_===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==h.data.width||_!==h.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const E=!(a instanceof HTMLImageElement||l.a(a));return h.data.replace(A,E),this.style.updateImage(y,h),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,a){V.getImage(this._requestManager.transformRequest(y,D.Image),a)}listImages(){return this.style.listImages()}addLayer(y,a){return this._lazyInitEmptyStyle(),this.style.addLayer(y,a),this._update(!0)}moveLayer(y,a){return this.style.moveLayer(y,a),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,a,h){return this.style.setLayerZoomRange(y,a,h),this._update(!0)}setFilter(y,a,h={}){return this.style.setFilter(y,a,h),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,a,h,p={}){return this.style.setPaintProperty(y,a,h,p),this._update(!0)}getPaintProperty(y,a){return this.style.getPaintProperty(y,a)}setLayoutProperty(y,a,h,p={}){return this.style.setLayoutProperty(y,a,h,p),this._update(!0)}getLayoutProperty(y,a){return this.style.getLayoutProperty(y,a)}setGlyphs(y,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,a,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,a,h,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,a,h=>{h||this._update(!0)}),this}setLight(y,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,a),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,a){return this.style.setFeatureState(y,a),this._update()}removeFeatureState(y,a){return this.style.removeFeatureState(y,a),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,a=0;return this._container&&(y=this._container.clientWidth||400,a=this._container.clientHeight||300),[y,a]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const a=this._canvasContainer=b.create("div","maplibregl-canvas-container",y);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const h=this._containerDimensions(),p=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],p);const g=this._controlContainer=b.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(A=>{_[A]=b.create("div",`maplibregl-ctrl-${A} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=b.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){b.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,a,h){this._canvas.width=Math.floor(h*y),this._canvas.height=Math.floor(h*a),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let a=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{a={requestedAttributes:y},p&&(a.statusMessage=p.statusMessage,a.type=p.type)},{once:!0});const h=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!h){const p="Failed to initialize WebGL";throw a?(a.message=p,new Error(JSON.stringify(a))):new Error(p)}this.painter=new Bo(h,this.transform),S.testSupport(h)}_onCooperativeGesture(y,a,h){return!a&&h<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const a=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let h=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=l.h.now();this.style.zoomHistory.update(g,_);const A=new l.a8(g,{now:_,fadeDuration:a,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),E=A.crossFadingFactor();E===1&&E===this._crossFadingFactor||(h=!0,this._crossFadingFactor=E),this.style.update(A)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bg.mark(l.bh.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||h)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,l.bg.mark(l.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),V.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.bg.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.h.frame(y=>{l.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Pt}getCameraTargetElevation(){return this.transform.elevation}},cr.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const a=this._map.getZoom(),h=a===this._map.getMaxZoom(),p=a===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=a},this._setButtonTitle=(a,h)=>{const p=this._map._getUIString(`NavigationControl.${h}`);a.title=p,a.setAttribute("aria-label",p)},this.options=l.e({},xf,y),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new bf(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,a){const h=b.create("button",y,this._container);return h.type="button",h.addEventListener("click",a),h}},cr.GeolocateControl=class extends l.E{constructor(y){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",a)),this._finish()}},this._updateCamera=a=>{const h=new l.L(a.coords.longitude,a.coords.latitude),p=a.coords.accuracy,g=this._map.getBearing(),_=l.e({bearing:g},this.options.fitBoundsOptions),A=Qe.fromLngLat(h,p);this._map.fitBounds(A,_,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const h=new l.L(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&js)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=a=>{if(this._map){if(this._container.addEventListener("contextmenu",h=>h.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",a===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Uo({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Uo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",h=>{h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||h.originalEvent&&h.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},qr,y)}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(a,h=!1){rn===void 0||h?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{rn=p.state!=="denied",a(rn)}).catch(()=>{rn=!!window.navigator.geolocation,a(rn)}):(rn=!!window.navigator.geolocation,a(rn)):a(rn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Rr=0,js=!1}_isOutOfMapMaxBounds(y){const a=this._map.getMaxBounds(),h=y.coords;return a&&(h.longitude<a.getWest()||h.longitude>a.getEast()||h.latitude<a.getSouth()||h.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),a=y.getSouthEast(),h=y.getNorthEast(),p=a.distanceTo(h),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Rr--,js=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Rr++,Rr>1?(y={maximumAge:6e5,timeout:0},js=!0):(y=this.options.positionOptions,js=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},cr.AttributionControl=Ci,cr.LogoControl=Er,cr.ScaleControl=class{constructor(y){this._onMove=()=>{Ul(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,Ul(this._map,this._container,this.options)},this.options=l.e({},Fl,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},cr.FullscreenControl=class extends l.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},cr.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},cr.Popup=class extends l.E{constructor(y){super(),this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.k("close")),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=wf(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!a)return;const h=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);let p=this.options.anchor;const g=$s(this.options.offset);if(!p){const A=this._container.offsetWidth,E=this._container.offsetHeight;let I;I=h.y+g.bottom.y<E?["top"]:h.y>this._map.transform.height-E?["bottom"]:[],h.x<A/2?I.push("left"):h.x>this._map.transform.width-A/2&&I.push("right"),p=I.length===0?"bottom":I.join("-")}const _=h.add(g[p]).round();b.setTransform(this._container,`${Gi[p]} translate(${_.x}px,${_.y}px)`),Em(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Sf),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=l.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const a=document.createDocumentFragment(),h=document.createElement("body");let p;for(h.innerHTML=y;p=h.firstChild,p;)a.appendChild(p);return this.setDOMContent(a)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Tf);y&&y.focus()}},cr.Marker=Uo,cr.Style=kn,cr.LngLat=l.L,cr.LngLatBounds=Qe,cr.Point=l.P,cr.MercatorCoordinate=l.U,cr.Evented=l.E,cr.AJAXError=l.bi,cr.config=l.c,cr.CanvasSource=ze,cr.GeoJSONSource=Jt,cr.ImageSource=nt,cr.RasterDEMTileSource=Bt,cr.RasterTileSource=Rt,cr.VectorTileSource=Dt,cr.VideoSource=At,cr.setRTLTextPlugin=l.bj,cr.getRTLTextPluginStatus=l.bk,cr.prewarm=function(){Mu().acquire(nr)},cr.clearPrewarmedResources=function(){const y=Ra;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(nr),Ra=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Pf.extend(cr,{isSafari:l.ac,getPerformanceMetrics:l.bg.getPerformanceMetrics}),cr});var d=s;return d})})(hL);var rse=hL.exports;const b0=Mr(rse),fd={positron:{version:8,sources:{"carto-positron":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap  CARTO"}},layers:[{id:"carto-positron-layer",type:"raster",source:"carto-positron",minzoom:0,maxzoom:22}]},"dark-matter":{version:8,sources:{"carto-dark-matter":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap  CARTO"}},layers:[{id:"carto-dark-matter-layer",type:"raster",source:"carto-dark-matter",minzoom:0,maxzoom:22}]},osm:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm-layer",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},topo:{version:8,sources:{opentopomap:{type:"raster",tiles:["https://a.tile.opentopomap.org/{z}/{x}/{y}.png","https://b.tile.opentopomap.org/{z}/{x}/{y}.png","https://c.tile.opentopomap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenTopoMap contributors"}},layers:[{id:"opentopomap-layer",type:"raster",source:"opentopomap",minzoom:0,maxzoom:17}]},"esri-street":{version:8,sources:{"esri-street":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:" Esri"}},layers:[{id:"esri-street-layer",type:"raster",source:"esri-street",minzoom:0,maxzoom:16}]},"esri-topo":{version:8,sources:{"esri-topo":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:" Esri"}},layers:[{id:"esri-topo-layer",type:"raster",source:"esri-topo",minzoom:0,maxzoom:16}]},"esri-terrain":{version:8,sources:{"esri-terrain":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:" Esri"}},layers:[{id:"esri-terrain-layer",type:"raster",source:"esri-terrain",minzoom:0,maxzoom:13}]},"esri-ocean":{version:8,sources:{"esri-ocean":{type:"raster",tiles:["https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:" Esri"}},layers:[{id:"esri-ocean-layer",type:"raster",source:"esri-ocean",minzoom:0,maxzoom:16}]},"esri-imagery":{version:8,sources:{"esri-imagery":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:" Esri"}},layers:[{id:"esri-imagery-layer",type:"raster",source:"esri-imagery",minzoom:0,maxzoom:19}]},"google-maps":{version:8,sources:{"google-maps":{type:"raster",tiles:["https://mt0.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","https://mt2.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","https://mt3.google.com/vt/lyrs=m&x={x}&y={y}&z={z}"],tileSize:256,attribution:" Google"}},layers:[{id:"google-maps-layer",type:"raster",source:"google-maps",minzoom:0,maxzoom:20}]},"google-terrain":{version:8,sources:{"google-terrain":{type:"raster",tiles:["https://mt0.google.com/vt/lyrs=p&x={x}&y={y}&z={z}","https://mt1.google.com/vt/lyrs=p&x={x}&y={y}&z={z}","https://mt2.google.com/vt/lyrs=p&x={x}&y={y}&z={z}","https://mt3.google.com/vt/lyrs=p&x={x}&y={y}&z={z}"],tileSize:256,attribution:" Google"}},layers:[{id:"google-terrain-layer",type:"raster",source:"google-terrain",minzoom:0,maxzoom:20}]},"google-hybrid":{version:8,sources:{"google-hybrid":{type:"raster",tiles:["https://mt0.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","https://mt2.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","https://mt3.google.com/vt/lyrs=y&x={x}&y={y}&z={z}"],tileSize:256,attribution:" Google"}},layers:[{id:"google-hybrid-layer",type:"raster",source:"google-hybrid",minzoom:0,maxzoom:20}]},"google-satellite":{version:8,sources:{"google-satellite":{type:"raster",tiles:["https://mt0.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt2.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt3.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"],tileSize:256,attribution:" Google"}},layers:[{id:"google-satellite-layer",type:"raster",source:"google-satellite",minzoom:0,maxzoom:20}]}};function nse({uploadedFile:e,selectedHazard:t,analysisResult:r,colorPalette:n,intensityThreshold:s,hazardOpacity:c,basemap:d,onBasemapChange:l,loadingAnalysis:v=!1}){const b=$e.useRef(null),S=$e.useRef(null),[P,k]=$e.useState(!1),z=$e.useRef(!1),B=$e.useRef(null),[j,V]=$e.useState(!0),[D,R]=$e.useState(!0),F=$e.useRef({uploadedFile:e,selectedHazard:t,analysisResult:r,hazardOpacity:c,colorPalette:n}),X=$e.useRef(null),q=$e.useRef(null),W=$e.useRef(null),ee=$e.useRef(null);$e.useEffect(()=>{F.current={uploadedFile:e,selectedHazard:t,analysisResult:r,hazardOpacity:c,colorPalette:n}},[e,t,r,c,n]),$e.useEffect(()=>{if(!(!b.current||S.current)){(!b.current.offsetWidth||!b.current.offsetHeight)&&console.warn("Map container has no dimensions");try{S.current=new b0.Map({container:b.current,style:fd.positron,center:[0,20],zoom:2,attributionControl:!1}),S.current.addControl(new b0.AttributionControl({compact:!0,customAttribution:'Created by <a href="https://sebastiankrantz.com/" target="_blank" rel="noopener noreferrer">Sebastian Krantz</a>, funded by the World Bank'}),"bottom-right"),S.current.on("load",()=>{console.log("Map loaded successfully"),k(!0),S.current&&(X.current=S.current.getZoom())}),S.current.on("error",ce=>{console.error("Map error:",ce.error||ce)}),S.current.on("style.load",()=>{console.log("Map style loaded"),k(!0),S.current&&(X.current=S.current.getZoom())}),S.current.on("style.error",ce=>{console.error("Map style error:",ce)}),S.current.on("zoom",()=>{if(S.current){const ce=Math.floor(S.current.getZoom());X.current!==null&&Math.floor(X.current)!==ce&&(X.current=ce)}})}catch(ce){console.error("Error initializing map:",ce)}return()=>{B.current&&(B.current.remove(),B.current=null),ee.current&&(clearTimeout(ee.current),ee.current=null),S.current&&(S.current.remove(),S.current=null)}}},[]);const le=ce=>{if(!ce||Object.keys(ce).length===0)return'<div class="p-2 text-sm text-gray-500">No properties available</div>';const _e=ze=>{if(ze==null)return'<span class="text-gray-400 italic">null</span>';if(typeof ze=="number"){if(Number.isInteger(ze))return ze.toLocaleString("en-US");const kt=ze.toFixed(6).replace(/\.?0+$/,"");return parseFloat(kt).toLocaleString("en-US")}if(typeof ze=="boolean")return ze?"Yes":"No";if(typeof ze=="string"){const kt=ze.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return kt.length>100?kt.substring(0,100)+"...":kt}return String(ze)},ke=ze=>{if(ze==null)return'<span class="text-gray-400 italic">N/A</span>';if(typeof ze=="number"){const kt=ze.toFixed(4).replace(/\.?0+$/,"");return parseFloat(kt).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:4})}return String(ze)},Ue=ze=>ze.replace(/_/g," ").replace(/([A-Z])/g," $1").replace(/^./,kt=>kt.toUpperCase()).trim();let je='<div style="max-width: 300px; font-family: system-ui, -apple-system, sans-serif;">';je+='<div class="text-sm font-semibold text-gray-800 mb-1.5 pb-1.5 border-b border-gray-200">Feature Properties</div>',je+='<div class="space-y-0.5">';const Qe=ce.length_m,pt=ce.affected,Dt=ce.exposure_level,Rt=ce.exposure_level_max,Bt=ce.exposure_level_avg,Jt=ce.vulnerability,Ye=ce.damage_cost,nt=[];if(Qe!=null){const ze=kt=>kt>=1e3?`${(kt/1e3).toFixed(2)} km`:`${Math.round(kt)} m`;nt.push({label:"Length:",value:ze(Qe)})}if(pt!==void 0){const ze=typeof pt=="boolean"?pt?"Yes":"No":_e(pt);nt.push({label:"Affected:",value:ze})}if(Rt!==void 0||Bt!==void 0?(Rt!=null&&nt.push({label:"Max Exposure Level:",value:ke(Rt)}),Bt!=null&&nt.push({label:"Avg Exposure Level:",value:ke(Bt)})):Dt!=null&&nt.push({label:"Exposure Level:",value:ke(Dt)}),Jt!=null){const ze=kt=>{const $t=kt*100;return`${$t.toFixed($t<1?2:1)}%`};nt.push({label:"Vulnerability:",value:ze(Jt)})}if(Ye!=null){const ze=kt=>kt.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0});nt.push({label:"Damage Cost:",value:ze(Ye)})}if(nt.length>0){for(let ze=0;ze<nt.length;ze++){const kt=nt[ze];je+='<div class="flex justify-between text-xs py-0.5">',je+=`<span class="font-semibold text-gray-800 mr-2">${kt.label}</span>`,je+=`<span class="text-gray-900 text-right flex-1 font-medium">${kt.value}</span>`,je+="</div>"}je+='<div class="pt-1.5 mb-1.5 border-b border-gray-200"></div>'}const At=Object.keys(ce).filter(ze=>!["affected","exposure_level","exposure_level_max","exposure_level_avg","length_m","vulnerability","damage_cost"].includes(ze)).sort((ze,kt)=>ze.localeCompare(kt));for(const ze of At){const kt=ce[ze],$t=Ue(ze),mt=_e(kt);je+='<div class="flex justify-between text-xs py-0.5">',je+=`<span class="font-medium text-gray-700 mr-2">${$t}:</span>`,je+=`<span class="text-gray-900 text-right flex-1">${mt}</span>`,je+="</div>"}return je+="</div></div>",je},ve=ce=>{const _e=()=>{var ke;(ke=S.current)!=null&&ke.isStyleLoaded()?ce():setTimeout(_e,50)};_e()},Pe=()=>{if(!S.current)return;const ce="hazard-raster-layer",_e="hazard-raster-source";S.current.getLayer(ce)&&S.current.removeLayer(ce),S.current.getSource(_e)&&S.current.removeSource(_e)},Ce=()=>{if(!S.current)return;const ce=F.current,_e=ce.selectedHazard;if(!_e)return;const ke="hazard-raster-layer",Ue="hazard-raster-source",je=`/api/tiles/${_e.id}/{z}/{x}/{y}.png?palette=${ce.colorPalette}`;Pe();try{S.current.addSource(Ue,{type:"raster",tiles:[je],tileSize:256});const Qe=S.current.getLayer("infrastructure-layer")?"infrastructure-layer":void 0;S.current.addLayer({id:ke,type:"raster",source:Ue,paint:{"raster-opacity":ce.hazardOpacity/100}},Qe),S.current.setLayoutProperty(ke,"visibility",D?"visible":"none")}catch(Qe){console.error("addHazard error:",Qe)}},Te=ce=>{if(!S.current)return;const _e=ke=>{if(!S.current||!ke.features||ke.features.length===0)return;const je=ke.features[0].properties||{},Qe=ke.lngLat.toArray();B.current&&B.current.remove(),B.current=new b0.Popup({closeButton:!0,closeOnClick:!0,maxWidth:"300px"}).setLngLat(Qe).setHTML(le(je)).addTo(S.current)};S.current.on("click",ce,_e),S.current.on("mouseenter",ce,()=>{S.current&&(S.current.getCanvas().style.cursor="pointer")}),S.current.on("mouseleave",ce,()=>{S.current&&(S.current.getCanvas().style.cursor="")})},Fe=ce=>{S.current&&(S.current.off("click",ce),S.current.off("mouseenter",ce),S.current.off("mouseleave",ce))},Re=()=>{if(!S.current)return;const ce="infrastructure-source",_e="infrastructure-layer",ke="infrastructure-affected";Fe(_e),Fe(ke),B.current&&(B.current.remove(),B.current=null),S.current.getLayer(ke)&&S.current.removeLayer(ke),S.current.getLayer(_e)&&S.current.removeLayer(_e),S.current.getSource(ce)&&S.current.removeSource(ce)},Be=()=>{var Rt,Bt,Jt,Ye,nt,At,ze;if(!S.current)return;const ce=F.current,_e=ce.uploadedFile;if(!_e)return;const ke="infrastructure-source",Ue="infrastructure-layer",je="infrastructure-affected",Qe=((Rt=ce.analysisResult)==null?void 0:Rt.infrastructure_features)||_e.geojson,pt=(((Bt=ce.analysisResult)==null?void 0:Bt.geometry_type)||_e.geometry_type)==="Point",Dt=!!((Jt=ce.analysisResult)!=null&&Jt.infrastructure_features);if(Qe){Re();try{S.current.addSource(ke,{type:"geojson",data:Qe}),Dt?pt?(S.current.addLayer({id:Ue,type:"circle",source:ke,filter:["==",["get","affected"],!1],paint:{"circle-radius":5,"circle-color":"#10b981","circle-opacity":.8}}),(((nt=(Ye=ce.analysisResult)==null?void 0:Ye.summary)==null?void 0:nt.affected_count)||0)>0&&(S.current.addLayer({id:je,type:"circle",source:ke,filter:["==",["get","affected"],!0],paint:{"circle-radius":5,"circle-color":"#ef4444","circle-opacity":.8}}),S.current.moveLayer(je)),S.current.moveLayer(Ue)):(S.current.addLayer({id:Ue,type:"line",source:ke,filter:["==",["get","affected"],!1],paint:{"line-color":"#10b981","line-width":3,"line-opacity":.8}}),(((ze=(At=ce.analysisResult)==null?void 0:At.summary)==null?void 0:ze.affected_meters)||0)>0&&(S.current.addLayer({id:je,type:"line",source:ke,filter:["==",["get","affected"],!0],paint:{"line-color":"#ef4444","line-width":3,"line-opacity":.8}}),S.current.moveLayer(je)),S.current.moveLayer(Ue)):(pt?S.current.addLayer({id:Ue,type:"circle",source:ke,paint:{"circle-radius":5,"circle-color":"#6b7280","circle-opacity":.8}}):S.current.addLayer({id:Ue,type:"line",source:ke,paint:{"line-color":"#6b7280","line-width":3,"line-opacity":.8}}),S.current.moveLayer(Ue)),S.current.setLayoutProperty(Ue,"visibility",j?"visible":"none"),S.current.getLayer(je)&&S.current.setLayoutProperty(je,"visibility",j?"visible":"none"),Te(Ue),S.current.getLayer(je)&&Te(je)}catch(kt){console.error("addInfrastructure error:",kt)}}};$e.useEffect(()=>{var Dt,Rt,Bt,Jt,Ye,nt,At;if(!S.current||!P)return;const ce=F.current,_e=ce.uploadedFile&&(((Dt=ce.analysisResult)==null?void 0:Dt.infrastructure_features)||ce.uploadedFile.geojson),ke=ce.selectedHazard!==null;if(!_e&&!ke){S.current.setStyle(fd[d]);return}const Ue={infrastructure:_e,hazard:ke,geoJson:((Rt=ce.analysisResult)==null?void 0:Rt.infrastructure_features)||((Bt=ce.uploadedFile)==null?void 0:Bt.geojson)||null,isPoint:((Jt=ce.analysisResult)==null?void 0:Jt.geometry_type)==="Point"||((Ye=ce.uploadedFile)==null?void 0:Ye.geometry_type)==="Point",hasAffected:!!((nt=ce.analysisResult)!=null&&nt.infrastructure_features),hazardId:(At=ce.selectedHazard)==null?void 0:At.id,hazardOpacity:ce.hazardOpacity,colorPalette:ce.colorPalette,analysisResult:ce.analysisResult},je=()=>{var ze,kt,$t,mt;if(!S.current||!S.current.isStyleLoaded()){setTimeout(je,100);return}if(Ue.hazard&&Ue.hazardId)try{const yt="hazard-raster-source",Ot="hazard-raster-layer",Ht=`/api/tiles/${Ue.hazardId}/{z}/{x}/{y}.png?palette=${Ue.colorPalette}`;S.current.getLayer(Ot)&&S.current.removeLayer(Ot),S.current.getSource(yt)&&S.current.removeSource(yt),S.current.addSource(yt,{type:"raster",tiles:[Ht],tileSize:256}),S.current.addLayer({id:Ot,type:"raster",source:yt,paint:{"raster-opacity":Ue.hazardOpacity/100}}),D||S.current.setLayoutProperty(Ot,"visibility","none")}catch(yt){console.error("Error restoring hazard layer:",yt)}if(Ue.infrastructure&&Ue.geoJson)try{const yt="infrastructure-source",Ot="infrastructure-layer",Ht="infrastructure-affected";S.current.getLayer(Ht)&&S.current.removeLayer(Ht),S.current.getLayer(Ot)&&S.current.removeLayer(Ot),S.current.getSource(yt)&&S.current.removeSource(yt),S.current.addSource(yt,{type:"geojson",data:Ue.geoJson}),Ue.hasAffected?Ue.isPoint?(S.current.addLayer({id:Ot,type:"circle",source:yt,filter:["==",["get","affected"],!1],paint:{"circle-radius":5,"circle-color":"#10b981","circle-opacity":.8}}),j||S.current.setLayoutProperty(Ot,"visibility","none"),(((kt=(ze=Ue.analysisResult)==null?void 0:ze.summary)==null?void 0:kt.affected_count)||0)>0&&(S.current.addLayer({id:Ht,type:"circle",source:yt,filter:["==",["get","affected"],!0],paint:{"circle-radius":5,"circle-color":"#ef4444","circle-opacity":.8}}),j||S.current.setLayoutProperty(Ht,"visibility","none"))):(S.current.addLayer({id:Ot,type:"line",source:yt,filter:["==",["get","affected"],!1],paint:{"line-color":"#10b981","line-width":3,"line-opacity":.8}}),j||S.current.setLayoutProperty(Ot,"visibility","none"),(((mt=($t=Ue.analysisResult)==null?void 0:$t.summary)==null?void 0:mt.affected_meters)||0)>0&&(S.current.addLayer({id:Ht,type:"line",source:yt,filter:["==",["get","affected"],!0],paint:{"line-color":"#ef4444","line-width":3,"line-opacity":.8}}),j||S.current.setLayoutProperty(Ht,"visibility","none")),Te(Ot),S.current.getLayer(Ht)&&Te(Ht)):(Ue.isPoint?(S.current.addLayer({id:Ot,type:"circle",source:yt,paint:{"circle-radius":5,"circle-color":"#6b7280","circle-opacity":.8}}),j||S.current.setLayoutProperty(Ot,"visibility","none")):(S.current.addLayer({id:Ot,type:"line",source:yt,paint:{"line-color":"#6b7280","line-width":3,"line-opacity":.8}}),j||S.current.setLayoutProperty(Ot,"visibility","none")),Te(Ot),S.current.getLayer(Ht)&&Te(Ht))}catch(yt){console.error("Error restoring infrastructure layer:",yt)}setTimeout(()=>{S.current&&(qe(j),Ke(D))},150),z.current=!1};z.current=!0;const Qe=()=>{setTimeout(je,100)};S.current.once("style.load",Qe);const pt=setTimeout(()=>{z.current&&je()},1e3);S.current.setStyle(fd[d]),S.current.once("style.load",()=>{clearTimeout(pt)})},[d,P]),$e.useEffect(()=>{if(e){const ce=e.file_id;W.current!==ce&&(q.current=null)}else W.current=null,q.current=null},[e==null?void 0:e.file_id]),$e.useEffect(()=>{if(z.current)return;if(!S.current||!P||!t){if(S.current){const ke="hazard-raster-layer",Ue="hazard-raster-source";S.current.getLayer(ke)&&S.current.removeLayer(ke),S.current.getSource(Ue)&&S.current.removeSource(Ue)}return}const ce="hazard-raster-source",_e="hazard-raster-layer";return ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>{const ke=()=>{var Qe;if(!((Qe=S.current)!=null&&Qe.isStyleLoaded())){setTimeout(ke,100);return}const Ue=S.current.getLayer(_e),je=S.current.getSource(ce);if(Ue&&je)try{S.current.setPaintProperty(_e,"raster-opacity",c/100);const pt=je.tiles,Dt=`/api/tiles/${t.id}/{z}/{x}/{y}.png?palette=${n}`;if(pt&&pt[0]!==Dt){S.current.removeLayer(_e),S.current.removeSource(ce),S.current.addSource(ce,{type:"raster",tiles:[Dt],tileSize:256});const Rt=S.current.getLayer("infrastructure-layer")?"infrastructure-layer":void 0;S.current.addLayer({id:_e,type:"raster",source:ce,paint:{"raster-opacity":c/100}},Rt),D||S.current.setLayoutProperty(_e,"visibility","none")}else D?S.current.setLayoutProperty(_e,"visibility","visible"):S.current.setLayoutProperty(_e,"visibility","none");return}catch(pt){console.error("Error updating hazard layer:",pt)}S.current.getLayer(_e)&&S.current.removeLayer(_e),S.current.getSource(ce)&&S.current.removeSource(ce);try{const pt=`/api/tiles/${t.id}/{z}/{x}/{y}.png?palette=${n}`;S.current.addSource(ce,{type:"raster",tiles:[pt],tileSize:256}),S.current.addLayer({id:_e,type:"raster",source:ce,paint:{"raster-opacity":c/100}});const Dt=S.current.getLayer("infrastructure-layer"),Rt=S.current.getLayer("infrastructure-affected");Dt&&S.current.moveLayer("infrastructure-layer"),Rt&&S.current.moveLayer("infrastructure-affected"),D||S.current.setLayoutProperty(_e,"visibility","none")}catch(pt){console.error("Error adding hazard layer:",pt)}};ke()},100),()=>{ee.current&&clearTimeout(ee.current)}},[t,c,n,P,D]),$e.useEffect(()=>{if(z.current)return;if(!S.current||!P||!e){if(S.current){const je="infrastructure-source",Qe="infrastructure-layer",pt="infrastructure-affected";Fe(Qe),Fe(pt),B.current&&(B.current.remove(),B.current=null),S.current.getLayer(pt)&&S.current.removeLayer(pt),S.current.getLayer(Qe)&&S.current.removeLayer(Qe),S.current.getSource(je)&&S.current.removeSource(je)}return}const ce="infrastructure-source",_e="infrastructure-layer",ke="infrastructure-affected",Ue=()=>{var Jt;if(!((Jt=S.current)!=null&&Jt.isStyleLoaded())){setTimeout(Ue,100);return}const je=S.current.getSource(ce),Qe=S.current.getLayer(_e),pt=S.current.getLayer(ke);let Dt=null,Rt=!1,Bt=!1;if(r!=null&&r.infrastructure_features)if(Dt=r.infrastructure_features,Rt=r.geometry_type==="Point",Qe&&!pt)Bt=!0;else if(!Qe)Bt=!0;else if(je&&je._data){const Ye=JSON.stringify(je._data),nt=JSON.stringify(Dt);Bt=Ye!==nt,!Bt&&!pt&&(Bt=!0)}else Bt=!0;else if(e.geojson){if(Dt=e.geojson,Rt=e.geometry_type==="Point",je&&je._data){const Ye=JSON.stringify(je._data),nt=JSON.stringify(Dt);Bt=Ye!==nt}else Bt=!0;!Bt&&pt&&(Bt=!0)}if(je&&Qe&&!Bt)if(r!=null&&r.infrastructure_features&&!pt)Bt=!0;else if(!(r!=null&&r.infrastructure_features)&&pt)Bt=!0;else return;if(Bt&&Dt)Fe(_e),Fe(ke),B.current&&(B.current.remove(),B.current=null),S.current.getLayer(ke)&&S.current.removeLayer(ke),S.current.getLayer(_e)&&S.current.removeLayer(_e),S.current.getSource(ce)&&S.current.removeSource(ce);else if(!Dt)return;if(Dt&&Bt)try{S.current.addSource(ce,{type:"geojson",data:Dt}),r!=null&&r.infrastructure_features?(Rt?(S.current.addLayer({id:_e,type:"circle",source:ce,filter:["==",["get","affected"],!1],paint:{"circle-radius":5,"circle-color":"#10b981","circle-opacity":.8}}),j||S.current.setLayoutProperty(_e,"visibility","none")):(S.current.addLayer({id:_e,type:"line",source:ce,filter:["==",["get","affected"],!1],paint:{"line-color":"#10b981","line-width":3,"line-opacity":.8}}),j||S.current.setLayoutProperty(_e,"visibility","none")),(Rt?r.summary.affected_count||0:(r.summary.affected_meters||0)>0?1:0)>0&&(Rt?(S.current.addLayer({id:ke,type:"circle",source:ce,filter:["==",["get","affected"],!0],paint:{"circle-radius":5,"circle-color":"#ef4444","circle-opacity":.8}}),j||S.current.setLayoutProperty(ke,"visibility","none")):(S.current.addLayer({id:ke,type:"line",source:ce,filter:["==",["get","affected"],!0],paint:{"line-color":"#ef4444","line-width":3,"line-opacity":.8}}),j||S.current.setLayoutProperty(ke,"visibility","none")),Te(_e),S.current.getLayer(ke)&&Te(ke)),S.current.moveLayer(_e),S.current.getLayer(ke)&&S.current.moveLayer(ke)):(Rt?(S.current.addLayer({id:_e,type:"circle",source:ce,paint:{"circle-radius":5,"circle-color":"#6b7280","circle-opacity":.8}}),j||S.current.setLayoutProperty(_e,"visibility","none")):(S.current.addLayer({id:_e,type:"line",source:ce,paint:{"line-color":"#6b7280","line-width":3,"line-opacity":.8}}),j||S.current.setLayoutProperty(_e,"visibility","none")),S.current.moveLayer(_e),Te(_e));const Ye=e.bounds,nt=`${Ye.minx},${Ye.miny},${Ye.maxx},${Ye.maxy}`,At=e.file_id;if(W.current!==At||q.current!==nt){const ze=[Ye.minx,Ye.miny,Ye.maxx,Ye.maxy];ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>{S.current&&(S.current.fitBounds(ze,{padding:50,duration:0}),W.current=At,q.current=nt)},75)}}catch(Ye){console.error("Error adding infrastructure layer:",Ye);const nt=e.bounds,At=`${nt.minx},${nt.miny},${nt.maxx},${nt.maxy}`,ze=e.file_id;if(W.current!==ze||q.current!==At){const kt=[nt.minx,nt.miny,nt.maxx,nt.maxy];ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>{S.current&&(S.current.fitBounds(kt,{padding:50,duration:0}),W.current=ze,q.current=At)},100)}}else{const Ye=e.bounds,nt=`${Ye.minx},${Ye.miny},${Ye.maxx},${Ye.maxy}`,At=e.file_id;if(W.current!==At||q.current!==nt){const ze=[Ye.minx,Ye.miny,Ye.maxx,Ye.maxy];ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>{S.current&&(S.current.fitBounds(ze,{padding:50,duration:0}),W.current=At,q.current=nt)},100)}}};return Ue(),()=>{ee.current&&clearTimeout(ee.current)}},[e,r,P,j]),$e.useEffect(()=>{var Qe;if(!S.current||!P)return;const ce=F.current,_e=ce.uploadedFile&&(((Qe=ce.analysisResult)==null?void 0:Qe.infrastructure_features)||ce.uploadedFile.geojson),ke=ce.selectedHazard!==null;if(!_e&&!ke){S.current.setStyle(fd[d]);return}z.current=!0;const Ue={infrastructure:_e,hazard:ke},je=()=>{setTimeout(()=>{if(!S.current){z.current=!1;return}Ue.hazard&&F.current.selectedHazard&&Ce(),Ue.infrastructure&&F.current.uploadedFile&&Be(),z.current=!1},100)};S.current.once("style.load",je),S.current.setStyle(fd[d])},[d,P]);const qe=ce=>{if(!S.current)return;const _e="infrastructure-layer",ke="infrastructure-affected";try{S.current.getLayer(_e)&&S.current.setLayoutProperty(_e,"visibility",ce?"visible":"none"),S.current.getLayer(ke)&&S.current.setLayoutProperty(ke,"visibility",ce?"visible":"none")}catch(Ue){console.error("Error applying infrastructure visibility:",Ue)}};$e.useEffect(()=>{!S.current||!P||ve(()=>{S.current&&(j?e&&!S.current.getLayer("infrastructure-layer")&&Be():Re())})},[j,P,e]);const Ke=ce=>{if(!S.current)return;const _e="hazard-raster-layer";try{S.current.getLayer(_e)&&S.current.setLayoutProperty(_e,"visibility",ce?"visible":"none")}catch(ke){console.error("Error applying hazard visibility:",ke)}};return $e.useEffect(()=>{!S.current||!P||ve(()=>{D?t&&Ce():Pe()})},[D,P,t,n,c]),$e.useEffect(()=>{e&&V(!0)},[e]),$e.useEffect(()=>{t&&R(!0)},[t]),J.jsxs("div",{className:"relative flex-1 h-full m-0 p-0",children:[J.jsx("div",{className:"absolute top-4 right-4 z-10 bg-white/80 rounded-lg px-1",children:J.jsxs(cy,{value:d,onChange:ce=>l(ce.target.value),className:"w-40 border-0 bg-transparent",children:[J.jsx("option",{value:"positron",children:"CartoDB Positron"}),J.jsx("option",{value:"dark-matter",children:"CartoDB Dark Matter"}),J.jsx("option",{value:"osm",children:"OpenStreetMap"}),J.jsx("option",{value:"topo",children:"OpenTopoMap"}),J.jsx("option",{value:"esri-street",children:"Esri World Street Map"}),J.jsx("option",{value:"esri-topo",children:"Esri World Topo Map"}),J.jsx("option",{value:"esri-terrain",children:"Esri World Terrain"}),J.jsx("option",{value:"esri-ocean",children:"Esri Ocean Basemap"}),J.jsx("option",{value:"esri-imagery",children:"Esri World Imagery"}),J.jsx("option",{value:"google-maps",children:"Google Maps"}),J.jsx("option",{value:"google-terrain",children:"Google Terrain"}),J.jsx("option",{value:"google-hybrid",children:"Google Hybrid"}),J.jsx("option",{value:"google-satellite",children:"Google Satellite"})]})}),(e||t)&&J.jsxs("div",{className:"absolute top-16 right-4 z-10 bg-white/80 rounded-lg px-3 py-2 space-y-2",children:[e&&J.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[J.jsx("input",{type:"checkbox",checked:j,onChange:ce=>V(ce.target.checked),className:"w-4 h-4 text-gray-600 rounded"}),J.jsx("span",{className:"text-sm text-gray-700",children:"Infrastructure"})]}),t&&J.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[J.jsx("input",{type:"checkbox",checked:D,onChange:ce=>R(ce.target.checked),className:"w-4 h-4 text-gray-600 rounded"}),J.jsx("span",{className:"text-sm text-gray-700",children:"Hazard Layer"})]})]}),J.jsx("div",{ref:b,className:"w-full h-full",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})]})}function ise(){const[e,t]=$e.useState(!0),[r,n]=$e.useState(null),[s,c]=$e.useState(null),[d,l]=$e.useState(null),[v,b]=$e.useState("turbo"),[S,P]=$e.useState(0),[k,z]=$e.useState(60),[B,j]=$e.useState(null),[V,D]=$e.useState("positron"),[R,F]=$e.useState([]),[X,q]=$e.useState(!1),[W,ee]=$e.useState(!1),[le,ve]=$e.useState(null),[Pe,Ce]=$e.useState(!1),[Te,Fe]=$e.useState(null),[Re,Be]=$e.useState(null);$e.useEffect(()=>{(async()=>{try{const _e=await Koe();F(_e)}catch(_e){ve(_e instanceof Error?_e.message:"Failed to load hazards")}})()},[]),$e.useEffect(()=>{(async()=>{if(!s){j(null),P(0);return}try{const _e=await Yoe(s.id);j({min:_e.min,max:_e.max}),P(_e.min)}catch(_e){console.error("Failed to fetch hazard statistics:",_e),j({min:0,max:100})}})()},[s]);const qe=async ce=>{try{q(!0),ve(null);const _e=await Hoe(ce);n(_e),l(null)}catch(_e){ve(_e instanceof Error?_e.message:"Failed to upload file"),n(null)}finally{q(!1)}},Ke=()=>{n(null),l(null),ve(null)};return $e.useEffect(()=>{if(!r||!s){l(null);return}if(Pe&&(!Te||Re===null))return;const _e=setTimeout(async()=>{try{ee(!0),ve(null);const ke=B&&S>B.min?S:void 0,Ue=await Xoe(r.file_id,s.id,s.url,ke,Pe?Te:null,Pe?Re:null);l(Ue)}catch(ke){ve(ke instanceof Error?ke.message:"Failed to perform analysis"),l(null)}finally{ee(!1)}},300);return()=>clearTimeout(_e)},[r,s,S,Pe,Te,Re]),J.jsxs("div",{className:"flex h-screen w-screen overflow-hidden m-0 p-0",children:[J.jsx(tse,{isOpen:e,onToggle:()=>t(!e),uploadedFile:r,onFileUpload:qe,onClearData:Ke,hazards:R,selectedHazard:s,onSelectHazard:c,colorPalette:v,onColorPaletteChange:b,hazardOpacity:k,onHazardOpacityChange:z,intensityThreshold:S,onIntensityThresholdChange:P,hazardStats:B,analysisResult:d,loadingUpload:X,loadingAnalysis:W,error:le,vulnerabilityAnalysisEnabled:Pe,onVulnerabilityAnalysisEnabledChange:Ce,vulnerabilityCurveFile:Te,onVulnerabilityCurveFileChange:Fe,replacementValue:Re,onReplacementValueChange:Be}),J.jsx(nse,{uploadedFile:r,selectedHazard:s,analysisResult:d,colorPalette:v,intensityThreshold:S,hazardOpacity:k,basemap:V,onBasemapChange:D,loadingAnalysis:W})]})}w0.createRoot(document.getElementById("root")).render(J.jsx(Me.StrictMode,{children:J.jsx(ise,{})}));
